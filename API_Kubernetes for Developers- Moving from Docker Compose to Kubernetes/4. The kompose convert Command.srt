1
00:00:00,940 --> 00:00:03,090
[Autogenerated] now that the composed tools installed we can

2
00:00:03,090 --> 00:00:05,780
use it to run decomposed convert cmdlet.

3
00:00:05,780 --> 00:00:07,660
We're gonna look at how to run that command,

4
00:00:07,660 --> 00:00:10,280
which out of the box is extremely straightforward.

5
00:00:10,280 --> 00:00:13,120
But there's several different command line flags you can use.

6
00:00:13,120 --> 00:00:16,240
We're gonna talk about those as well.

7
00:00:16,240 --> 00:00:18,720
So first off, to get started with compose,

8
00:00:18,720 --> 00:00:21,740
you can literally go to wherever you're Docker Compose.

9
00:00:21,740 --> 00:00:26,980
YAML file is and run this command composed convert and,

10
00:00:26,980 --> 00:00:29,590
as mentioned in the comment above that will automatically

11
00:00:29,590 --> 00:00:33,930
convert the composed XAML to the kubernetes XAML.

12
00:00:33,930 --> 00:00:36,340
And your deployments and services,

13
00:00:36,340 --> 00:00:40,730
and possibly some other resource is would be generated now.

14
00:00:40,730 --> 00:00:42,440
From there, you'd be ready to go.

15
00:00:42,440 --> 00:00:46,180
You're more than likely going to want to Look at the Yamil and maybe modify it,

16
00:00:46,180 --> 00:00:48,490
but it would be that simple now.

17
00:00:48,490 --> 00:00:50,250
I mentioned that there's several different flags,

18
00:00:50,250 --> 00:00:51,210
though, that you can use,

19
00:00:51,210 --> 00:00:54,830
and at some point you're probably going to want to know about these flags.

20
00:00:54,830 --> 00:00:57,160
So to learn more about those, you can type,

21
00:00:57,160 --> 00:01:02,940
composed, convert, dash, dash help or dash H a lot of these flags.

22
00:01:02,940 --> 00:01:08,540
I'll show you have a shortcut and a kind of normal version, if you will.

23
00:01:08,540 --> 00:01:08,740
Now,

24
00:01:08,740 --> 00:01:13,770
what are some of the different flags than for converting in maybe a little more

25
00:01:13,770 --> 00:01:18,440
specific way from Docker Compose XAML to kubernetes XAML.

26
00:01:18,440 --> 00:01:20,640
Well, here's a few of them.

27
00:01:20,640 --> 00:01:24,840
First off, cache file or dash F works.

28
00:01:24,840 --> 00:01:29,600
And this is useful if your file is not called Docker Dash composed

29
00:01:29,600 --> 00:01:32,900
.NET XAML and instead you called it something else.

30
00:01:32,900 --> 00:01:37,220
Maybe Docker Compose dot product Yamil or something like that, for example.

31
00:01:37,220 --> 00:01:40,650
Or maybe you have multiple YAML file multiple

32
00:01:40,650 --> 00:01:43,080
Docker Compose files that overlay each other.

33
00:01:43,080 --> 00:01:46,500
I'll talk about that a little more momentarily so that one

34
00:01:46,500 --> 00:01:48,090
could be useful in that type of case.

35
00:01:48,090 --> 00:01:49,680
If you've done much with Docker,

36
00:01:49,680 --> 00:01:53,370
very similar to what you would do with Docker Compose if your

37
00:01:53,370 --> 00:01:57,240
Docker Compose YAML file is named different from the default.

38
00:01:57,240 --> 00:01:59,840
Now, if you've ever worked with Helm before,

39
00:01:59,840 --> 00:02:03,540
this is a topic that's outside of the scope of this course.

40
00:02:03,540 --> 00:02:08,740
But it's basically a way to get re sources into kubernetes clusters,

41
00:02:08,740 --> 00:02:13,940
and the flag you can use to generate a helm chart is dash dash chart

42
00:02:13,940 --> 00:02:16,560
that would automatically generate what you need there,

43
00:02:16,560 --> 00:02:21,540
and then you could publish that and have somebody else use helm to install it.

44
00:02:21,540 --> 00:02:25,450
Moving on if you don't want YAML file you could select JSON.

45
00:02:25,450 --> 00:02:28,790
You could say dash dash JSON and said,

46
00:02:28,790 --> 00:02:32,640
the ammo your going to get the equivalent JSON files

47
00:02:32,640 --> 00:02:35,840
next up would be the out or dash OAuth.

48
00:02:35,840 --> 00:02:39,080
Now, this one is very useful because by default,

49
00:02:39,080 --> 00:02:42,810
the files it generates just get put in with your

50
00:02:42,810 --> 00:02:45,980
Docker Compose YAML file I personally like to have a

51
00:02:45,980 --> 00:02:49,450
dedicated kubernetes folder and like to say,

52
00:02:49,450 --> 00:02:54,170
Hey, put the output in that folder Now I'm gonna show You can also use this,

53
00:02:54,170 --> 00:02:54,810
though,

54
00:02:54,810 --> 00:02:59,780
to put all the resource is it generates in to one Cooper Nettie XAML file.

55
00:02:59,780 --> 00:03:03,140
So if you just want everything kind of stacked up in one file,

56
00:03:03,140 --> 00:03:07,310
that's an option as well as it's creating the deployments.

57
00:03:07,310 --> 00:03:10,750
You could say how Maney replicas each deployment should have.

58
00:03:10,750 --> 00:03:16,540
So you could say cache cache replicas five three whatever it may be.

59
00:03:16,540 --> 00:03:21,460
And that would automatically update the deployment to say the

60
00:03:21,460 --> 00:03:24,570
number of replicas that the pods should have.

61
00:03:24,570 --> 00:03:26,810
And that way, if he said five, you get five pods.

62
00:03:26,810 --> 00:03:29,760
Of course, another thing you can do is,

63
00:03:29,760 --> 00:03:34,200
instead of actually writing the output to a folder or file,

64
00:03:34,200 --> 00:03:37,610
you could just write it to the standard out just right to the console.

65
00:03:37,610 --> 00:03:41,240
And then you could pipe it somewhere else if you want it to another file.

66
00:03:41,240 --> 00:03:44,890
Now, if you're gonna do that, you might as well use dash, dash out or dash.

67
00:03:44,890 --> 00:03:48,460
Oh, that I talked about above, but that would certainly be an option.

68
00:03:48,460 --> 00:03:52,500
Or maybe you just want to look at the animal before you

69
00:03:52,500 --> 00:03:55,100
actually go to the trouble to add a file,

70
00:03:55,100 --> 00:03:58,730
a folder or whatever it may be for the official kubernetes XAML.

71
00:03:58,730 --> 00:04:02,640
So this would be a way to kind of test it out, see what it outputs.

72
00:04:02,640 --> 00:04:06,600
And then the final one we're gonna cover here is dash dash volumes.

73
00:04:06,600 --> 00:04:09,740
If you have volumes in your Docker Compose,

74
00:04:09,740 --> 00:04:14,640
then it will by default use a persistent volume claim.

75
00:04:14,640 --> 00:04:19,940
If, however, you'd like more scratch pad type of volume such as an empty de ir,

76
00:04:19,940 --> 00:04:23,640
you want something for the no Geron a host path.

77
00:04:23,640 --> 00:04:26,340
You want a config map key value pair.

78
00:04:26,340 --> 00:04:31,540
Then you could specify that by saying dash dash volumes and then a space and

79
00:04:31,540 --> 00:04:35,470
then put the value that you'd want empty de ir host path,

80
00:04:35,470 --> 00:04:37,440
whatever it may be.

81
00:04:37,440 --> 00:04:38,760
If you're new to those,

82
00:04:38,760 --> 00:04:41,000
that's something that I cover in the kubernetes for

83
00:04:41,000 --> 00:04:43,340
developers Core concepts course.

84
00:04:43,340 --> 00:04:44,890
So go check out that module.

85
00:04:44,890 --> 00:04:48,440
If you'd like more details on the difference between all those,

86
00:04:48,440 --> 00:04:49,820
So that's a few of the flags.

87
00:04:49,820 --> 00:04:50,840
Now there's a few others,

88
00:04:50,840 --> 00:04:53,560
but these are some of the more useful flags that you're

89
00:04:53,560 --> 00:04:56,320
gonna come across if you do composed, convert,

90
00:04:56,320 --> 00:04:57,840
dash, cache help.

91
00:04:57,840 --> 00:05:02,340
So now let's take a look at how we can actually use some of these flags,

92
00:05:02,340 --> 00:05:04,170
so the one that you'll probably use the most,

93
00:05:04,170 --> 00:05:10,440
at least I find myself using it the most is the dash F or dash dash file.

94
00:05:10,440 --> 00:05:14,740
If you have a Docker Compose file that's named differently from the default,

95
00:05:14,740 --> 00:05:17,630
which is Docker Docker Compose YAML file,

96
00:05:17,630 --> 00:05:22,590
then you could say dash cache file or dash href and give it that name.

97
00:05:22,590 --> 00:05:26,410
That way, if you had a prod version or a staging version or something different,

98
00:05:26,410 --> 00:05:30,420
whatever it may be, then you could easily tell composed,

99
00:05:30,420 --> 00:05:35,640
Go look here and don't use the default one if there is one.

100
00:05:35,640 --> 00:05:38,600
Now, some people use multiple Docker Compose files,

101
00:05:38,600 --> 00:05:42,070
so let's say you had one called Docker Compose one and Docker Compose,

102
00:05:42,070 --> 00:05:43,240
too.

103
00:05:43,240 --> 00:05:48,240
What you can do with those is overlay keys so normally what will

104
00:05:48,240 --> 00:05:52,300
happen is you'll have kind of a base Docker Compose that maybe is

105
00:05:52,300 --> 00:05:54,540
used across all your environments.

106
00:05:54,540 --> 00:06:00,640
And then you can import in if you will and overlay other Docker Compose files.

107
00:06:00,640 --> 00:06:02,350
And what will happen is the last one wins.

108
00:06:02,350 --> 00:06:07,540
So if you had a key called Fu and then the second one has a key called Fu,

109
00:06:07,540 --> 00:06:08,860
then the second one will win.

110
00:06:08,860 --> 00:06:12,340
Whatever that fu is would overlay the first one.

111
00:06:12,340 --> 00:06:15,190
What we're doing here is we're applying that concept

112
00:06:15,190 --> 00:06:17,520
by using dash dash file twice.

113
00:06:17,520 --> 00:06:22,310
And if the Docker Compose to file does have a key that matches one that's in the

114
00:06:22,310 --> 00:06:26,580
Docker Compose one file then would simply overlay that now,

115
00:06:26,580 --> 00:06:29,220
when composed, does the conversion from Docker Compose?

116
00:06:29,220 --> 00:06:32,320
It would use the most up to date version of that key,

117
00:06:32,320 --> 00:06:34,340
which is the one in the last file.

118
00:06:34,340 --> 00:06:36,610
So that's an example of some of the different ways we can

119
00:06:36,610 --> 00:06:39,340
use the dash f for the dash dash file.

120
00:06:39,340 --> 00:06:42,840
Now we could also go in and do things like standard out.

121
00:06:42,840 --> 00:06:44,860
We would simply put standard out here,

122
00:06:44,860 --> 00:06:48,490
and that will now not write it to a file or a folder.

123
00:06:48,490 --> 00:06:51,440
Instead, it'll just dump it all to the console.

124
00:06:51,440 --> 00:06:53,640
Now, you can't use this with dash.

125
00:06:53,640 --> 00:06:58,040
Oh, by the way or dash dash out, you have to choose one or the other.

126
00:06:58,040 --> 00:07:01,440
So this would be useful for a You just want to see the

127
00:07:01,440 --> 00:07:04,310
animal before you actually go to the trouble To put it on

128
00:07:04,310 --> 00:07:06,630
your hard drive somewhere or B,

129
00:07:06,630 --> 00:07:10,330
you're gonna take the output of this and then maybe pipe it into another file,

130
00:07:10,330 --> 00:07:14,040
using the appropriate syntax for your command prompt.

131
00:07:14,040 --> 00:07:19,040
Now, the normal thing I do, though, is all create a folder such as Output.

132
00:07:19,040 --> 00:07:22,140
I call mine 0.8 s.

133
00:07:22,140 --> 00:07:25,040
I use .NET kind of puts at the top of the folder structure.

134
00:07:25,040 --> 00:07:28,040
And then K s, of course, is kubernetes.

135
00:07:28,040 --> 00:07:29,670
In this case, though, I'm saying, Hey,

136
00:07:29,670 --> 00:07:36,440
we want to dump all the converted kubernetes XAML files into the output folder.

137
00:07:36,440 --> 00:07:38,680
Now, if that folder doesn't exist,

138
00:07:38,680 --> 00:07:41,150
what will happen is it will just create a file called output.

139
00:07:41,150 --> 00:07:45,710
So you need to make sure this folder is their first before you run the command.

140
00:07:45,710 --> 00:07:50,640
However, if you just want to update a file, you could do that, too.

141
00:07:50,640 --> 00:07:53,820
Here's an example where I just wanna dump it out to a file

142
00:07:53,820 --> 00:07:58,210
called K s or KUBERNETES for short .NET XAML.

143
00:07:58,210 --> 00:08:00,640
And it would automatically handle that for me.

144
00:08:00,640 --> 00:08:01,710
So you kind of have a choice.

145
00:08:01,710 --> 00:08:05,440
Do you want all in one file or do you want separate files?

146
00:08:05,440 --> 00:08:08,610
I personally prefer separate files, but of course,

147
00:08:08,610 --> 00:08:11,940
each person has different references.

148
00:08:11,940 --> 00:08:14,940
And then finally, while you're doing this conversion,

149
00:08:14,940 --> 00:08:18,060
it's going to generate deployments and services by default.

150
00:08:18,060 --> 00:08:20,640
Although you can override that behavior 2D.

151
00:08:20,640 --> 00:08:22,220
But normally that's what we want.

152
00:08:22,220 --> 00:08:25,710
So how maney replicas would you want?

153
00:08:25,710 --> 00:08:29,340
Well, in this case, I'm saying, Hey, when you generate the deployments,

154
00:08:29,340 --> 00:08:33,240
I want three replicas for each pot that would be created with

155
00:08:33,240 --> 00:08:36,440
that deployment and the Associated replica set.

156
00:08:36,440 --> 00:08:39,230
So that's how we could kind of override that behavior.

157
00:08:39,230 --> 00:08:42,720
This defaults to one normally, but if you want more than one,

158
00:08:42,720 --> 00:08:44,540
you can go ahead and do this.

159
00:08:44,540 --> 00:08:45,480
So there you have it.

160
00:08:45,480 --> 00:08:47,700
That's some of the different flags you can use.

161
00:08:47,700 --> 00:08:53,000
I'll show you a demonstration coming up next. We're gonna put composed, convert into action

