1
00:00:00,990 --> 00:00:03,550
Hello everybody and
welcome to this tutorial.

2
00:00:03,550 --> 00:00:06,610
Today I will show you how to mess
around with the DNS settings and

3
00:00:06,610 --> 00:00:11,520
how you can actually redirect the traffic
of a particular user to somewhere,

4
00:00:11,520 --> 00:00:14,300
I don't know, to wherever you want,

5
00:00:14,300 --> 00:00:19,000
to your malicious site where you can
deploy exploits and so on and so forth.

6
00:00:20,980 --> 00:00:24,570
What I mean by this is that somebody
will enter a domain name into a browser.

7
00:00:24,570 --> 00:00:25,650
Let me just show you.

8
00:00:25,650 --> 00:00:29,910
Open up a browser like this.

9
00:00:29,910 --> 00:00:33,390
It's a bit slow today.

10
00:00:33,390 --> 00:00:36,250
Probably, because I have
ten billion things running.

11
00:00:36,250 --> 00:00:37,420
Anyway, you would type in.

12
00:00:37,420 --> 00:00:40,852
I don't know let's see,
www dot facebook dot com,

13
00:00:40,852 --> 00:00:45,454
cuz we're gonna use this as our
experimental site for today's work,

14
00:00:45,454 --> 00:00:48,820
primarily because it has
really good security.

15
00:00:48,820 --> 00:00:54,080
But we're not going to do anything
to facebook dot com anyway,

16
00:00:54,080 --> 00:00:56,200
to the official domain.

17
00:00:57,710 --> 00:01:00,070
Person will enter a domain
name like this and

18
00:01:00,070 --> 00:01:03,670
instead of being redirected at
a proper IP address they will

19
00:01:03,670 --> 00:01:07,050
be redirected to some IP
address that we type in.

20
00:01:07,050 --> 00:01:12,820
So our IP address where
there will be a web server

21
00:01:12,820 --> 00:01:16,670
listening to receive that traffic and once
that traffic is received they will get

22
00:01:16,670 --> 00:01:21,440
an exact clone of the website, where
they will be entering their credentials.

23
00:01:22,800 --> 00:01:25,700
Once they actually have entered them,
we will have them, and

24
00:01:25,700 --> 00:01:29,760
we will be able to do with
them as we choose and please.

25
00:01:29,760 --> 00:01:34,590
Now this is just an example of how things
can run, not necessarily that they will

26
00:01:34,590 --> 00:01:40,240
run in all cases, and specific cases
may require adjustments, so to say.

27
00:01:40,240 --> 00:01:45,428
Depending on what sort of site is it, how
to approach it, and so on and so forth.

28
00:01:45,428 --> 00:01:53,580
Anyway, for the purposes of this tutorial,
I have two virtual machines.

29
00:01:53,580 --> 00:01:57,650
One is Kali Linux and the other one
shall be my Windows 8.1 machine.

30
00:01:57,650 --> 00:01:58,820
That will be a victim.

31
00:02:01,170 --> 00:02:05,080
Don't have any real machines here to test
it out on, like test it out on three or

32
00:02:05,080 --> 00:02:08,490
four different real machines,
but it does not matter.

33
00:02:08,490 --> 00:02:09,560
It really doesn't matter.

34
00:02:09,560 --> 00:02:12,420
The procedure is exactly the same.

35
00:02:12,420 --> 00:02:15,640
There are literally no differences, and

36
00:02:15,640 --> 00:02:19,080
the best part is that you can actually
combine this technique with some

37
00:02:19,080 --> 00:02:22,770
of the things that we have learned
in the previous tutorials.

38
00:02:22,770 --> 00:02:26,500
For example, this technique can
be also combined with SSL strip,

39
00:02:26,500 --> 00:02:31,740
although that's a bit more complex method,
that requires a bit more complexity to it.

40
00:02:33,030 --> 00:02:37,600
Anyway, let me just boot this machine up.

41
00:02:37,600 --> 00:02:40,650
And while that is booting let us
go over to our Kali Linux box.

42
00:02:42,320 --> 00:02:48,230
I'm gonna go ahead and log in here, and
it looks like the guest edition's broke,

43
00:02:48,230 --> 00:02:49,670
oh, no, I have a full screen.

44
00:02:49,670 --> 00:02:55,280
It just takes a bit to load because I am
running several virtual machines at once.

45
00:02:57,280 --> 00:02:59,440
Now there are several
tools which you will need.

46
00:02:59,440 --> 00:03:02,490
Fortunately for us we don't
actually need to install anything.

47
00:03:02,490 --> 00:03:05,100
All these things come
pre-installed with Kali Linux.

48
00:03:05,100 --> 00:03:08,170
If you want to use a different Linux
this you can install these things.

49
00:03:08,170 --> 00:03:10,720
It's not a,
it's nothing too difficult or anything.

50
00:03:10,720 --> 00:03:12,870
Their pretty easy to install.

51
00:03:12,870 --> 00:03:14,420
You can find them on the net,

52
00:03:14,420 --> 00:03:18,290
and the official site and
download and install them from there.

53
00:03:19,830 --> 00:03:21,640
I am disconnected.
Why am I disconnected?

54
00:03:21,640 --> 00:03:22,800
Let's have a look.

55
00:03:22,800 --> 00:03:27,338
Network > Network Settings.

56
00:03:27,338 --> 00:03:28,985
Of course,
because I'm doing over wireless, and

57
00:03:28,985 --> 00:03:31,040
I'm now connected to the wire network.

58
00:03:31,040 --> 00:03:33,770
Anyway, make sure that your virtual

59
00:03:33,770 --> 00:03:37,080
machine is actually connected to
the net and that you have access to it.

60
00:03:37,080 --> 00:03:39,530
I will have it in a moment,
and there we go.

61
00:03:39,530 --> 00:03:41,520
Let me just confirm that
I have access to that,

62
00:03:41,520 --> 00:03:45,387
but even if I don't I
should be able to do this.

63
00:03:45,387 --> 00:03:50,004
However, you won't be able to do
this externally if you don't have

64
00:03:50,004 --> 00:03:51,711
access to the internet.

65
00:03:51,711 --> 00:03:58,350
Let's just try ping google.com, excellent,
so I'm getting a reply, I am connected.

66
00:04:00,430 --> 00:04:04,010
Anyway, now the we have
our Kali Linux running.

67
00:04:04,010 --> 00:04:07,700
In the previous tutorials we have
actually managed to compromise a router.

68
00:04:08,740 --> 00:04:14,700
So by utilizing that router, we're gonna
effectively change it's DNS settings.

69
00:04:14,700 --> 00:04:18,098
We will tell it that the DNS is
actually our virtual machine.

70
00:04:18,098 --> 00:04:22,667
And as

71
00:04:22,667 --> 00:04:28,230
soon as this browser opens I'll
show you what I mean by it.

72
00:04:28,230 --> 00:04:28,760
There we go.
Come on.

73
00:04:31,830 --> 00:04:32,478
There we go.

74
00:04:32,478 --> 00:04:34,725
192.168.1.1 and

75
00:04:34,725 --> 00:04:40,211
we have already gotten the user
credentials in the previous tutorials.

76
00:04:40,211 --> 00:04:41,462
Here we're just going to apply them.

77
00:04:46,461 --> 00:04:47,160
And there we go.

78
00:04:47,160 --> 00:04:50,150
Let me just zoom it in for you.

79
00:04:50,150 --> 00:04:53,780
So this is the interface
of a TP-Link router, and

80
00:04:53,780 --> 00:04:55,270
there are lots of settings here.

81
00:04:55,270 --> 00:05:02,870
But we are interested in the DNS settings,
so let me just find where they are.

82
00:05:02,870 --> 00:05:04,690
You will encounter a lot
of things in these routers.

83
00:05:04,690 --> 00:05:12,025
You will encounter different
configurations, different setups,

84
00:05:12,025 --> 00:05:15,410
and sometimes it can get a bit tiring
to actually find where is what.

85
00:05:15,410 --> 00:05:17,710
Now, in Advanced Setup you have Firewall.

86
00:05:17,710 --> 00:05:20,360
Now, if you already breached
the router you can actually

87
00:05:20,360 --> 00:05:23,210
disable a firewall which is fantastic.

88
00:05:23,210 --> 00:05:27,520
So, even the ping of death will fly
if the firewall isn't up and running.

89
00:05:27,520 --> 00:05:31,579
I suspect that is true that
the firewall is the only thing that

90
00:05:31,579 --> 00:05:36,210
is blocking it here as far as I can see.

91
00:05:36,210 --> 00:05:37,830
Now you have a lot of other things.

92
00:05:37,830 --> 00:05:38,420
You have NAT.

93
00:05:38,420 --> 00:05:42,430
You have routing to see who is connected.

94
00:05:43,710 --> 00:05:45,340
Other things as well, we have V-LAN,

95
00:05:45,340 --> 00:05:49,630
you can go into EDSL and actually figure
out their credentials there as well but

96
00:05:49,630 --> 00:05:55,090
we are not interested in any off
those things, we are at the moment,

97
00:05:55,090 --> 00:06:00,130
looking for the DNS settings, I suspect
I might find it here, under internet

98
00:06:02,990 --> 00:06:07,750
to get IP address, static [INAUDIBLE]
gateway, not default route.

99
00:06:07,750 --> 00:06:13,961
TCP encapsulation,
service bridge ISP, virtual circuit.

100
00:06:13,961 --> 00:06:16,045
Okay apparently it is not here.

101
00:06:16,045 --> 00:06:19,253
Let's go to the next one.

102
00:06:19,253 --> 00:06:21,670
It says, there we go.

103
00:06:21,670 --> 00:06:24,480
So it says user,
use auto discovered DNS server only.

104
00:06:25,780 --> 00:06:29,390
And I do not want that to happen.

105
00:06:29,390 --> 00:06:34,600
I want to use, user discovered DNS
servers only to give me an option for

106
00:06:34,600 --> 00:06:37,260
myself to type in whatever I want.

107
00:06:37,260 --> 00:06:40,620
And I'm going to type in the IP
address of my virtual machine.

108
00:06:40,620 --> 00:06:44,086
You can get it by typing in ifconfig.

109
00:06:49,337 --> 00:06:51,050
Excellent, there we go.

110
00:06:51,050 --> 00:06:52,330
So this is the IP address.

111
00:06:52,330 --> 00:06:56,250
Now these IP addresses are dynamic,
and hopefully they won't change for

112
00:06:56,250 --> 00:06:57,702
the duration of this tutorial.

113
00:06:57,702 --> 00:07:02,815
In order to perform this attack on a
larger scale, like if you want to remotely

114
00:07:02,815 --> 00:07:07,365
do this, because this attack is actually
meant to be done on remote basis, so

115
00:07:07,365 --> 00:07:11,345
let's say that you're somewhere in Europe,
and somebody else is

116
00:07:12,365 --> 00:07:16,705
in eastern Russia or something like
that you would be able to do this, but

117
00:07:16,705 --> 00:07:20,030
you would need to have
a Static from wik IP address,

118
00:07:20,030 --> 00:07:23,070
not necessarily even static but,
you would need to do

119
00:07:23,070 --> 00:07:27,400
significant configuration to your
router in order to be able to do this.

120
00:07:27,400 --> 00:07:31,010
However, I recommend for
the ease of use, just to get a VPN, and

121
00:07:31,010 --> 00:07:36,070
I have described how to use
VPNs in the previous tutorials.

122
00:07:36,070 --> 00:07:40,090
So, you can go back there and
figure out how to use a VPN, and

123
00:07:40,090 --> 00:07:45,430
once you have a VPN static IP address,
then you can actually perform this attack,

124
00:07:45,430 --> 00:07:48,880
on great distances outside
of local networks.

125
00:07:50,670 --> 00:07:53,220
I will type in this server here.

126
00:07:53,220 --> 00:07:54,990
And, once you actually type
in your fake DNS server,

127
00:07:54,990 --> 00:07:58,510
that you will create via
the IP address of that server,

128
00:07:58,510 --> 00:08:01,850
it is always a good idea
to have a fallback here.

129
00:08:01,850 --> 00:08:06,940
So the fallback here will be 8.8.8.8.8.

130
00:08:06,940 --> 00:08:14,060
These are public Google DNS servers,
you can all feel free to use them.

131
00:08:14,060 --> 00:08:14,920
That's why they're there.

132
00:08:14,920 --> 00:08:16,570
They're pretty good actually.

133
00:08:16,570 --> 00:08:18,600
Open DNS and Google DNS servers.

134
00:08:18,600 --> 00:08:23,260
Those are the two best DNS servers out
there in the world as far as I know.

135
00:08:23,260 --> 00:08:27,130
And people use them,
as they're quite secure.

136
00:08:27,130 --> 00:08:29,980
The reason why I'm putting the second
method here is that you're not going to

137
00:08:29,980 --> 00:08:33,450
have this server of
yours running non-stop.

138
00:08:33,450 --> 00:08:36,840
You want to run it for a certain
period of time, get what you need.

139
00:08:36,840 --> 00:08:40,400
And then you might want to turn your
machine off with something like that.

140
00:08:40,400 --> 00:08:45,000
And once you do that, your victim
will be unable to browse the web.

141
00:08:45,000 --> 00:08:46,610
You will raise suspicion.

142
00:08:46,610 --> 00:08:51,430
You will raise a lot of red flags and
that can be extremely problematic,

143
00:08:51,430 --> 00:08:54,480
so that's definitely something
that you will want to have here so

144
00:08:54,480 --> 00:08:58,798
it will keep on functioning even if
you're fake server is not functioning.

145
00:08:58,798 --> 00:09:03,170
Click save, wait for

146
00:09:03,170 --> 00:09:08,320
it, it's gotta save eventually
these routers are not

147
00:09:08,320 --> 00:09:11,620
state of the art and they tend to be
kind of slow so keep that in mind,

148
00:09:11,620 --> 00:09:14,440
don't immediately be frustrated if
it doesn't work out the first time.

149
00:09:16,020 --> 00:09:18,700
Just try it a couple of times.

150
00:09:18,700 --> 00:09:19,650
And it should work just fine.

151
00:09:20,930 --> 00:09:22,600
Let me just go ahead and
clear this screen.

152
00:09:22,600 --> 00:09:26,120
Now, in the next tutorial,
in the follow-up tutorial,

153
00:09:26,120 --> 00:09:31,390
we will actually employ some tools and
see what we can do with them.

154
00:09:31,390 --> 00:09:38,530
Until then, I bid you farewell and I hope
to see you in the next follow-up tutorial.

