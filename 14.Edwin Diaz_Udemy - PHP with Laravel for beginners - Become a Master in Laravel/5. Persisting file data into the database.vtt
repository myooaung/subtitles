WEBVTT
1

00:00:00.150  -->  00:00:04.350
All right welcome back my students so now that we are retrieving data.

2

00:00:04.560  -->  00:00:05.580
Right.

3

00:00:06.030  -->  00:00:10.780
It's time for us to start to learn how to actually persisted to make it.

4

00:00:10.950  -->  00:00:16.700
So it goes in the database so that way we can get all this information inside the database.

5

00:00:16.700  -->  00:00:17.220
All right.

6

00:00:17.220  -->  00:00:21.850
And at the same time it would be also good to put it in our server.

7

00:00:21.960  -->  00:00:22.440
Right.

8

00:00:22.680  -->  00:00:24.240
So let's do that.

9

00:00:24.240  -->  00:00:30.610
Let's actually comment all this out and you can make comments guys you can make your comments on why

10

00:00:30.630  -->  00:00:31.940
each of this stuff is doing.

11

00:00:31.950  -->  00:00:36.420
I'm showing it to you right now what I want you to do that with me so that way you can have these files

12

00:00:36.840  -->  00:00:38.070
all these features available.

13

00:00:38.070  -->  00:00:39.090
All right.

14

00:00:39.090  -->  00:00:40.130
All right cool.

15

00:00:40.140  -->  00:00:47.820
So what I want to do is I want to say because this is a pose controller and we are also if you look

16

00:00:47.820  -->  00:00:54.330
at our migration there is only I think we only do in the title we're putting information in the title

17

00:00:54.340  -->  00:01:00.630
so let's let's actually take a look at our BHB admin real quick.

18

00:01:00.630  -->  00:01:03.720
So that where we can get a little refresher on BHB.

19

00:01:04.050  -->  00:01:10.340
Admin a little refresh on what our tables look like this point are post-IPO.

20

00:01:10.380  -->  00:01:13.370
All right Paul Steve was tied on the content right.

21

00:01:13.680  -->  00:01:16.980
OK that's fine and these ad men but we don't need all that information.

22

00:01:16.980  -->  00:01:19.020
I'm just going to we're just going to do the title on this.

23

00:01:19.020  -->  00:01:20.000
In this case OK.

24

00:01:20.070  -->  00:01:25.470
So what I want to do is and what we want I want you to do is do you request on we're going to put this

25

00:01:25.470  -->  00:01:27.340
in a very well just like we did before.

26

00:01:27.470  -->  00:01:28.080
OK.

27

00:01:28.170  -->  00:01:32.250
So we now we have the request of the whole form inside here.

28

00:01:32.250  -->  00:01:33.220
Cool.

29

00:01:33.750  -->  00:01:43.240
Now what we need to do now that we have this is we need to find out if we have a file.

30

00:01:43.320  -->  00:01:44.030
All right.

31

00:01:44.370  -->  00:01:54.210
So we could say something like this if and I'm going to sign a variable right in the IF statement to

32

00:01:54.210  -->  00:01:55.800
it right away.

33

00:01:55.800  -->  00:01:58.860
All right which I think it's pretty cool right.

34

00:01:59.190  -->  00:01:59.730
All right.

35

00:01:59.730  -->  00:02:05.590
So if this file exist.

36

00:02:05.670  -->  00:02:05.960
All right.

37

00:02:05.970  -->  00:02:10.470
I want you to execute the following functions right.

38

00:02:11.070  -->  00:02:20.730
I'm going to get the name all right and the NAME IS GOING TO BE file good or really original client

39

00:02:20.760  -->  00:02:21.870
name.

40

00:02:21.870  -->  00:02:22.830
All right.

41

00:02:23.160  -->  00:02:27.280
So once we have the name of the file then we can do all the things with it right.

42

00:02:27.510  -->  00:02:32.680
Well we want to move the file first.

43

00:02:32.690  -->  00:02:35.280
All right we want to move that file somewhere.

44

00:02:35.400  -->  00:02:38.150
So now this more functional or method.

45

00:02:38.370  -->  00:02:42.840
All right takes two parameters is going to it we're going to give it two parameters the first parameter

46

00:02:42.840  -->  00:02:49.160
is going to give it where the file is going to write the location of the file where he's going to.

47

00:02:49.380  -->  00:02:52.120
And then of course it takes the name of the file.

48

00:02:52.380  -->  00:02:52.890
OK.

49

00:02:53.020  -->  00:02:56.220
Now I want you to listen to this.

50

00:02:56.220  -->  00:03:01.780
This function will create an images folder if you're don't already have it.

51

00:03:01.830  -->  00:03:03.140
All right.

52

00:03:03.950  -->  00:03:09.240
If for some reason the US is not able to create images folder you need to give it some permissions to

53

00:03:09.240  -->  00:03:09.730
do it.

54

00:03:09.810  -->  00:03:10.730
OK.

55

00:03:10.740  -->  00:03:13.410
But it will create an image just for that right now for us.

56

00:03:13.410  -->  00:03:18.940
So right now if you go to our public directory.

57

00:03:18.990  -->  00:03:20.610
We don't have the images for that here.

58

00:03:20.640  -->  00:03:25.050
So this image is for the would be created right here in this public directory because the images should

59

00:03:25.050  -->  00:03:32.160
be of these images that we are uploading here should be public right and sensible to everybody in this

60

00:03:32.160  -->  00:03:32.770
case.

61

00:03:32.980  -->  00:03:34.260
Ok cool.

62

00:03:34.830  -->  00:03:43.330
So once we move in we also want to add the input variable now right.

63

00:03:44.580  -->  00:03:51.840
And as a matter of fact this was should be the name of the column inside your database so if you don't

64

00:03:51.840  -->  00:03:52.880
have one.

65

00:03:53.040  -->  00:03:54.290
I think we're going to have to do that.

66

00:03:54.300  -->  00:04:00.710
But if you don't have a column to put the picture path in there you warm work.

67

00:04:00.870  -->  00:04:02.880
All right so let's create that real quick.

68

00:04:02.930  -->  00:04:04.890
It's create a migration for it.

69

00:04:04.890  -->  00:04:05.780
All right.

70

00:04:06.180  -->  00:04:10.560
OK let's clear this out.

71

00:04:10.560  -->  00:04:11.610
There we go.

72

00:04:12.210  -->  00:04:12.760
All right.

73

00:04:12.870  -->  00:04:21.570
Really cool stuff really fast BHB artisan make migration and the migrations name is going to be add

74

00:04:23.160  -->  00:04:28.160
path column to polls.

75

00:04:28.440  -->  00:04:29.490
OK.

76

00:04:29.840  -->  00:04:30.560
There we go.

77

00:04:30.600  -->  00:04:33.870
We are referencing that poll stable.

78

00:04:33.870  -->  00:04:35.830
All right you should know how to do that already.

79

00:04:36.150  -->  00:04:46.830
And if we go to our let's go to our database migrations and it should be the last one here.

80

00:04:47.230  -->  00:04:52.560
Actually another last one for some reason well he should be limited synchronizes real quick.

81

00:04:52.560  -->  00:04:53.170
There we go.

82

00:04:53.370  -->  00:04:54.680
All right cool.

83

00:04:54.720  -->  00:05:04.090
So now we come here with a table and this is going to be a string and we're going to name it.

84

00:05:04.100  -->  00:05:05.070
Path.

85

00:05:05.190  -->  00:05:09.800
You can read my file if you want but passage is a good name for is a lot of people use that.

86

00:05:10.200  -->  00:05:16.900
And of course we want to make sure that we can drop this if we wanted to.

87

00:05:17.670  -->  00:05:18.830
All right cool.

88

00:05:18.840  -->  00:05:24.060
Now you come back here and you say BHP Orison migrate.

89

00:05:24.350  -->  00:05:25.220
All right that's migrating.

90

00:05:25.230  -->  00:05:28.300
So now we have that let's go back to.

91

00:05:28.690  -->  00:05:30.490
Let's close on this.

92

00:05:30.790  -->  00:05:34.810
And you can see the little red line under HTP.

93

00:05:35.040  -->  00:05:36.640
Cool stuff right.

94

00:05:36.720  -->  00:05:37.770
That means something is wrong.

95

00:05:37.770  -->  00:05:38.580
Right.

96

00:05:39.090  -->  00:05:43.970
And controllers will go here and we find where the problem is and that's where it is right.

97

00:05:44.250  -->  00:05:45.000
Cool.

98

00:05:45.000  -->  00:05:45.980
I love BHB storm.

99

00:05:45.990  -->  00:05:51.740
But anyway so once you have that let's change this because this is where the column name will be.

100

00:05:52.080  -->  00:05:53.010
All right.

101

00:05:53.580  -->  00:05:58.850
And we got to assign the name to it like this.

102

00:05:58.860  -->  00:06:02.430
Remember we are assigned from right to left of course.

103

00:06:02.430  -->  00:06:02.890
All right.

104

00:06:03.000  -->  00:06:13.800
So once we have that all we've got to do down here is say you know what post I need you to create

105

00:06:16.770  -->  00:06:18.990
everything that your input has.

106

00:06:18.990  -->  00:06:22.110
All right now I don't want you to forget something.

107

00:06:22.140  -->  00:06:22.770
All right.

108

00:06:22.950  -->  00:06:25.350
Right now we're forgetting something and we don't want to do that.

109

00:06:25.360  -->  00:06:27.760
Well I'm not forgetting but you might be forgetting.

110

00:06:27.840  -->  00:06:35.070
Remember that we created a new column and now when we use is meant to create that's going to be you

111

00:06:35.070  -->  00:06:37.170
know mass assignment will be a problem.

112

00:06:37.310  -->  00:06:41.270
Clarabell would not allow us to to edit this column unless we give it permission.

113

00:06:41.280  -->  00:06:44.880
So we need to go to the polls.

114

00:06:44.990  -->  00:06:54.570
All right and let him know that it's ok it's ok Clarabell you can actually put all this on top.

115

00:06:54.600  -->  00:06:59.150
We don't have that many.

116

00:06:59.460  -->  00:07:03.620
We don't have so many that we can put it in one line.

117

00:07:03.630  -->  00:07:04.150
All right.

118

00:07:04.410  -->  00:07:07.380
And then we're going to see a path here.

119

00:07:07.380  -->  00:07:09.860
Ok cool.

120

00:07:10.170  -->  00:07:16.760
So now if we go to that post let's go right here.

121

00:07:17.730  -->  00:07:20.260
Now let's see what kind of errors we get if we get any.

122

00:07:20.520  -->  00:07:24.780
I haven't really checked double checked I just wanted to get an arrow so that where we can fix it.

123

00:07:24.810  -->  00:07:29.440
You know guys if you taking my Corps's from the past you know I love to see errors.

124

00:07:29.520  -->  00:07:33.480
Anyway see a mass create.

125

00:07:33.480  -->  00:07:41.610
And here I'm going to say BHB and I choose whatever file comes to my mind and create.

126

00:07:42.010  -->  00:07:42.560
Geez.

127

00:07:42.580  -->  00:07:44.090
No no errors.

128

00:07:44.100  -->  00:07:46.140
That's not good.

129

00:07:46.270  -->  00:07:47.530
That's good posts.

130

00:07:47.580  -->  00:07:52.730
And as you can see right here we got a pass but we also have the name of that image right here.

131

00:07:52.920  -->  00:07:54.030
OK.

132

00:07:54.510  -->  00:07:57.700
As you can see right there in that new column.

133

00:07:57.720  -->  00:07:59.750
Pretty cool stuff right.

134

00:07:59.850  -->  00:08:00.450
All right.

135

00:08:00.540  -->  00:08:05.360
So now that we read it we were able to persist data into the database.

136

00:08:05.550  -->  00:08:13.980
We were able Oh and the one thing that I haven't showed you is that if we go to public see we're public

137

00:08:13.980  -->  00:08:15.170
right here.

138

00:08:15.930  -->  00:08:18.690
Let's actually synchronizes real quick.

139

00:08:18.750  -->  00:08:24.200
I don't I don't know if that more function worked so let's synchronize this.

140

00:08:24.540  -->  00:08:29.120
And as you can see yes the images folder has been created as well.

141

00:08:29.190  -->  00:08:34.190
And if you look at it they called the image name is there as well.

142

00:08:34.190  -->  00:08:40.250
Now if you don't want to keep getting the same image over and over again what you can do is you can

143

00:08:40.290  -->  00:08:41.990
add time to it.

144

00:08:42.570  -->  00:08:46.480
All right looking at the time and you're going to have a different image all the time.

145

00:08:46.530  -->  00:08:47.890
Now we can also.

146

00:08:47.970  -->  00:08:56.370
Well we can use this use of new mutator or use an accessor for either getting the path of the image

147

00:08:56.700  -->  00:09:03.420
already in the database or that way every time you echo out the path that you have the whole path or

148

00:09:03.420  -->  00:09:05.690
what you can do is mutating.

149

00:09:05.760  -->  00:09:11.010
I mean access it in a different way in the next election we're going to take a look at how we can make

150

00:09:11.040  -->  00:09:17.850
each image unique and how we can you know use a mutator assessors to actually make it more user friendly

151

00:09:18.270  -->  00:09:24.270
when it comes to displaying the path or you know inputting extra information in a database.

152

00:09:24.270  -->  00:09:24.720
All right.

153

00:09:24.870  -->  00:09:26.340
So anyway thank you so much for watching.

154

00:09:26.340  -->  00:09:28.500
I'll see you in the next lecture
