1
00:00:02,740 --> 00:00:05,540
[Autogenerated] Let's take a look at some I am policies in

2
00:00:05,540 --> 00:00:09,240
action that use conditions to limit actions,

3
00:00:09,240 --> 00:00:10,390
not action,

4
00:00:10,390 --> 00:00:14,220
to limit the effects of a deny and black list and white list

5
00:00:14,220 --> 00:00:19,150
approaches to policy writing Here is a policy that denies all

6
00:00:19,150 --> 00:00:23,130
actions on all resource is without conditions.

7
00:00:23,130 --> 00:00:28,440
This policy would effectively not allow anything at all.

8
00:00:28,440 --> 00:00:29,450
However,

9
00:00:29,450 --> 00:00:35,170
the condition checks the AWS requested region and compares string

10
00:00:35,170 --> 00:00:42,300
not equals to us West to So what this policy is doing is denying all

11
00:00:42,300 --> 00:00:48,840
actions where the requested region does not equal us west to Let's

12
00:00:48,840 --> 00:00:50,800
take a look at this in action.

13
00:00:50,800 --> 00:00:54,780
I've created a role that allows administrator access and

14
00:00:54,780 --> 00:01:00,440
also has this deny policy attached as well.

15
00:01:00,440 --> 00:01:03,440
Let's try looking at an E C two instance,

16
00:01:03,440 --> 00:01:06,690
Notice that I can see the instances that error running

17
00:01:06,690 --> 00:01:11,040
because I am in the US West to region.

18
00:01:11,040 --> 00:01:14,880
If I change regions now, I get a permissions error.

19
00:01:14,880 --> 00:01:20,590
All actions that error not in the US West to region are denied.

20
00:01:20,590 --> 00:01:26,050
Let's take a look at adding a not action to limit these effects of the deny.

21
00:01:26,050 --> 00:01:30,700
I'll go back to my administrator user and take a look at this policy.

22
00:01:30,700 --> 00:01:36,310
This policy is similar to the last one in that it is denying all resource

23
00:01:36,310 --> 00:01:41,440
is where the requested region does not equal us West to,

24
00:01:41,440 --> 00:01:44,540
however, in this one instead of action.

25
00:01:44,540 --> 00:01:49,250
SQL Star We have not action as e c.

26
00:01:49,250 --> 00:01:50,570
Two star.

27
00:01:50,570 --> 00:01:53,690
The not action excludes everything listed in the

28
00:01:53,690 --> 00:02:00,140
not action element in this case, all to operations from the deny effect,

29
00:02:00,140 --> 00:02:03,710
coupled with the other policy that allows all actions.

30
00:02:03,710 --> 00:02:08,180
This will allow us to perform E C two actions in any region.

31
00:02:08,180 --> 00:02:08,710
Again,

32
00:02:08,710 --> 00:02:12,430
I've created a role with this policy and the administrative

33
00:02:12,430 --> 00:02:20,370
policy now we can go to easy to and we no longer get an error

34
00:02:20,370 --> 00:02:22,440
when we're in different regions.

35
00:02:22,440 --> 00:02:25,200
Let's take a look at a blacklist and white list.

36
00:02:25,200 --> 00:02:30,320
Example in this policy, instead of allowing all easy to actions,

37
00:02:30,320 --> 00:02:32,120
were only allowing E.

38
00:02:32,120 --> 00:02:35,440
C to describe actions.

39
00:02:35,440 --> 00:02:39,240
This particular policy has no additional conditions.

40
00:02:39,240 --> 00:02:43,390
Let's take a look at this one in action again.

41
00:02:43,390 --> 00:02:46,840
I've created a role with only this policy,

42
00:02:46,840 --> 00:02:49,590
since there isn't a region restriction,

43
00:02:49,590 --> 00:02:54,040
I can perform describes in whatever region I choose.

44
00:02:54,040 --> 00:02:57,260
However, if I were to try to launch an instance,

45
00:02:57,260 --> 00:02:59,860
I don't have permissions to do that,

46
00:02:59,860 --> 00:03:04,000
recall that only easy to describe actions were allowed.

47
00:03:04,000 --> 00:03:09,340
So if I try to go to a different service like S3, I'll get a permission error.

48
00:03:09,340 --> 00:03:13,350
Let's take a look at the blacklist example in this policy.

49
00:03:13,350 --> 00:03:17,090
One statement allows all easy to actions on.

50
00:03:17,090 --> 00:03:19,740
All resource is.

51
00:03:19,740 --> 00:03:25,480
Then we have another statement that denies to specific actions E.

52
00:03:25,480 --> 00:03:25,690
C.

53
00:03:25,690 --> 00:03:30,250
To terminate instances and easy to delete tags.

54
00:03:30,250 --> 00:03:32,840
This is a way to implement a blacklist.

55
00:03:32,840 --> 00:03:37,010
You allow everything except a few select actions that

56
00:03:37,010 --> 00:03:39,440
you don't want the user to take.

57
00:03:39,440 --> 00:03:43,840
Let's take a look at a running instance.

58
00:03:43,840 --> 00:03:48,640
If I try to delete a tag, I get a permission error.

59
00:03:48,640 --> 00:03:53,240
The same thing will happen if I try to terminate an instance.

60
00:03:53,240 --> 00:03:58,440
Those two specific actions have been denied from the permissions.

61
00:03:58,440 --> 00:04:08,000
I could stop the instance or any other easy to action. Just not terminate instantiate or delete tags

