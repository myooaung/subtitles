WEBVTT
1
00:00:02.740 --> 00:00:05.850
[Autogenerated] Let's go through the steps to lock down a route user

2
00:00:05.850 --> 00:00:10.360
in an AWS account and demonstrate an action that only the root user

3
00:00:10.360 --> 00:00:14.930
can do do next will attach a service control policy to limit the

4
00:00:14.930 --> 00:00:17.120
root user in a member account.

5
00:00:17.120 --> 00:00:18.630
Then we'll see how I am.

6
00:00:18.630 --> 00:00:22.540
Users in the master account can modify s apps,

7
00:00:22.540 --> 00:00:26.320
an organization structure I'm going to sign in as

8
00:00:26.320 --> 00:00:31.610
the root user in this AWS account.

9
00:00:31.610 --> 00:00:35.540
If I go to the I am Dashboard,

10
00:00:35.540 --> 00:00:38.950
it's going to show me quite plainly all of the things that I

11
00:00:38.950 --> 00:00:42.310
need to do to lock down my root user account.

12
00:00:42.310 --> 00:00:47.250
Let's start with deleting the root access keys under my account name.

13
00:00:47.250 --> 00:00:47.570
I can.

14
00:00:47.570 --> 00:00:54.690
Select my security credentials, expand access keys,

15
00:00:54.690 --> 00:01:00.090
then delete the key confirmed that you want to delete it.

16
00:01:00.090 --> 00:01:05.550
Now if we go back to the I am dashboard we can, see a green check mark.

17
00:01:05.550 --> 00:01:08.140
We've deleted the root access keys.

18
00:01:08.140 --> 00:01:12.520
Next, let's activate multi factor authentication on the root account.

19
00:01:12.520 --> 00:01:19.340
Go back to my security credentials and expand multi factor authentication.

20
00:01:19.340 --> 00:01:19.840
Select.

21
00:01:19.840 --> 00:01:20.770
Activate M F.

22
00:01:20.770 --> 00:01:22.240
A.

23
00:01:22.240 --> 00:01:25.640
Choose the type of device you want to use,

24
00:01:25.640 --> 00:01:29.190
then follow the instructions for that particular device Once

25
00:01:29.190 --> 00:01:31.250
you've entered the required information,

26
00:01:31.250 --> 00:01:34.640
you can assign the M F A.

27
00:01:34.640 --> 00:01:40.640
If we go back to the dashboard we can see that that box is now checked.

28
00:01:40.640 --> 00:01:50.330
If we log out and log back in notice that now it requires the FAA code,

29
00:01:50.330 --> 00:01:55.540
it's fairly easy to set up and adds an extra level of security to your account.

30
00:01:55.540 --> 00:01:58.210
Some companies may use a hardware M F A,

31
00:01:58.210 --> 00:02:02.220
and keep it in a safe or some other way to ensure that only a small

32
00:02:02.220 --> 00:02:07.420
number of people have access to the root account and traceability to

33
00:02:07.420 --> 00:02:11.040
whom is logging in with that route account.

34
00:02:11.040 --> 00:02:14.190
Let's go back to the dashboard and see what else we need to fix.

35
00:02:14.190 --> 00:02:17.920
Creating I am users and assigning permissions has to do with

36
00:02:17.920 --> 00:02:21.710
creating an I am user to administer the account.

37
00:02:21.710 --> 00:02:24.480
Let's first create an administrator's group.

38
00:02:24.480 --> 00:02:31.240
Then we'll create a user and assign it to that group.

39
00:02:31.240 --> 00:02:35.140
I'll attach the administrator access policy to this

40
00:02:35.140 --> 00:02:39.880
administrators group recall that Administrator access includes

41
00:02:39.880 --> 00:02:42.930
all actions available in the AWS account,

42
00:02:42.930 --> 00:02:47.440
except those items that can do only be performed by route.

43
00:02:47.440 --> 00:02:53.310
Now we can create a user and assign it to that group you can

44
00:02:53.310 --> 00:02:55.560
choose what type of access they'll have.

45
00:02:55.560 --> 00:02:59.440
I'll do console access only for now.

46
00:02:59.440 --> 00:03:01.770
We'll assign them to the administrators group.

47
00:03:01.770 --> 00:03:08.040
I'll skip the tags, review our selections and create these user.

48
00:03:08.040 --> 00:03:10.530
Depending on how you're structuring your administrators,

49
00:03:10.530 --> 00:03:15.020
you can send an email or download to CSV with the credentials.

50
00:03:15.020 --> 00:03:17.370
If you're using AWS organizations,

51
00:03:17.370 --> 00:03:22.150
you can instead create a role that allows administrative access,

52
00:03:22.150 --> 00:03:22.820
then assigned.

53
00:03:22.820 --> 00:03:26.390
The account that contains these e I am administrators in

54
00:03:26.390 --> 00:03:29.540
your organization has a trusted account.

55
00:03:29.540 --> 00:03:33.740
The final thing is to add an I am password policy,

56
00:03:33.740 --> 00:03:39.910
go to account settings, set password policy,

57
00:03:39.910 --> 00:03:43.090
then select the parameters for your password policy.

58
00:03:43.090 --> 00:03:47.050
I'm just going to make mine 20 characters as an example.

59
00:03:47.050 --> 00:03:48.250
Save the changes.

60
00:03:48.250 --> 00:03:52.240
And now this account has an I am password policy.

61
00:03:52.240 --> 00:03:57.590
Any I am users that error created or that changed their password will have to

62
00:03:57.590 --> 00:04:02.200
follow the password policy when we go back to the dashboard.

63
00:04:02.200 --> 00:04:06.290
We can CR security status is all green at this point,

64
00:04:06.290 --> 00:04:09.690
the only time that you'll need to log in as the root user

65
00:04:09.690 --> 00:04:12.730
is when you need to perform certain things that only the

66
00:04:12.730 --> 00:04:19.140
root user can do do for example, suppose I wanted to change the account name.

67
00:04:19.140 --> 00:04:26.040
I could go to my account, then edit the account settings.

68
00:04:26.040 --> 00:04:33.710
Certain actions like this require you to re authenticate.

69
00:04:33.710 --> 00:04:33.930
Now.

70
00:04:33.930 --> 00:04:36.110
It could change the name of the account,

71
00:04:36.110 --> 00:04:39.780
the email associated with it or the root password.

72
00:04:39.780 --> 00:04:44.570
Since the global Aptiva count is part of an AWS organization,

73
00:04:44.570 --> 00:04:48.710
let's create a service control policy that limits this account,

74
00:04:48.710 --> 00:04:52.670
then we can see how even the root user is subject to the

75
00:04:52.670 --> 00:04:56.100
service control policy in the master account.

76
00:04:56.100 --> 00:05:00.440
Under AWS organizations go to the policies tab,

77
00:05:00.440 --> 00:05:04.740
then select service control policies.

78
00:05:04.740 --> 00:05:09.450
Here we can create a policy or attached an existing policy note

79
00:05:09.450 --> 00:05:13.710
the full AWS access policy that is attached to each

80
00:05:13.710 --> 00:05:17.340
organizational unit and account by default.

81
00:05:17.340 --> 00:05:18.260
In the first course.

82
00:05:18.260 --> 00:05:20.640
When we talked about service control policies,

83
00:05:20.640 --> 00:05:23.260
we created a few of these policies.

84
00:05:23.260 --> 00:05:24.910
Let's take a look at the limit E.

85
00:05:24.910 --> 00:05:25.110
C.

86
00:05:25.110 --> 00:05:28.740
To micro policy.

87
00:05:28.740 --> 00:05:33.250
Recall that this will deny any run instantiate action that does

88
00:05:33.250 --> 00:05:37.740
not have an instance type of tea to micro.

89
00:05:37.740 --> 00:05:45.690
We'll attach this to our account under policies,

90
00:05:45.690 --> 00:05:51.000
service control policies and will attach limit E.

91
00:05:51.000 --> 00:05:51.210
C.

92
00:05:51.210 --> 00:05:56.880
To micro back in that account as the root user

93
00:05:56.880 --> 00:06:01.980
we can go to easy to that attempt.

94
00:06:01.980 --> 00:06:15.350
To launch an instance, we'll try launching a T two large notice how,

95
00:06:15.350 --> 00:06:18.540
even as the root user, the launch has failed.

96
00:06:18.540 --> 00:06:21.960
The service control policy applies to all actions

97
00:06:21.960 --> 00:06:25.340
and all users of a member account.

98
00:06:25.340 --> 00:06:27.170
Back in the master account.

99
00:06:27.170 --> 00:06:32.270
Any user with permissions to AWS organizations can attach

100
00:06:32.270 --> 00:06:35.640
or detach service control policies.

101
00:06:35.640 --> 00:06:38.940
If you've created policies to manage your member accounts,

102
00:06:38.940 --> 00:06:43.430
it is extremely important that you limit permissions to AWS

103
00:06:43.430 --> 00:06:46.240
organizations in your master account.

104
00:06:46.240 --> 00:06:49.100
Otherwise the policies could be detached and that

105
00:06:49.100 --> 00:06:51.500
Guard rail is no longer in place.

106
00:06:51.500 --> 00:06:52.340
For example,

107
00:06:52.340 --> 00:06:55.510
if this was just another user with access to AWS

108
00:06:55.510 --> 00:07:00.540
organizations in the master account, they could detach that policy.

109
00:07:00.540 --> 00:07:08.000
And then a user could try an action that was previously limited by a service control policy, and it would go through

