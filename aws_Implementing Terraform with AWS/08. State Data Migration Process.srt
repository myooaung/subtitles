1
00:00:01,040 --> 00:00:03,090
[Autogenerated] you've been storing your state data locally,

2
00:00:03,090 --> 00:00:06,290
and now you're ready to migrate it to remote state.

3
00:00:06,290 --> 00:00:09,240
That seems kind of complicated, though I'm I'm a little concerned.

4
00:00:09,240 --> 00:00:11,240
This is important information.

5
00:00:11,240 --> 00:00:13,140
How do I even go about this?

6
00:00:13,140 --> 00:00:17,740
The first step in the process is to update your back end configuration.

7
00:00:17,740 --> 00:00:20,300
If you're starting out with a default configuration,

8
00:00:20,300 --> 00:00:22,310
you probably didn't specify a back end.

9
00:00:22,310 --> 00:00:23,300
It also terra form.

10
00:00:23,300 --> 00:00:26,080
Just assumed you're going to use the local back end now.

11
00:00:26,080 --> 00:00:28,590
You actually have to add a back end configuration and

12
00:00:28,590 --> 00:00:30,840
we'll take a look at that in a moment.

13
00:00:30,840 --> 00:00:35,330
Once you have that configuration defined, you're gonna run terra form in it.

14
00:00:35,330 --> 00:00:35,870
And remember,

15
00:00:35,870 --> 00:00:39,940
one of the things that terra form and it does is initializer the back end.

16
00:00:39,940 --> 00:00:43,860
Once it sees there's a new back end, it's going to initialize that one.

17
00:00:43,860 --> 00:00:47,930
And it's also going to ask you Hey, I see you have state data already.

18
00:00:47,930 --> 00:00:51,640
Would you like to migrate that data from where it is to where

19
00:00:51,640 --> 00:00:53,820
you have now defined the back end to be,

20
00:00:53,820 --> 00:00:59,040
and if you say yes, it'll seamlessly move that state data over.

21
00:00:59,040 --> 00:01:01,120
I will say, as a precautionary measure.

22
00:01:01,120 --> 00:01:05,180
I highly recommend backing up the state before you do the

23
00:01:05,180 --> 00:01:07,740
migration in case anything goes wrong.

24
00:01:07,740 --> 00:01:10,540
You don't wanna lose any of that data.

25
00:01:10,540 --> 00:01:13,030
Now, what does that back end configuration look like?

26
00:01:13,030 --> 00:01:15,340
Let's take a look.

27
00:01:15,340 --> 00:01:20,640
The back end configuration is defined within the ______ form block.

28
00:01:20,640 --> 00:01:24,840
You're going to create a nested block in there that's called back end.

29
00:01:24,840 --> 00:01:27,760
And the label on that will be the type of back end

30
00:01:27,760 --> 00:01:30,540
you're going to use in our case S3.

31
00:01:30,540 --> 00:01:33,290
And you can actually just leave it at that and define the rest

32
00:01:33,290 --> 00:01:36,550
of your configuration information in line.

33
00:01:36,550 --> 00:01:39,040
When you run terra form in it,

34
00:01:39,040 --> 00:01:41,300
you can also choose to include some information in the

35
00:01:41,300 --> 00:01:43,960
back end configuration directly, for instance,

36
00:01:43,960 --> 00:01:46,540
you might hard code the bucket name.

37
00:01:46,540 --> 00:01:48,930
You could also hard code the key name,

38
00:01:48,930 --> 00:01:52,210
and this is gonna be the name of the object and the path to the

39
00:01:52,210 --> 00:01:55,740
object that gets written to the S3 bucket.

40
00:01:55,740 --> 00:01:58,540
And you can also hard code the region in there.

41
00:01:58,540 --> 00:02:02,270
Now note that I'm saying hard coating, which sometimes is not a great thing,

42
00:02:02,270 --> 00:02:05,450
especially if you want your configuration to be dynamic,

43
00:02:05,450 --> 00:02:08,340
so you might choose not to set some of these things.

44
00:02:08,340 --> 00:02:08,870
The other thing.

45
00:02:08,870 --> 00:02:11,210
You'll notice that I'm not using variables here,

46
00:02:11,210 --> 00:02:15,200
and that's because the initialization process happens before

47
00:02:15,200 --> 00:02:19,220
terra form blows the variables so you can't use any variables

48
00:02:19,220 --> 00:02:22,240
in your back end configuration.

49
00:02:22,240 --> 00:02:24,870
If you want to define some of the values when you're

50
00:02:24,870 --> 00:02:27,340
running your terra form in command,

51
00:02:27,340 --> 00:02:31,370
all you have to do is specify dash back end dash config and then

52
00:02:31,370 --> 00:02:34,330
give the key value pair that you want to define.

53
00:02:34,330 --> 00:02:37,860
So if we were using our infrastructure profile for authentication,

54
00:02:37,860 --> 00:02:40,440
we could do profile equals infra,

55
00:02:40,440 --> 00:02:44,640
and it will know to use that for our back end in figuration.

56
00:02:44,640 --> 00:02:47,750
Let's go over to V s code and we're gonna go through the

57
00:02:47,750 --> 00:02:56,000
process of migrating the local state for our Dev vpc to the S3 bucket that we just created

