WEBVTT
1
00:00:01.140 --> 00:00:04.820
[Autogenerated] If you were just defining a very basic provider for a W s,

2
00:00:04.820 --> 00:00:10.090
you could simply say provider A W s with the curly braces and that's it and

3
00:00:10.090 --> 00:00:14.040
specify the rest of the settings through environment variables.

4
00:00:14.040 --> 00:00:18.680
Now that would create a default provider that has no name associated with it.

5
00:00:18.680 --> 00:00:22.270
Now let's say we wanted to add another provider to the mix that uses,

6
00:00:22.270 --> 00:00:24.800
say, a different A W s account.

7
00:00:24.800 --> 00:00:28.700
Okay, now are things are getting interesting in our provider.

8
00:00:28.700 --> 00:00:31.440
We have an argument called the alias,

9
00:00:31.440 --> 00:00:35.840
and the alias is kind of the name of that instantiate of the provider.

10
00:00:35.840 --> 00:00:39.910
Most objects in terra form follow the format of name,

11
00:00:39.910 --> 00:00:42.980
type of object and then a name label for the object.

12
00:00:42.980 --> 00:00:44.850
But that is not the case for providers.

13
00:00:44.850 --> 00:00:48.540
The way that you give a name label to a provider is through that

14
00:00:48.540 --> 00:00:51.840
alias meta argument and then within their we can,

15
00:00:51.840 --> 00:00:56.610
specify the region as well as the profile in our security credentials

16
00:00:56.610 --> 00:01:00.840
that we want to use for this particular provider.

17
00:01:00.840 --> 00:01:04.700
Another way to specify an instance of a provider is

18
00:01:04.700 --> 00:01:07.010
once again giving it an alias,

19
00:01:07.010 --> 00:01:10.830
say prod east because we want to use this instance of the

20
00:01:10.830 --> 00:01:14.300
provider for our production East deployment and then

21
00:01:14.300 --> 00:01:17.490
specifying a region for this provider, which would be the U.

22
00:01:17.490 --> 00:01:20.640
S East one region for AWS.

23
00:01:20.640 --> 00:01:21.580
So, as you can see,

24
00:01:21.580 --> 00:01:25.720
you can either differentiate on the AWS account or you could

25
00:01:25.720 --> 00:01:29.840
differentiate on the region or you could do both.

26
00:01:29.840 --> 00:01:34.640
Now, how do you references these aliases within your configuration?

27
00:01:34.640 --> 00:01:38.140
Let's take a look at how you do it for a resource.

28
00:01:38.140 --> 00:01:39.600
If we're defining a resource,

29
00:01:39.600 --> 00:01:43.790
let's say in I am role called SEC role within the

30
00:01:43.790 --> 00:01:45.640
configuration block of that resource,

31
00:01:45.640 --> 00:01:49.010
we're going to provide the argument provider and

32
00:01:49.010 --> 00:01:50.780
reference the instance of the A.

33
00:01:50.780 --> 00:01:54.690
W s provider by doing a W s dot the alias that we've

34
00:01:54.690 --> 00:01:58.440
assigned so a W s dot security in this case.

35
00:01:58.440 --> 00:02:00.240
So that's how you do it for a resources.

36
00:02:00.240 --> 00:02:03.840
And this same pattern works for data sources.

37
00:02:03.840 --> 00:02:08.100
If we were trying to do this for a module, think about what's in a module.

38
00:02:08.100 --> 00:02:11.580
You may have one or more providers in a module,

39
00:02:11.580 --> 00:02:16.030
so you have to give it a map of providers that you want to use

40
00:02:16.030 --> 00:02:20.370
that maps the provider inside the module to the instance of the

41
00:02:20.370 --> 00:02:23.840
provider in your main configuration.

42
00:02:23.840 --> 00:02:24.750
How would we do that?

43
00:02:24.750 --> 00:02:26.430
Well, the argument is providers,

44
00:02:26.430 --> 00:02:31.040
and then we provide it with a map of the provider name within the module.

45
00:02:31.040 --> 00:02:33.760
In this case, for the VPC, it's just called a W s.

46
00:02:33.760 --> 00:02:36.380
It's the default provider and then we can make it

47
00:02:36.380 --> 00:02:40.040
equal to a W s dot prod Azure east.

48
00:02:40.040 --> 00:02:42.640
If there were multiple providers in the module,

49
00:02:42.640 --> 00:02:45.980
you would add an additional entry in this map for each of those

50
00:02:45.980 --> 00:02:48.690
providers where you wanted to use these alias.

51
00:02:48.690 --> 00:02:50.420
If you don't provide anything,

52
00:02:50.420 --> 00:02:53.300
it assumes you want to use the default provider you've

53
00:02:53.300 --> 00:02:56.740
defined in your main configuration.

54
00:02:56.740 --> 00:02:59.340
Getting back to our example,

55
00:02:59.340 --> 00:03:03.790
we want to deploy this set of IPCs to two different regions.

56
00:03:03.790 --> 00:03:07.430
So we're going to make use of that alias argument and also make

57
00:03:07.430 --> 00:03:15.000
use of the region setting within the provider. Why don't we go over to V s code and see how we would go about that

