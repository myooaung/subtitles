1
00:00:01,540 --> 00:00:03,000
[Autogenerated] So as you can see in the slide,

2
00:00:03,000 --> 00:00:05,810
we've created our group, our policies and our role.

3
00:00:05,810 --> 00:00:10,180
Now we need to create that security vpc that we're going to do the peering with.

4
00:00:10,180 --> 00:00:12,040
So let's go back to the S code.

5
00:00:12,040 --> 00:00:16,770
Go ahead and hide the command window and we'll close out these files

6
00:00:16,770 --> 00:00:22,190
just to remove some of the clutter and the folder were interested in

7
00:00:22,190 --> 00:00:28,160
now is four dash sec cache VPC go and open the main on that All this is

8
00:00:28,160 --> 00:00:31,860
doing is creating a security VPC So it's almost the same exact

9
00:00:31,860 --> 00:00:35,440
configuration as the Dev VPC,

10
00:00:35,440 --> 00:00:38,640
except we're going to submit different variables for it.

11
00:00:38,640 --> 00:00:42,730
So if we open up the dot t f bars we can see that we're setting a different

12
00:00:42,730 --> 00:00:46,370
VPC cider range and a different range for the public.

13
00:00:46,370 --> 00:00:50,640
Sub nets were also creating some private sub nets and some interest sub nets.

14
00:00:50,640 --> 00:00:55,090
Those are different sub net types that are available in the VPC module.

15
00:00:55,090 --> 00:01:00,570
So we're using 172.16 address space for all of these

16
00:01:00,570 --> 00:01:04,640
different sub nets going back to the main.

17
00:01:04,640 --> 00:01:08,220
We're gonna go ahead and scroll down here to providers and

18
00:01:08,220 --> 00:01:10,160
here we can see that for the provider.

19
00:01:10,160 --> 00:01:12,730
We're specifying the profile SEC.

20
00:01:12,730 --> 00:01:15,390
So now we know that we're dealing with the security account.

21
00:01:15,390 --> 00:01:20,090
This VPC will be created in that security account and the

22
00:01:20,090 --> 00:01:23,470
rest of it is the same as the Dev VPC.

23
00:01:23,470 --> 00:01:25,540
We get our availability zones,

24
00:01:25,540 --> 00:01:30,130
we create the security VPC with all of those settings and then finally,

25
00:01:30,130 --> 00:01:30,770
at the bottom,

26
00:01:30,770 --> 00:01:34,260
we output that bpc IDE because we're going to need that

27
00:01:34,260 --> 00:01:36,940
to set up the peering relationship.

28
00:01:36,940 --> 00:01:38,510
So let's open up our commands.

29
00:01:38,510 --> 00:01:39,840
Txt!

30
00:01:39,840 --> 00:01:41,920
And this is basically the same as before.

31
00:01:41,920 --> 00:01:44,880
We'll run Terra form in it plan and apply.

32
00:01:44,880 --> 00:01:49,140
So let's go ahead and run through that very quickly,

33
00:01:49,140 --> 00:01:52,960
and I better get in the right directory or this is not gonna work out very well.

34
00:01:52,960 --> 00:01:54,000
There we do.

35
00:01:54,000 --> 00:01:59,170
Okay, Terra form in it and go ahead and copy Terra form plan.

36
00:01:59,170 --> 00:02:02,540
While it's doing that.

37
00:02:02,540 --> 00:02:03,190
Now we do.

38
00:02:03,190 --> 00:02:07,680
We'll go ahead and run that and finally we'll run terra form apply

39
00:02:07,680 --> 00:02:18,140
once the plan has been generated successfully.

40
00:02:18,140 --> 00:02:21,170
All right, go ahead and run terra form apply,

41
00:02:21,170 --> 00:02:26,180
and that's going to create that security VPC in the separate

42
00:02:26,180 --> 00:02:29,770
security account and boom that's done already.

43
00:02:29,770 --> 00:02:33,330
Let's go ahead and grab that vpc IDE because we're going to need

44
00:02:33,330 --> 00:02:37,540
that for the last portion of this process.

45
00:02:37,540 --> 00:02:39,720
And this is where we're going to peer.

46
00:02:39,720 --> 00:02:42,610
Are Dev vpc with this security?

47
00:02:42,610 --> 00:02:47,000
Vpc How are we going to do that? Let's take a look.

