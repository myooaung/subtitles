WEBVTT
X-TIMESTAMP-MAP=LOCAL:00:00:00.000,MPEGTS:0

00:00:00.000 --> 00:00:08.950
Now it's a moment toe actually invoke the author service least authors business logic.

00:00:08.950 --> 00:00:12.210
So if you're calling the purpose video,

00:00:12.210 --> 00:00:15.660
we set up this corresponding method.

00:00:15.660 --> 00:00:22.950
Find all on the outer service and we'll need toe invoke it under our control.

00:00:22.950 --> 00:00:26.590
So is there something like this?

00:00:26.590 --> 00:00:28.280
If in terms,

00:00:28.280 --> 00:00:32.550
name equals least autres,

00:00:32.550 --> 00:00:49.450
let's invoke the auto service least daughters intent business logic.

00:00:49.450 --> 00:00:53.950
If not,

00:00:53.950 --> 00:01:09.600
let's return a new response entity the string and with the message request could not be

00:01:09.600 --> 00:01:15.070
process and the http status.

00:01:15.070 --> 00:01:18.350
Okay,

00:01:18.350 --> 00:01:22.080
okay.

00:01:22.080 --> 00:01:24.650
So in order to achieve this,

00:01:24.650 --> 00:01:31.550
we first need to import the all four service.

00:01:31.550 --> 00:01:32.410
Actually,

00:01:32.410 --> 00:01:36.450
injector service over here is in the auto or dot notation,

00:01:36.450 --> 00:01:41.670
private auto or service oak or service.

00:01:41.670 --> 00:01:47.250
Okay.

00:01:47.250 --> 00:01:53.140
And world need to use a string.

00:01:53.140 --> 00:02:00.320
Let's call it ought or Jason Response that will evoked up auto or service.

00:02:00.320 --> 00:02:08.240
And this metal comes from the Diallo flow app.

00:02:08.240 --> 00:02:11.750
Since author service extends their workflow app,

00:02:11.750 --> 00:02:14.950
hand the request,

00:02:14.950 --> 00:02:24.250
but the and the let's sit the name for the new metal that were create.

00:02:24.250 --> 00:02:31.950
This method needs to extract the the headers from the request.

00:02:31.950 --> 00:02:35.190
So hand the request.

00:02:35.190 --> 00:02:39.050
You actually requires this type off method.

00:02:39.050 --> 00:02:47.650
We will implement the corresponding business logic for it over here at the bottom.

00:02:47.650 --> 00:02:52.510
So let's do this.

00:02:52.510 --> 00:03:12.280
This first add a comment So this method construct map off headers that will be sent to are

00:03:12.280 --> 00:03:15.650
intense business logic,

00:03:15.650 --> 00:03:21.950
so they will have a private map off string string.

00:03:21.950 --> 00:03:39.470
Get head towards map and this receives the http service request request That's import the

00:03:39.470 --> 00:03:39.950
map.

00:03:39.950 --> 00:03:44.880
And now let's create Ah,

00:03:44.880 --> 00:03:48.950
maps ring sitting Heather's map,

00:03:48.950 --> 00:03:52.250
you hash map.

00:03:52.250 --> 00:03:58.750
So these Heather Heather's map will be returned from this method.

00:03:58.750 --> 00:04:02.050
We'll need the enumeration,

00:04:02.050 --> 00:04:05.130
the scarlet headers,

00:04:05.130 --> 00:04:11.550
Heather name admiration that gets the request.

00:04:11.550 --> 00:04:23.180
Get heather names so we need toe either it over this enumeration and construct the headers

00:04:23.180 --> 00:04:32.250
map with the key and value from each er element so long as the base.

00:04:32.250 --> 00:04:38.580
While Heather name and admiration has more elements that's first retrieved.

00:04:38.580 --> 00:04:48.650
The key string Heather Name admiration that get next element.

00:04:48.650 --> 00:04:56.950
So these two determines the next element and we also need toe extract value from the

00:04:56.950 --> 00:04:58.810
request.

00:04:58.810 --> 00:05:04.250
Get Heather and we added the key s perimeter.

00:05:04.250 --> 00:05:14.050
Now let's add this key value under the header Snap and returned the head.

00:05:14.050 --> 00:05:17.360
Her smell okay,

00:05:17.360 --> 00:05:18.600
this method is complete.

00:05:18.600 --> 00:05:24.890
And you see let's go here.

00:05:24.890 --> 00:05:25.490
Up.

00:05:25.490 --> 00:05:32.750
You see that the get headers map does not show us a warning sign.

00:05:32.750 --> 00:05:37.950
So once again,

00:05:37.950 --> 00:05:39.450
we have here the authors,

00:05:39.450 --> 00:05:43.530
Jason response that will be returned from the outer service.

00:05:43.530 --> 00:05:50.670
The next step is to create a new response entity basically toe create the actual response

00:05:50.670 --> 00:05:54.050
that will be sent toe Google home.

00:05:54.050 --> 00:05:57.680
Google Home A system?

00:05:57.680 --> 00:06:00.430
Yes.

00:06:00.430 --> 00:06:07.850
What contained A J son Return from the author service and also http status with okay.

00:06:07.850 --> 00:06:17.850
Asked at the scoop that's also fix this Ah,

00:06:17.850 --> 00:06:31.360
this error Since we have the new return statement and this is on marriageable gold gay,

00:06:31.360 --> 00:06:36.480
we shouldn't remove this And now we can save this controller.

00:06:36.480 --> 00:06:40.440
So once again,

00:06:40.440 --> 00:06:50.440
when we broke these least authors and titi we have the business Rajic for the author

00:06:50.440 --> 00:06:51.060
service.

00:06:51.060 --> 00:07:04.410
Now I want to move this least authors string under ah intent to teal class since we will

00:07:04.410 --> 00:07:14.710
need to avoid any any sort off typos that we mike my toe ad So let's use a constant value

00:07:14.710 --> 00:07:16.450
for this instead.

00:07:16.450 --> 00:07:16.810
Awfully,

00:07:16.810 --> 00:07:17.780
store pores.

00:07:17.780 --> 00:07:29.170
Let's use the intent to till least though towards constant good.

00:07:29.170 --> 00:07:33.930
Let's save the control and go under the auto or service and instead,

00:07:33.930 --> 00:07:38.750
off the least daughters set us for Intend Perimeter.

00:07:38.750 --> 00:07:47.550
Let's use that constant once again and also for the logging message.

00:07:47.550 --> 00:07:54.290
A tent until least daughters.

00:07:54.290 --> 00:08:01.550
So under the actual control,

00:08:01.550 --> 00:08:05.150
we have the business logic implemented over here.

00:08:05.150 --> 00:08:12.050
Now the next step is to show the least daughters intent in action.

00:08:12.050 --> 00:08:23.950
We'll need to navigate the fulfillment and set up a Web hook over here.

