1
00:00:00,900 --> 00:00:01,240
[Autogenerated] Okay,

2
00:00:01,240 --> 00:00:05,850
let's dive into Shared resource is so now that we have all

3
00:00:05,850 --> 00:00:09,450
of the other capabilities out of the way and we understand

4
00:00:09,450 --> 00:00:13,900
them and how to use them, I want to talk about documents now.

5
00:00:13,900 --> 00:00:18,540
Documents under shared resource is have been mentioned several times.

6
00:00:18,540 --> 00:00:23,300
And that's because they are critical to how Systems Manager works.

7
00:00:23,300 --> 00:00:29,450
All of these commands that we looked at run based on an S S M document.

8
00:00:29,450 --> 00:00:31,220
And there are several different types there.

9
00:00:31,220 --> 00:00:37,700
Session policy, run command, and even change calendar documents.

10
00:00:37,700 --> 00:00:38,050
Now,

11
00:00:38,050 --> 00:00:41,430
documents like we saw in the presentation can be

12
00:00:41,430 --> 00:00:44,540
written in the amel or in Jason.

13
00:00:44,540 --> 00:00:48,210
So it offers some flexibility and allows you to write

14
00:00:48,210 --> 00:00:50,600
in whichever syntax you prefer.

15
00:00:50,600 --> 00:00:54,540
Now, this is the default screen here, and you can see we have owned by Amazon.

16
00:00:54,540 --> 00:00:56,340
That loads right away.

17
00:00:56,340 --> 00:00:59,390
And what we're going to do here is I'm going to create

18
00:00:59,390 --> 00:01:02,740
my own document to show how it works.

19
00:01:02,740 --> 00:01:05,130
So what I did is I went ahead.

20
00:01:05,130 --> 00:01:08,850
This is the default version that AWS provides us,

21
00:01:08,850 --> 00:01:12,320
and this is that same create image automation that we

22
00:01:12,320 --> 00:01:15,840
used previously in earlier clips.

23
00:01:15,840 --> 00:01:18,770
It basically has us provide an instance,

24
00:01:18,770 --> 00:01:23,480
I d a role, Ah, bullion for rebooting or not to reboot.

25
00:01:23,480 --> 00:01:25,250
And then it creates an image.

26
00:01:25,250 --> 00:01:30,250
So it creates an AM I based off the instance I d that we supply Now.

27
00:01:30,250 --> 00:01:34,500
What I did is I made my own version building off of that,

28
00:01:34,500 --> 00:01:36,150
and we added some more details,

29
00:01:36,150 --> 00:01:39,480
So you can see we now have this AM I name section

30
00:01:39,480 --> 00:01:41,640
that lives within this document.

31
00:01:41,640 --> 00:01:46,930
It's optional, and we provide a default of parole site supersecret image.

32
00:01:46,930 --> 00:01:50,500
Also, you'll notice under main steps right here.

33
00:01:50,500 --> 00:01:55,110
I added a change calendar check for this document.

34
00:01:55,110 --> 00:01:58,620
So the very first step it's going to check the change

35
00:01:58,620 --> 00:02:01,040
calendar that we have in place.

36
00:02:01,040 --> 00:02:04,500
And if the desired value is met, which is open,

37
00:02:04,500 --> 00:02:06,980
it's going to go on to the next step and create this

38
00:02:06,980 --> 00:02:10,240
image here similar to what we did before.

39
00:02:10,240 --> 00:02:15,190
But if the change calendar state is actually closed, it's going to fail.

40
00:02:15,190 --> 00:02:15,620
Now.

41
00:02:15,620 --> 00:02:18,440
I just have a board on failure right here,

42
00:02:18,440 --> 00:02:22,420
but in a normal use case, you'd want to more than likely,

43
00:02:22,420 --> 00:02:27,370
go ahead and go to a different step that handles that resolution.

44
00:02:27,370 --> 00:02:30,670
For the sake of this demo, to keep it a little bit shorter.

45
00:02:30,670 --> 00:02:32,970
I just went ahead and chose aboard.

46
00:02:32,970 --> 00:02:35,960
So what I want to do here is I'm gonna go ahead and copy all

47
00:02:35,960 --> 00:02:39,950
this code and let's go up to create automation.

48
00:02:39,950 --> 00:02:42,240
I'm gonna give my document a name,

49
00:02:42,240 --> 00:02:45,800
and that brings us to the builder or editor selection.

50
00:02:45,800 --> 00:02:47,820
So this is a newer feature.

51
00:02:47,820 --> 00:02:54,640
S s M now allows us to use this builder section to build out essentially this

52
00:02:54,640 --> 00:02:59,510
script in a friendly manner so you can see the assumed role,

53
00:02:59,510 --> 00:03:03,290
the outputs, input parameters, etcetera.

54
00:03:03,290 --> 00:03:07,440
Everything that we defined over here is in a nice and

55
00:03:07,440 --> 00:03:10,520
pretty gooey that we can use if needed.

56
00:03:10,520 --> 00:03:10,770
Now,

57
00:03:10,770 --> 00:03:17,370
I do recommend that you always put your config files in some type of repository.

58
00:03:17,370 --> 00:03:22,840
So my suggestion is to always figure out how to code it in Jason or Jahmal.

59
00:03:22,840 --> 00:03:24,640
That way you conversion control.

60
00:03:24,640 --> 00:03:27,300
What's being deployed now?

61
00:03:27,300 --> 00:03:29,890
One Brill equal feature here is this mark down?

62
00:03:29,890 --> 00:03:32,220
I'm not gonna go into death on mark down,

63
00:03:32,220 --> 00:03:35,650
but this allows us to build in a description and you can

64
00:03:35,650 --> 00:03:38,430
see the preview over here on the right.

65
00:03:38,430 --> 00:03:42,340
That describes what this document is doing now What I want

66
00:03:42,340 --> 00:03:44,820
to do is I'm gonna actually click editor.

67
00:03:44,820 --> 00:03:48,770
And what this does is brings me to the document editor screen.

68
00:03:48,770 --> 00:03:53,060
And when I click edit, it's gonna say, Hey, if you do this, you can't go back.

69
00:03:53,060 --> 00:03:53,710
So I'm gonna click.

70
00:03:53,710 --> 00:03:54,790
OK,

71
00:03:54,790 --> 00:03:58,940
so what I'm gonna do is I'm gonna get rid of all of this paste in my Jason

72
00:03:58,940 --> 00:04:02,740
code that we had and I'm gonna click on Create Automation.

73
00:04:02,740 --> 00:04:03,460
There you go.

74
00:04:03,460 --> 00:04:04,310
Success.

75
00:04:04,310 --> 00:04:08,600
So now if I goto owned by me, you'll see our document over here,

76
00:04:08,600 --> 00:04:10,520
Secret Image Creator.

77
00:04:10,520 --> 00:04:12,250
So we have our description.

78
00:04:12,250 --> 00:04:14,940
The different steps that occur,

79
00:04:14,940 --> 00:04:19,440
we can view the different versions under here and here.

80
00:04:19,440 --> 00:04:23,180
We can look at the content of the document and we can look at

81
00:04:23,180 --> 00:04:26,880
details now under details really quickly.

82
00:04:26,880 --> 00:04:32,200
This is where you can share your document with other AWS accounts

83
00:04:32,200 --> 00:04:35,030
so you can specify your account numbers here,

84
00:04:35,030 --> 00:04:38,990
or you can just make it public for the general public to use.

85
00:04:38,990 --> 00:04:41,930
So if you had a centralized account that hosted all

86
00:04:41,930 --> 00:04:44,310
of your systems manager documents,

87
00:04:44,310 --> 00:04:47,300
you could share it out to your organizational units

88
00:04:47,300 --> 00:04:48,640
that belonged to your company.

89
00:04:48,640 --> 00:04:51,640
So you have a central location to manage them.

90
00:04:51,640 --> 00:04:52,890
Now, I'm gonna go ahead.

91
00:04:52,890 --> 00:04:55,150
I'm gonna go back to description,

92
00:04:55,150 --> 00:04:58,280
and I want to just load really quickly change calendar.

93
00:04:58,280 --> 00:05:02,430
So let me open up a new tab, and I just want to show you what I've done.

94
00:05:02,430 --> 00:05:06,280
I created this global Mantex ________ calendar and you'll

95
00:05:06,280 --> 00:05:09,390
see at the top it's open by default.

96
00:05:09,390 --> 00:05:13,840
So that means events can occur any time outside of our event.

97
00:05:13,840 --> 00:05:15,380
Windows, remember?

98
00:05:15,380 --> 00:05:18,040
And what I did is I created this little black out

99
00:05:18,040 --> 00:05:21,010
period from today through Saturday.

100
00:05:21,010 --> 00:05:24,880
So in theory, when I run this document, it should fail.

101
00:05:24,880 --> 00:05:26,450
So let's just go ahead and try it.

102
00:05:26,450 --> 00:05:29,240
I'm gonna goto execute automation.

103
00:05:29,240 --> 00:05:33,210
It brings us to our automation screen that we've seen before.

104
00:05:33,210 --> 00:05:37,680
I'm gonna go ahead and fill out these values really quickly.

105
00:05:37,680 --> 00:05:42,220
I'll go down the execute and there we go.

106
00:05:42,220 --> 00:05:45,700
So now what I'll do is I'll pause this clip and let this run,

107
00:05:45,700 --> 00:05:48,350
and then when it's done, will resume, all right?

108
00:05:48,350 --> 00:05:50,270
That was actually extremely fast.

109
00:05:50,270 --> 00:05:53,060
You can see that we have an overall status of failed,

110
00:05:53,060 --> 00:05:57,310
and it's our first step, which is our check calendar that failed.

111
00:05:57,310 --> 00:05:58,920
So if I go into our step,

112
00:05:58,920 --> 00:06:02,730
i d We can see our failure details and you can see it's saying,

113
00:06:02,730 --> 00:06:08,580
Hey, the property value we got was closed and your desired output is open,

114
00:06:08,580 --> 00:06:11,830
so we're gonna go ahead aboard like you specified.

115
00:06:11,830 --> 00:06:16,940
So that's how we can look in deeper to the failure messages that SSN provides.

116
00:06:16,940 --> 00:06:19,750
Now, if I go back to our change calendar,

117
00:06:19,750 --> 00:06:24,040
let me go ahead and raise this ________ period.

118
00:06:24,040 --> 00:06:26,460
So now we should be open to do things.

119
00:06:26,460 --> 00:06:34,750
I'm gonna go back toe automation and I'm gonna redo that automation task.

120
00:06:34,750 --> 00:06:40,680
I'll fill out the same values and let's click execute.

121
00:06:40,680 --> 00:06:42,960
So once again, I'll pause really quickly.

122
00:06:42,960 --> 00:06:47,340
And once this is complete, we'll pick back up and start talking about it.

123
00:06:47,340 --> 00:06:48,380
Alright, Awesome.

124
00:06:48,380 --> 00:06:53,900
So you can see we've had success on both steps and if I goto outputs,

125
00:06:53,900 --> 00:06:57,600
you can see we created a new image and it's available.

126
00:06:57,600 --> 00:07:01,710
So if I go to a m eyes which I opened up in the meantime,

127
00:07:01,710 --> 00:07:06,340
you can see our brand new image that we just created.

128
00:07:06,340 --> 00:07:09,680
So this automation document that we created work,

129
00:07:09,680 --> 00:07:13,330
so that's how you can create your own document in order

130
00:07:13,330 --> 00:07:16,680
to run commands in systems manager.

131
00:07:16,680 --> 00:07:19,030
Now, one last thing really quickly.

132
00:07:19,030 --> 00:07:22,130
I want to show you how we can make different versions.

133
00:07:22,130 --> 00:07:28,080
So if I go in here, I can goto actions, and I can create a new version.

134
00:07:28,080 --> 00:07:33,040
So if I goto editor, let me edit and accept,

135
00:07:33,040 --> 00:07:36,670
and I want to go over here and I created an additional Jason

136
00:07:36,670 --> 00:07:41,040
file that has an additional parameter in it,

137
00:07:41,040 --> 00:07:44,070
and I'm gonna click on create new version.

138
00:07:44,070 --> 00:07:49,440
All right, so now if I goto owned by me secret image creator,

139
00:07:49,440 --> 00:07:51,870
you can see our default version is one.

140
00:07:51,870 --> 00:07:56,070
But we have a 2nd 1 that we can choose to make Number

141
00:07:56,070 --> 00:07:58,670
two our second version to fall.

142
00:07:58,670 --> 00:08:02,120
I goto actions and set a new default version I

143
00:08:02,120 --> 00:08:05,490
would select to and then click set.

144
00:08:05,490 --> 00:08:06,230
And there we go.

145
00:08:06,230 --> 00:08:11,990
So now if I go back in, you can see the default version is too.

146
00:08:11,990 --> 00:08:16,440
And the difference here is I added a am I description

147
00:08:16,440 --> 00:08:18,880
that we can populate as a parameter.

148
00:08:18,880 --> 00:08:20,840
Everything else is the same.

149
00:08:20,840 --> 00:08:26,570
So that's how you conversion control within AWS to a certain degree.

150
00:08:26,570 --> 00:08:30,940
Your different documents that you use for automation purposes

151
00:08:30,940 --> 00:08:38,000
Let's go ahead and wrap up this clip here, we'll have a quick module wrap up and then we'll move on.

