1
00:00:00,940 --> 00:00:04,080
[Autogenerated] for our Pizza Lovers application we want to create and

2
00:00:04,080 --> 00:00:09,630
configure a VPC to deploy R E C two database and Alaska cache

3
00:00:09,630 --> 00:00:13,230
instances into for the purposes of this course.

4
00:00:13,230 --> 00:00:17,920
We're going to create a simple VPC with two public subnets.

5
00:00:17,920 --> 00:00:23,740
We will subsequently launch all instances into one or both of the sub nets.

6
00:00:23,740 --> 00:00:27,490
This diagram shows a rough architecture for what we're aiming

7
00:00:27,490 --> 00:00:29,940
for throughout the rest of this course.

8
00:00:29,940 --> 00:00:32,360
In this clip we're going to lay the groundwork and

9
00:00:32,360 --> 00:00:35,080
build out the VPc and submit layer.

10
00:00:35,080 --> 00:00:40,840
We'll start in the AWS management console, go to the VPc dashboard.

11
00:00:40,840 --> 00:00:45,940
The first thing we'll take a look at is the resources by region section.

12
00:00:45,940 --> 00:00:48,240
You may notice something a little odd here.

13
00:00:48,240 --> 00:00:51,990
It looks like you've already got a VPc some sub nets and

14
00:00:51,990 --> 00:00:55,240
other resources that someone created.

15
00:00:55,240 --> 00:00:56,000
In truth,

16
00:00:56,000 --> 00:01:02,540
this is a default VPC that is pre existing when you create your AWS account.

17
00:01:02,540 --> 00:01:06,390
We could easily use this default VPC for our resources

18
00:01:06,390 --> 00:01:08,440
but where would the fun be in that?

19
00:01:08,440 --> 00:01:13,320
We want to make one from scratch to get the full experience so ensure

20
00:01:13,320 --> 00:01:16,440
your in the correct region you want to be working in.

21
00:01:16,440 --> 00:01:17,050
Believe me,

22
00:01:17,050 --> 00:01:20,840
I confused myself switching regions all the time at work

23
00:01:20,840 --> 00:01:24,540
then click the launch VPc wizard button.

24
00:01:24,540 --> 00:01:27,710
Our first option is to decide what kind of VPC

25
00:01:27,710 --> 00:01:31,340
configuration we want amazon to start us with.

26
00:01:31,340 --> 00:01:35,690
Here's the private public subnets set up I mentioned and you can also see

27
00:01:35,690 --> 00:01:41,330
options to create a VPc with a VPN connection will pick the configuration

28
00:01:41,330 --> 00:01:44,380
that is pre selected and the easiest as well.

29
00:01:44,380 --> 00:01:48,520
A single public submit click select now.

30
00:01:48,520 --> 00:01:52,150
We've got more details to enter the first is the IP cider

31
00:01:52,150 --> 00:01:55,640
block for the resources created in this VPc.

32
00:01:55,640 --> 00:01:58,420
This is the range of IPs that will be assigned to

33
00:01:58,420 --> 00:02:01,240
created resources For our purposes.

34
00:02:01,240 --> 00:02:05,840
The 10.0.0.0 block is fine.

35
00:02:05,840 --> 00:02:11,140
Now let's give this VPc a name to distinguish it from the default VPc.

36
00:02:11,140 --> 00:02:14,390
Obviously it'll be named Pizza Vpc.

37
00:02:14,390 --> 00:02:16,940
So enter that here.

38
00:02:16,940 --> 00:02:19,940
Now we'll configure our public, submit.

39
00:02:19,940 --> 00:02:24,430
The cider block for the sub Net is a subset of the V p c

40
00:02:24,430 --> 00:02:30,440
block which will be 10.0 dot 0.0 slash 24.

41
00:02:30,440 --> 00:02:34,310
This basically means the resources launched in this sub net will

42
00:02:34,310 --> 00:02:41,750
have a range from 10.0 dot 0.0 to 10.0 dot 0.2 55.

43
00:02:41,750 --> 00:02:45,360
For their I P addresses for availability zone,

44
00:02:45,360 --> 00:02:49,840
you may see something different than I do since our regions might differ.

45
00:02:49,840 --> 00:02:54,310
These availability zones are basically data centers that have superfast

46
00:02:54,310 --> 00:02:58,440
connections to each other but are physically isolated,

47
00:02:58,440 --> 00:03:01,910
deploying two different availability zones is done to

48
00:03:01,910 --> 00:03:04,870
add redundancy in case of a disaster.

49
00:03:04,870 --> 00:03:09,740
We will end up adding another sub net after this Wizard is done

50
00:03:09,740 --> 00:03:12,840
which will be in a different availability zone.

51
00:03:12,840 --> 00:03:17,140
So select the first availability zone that you have available

52
00:03:17,140 --> 00:03:20,370
in this drop-down for the sub net name.

53
00:03:20,370 --> 00:03:22,850
Let's name IT Pizza Sub Net.

54
00:03:22,850 --> 00:03:28,350
A The other options will stay as they are and now click create

55
00:03:28,350 --> 00:03:32,030
VPc after the wizard has done its magic.

56
00:03:32,030 --> 00:03:35,070
You'll be at a confirmation screen saying you are ready

57
00:03:35,070 --> 00:03:38,440
to launch instances into this VPc.

58
00:03:38,440 --> 00:03:41,680
The routing table the VPC was created with currently

59
00:03:41,680 --> 00:03:43,600
doesn't have any way for instance,

60
00:03:43,600 --> 00:03:47,910
is to connect to the internet so we do need to add an entry to

61
00:03:47,910 --> 00:03:51,720
the routing table to allow all traffic to go through an internet

62
00:03:51,720 --> 00:03:54,140
gateway into the public internet.

63
00:03:54,140 --> 00:03:58,580
An internet gateway is basically just a connection to the internet.

64
00:03:58,580 --> 00:04:02,020
There isn't really any configuration beyond that.

65
00:04:02,020 --> 00:04:04,550
In the VPc list, select the I.

66
00:04:04,550 --> 00:04:04,870
D.

67
00:04:04,870 --> 00:04:09,620
Next to Pizza VPc and then in the details section,

68
00:04:09,620 --> 00:04:12,640
click on the link under route table.

69
00:04:12,640 --> 00:04:17,140
This will take us to the round table used by our VPc.

70
00:04:17,140 --> 00:04:23,560
Click on the routes tab here is the single entry that says any IP address

71
00:04:23,560 --> 00:04:28,940
referencing our local VPc cider block should resolve locally.

72
00:04:28,940 --> 00:04:30,160
Let's make a new entry.

73
00:04:30,160 --> 00:04:34,520
So click edit routes and then add route In the

74
00:04:34,520 --> 00:04:43,940
destination field will put 0.0.0.0/0, which basically means anywhere.

75
00:04:43,940 --> 00:04:50,040
Then in the target column, expand it and select the internet gateway option.

76
00:04:50,040 --> 00:04:53,660
You should have one result available to select here with an I D.

77
00:04:53,660 --> 00:04:56,020
Starting with I G W.

78
00:04:56,020 --> 00:05:00,640
This is the pre created internet gateway for your VPc,

79
00:05:00,640 --> 00:05:04,840
click on it and then click save routes.

80
00:05:04,840 --> 00:05:10,640
Now we've configured our VPc to let outgoing traffic reach the outside world.

81
00:05:10,640 --> 00:05:14,160
We will be launching our application using auto scaling groups

82
00:05:14,160 --> 00:05:17,900
and so I want us to get some experience deploying into multiple

83
00:05:17,900 --> 00:05:21,720
availability zones because the sub net can only exist in a

84
00:05:21,720 --> 00:05:23,560
single availability zone.

85
00:05:23,560 --> 00:05:28,740
We will need to create more subnets to deploy into different availability zones.

86
00:05:28,740 --> 00:05:30,010
Let's add one more public,

87
00:05:30,010 --> 00:05:33,640
submit to cover another availability zone in our region,

88
00:05:33,640 --> 00:05:36,940
click on the submit section on the left of the screen,

89
00:05:36,940 --> 00:05:39,700
then click create sub net first,

90
00:05:39,700 --> 00:05:44,200
you'll select the VPc where the sub net will be created in the drop down,

91
00:05:44,200 --> 00:05:46,440
select Pizza Vpc.

92
00:05:46,440 --> 00:05:50,840
Next give the, submit a name, enter Pizza dash,

93
00:05:50,840 --> 00:05:54,720
submit dash, b in the availability zone.

94
00:05:54,720 --> 00:05:55,310
Drop down,

95
00:05:55,310 --> 00:05:59,630
select a different availability zone than the one that you selected

96
00:05:59,630 --> 00:06:03,640
with the sub net that we created in the VPc wizard.

97
00:06:03,640 --> 00:06:08,880
Now the cider block is pretty important since we don't want the IP

98
00:06:08,880 --> 00:06:13,230
ranges to be conflicting between the two subnets here,

99
00:06:13,230 --> 00:06:19,660
enter 10.0 dot 1.0 slash 24.

100
00:06:19,660 --> 00:06:25,500
This will give us another different set of 255 I P addresses

101
00:06:25,500 --> 00:06:28,340
that are different than the other sub net.

102
00:06:28,340 --> 00:06:30,840
Now click create sub net.

103
00:06:30,840 --> 00:06:34,900
If you remove the submit IDE filter in the sub net list,

104
00:06:34,900 --> 00:06:39,340
you should now see both Pizza sub nets that we created and you

105
00:06:39,340 --> 00:06:43,440
can see that they're IP ranges are different.

106
00:06:43,440 --> 00:06:46,780
There is one more thing that we need to do with subnets.

107
00:06:46,780 --> 00:06:50,380
Both of our public subnets have the auto assign public

108
00:06:50,380 --> 00:06:54,160
IP address is setting configured to disabled.

109
00:06:54,160 --> 00:06:59,400
This means that if resources such as ec two instances are launched in that

110
00:06:59,400 --> 00:07:03,480
submit they will not get a public IP address assigned to them.

111
00:07:03,480 --> 00:07:05,230
If we leave it as it is,

112
00:07:05,230 --> 00:07:11,030
we would need to add a nat gateway to our VPc to enable these

113
00:07:11,030 --> 00:07:15,960
instances to connect to the outside internet while the way that we

114
00:07:15,960 --> 00:07:20,350
have it is the most secure way to set up your sub net not

115
00:07:20,350 --> 00:07:22,650
assigning those public iP addresses,

116
00:07:22,650 --> 00:07:28,810
it does introduce a problem for us and that's cost nat gateways are

117
00:07:28,810 --> 00:07:34,290
really expensive and so I want to avoid creating one in this course

118
00:07:34,290 --> 00:07:39,570
instead will enable public I P addresses for our subnets and that will

119
00:07:39,570 --> 00:07:41,850
make sure that our instances have them,

120
00:07:41,850 --> 00:07:47,350
they'll need this later specifically when they're connecting to S3 now

121
00:07:47,350 --> 00:07:51,210
this does make those ec two instances less secure,

122
00:07:51,210 --> 00:07:57,020
it makes our VPc less secure because then those resources are accessible from

123
00:07:57,020 --> 00:08:02,120
the outside internet because of the public IP address but it's going to be

124
00:08:02,120 --> 00:08:06,050
more convenient for us in this course so just keep in mind the security angle

125
00:08:06,050 --> 00:08:08,840
when you're doing this in the real world,

126
00:08:08,840 --> 00:08:13,420
go ahead and select the first Pizza submit and then select the

127
00:08:13,420 --> 00:08:19,330
actions drop-down and select the modify auto assign IP settings

128
00:08:19,330 --> 00:08:25,270
option Check the box for enable auto assign public I P V four

129
00:08:25,270 --> 00:08:28,070
addresses then you can click save,

130
00:08:28,070 --> 00:08:31,680
that's all you have to do now un select that first,

131
00:08:31,680 --> 00:08:33,570
submit and select the other.

132
00:08:33,570 --> 00:08:37,040
Pizza, submit and just follow those same steps.

133
00:08:37,040 --> 00:08:41,730
This is going to configure it so that when we launch any instances

134
00:08:41,730 --> 00:08:45,820
or resources into either one of these sub nets,

135
00:08:45,820 --> 00:08:48,240
they'll be automatically assigned public I.

136
00:08:48,240 --> 00:08:52,960
P addresses and they'll be able to connect to the outside internet,

137
00:08:52,960 --> 00:08:59,710
which is going to be a lot easier for us in this course now we have a VPC with

138
00:08:59,710 --> 00:09:04,560
two public subnets in different availability zones were all configured and

139
00:09:04,560 --> 00:09:08,340
ready to begin creating instances in these sub nets.

140
00:09:08,340 --> 00:09:11,760
B P C is much deeper than what we've been able to cover here,

141
00:09:11,760 --> 00:09:20,000
but you should have a good grasp on the basics and feel comfortable trying out some more complicated configurations by yourself.

