1
00:00:01,640 --> 00:00:05,270
In this demonstration, we're going to work with Amazon CloudWatch logs.

2
00:00:05,270 --> 00:00:08,140
We'll be working with the logs through the AWS Console.

3
00:00:08,140 --> 00:00:11,740
To follow along with this demonstration, you will need an AWS account.

4
00:00:11,740 --> 00:00:14,110
Now we do encourage you to follow along with demonstrations,

5
00:00:14,110 --> 00:00:18,930
but be warned, anything that you configure inside of AWS may cost you money.

6
00:00:18,930 --> 00:00:20,830
So if you do follow along with this demonstration,

7
00:00:20,830 --> 00:00:23,800
remember to remove everything you've configured once you have finished with it,

8
00:00:23,800 --> 00:00:26,740
or you may incur charges.

9
00:00:26,740 --> 00:00:30,340
So here we are then in the CloudWatch dashboard.

10
00:00:30,340 --> 00:00:33,640
And as you can see, we're in the London region.

11
00:00:33,640 --> 00:00:38,740
When you first connect to the CloudWatch dashboard, you get this Overview view.

12
00:00:38,740 --> 00:00:43,700
If I select the drop‑down list next to Overview,

13
00:00:43,700 --> 00:00:47,020
and then choose an AWS service, for example,

14
00:00:47,020 --> 00:00:49,940
Lambda,

15
00:00:49,940 --> 00:00:52,920
we can now see a customize dashboard showing us metric

16
00:00:52,920 --> 00:00:55,540
information for our Lambda functions.

17
00:00:55,540 --> 00:01:02,640
If I click on the drop‑down again, and this time choose Kinesis Data Streams,

18
00:01:02,640 --> 00:01:05,940
and now we can see a customize dashboard for Kinesis.

19
00:01:05,940 --> 00:01:09,290
You'll find that most AWS results you deploy present a

20
00:01:09,290 --> 00:01:11,200
customized dashboard in this way.

21
00:01:11,200 --> 00:01:15,120
The dashboard you can see might be different per region depending on the

22
00:01:15,120 --> 00:01:17,910
resources you have deployed to that specific region.

23
00:01:17,910 --> 00:01:21,160
On the left‑hand side here, we can see Dashboards.

24
00:01:21,160 --> 00:01:23,450
Here we can create our own customized dashboards with the

25
00:01:23,450 --> 00:01:25,640
metrics we're particularly interest in.

26
00:01:25,640 --> 00:01:30,840
We can see Alarms, Billing, Metrics, and Events,

27
00:01:30,840 --> 00:01:34,540
all of which were are going to be looking at in later modules of this course.

28
00:01:34,540 --> 00:01:40,540
What we're interested in right now is Logs, so let's select Logs.

29
00:01:40,540 --> 00:01:43,340
So here in Logs, we can create Log groups,

30
00:01:43,340 --> 00:01:46,240
View Log groups or Launch Logs Insights.

31
00:01:46,240 --> 00:01:50,040
We can also select Log groups and Insights from the left‑hand side.

32
00:01:50,040 --> 00:01:53,640
Let's select Log groups.

33
00:01:53,640 --> 00:01:55,940
Here we have three log groups.

34
00:01:55,940 --> 00:01:59,440
Two of these log groups have been generated by Lambda,

35
00:01:59,440 --> 00:02:03,740
and each one of your log groups represents a unique lambda function.

36
00:02:03,740 --> 00:02:06,240
We then have a log group that was generated by CloudTrail.

37
00:02:06,240 --> 00:02:09,540
Now the log groups in your account might vary depending on which

38
00:02:09,540 --> 00:02:12,110
services you have logging into CloudWatch.

39
00:02:12,110 --> 00:02:17,440
I'll select the aws/lambda/KinesisLOG group, and let's see what's inside there.

40
00:02:17,440 --> 00:02:21,340
So we can see some general information, we can see the Creation time,

41
00:02:21,340 --> 00:02:24,140
any metric filters that have been created for this log group,

42
00:02:24,140 --> 00:02:27,340
and over on the right‑hand side, we can see the log group ARN.

43
00:02:27,340 --> 00:02:29,880
This is the Amazon Resource Name that we can use

44
00:02:29,880 --> 00:02:32,410
send log streams to this log group.

45
00:02:32,410 --> 00:02:34,140
If we scroll down a little bit,

46
00:02:34,140 --> 00:02:37,460
we can see that this log group contains a single log stream.

47
00:02:37,460 --> 00:02:41,440
So let's let that log stream and see what's inside there.

48
00:02:41,440 --> 00:02:44,140
So in here we can see lots of log entries.

49
00:02:44,140 --> 00:02:45,740
If I scroll down,

50
00:02:45,740 --> 00:02:49,810
we can see hundreds and hundreds of log entries inside this log stream.

51
00:02:49,810 --> 00:02:53,830
If I select one of these entries and expand its details,

52
00:02:53,830 --> 00:02:55,840
we can see additional information.

53
00:02:55,840 --> 00:03:00,620
So CloudWatch logs contains log groups, log streams, and logs events.

54
00:03:00,620 --> 00:03:03,610
Now you can search through here by using the event

55
00:03:03,610 --> 00:03:06,640
filler, or if I select Actions,

56
00:03:06,640 --> 00:03:11,510
we can select View in Logs Insights. So let's select that. Here in Log

57
00:03:11,510 --> 00:03:15,010
Insights then, we can see that log insights has been filtered to our specific

58
00:03:15,010 --> 00:03:18,510
log stream, and it's going to sort the logs based on two fields, timestamp

59
00:03:18,510 --> 00:03:21,240
and message. Notice the custom times above.

60
00:03:21,240 --> 00:03:23,040
If we run in the query now,

61
00:03:23,040 --> 00:03:26,340
it going to show us events that occurred in the last hour.

62
00:03:26,340 --> 00:03:27,440
Let's try that.

63
00:03:27,440 --> 00:03:31,710
If I select Run query, and we wait for the query to run,

64
00:03:31,710 --> 00:03:34,840
and as you can see, there's no results.

65
00:03:34,840 --> 00:03:41,240
Let's change the time frame to 12 hours, and run the query again.

66
00:03:41,240 --> 00:03:44,740
So now you can see it's found 389 messages..

67
00:03:44,740 --> 00:03:46,140
If I scroll down,

68
00:03:46,140 --> 00:03:48,720
we can see those messages, and if i expand one of

69
00:03:48,720 --> 00:03:50,980
them, we can see additional details.

70
00:03:50,980 --> 00:03:51,740
Log Insights, then,

71
00:03:51,740 --> 00:03:54,380
is a really useful way for searching through the logs that we've

72
00:03:54,380 --> 00:03:57,600
collected in CloudWatch, where you can customize the queries and

73
00:03:57,600 --> 00:04:00,540
search for any of the fields inside our logs.

74
00:04:00,540 --> 00:04:02,520
We'll have my information about the format of these

75
00:04:02,520 --> 00:04:05,340
queries coming up in later modules.

76
00:04:05,340 --> 00:04:06,320
For now,

77
00:04:06,320 --> 00:04:12,020
let's change the fields that our query is using from timestamp and message to

78
00:04:12,020 --> 00:04:19,280
timestamp and requestId. So if I scroll up, and make the change, and then run

79
00:04:19,280 --> 00:04:24,350
the query again. It just takes a minute to run, and when complete, if I scroll

80
00:04:24,350 --> 00:04:29,160
down, now we can see the message is sorted based on the timestamp and requestId.

81
00:04:29,160 --> 00:04:33,540
I expand one of these messages, we can still see the message details.

82
00:04:33,540 --> 00:04:37,140
If there's a particular query that you constantly run against your logs,

83
00:04:37,140 --> 00:04:42,240
you can say Save. So if I select that, so we can give our query a nice name,

84
00:04:42,240 --> 00:04:46,020
we can add the query to a sub folder if we need, and if I scroll down,

85
00:04:46,020 --> 00:04:50,340
we can see the query we're going to save. If I select Save, we now have a

86
00:04:50,340 --> 00:04:54,250
saved query that we can use over and over again without having to type in

87
00:04:54,250 --> 00:04:57,540
the details. You'll find these under queries.

88
00:04:57,540 --> 00:04:59,240
So if I select Queries,

89
00:04:59,240 --> 00:05:02,750
you can see the GloboQuery1 saved, and through that again, you

90
00:05:02,750 --> 00:05:07,740
would select that, and it would be loaded into the dashboard.

91
00:05:07,740 --> 00:05:10,240
Notice here you've got other sample queries.

92
00:05:10,240 --> 00:05:15,840
So if we expand Lambda, here are a few options for Lamda functions.

93
00:05:15,840 --> 00:05:19,960
Let's click Apply, and if we just expand the real estate a little bit,

94
00:05:19,960 --> 00:05:22,640
we can see that appear in Log Insights.

95
00:05:22,640 --> 00:05:27,940
You can search through individual logs streams or through an entire log group.

96
00:05:27,940 --> 00:05:29,730
We can see a history of the queries that have been

97
00:05:29,730 --> 00:05:33,240
run, and we can export the results.

98
00:05:33,240 --> 00:05:35,850
Here we can see we can download the results or copy the

99
00:05:35,850 --> 00:05:38,950
results to the clipboard in various formats.

100
00:05:38,950 --> 00:05:39,940
Throughout this course,

101
00:05:39,940 --> 00:05:43,540
we're going to keep coming back to log groups, running queries.

102
00:05:43,540 --> 00:05:51,000
As we get further into the course, we'll learn more and more about logs, as well as the other features of CloudWatch.

