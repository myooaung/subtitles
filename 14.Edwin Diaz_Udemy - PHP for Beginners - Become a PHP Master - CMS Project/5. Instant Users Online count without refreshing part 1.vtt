WEBVTT
1
00:00:00.480 --> 00:00:02.670
All right welcome back my dear student.

2
00:00:02.850 --> 00:00:07.920
So if you are enjoying the course or you have enjoyed the course so far you're going to enjoy this course

3
00:00:07.980 --> 00:00:14.190
a lot more now because I'm going to show you how to add another feature to this mess that is going to

4
00:00:14.190 --> 00:00:16.020
take your skills to another level.

5
00:00:16.200 --> 00:00:19.510
What it is instant results from the database.

6
00:00:19.510 --> 00:00:20.040
All right.

7
00:00:20.100 --> 00:00:27.060
So while we are going to be doing today is something is simply this we have these users online functionality

8
00:00:27.060 --> 00:00:29.130
right here but it's not instant.

9
00:00:29.280 --> 00:00:34.980
So that means that I have to refresh my page to have this change to another number when somebody comes

10
00:00:34.980 --> 00:00:36.860
visit my site and I see a mess.

11
00:00:37.050 --> 00:00:38.160
That's not very good.

12
00:00:38.160 --> 00:00:38.910
Right.

13
00:00:38.940 --> 00:00:44.320
So I mean if somebody comes to our site we want to see this number change right in front of our eyes

14
00:00:44.370 --> 00:00:47.840
but it's not changing unless we refresh the page.

15
00:00:47.860 --> 00:00:48.540
All right.

16
00:00:48.900 --> 00:00:53.590
So this notion I do that I want to show you too that you can add it to your post to your comments uses

17
00:00:53.600 --> 00:00:56.750
whatever you want to happen instantly on your Web site.

18
00:00:57.000 --> 00:00:59.590
I'm telling you right now this is going to help you.

19
00:00:59.600 --> 00:01:03.810
Now we are going to be using Ageod's but I'm not going to explain it.

20
00:01:03.870 --> 00:01:04.280
Why.

21
00:01:04.280 --> 00:01:09.000
Because I have another course on that and on that cause I can show you everything you need to know about

22
00:01:09.110 --> 00:01:12.050
outs and see how powerful it is.

23
00:01:12.060 --> 00:01:13.120
So you can look that up.

24
00:01:13.110 --> 00:01:14.100
All right.

25
00:01:14.100 --> 00:01:14.830
Choose me.

26
00:01:15.150 --> 00:01:16.460
So let's get to work.

27
00:01:16.500 --> 00:01:18.450
So is there are a couple of things that we are going to be doing.

28
00:01:18.450 --> 00:01:20.740
First of all I'm going to explain it right now.

29
00:01:20.760 --> 00:01:27.010
We've got to we're going to be mortifying our users online function that's located in functions at BHB.

30
00:01:27.030 --> 00:01:27.630
Right.

31
00:01:27.930 --> 00:01:30.590
So this function we created the function real quick.

32
00:01:30.660 --> 00:01:32.740
Let me just give you a recap of what is doing.

33
00:01:33.030 --> 00:01:33.830
This is me.

34
00:01:33.960 --> 00:01:35.770
We're setting some variables here.

35
00:01:35.790 --> 00:01:41.320
Right now we are inserting to the database to the table in the database.

36
00:01:41.340 --> 00:01:44.560
So we are setting a session for that person.

37
00:01:44.880 --> 00:01:52.490
We are using the time to calculate if the person has been on our Web site more than 30 seconds or less

38
00:01:52.490 --> 00:01:53.450
in 30 seconds.

39
00:01:53.550 --> 00:01:54.550
That's what we're doing.

40
00:01:54.840 --> 00:01:55.860
All right.

41
00:01:55.860 --> 00:01:57.970
So we are inserting that.

42
00:01:58.060 --> 00:02:02.670
All right if that person is new and you are not new we are updating it.

43
00:02:02.740 --> 00:02:03.100
All right.

44
00:02:03.100 --> 00:02:07.140
And we are just updating to our new session there.

45
00:02:07.140 --> 00:02:11.910
So every time we see somebody that's been there for a while and they just refresh We keep updating it

46
00:02:12.030 --> 00:02:21.510
and then here what we're doing basically selecting whoever is less longer than the time variable that

47
00:02:21.510 --> 00:02:22.070
we got.

48
00:02:22.200 --> 00:02:31.800
So if they're on the Web site if their time is bigger than this all right then we know that they are

49
00:02:31.920 --> 00:02:33.670
not active.

50
00:02:34.080 --> 00:02:37.440
So we only given them 30 seconds to do something on the site.

51
00:02:37.590 --> 00:02:38.950
So that's what this function is doing.

52
00:02:39.030 --> 00:02:40.100
If you remember.

53
00:02:40.290 --> 00:02:46.560
So now we are actually echoing the results from that function right here.

54
00:02:46.560 --> 00:02:48.960
That's what you see up here.

55
00:02:48.990 --> 00:02:50.130
That's the number you see there.

56
00:02:50.160 --> 00:02:51.290
Right.

57
00:02:52.230 --> 00:02:53.620
And that's it.

58
00:02:53.640 --> 00:02:58.920
All right so basically what we're going to be doing is sending requests via agents and getting information

59
00:02:58.950 --> 00:03:00.260
instant from the database.

60
00:03:00.330 --> 00:03:04.100
So that way we don't have to refresh because BHB you have to refresh so.

61
00:03:04.610 --> 00:03:10.620
So the first thing that we are going to be doing is writing our javascript and we're going to be using

62
00:03:10.620 --> 00:03:12.300
Jake werie as a framework to do that.

63
00:03:12.420 --> 00:03:14.380
And we have been using that already.

64
00:03:14.430 --> 00:03:22.370
So right below writing scripts in admin J.S. and scripts dodgiest we're going to start writing.

65
00:03:22.600 --> 00:03:23.580
Right.

66
00:03:23.870 --> 00:03:24.520
Right.

67
00:03:24.660 --> 00:03:29.080
All the way below this document dump ready.

68
00:03:29.090 --> 00:03:29.910
All right.

69
00:03:30.090 --> 00:03:35.970
The first function here would be we're going to create a function in javascript and B could be called

70
00:03:35.970 --> 00:03:36.760
anything you want.

71
00:03:36.780 --> 00:03:40.900
I'm going to call it low users on line you know.

72
00:03:40.920 --> 00:03:43.590
Right.

73
00:03:43.660 --> 00:03:47.170
And this is where we're going to be sending in Ajax requests.

74
00:03:47.340 --> 00:03:52.560
We're going to use Jake where we get it right in here.

75
00:03:52.560 --> 00:03:57.510
The first parameter and I wanted to explain I told you just because I already have another course.

76
00:03:57.600 --> 00:04:01.840
But basically this is going to send out requests.

77
00:04:02.160 --> 00:04:09.540
I get requests to do two functions at BHB but we don't want to just send it to functions at BHB because

78
00:04:09.540 --> 00:04:11.280
we have a lot of functions there right.

79
00:04:11.280 --> 00:04:16.700
So we need to actually create some type of functionality that we detect.

80
00:04:16.770 --> 00:04:21.570
So we're going to send a parameter so we're going to put a question mark here and I'm going to say something

81
00:04:21.570 --> 00:04:22.360
like.

82
00:04:22.620 --> 00:04:23.230
Right.

83
00:04:23.300 --> 00:04:27.250
Maybe on line users equals result.

84
00:04:27.270 --> 00:04:31.590
So this is going to be a read get requests and then the second parameter will be a function that we

85
00:04:31.590 --> 00:04:35.530
want to execute when we get that response back from the server.

86
00:04:35.820 --> 00:04:39.570
And this put a variable here to bring up for for us.

87
00:04:39.590 --> 00:04:41.720
All right.

88
00:04:41.730 --> 00:04:48.200
And once we get that we're sort of somewhere right so let's say for example we create a container.

89
00:04:48.210 --> 00:04:51.910
Well let's actually do it right now real quick.

90
00:04:51.960 --> 00:04:55.200
Let's go to our navigation right here.

91
00:04:55.260 --> 00:04:59.760
I'm going to come in this hour just in case you want to use as I say said yes you do that you might

92
00:04:59.760 --> 00:05:02.080
want to use the old functionality for some reason.

93
00:05:02.100 --> 00:05:02.970
I don't know why but

94
00:05:05.880 --> 00:05:07.220
I'm going to leave it there.

95
00:05:07.230 --> 00:05:07.520
All right.

96
00:05:07.530 --> 00:05:11.300
So here I'm going to take this BHB out of there because we don't need that anymore.

97
00:05:11.550 --> 00:05:18.350
I'm going to create a span tag with a class of something they're just going to say users on line.

98
00:05:18.360 --> 00:05:18.860
There you go.

99
00:05:18.870 --> 00:05:22.260
That's going to be the container where we put all the information in there.

100
00:05:22.530 --> 00:05:26.710
All right let's go back to scripts and here we're going to target that container.

101
00:05:26.710 --> 00:05:31.160
Let's make sure that we have the same exact class.

102
00:05:31.260 --> 00:05:35.050
So let's go to scripts that uses on line.

103
00:05:35.130 --> 00:05:37.070
And we're going to use another function here.

104
00:05:37.160 --> 00:05:42.450
Quartet's and we're getting that data in that container.

105
00:05:43.050 --> 00:05:44.840
All right.

106
00:05:44.840 --> 00:05:46.620
Beautiful.

107
00:05:46.680 --> 00:05:48.440
Now we need to.

108
00:05:48.750 --> 00:05:49.250
All right.

109
00:05:49.500 --> 00:05:58.290
We need to call this function right after we create it right here like this.

110
00:05:58.290 --> 00:05:59.050
All right.

111
00:05:59.280 --> 00:06:00.990
We'll come back to this a little later.

112
00:06:00.990 --> 00:06:05.910
But right now actually you know what I'm going to cut this video short because it's getting too big

113
00:06:05.910 --> 00:06:08.280
rides getting too too large.

114
00:06:08.490 --> 00:06:12.600
But anyway in the next lecture we'll continue working with this and I'll show you how it's done.

115
00:06:12.600 --> 00:06:12.950
All right.

116
00:06:12.960 --> 00:06:13.480
Perfect.

117
00:06:13.590 --> 00:06:14.440
Thank you so much.

118
00:06:14.590 --> 00:06:16.020
And I see you in the next lecture
