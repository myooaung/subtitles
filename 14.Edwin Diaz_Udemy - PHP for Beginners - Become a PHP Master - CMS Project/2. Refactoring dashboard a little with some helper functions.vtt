WEBVTT
1
00:00:01.000 --> 00:00:06.040
Hey guys just like I mentioned before and we want we want to personalize our admin.

2
00:00:06.040 --> 00:00:11.890
So am I actually going to make sure that we are there.

3
00:00:12.310 --> 00:00:15.990
OK let's look again real quick.

4
00:00:17.840 --> 00:00:23.600
And we can see now that this is our old admen another one that I show you in the demo for this section

5
00:00:23.630 --> 00:00:28.090
but the old one the one that does not have any personal data.

6
00:00:28.270 --> 00:00:29.910
Ok for the user.

7
00:00:29.930 --> 00:00:40.590
So right now let's go back to my let's go to our BHB admin for yet and there's a couple of things that

8
00:00:40.590 --> 00:00:41.540
we need to do there.

9
00:00:41.560 --> 00:00:43.140
And that's not it.

10
00:00:43.140 --> 00:00:49.550
Let me see if I can get the right BHB at men right here.

11
00:00:49.980 --> 00:00:54.230
So let's go to the CMOS real quick and we're going to see the structure here because we're going to

12
00:00:54.230 --> 00:00:58.460
have to change a couple of things here in the polls.

13
00:00:58.460 --> 00:01:01.460
We know already that we added a user ID.

14
00:01:01.780 --> 00:01:06.620
OK later on we're going to have to add these are the two other tables.

15
00:01:06.920 --> 00:01:07.790
OK.

16
00:01:08.090 --> 00:01:10.350
But I just want to make sure that I see all these data.

17
00:01:10.360 --> 00:01:12.930
Here are some posts.

18
00:01:13.070 --> 00:01:15.460
We've got some likes.

19
00:01:15.740 --> 00:01:21.620
And we also have some comments OK made by the same person.

20
00:01:21.650 --> 00:01:22.280
All right.

21
00:01:22.370 --> 00:01:23.210
So just checking.

22
00:01:23.210 --> 00:01:24.300
I did a little bit.

23
00:01:24.620 --> 00:01:25.580
Let's go back here.

24
00:01:25.580 --> 00:01:34.450
Let's open our editor Let's go to our editor and I should actually put this somewhere else.

25
00:01:34.500 --> 00:01:35.920
Let's go here.

26
00:01:37.290 --> 00:01:39.810
We go now.

27
00:01:40.040 --> 00:01:51.460
Let's start by creating a dashboard to separate our personal data from the dashboard data for all users.

28
00:01:51.630 --> 00:01:58.040
OK we do have a dashboard ready like this but I want to create another page for our personal data.

29
00:01:58.160 --> 00:02:03.290
As a matter of fact we are going to be putting our personal data in the end it's of admin and then a

30
00:02:03.290 --> 00:02:05.560
dashboard for everybody else.

31
00:02:05.600 --> 00:02:06.150
OK.

32
00:02:06.370 --> 00:02:12.760
So let's go back here to the in this and I'm going to do a control or command a

33
00:02:16.800 --> 00:02:18.470
let's come back here.

34
00:02:18.470 --> 00:02:24.900
My thing is not working for some reason.

35
00:02:24.950 --> 00:02:26.080
There we go.

36
00:02:26.590 --> 00:02:31.460
Let's do this do a Save As and I'm going to call it dashboard.

37
00:02:32.050 --> 00:02:32.940
OK.

38
00:02:32.950 --> 00:02:34.560
So now we have those two there.

39
00:02:35.860 --> 00:02:39.570
Now there are a couple of things that I want to fix on this speech before we started doing anything

40
00:02:39.580 --> 00:02:40.210
OK.

41
00:02:40.360 --> 00:02:50.100
Just because I think we can do better with this page so let's go ahead and play around with this a little

42
00:02:50.100 --> 00:02:50.560
bit.

43
00:02:50.560 --> 00:02:51.240
Let's

44
00:02:56.810 --> 00:02:58.010
let's see here.

45
00:02:58.010 --> 00:03:01.100
The first thing that I want to do.

46
00:03:01.100 --> 00:03:05.800
One of the first things is create a user name function for this.

47
00:03:05.800 --> 00:03:09.660
This code here is too ugly to to beg I'm going to delete this.

48
00:03:10.070 --> 00:03:11.990
But let's go back to get to this here.

49
00:03:11.990 --> 00:03:17.410
Another thing that I want to do is put a link here for the separation.

50
00:03:17.540 --> 00:03:18.390
OK.

51
00:03:18.590 --> 00:03:23.070
So that's let's go to navigation real quick.

52
00:03:23.070 --> 00:03:32.900
Includes open these up navigation and make sure you fit so this code here.

53
00:03:34.630 --> 00:03:40.150
But anyway so here I learned I'm going to put my data

54
00:03:42.850 --> 00:03:43.690
my data

55
00:03:46.080 --> 00:03:46.770
and

56
00:03:50.080 --> 00:03:58.220
then I put another link here that is going to be a dashboard.

57
00:03:58.410 --> 00:04:04.480
Now regular users are going to be able to see this if we do or don't do anything right.

58
00:04:04.500 --> 00:04:15.250
So we got to work and a function we do have a function already call it admin somewhere is admin right

59
00:04:15.250 --> 00:04:16.010
here.

60
00:04:16.120 --> 00:04:18.180
What I want to actually make this better.

61
00:04:18.420 --> 00:04:19.750
OK.

62
00:04:19.810 --> 00:04:24.650
This is admin function is not checking to see if the users are logged in.

63
00:04:24.860 --> 00:04:27.760
OK I want to make that better.

64
00:04:27.760 --> 00:04:30.690
We already created some function called log then.

65
00:04:30.770 --> 00:04:32.070
So I'm going to take advantage of that.

66
00:04:32.110 --> 00:04:32.750
OK.

67
00:04:33.130 --> 00:04:35.030
So it's logged in.

68
00:04:35.050 --> 00:04:39.050
Actually it's all together right here.

69
00:04:39.070 --> 00:04:46.790
So we're going to put this in a statement and everything else is going to be in between that.

70
00:04:46.960 --> 00:04:47.660
OK.

71
00:04:49.280 --> 00:04:50.080
That's the first thing.

72
00:04:50.080 --> 00:04:54.150
There's a couple of things that I want to do here.

73
00:04:54.490 --> 00:05:02.300
I want to make a database helper functions section here so I'm going to comment this out.

74
00:05:03.980 --> 00:05:05.890
Helpers database helpers.

75
00:05:07.440 --> 00:05:08.900
Functions just like the

76
00:05:14.550 --> 00:05:18.810
way this this I usually do five on each side.

77
00:05:20.870 --> 00:05:28.230
So we've got a query here that we can use and that would be beautiful because let's go back to that

78
00:05:28.250 --> 00:05:31.020
it's function.

79
00:05:31.300 --> 00:05:33.000
I'm going to move that up a swell

80
00:05:37.710 --> 00:05:43.660
I'm going to make a new section for that but I'm going to move it up to the database because that this

81
00:05:43.670 --> 00:05:45.420
is authentication.

82
00:05:45.860 --> 00:05:53.110
So database helper and we're going to end it right here.

83
00:05:55.640 --> 00:05:58.930
And database help us

84
00:06:02.130 --> 00:06:06.880
her and I'm going to pay it right here.

85
00:06:06.900 --> 00:06:11.890
What I'm going to comment this I'm going to put our indication here.

86
00:06:14.940 --> 00:06:15.210
Oh.

87
00:06:15.300 --> 00:06:19.220
And if I remember how to spell this.

88
00:06:19.240 --> 00:06:20.300
That would be nice.

89
00:06:22.860 --> 00:06:24.460
Of course I'm misspelling it.

90
00:06:27.290 --> 00:06:32.180
I don't have to read the whole function's name your identification.

91
00:06:32.390 --> 00:06:34.210
OK.

92
00:06:34.480 --> 00:06:35.340
There we go.

93
00:06:36.300 --> 00:06:40.480
Oh then I thought I was doing it right.

94
00:06:42.130 --> 00:06:42.870
All right here.

95
00:06:44.820 --> 00:06:45.280
OK.

96
00:06:45.370 --> 00:06:51.220
And then we've got to put authentication here.

97
00:06:51.300 --> 00:06:53.070
There's another thing that I want to do here.

98
00:06:53.070 --> 00:06:58.840
As you can see we can just use that in our function to make this Querrey right.

99
00:07:01.140 --> 00:07:10.240
And and other than that I want to do I want to take disconfirm out of there and I want to put it here.

100
00:07:15.240 --> 00:07:26.830
Matter of fact right here and I make a very very a result and I'm going to return it right here a little

101
00:07:26.830 --> 00:07:28.010
bit more lines of code.

102
00:07:28.030 --> 00:07:32.450
But at the end it's going to help us out better.

103
00:07:32.470 --> 00:07:37.160
We've got to make that query and this is going to be the result.

104
00:07:37.670 --> 00:07:45.690
OK and we sure even you guys one of the reasons why I create these helper functions.

105
00:07:45.690 --> 00:07:47.120
They are easier.

106
00:07:47.120 --> 00:07:51.760
And then we can plug in any other API in the future if we want to change this as well.

107
00:07:51.890 --> 00:07:54.220
For another database.

108
00:07:54.230 --> 00:07:59.690
We can because we have this functions this blogging functions OK these wrappers around my obscure.

109
00:07:59.720 --> 00:08:02.990
Plus this is like a lot a lot a lot of writing right.

110
00:08:03.140 --> 00:08:08.850
So I want to use another here call for each record.

111
00:08:10.340 --> 00:08:18.370
And going out do this and just going to put Actually this this takes a resort right.

112
00:08:21.670 --> 00:08:24.420
And we're going to return this

113
00:08:28.600 --> 00:08:36.160
we go less should be good and we're going to use that here.

114
00:08:36.630 --> 00:08:42.050
And then you can just replace whatever else you guys have anywhere else ok.

115
00:08:42.180 --> 00:08:44.380
I'm just going to make this a little better.

116
00:08:44.430 --> 00:08:45.580
It's going to help us out.

117
00:08:45.630 --> 00:08:54.090
The or the end missing I return statement right here.

118
00:08:55.640 --> 00:08:57.670
I just return false here.

119
00:08:58.710 --> 00:09:02.040
OK perfect.

120
00:09:02.050 --> 00:09:03.000
That looks a lot better.

121
00:09:03.000 --> 00:09:09.090
We don't need this global thing here.

122
00:09:09.120 --> 00:09:10.180
All right.

123
00:09:10.180 --> 00:09:17.200
Now another thing that we don't need is this guy here because we can if we wanted to use this session

124
00:09:17.530 --> 00:09:19.110
right here OK.

125
00:09:19.150 --> 00:09:21.930
If it's low then we know that sesshin exists.

126
00:09:22.000 --> 00:09:24.750
So Miles would just for it here right.

127
00:09:25.080 --> 00:09:27.300
Just do that.

128
00:09:30.230 --> 00:09:31.680
And do a session here

129
00:09:36.380 --> 00:09:39.540
user name.

130
00:09:39.950 --> 00:09:43.850
Now another thing that I want to do real quick.

131
00:09:44.000 --> 00:09:46.030
OK cause maybe we all need a lead on.

132
00:09:46.040 --> 00:09:53.360
But it's a good thing to have is that you know logging that search engine command F here guys in my

133
00:09:53.360 --> 00:10:01.520
editor command effort control f to search for the logged in user and the low end user right here we

134
00:10:01.640 --> 00:10:04.840
have these user ID that we're not doing anything with it.

135
00:10:04.880 --> 00:10:08.810
Why not just make a session for it and have the search the user ID.

136
00:10:08.810 --> 00:10:17.270
Now that we created in the last section OK have it all over our site now.

137
00:10:18.060 --> 00:10:18.890
We're in session.

138
00:10:18.990 --> 00:10:20.240
OK.

139
00:10:20.390 --> 00:10:25.010
That user ID is going to go to their user ID field in the database.

140
00:10:25.340 --> 00:10:25.930
OK.

141
00:10:26.060 --> 00:10:29.390
So basically this user ID is going to be saving this variable.

142
00:10:29.690 --> 00:10:32.780
And we're using that variable to save it in our session.

143
00:10:33.050 --> 00:10:33.460
OK.

144
00:10:33.470 --> 00:10:36.280
So that way we have it anywhere anywhere we want.

145
00:10:36.290 --> 00:10:41.360
So now in the admin or any other function we can look for the user ID instead of the user name which

146
00:10:41.360 --> 00:10:42.610
is more reliable.

147
00:10:42.970 --> 00:10:46.230
OK let's go back to that user.

148
00:10:46.480 --> 00:10:52.780
So we selecting the rule from users where we can say now the user id will you have to log in.

149
00:10:52.780 --> 00:11:00.200
Now keep in mind guys that if you have a running up location already don't do this.

150
00:11:00.280 --> 00:11:06.650
This is going to give them some errors because you have to log out and look back in to make this work.

151
00:11:06.700 --> 00:11:07.570
OK.

152
00:11:07.900 --> 00:11:15.390
So I'm just going to do this because I think the user ID is more reliable than the user name which is

153
00:11:16.680 --> 00:11:22.340
a string of tÃªtes not a number.

154
00:11:22.340 --> 00:11:24.560
So that's pretty cool.

155
00:11:24.560 --> 00:11:26.550
So I need to log in and log them.

156
00:11:26.570 --> 00:11:34.140
Well look mad cow and three.

157
00:11:34.200 --> 00:11:35.100
Right right.

158
00:11:35.460 --> 00:11:37.660
So now this is admitting is good.

159
00:11:37.740 --> 00:11:42.630
Let's go back to navigation real quick in here.

160
00:11:42.810 --> 00:11:47.530
Right now if you notice we are seeing the my data in Dashboard.

161
00:11:47.790 --> 00:11:51.740
I don't know how many users I have of.

162
00:11:51.990 --> 00:11:56.800
Let's see if we have another user somewhere or we have another as where Maria which is a subscriber

163
00:11:56.800 --> 00:11:59.210
as you can see right here.

164
00:11:59.640 --> 00:12:12.320
So Maria's is a subscriber lets local log back out and let's just say Maria one two and three as you

165
00:12:12.320 --> 00:12:13.830
can see Maria I can see this.

166
00:12:13.880 --> 00:12:15.700
We don't want Maria to see that.

167
00:12:15.830 --> 00:12:24.140
So let's use BHB shorthand real quick here to create a conditional statement.

168
00:12:24.200 --> 00:12:31.660
What we say is admin OK when put to calling here we've done this before and the in the web site guys.

169
00:12:31.710 --> 00:12:37.880
And of course so that's when explaining it much Ukraine.

170
00:12:38.190 --> 00:12:39.240
We're going to end it right here.

171
00:12:39.240 --> 00:12:42.320
This is how you do this shorthand if statements.

172
00:12:42.330 --> 00:12:42.630
OK.

173
00:12:42.630 --> 00:12:46.400
So that where you can pool your extra mail in between.

174
00:12:46.590 --> 00:12:47.070
OK.

175
00:12:47.310 --> 00:12:53.370
So then we'll only see if they're admin if I refresh the dashboard no longer there.

176
00:12:53.640 --> 00:12:54.380
Pretty cool stuff.

177
00:12:54.390 --> 00:12:57.630
You can use in your other code too.

178
00:12:57.890 --> 00:12:59.460
OK.

179
00:12:59.910 --> 00:13:02.950
So that's going to take the user to dash 4.

180
00:13:03.630 --> 00:13:11.430
And let's go to that dashboard page and let's do something to differentiate.

181
00:13:11.700 --> 00:13:17.530
Walk onto the admin dash or something like that.

182
00:13:19.000 --> 00:13:20.190
Less refresh.

183
00:13:20.200 --> 00:13:23.320
Well that's let's go back now.

184
00:13:23.650 --> 00:13:26.260
Let's go and try this guy out.

185
00:13:26.650 --> 00:13:28.040
You can see the dash was here.

186
00:13:28.030 --> 00:13:32.650
If I click on it says Welcome to the to the admin dashboard.

187
00:13:33.070 --> 00:13:34.970
I want to do something about this real quick.

188
00:13:35.050 --> 00:13:40.150
Well let's go back to functions to tune.

189
00:13:40.300 --> 00:13:41.010
All right.

190
00:13:41.020 --> 00:13:43.410
We can put that somewhere.

191
00:13:43.600 --> 00:13:49.510
No indication in the general function so let's create another space here.

192
00:13:50.460 --> 00:14:01.310
We're going to call this general helper's just like that.

193
00:14:02.220 --> 00:14:12.150
And then I go back to there and it's admin mean it's this is the first one that I want to attack.

194
00:14:12.340 --> 00:14:14.130
I'm going to take this guy out of here.

195
00:14:16.130 --> 00:14:23.510
And I want to create a forum cold maybe get user name get a user name or something like that.

196
00:14:24.140 --> 00:14:27.990
Well let's do this keep the convention right.

197
00:14:31.170 --> 00:14:38.600
All underscored Dasch or underscores or whatever you want to call that.

198
00:14:38.870 --> 00:14:44.770
Let's go back to functions here.

199
00:14:44.960 --> 00:14:49.100
I got this function get a user name that I want to do something with it.

200
00:14:51.050 --> 00:14:58.060
What I do is I'm going to return this

201
00:15:00.790 --> 00:15:01.710
we can keep it short.

202
00:15:01.760 --> 00:15:04.650
Re the matter of fact we can even make this better.

203
00:15:05.000 --> 00:15:09.140
Let's just do the temporary here real quick.

204
00:15:09.140 --> 00:15:11.630
And this just returned that

205
00:15:16.810 --> 00:15:24.970
time make it in one line you know and if it's not sad we just do know.

206
00:15:25.730 --> 00:15:30.930
OK beautiful you got all of this stuff now.

207
00:15:31.660 --> 00:15:36.490
In the end it's all right there.

208
00:15:36.650 --> 00:15:38.170
We shouldn't see any problems.

209
00:15:38.180 --> 00:15:45.020
Matter of fact let's do let's use a function call Esti or upper to make sure to make sure that this

210
00:15:45.020 --> 00:15:51.210
is all Piquet's on it to come back here.

211
00:15:51.290 --> 00:15:55.710
Refresh Hoopes 931 What did I do.

212
00:16:01.980 --> 00:16:05.310
I don't even see what I did I guess

213
00:16:08.780 --> 00:16:16.420
missing that parentheses right here is fresh.

214
00:16:16.780 --> 00:16:20.640
And now you can see that there my data.

215
00:16:21.030 --> 00:16:21.990
OK.

216
00:16:22.470 --> 00:16:29.580
Is lowercase and Ishwar is still lowercase.

217
00:16:29.650 --> 00:16:34.510
That's because a user name would see that

218
00:16:38.650 --> 00:16:42.520
what went to the Dashrath This is where all the information for every user will be.

219
00:16:42.600 --> 00:16:45.510
And this is the my information.

220
00:16:45.930 --> 00:16:51.320
So let's go back there real quick because I think I didn't do anything there.

221
00:16:55.640 --> 00:17:05.270
There we go if the upper gate user name o is so small it is uppercase is just small.

222
00:17:05.330 --> 00:17:15.650
I want to make a big K and you can use this more to like say add something as refresh and you can see

223
00:17:15.660 --> 00:17:20.460
now that is this upper case ashes.

224
00:17:20.780 --> 00:17:21.190
There we go.

225
00:17:21.190 --> 00:17:23.100
Welcome to admin Edwyn.

226
00:17:23.450 --> 00:17:24.600
Perfect.

227
00:17:24.710 --> 00:17:35.710
You can use this more tax for anything else if you want to Prefect's the user ro my ro admin or something.

228
00:17:42.460 --> 00:17:45.200
So that perfect.

229
00:17:45.220 --> 00:17:50.620
All right so I think it's enough for this starting lecture.

230
00:17:50.620 --> 00:17:53.350
Make sure you organize your code better.

231
00:17:53.350 --> 00:17:54.620
We're going to do that.

232
00:17:54.760 --> 00:17:57.240
You're going to see my code more organized.

233
00:17:57.820 --> 00:17:58.720
OK.

234
00:17:58.720 --> 00:18:00.610
Make sure you do the same for yours.

235
00:18:00.610 --> 00:18:02.280
I'll see you in the next lecture guys.
