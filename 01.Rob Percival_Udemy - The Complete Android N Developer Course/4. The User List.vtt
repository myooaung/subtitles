WEBVTT
1
00:00:00.600 --> 00:00:07.380
OK so we've built our log in and sign up screen now in this video we're going to create the user list

2
00:00:07.440 --> 00:00:10.440
that the user will see when they log in.

3
00:00:10.620 --> 00:00:12.210
So it should be a fairly quick one.

4
00:00:12.450 --> 00:00:17.250
We'll start with a new activity to allow us to show the user list

5
00:00:20.270 --> 00:00:24.620
so new activity and MGE activity.

6
00:00:26.840 --> 00:00:27.680
We'll call this

7
00:00:30.930 --> 00:00:32.110
use illicit activity

8
00:00:35.370 --> 00:00:38.650
and we'll just add a simple list fee

9
00:00:44.580 --> 00:00:45.210
they would get

10
00:00:49.490 --> 00:00:50.770
more make it full with

11
00:00:54.770 --> 00:00:57.050
and we'll call it user list.

12
00:01:03.250 --> 00:01:03.950
OK.

13
00:01:04.440 --> 00:01:06.620
Then we'll set up our list for you.

14
00:01:08.630 --> 00:01:13.530
Call it use LSV.

15
00:01:13.910 --> 00:01:16.330
It's going to be a list view.

16
00:01:18.560 --> 00:01:27.460
From find VBI ID results don't I.D. don't use a few.

17
00:01:27.850 --> 00:01:31.240
And then we'll have our users list

18
00:01:34.140 --> 00:01:35.510
which all set up opin

19
00:01:39.660 --> 00:01:52.270
is going to be in a list of strings called uses.

20
00:01:52.520 --> 00:01:57.000
They would get some Wilusa I need a re adapter

21
00:02:07.430 --> 00:02:09.150
which we'll call Araya adapter.

22
00:02:14.560 --> 00:02:20.220
Which will be a new array adapter.

23
00:02:20.750 --> 00:02:22.770
And then we'll set that up down here.

24
00:02:27.590 --> 00:02:33.800
So adapter is going to be a new array adapter.

25
00:02:35.930 --> 00:02:38.390
Using this as the context

26
00:02:42.310 --> 00:02:43.690
and then Android

27
00:02:47.980 --> 00:02:51.900
lay out a simple list item one

28
00:02:54.740 --> 00:03:02.400
for the lamp guide and then uses for the matching list to write

29
00:03:05.330 --> 00:03:10.860
and then I use a list you will set the array adapter.

30
00:03:14.320 --> 00:03:18.200
And then we'll just add a very quick use of

31
00:03:24.250 --> 00:03:27.090
to make sure that everything is connected up.

32
00:03:27.100 --> 00:03:32.980
Now of course to be able to see that we need to set up our redirect from the main activity

33
00:03:38.200 --> 00:03:54.400
so let's set up a quick public voyde redirect if logged in and then we'll check to see if we have a

34
00:03:54.430 --> 00:03:59.440
current user.

35
00:03:59.770 --> 00:04:02.910
And if we do we'll set up an intense

36
00:04:06.670 --> 00:04:14.080
new intent with the application context and we want to jump to user list activity class

37
00:04:17.260 --> 00:04:21.430
start activity with the intent

38
00:04:24.900 --> 00:04:27.910
K and we want to do that when they're locked in.

39
00:04:29.690 --> 00:04:35.030
I redirect if logged in when they're signed up.

40
00:04:36.940 --> 00:04:44.720
And also when the app is launched.

41
00:04:44.750 --> 00:04:49.320
OK so let's give that a try.

42
00:04:49.430 --> 00:04:54.080
We should now be jumped over to the user list activity.

43
00:04:54.080 --> 00:04:57.610
Just a single test if that.

44
00:04:57.680 --> 00:05:04.800
While that's loading I'll add a few extra uses for us to send messages to.

45
00:05:05.690 --> 00:05:07.700
So let's do that here.

46
00:05:08.540 --> 00:05:09.470
We've already got Rob

47
00:05:16.930 --> 00:05:18.820
so well at Keston

48
00:05:27.480 --> 00:05:31.870
and then our usual selection will have Tommy

49
00:05:38.450 --> 00:05:39.770
and of course Ralphy

50
00:05:50.010 --> 00:05:51.450
K. back to enter our studio.

51
00:05:51.450 --> 00:05:56.040
Let's just check our list fee and there we go.

52
00:05:56.190 --> 00:06:00.960
So that's all looking good although we've still got the past stars of protecting the title so I'll just

53
00:06:01.410 --> 00:06:03.380
fix that.

54
00:06:07.720 --> 00:06:08.500
OK.

55
00:06:09.410 --> 00:06:19.520
So now we'll get rid of users and test and in fact we'll set it to clear up just in case we've got any

56
00:06:19.520 --> 00:06:20.220
active users.

57
00:06:20.240 --> 00:06:32.990
And then we'll do a quick pass use a query which we do using past query on past uses Hochuli query and

58
00:06:32.990 --> 00:06:43.520
this is going to be I-PASS user don't get queery and we want to find where the user name is not equal

59
00:06:43.520 --> 00:06:44.570
to our current user.

60
00:06:44.570 --> 00:06:54.130
So just play everyone apart from our user say Querrey well not equal to the user name.

61
00:06:54.370 --> 00:07:03.880
And we want that not to be equal to our current user so get current user get used and then run that

62
00:07:03.880 --> 00:07:04.990
in the background.

63
00:07:04.990 --> 00:07:09.840
So I find a background with a new find Colback

64
00:07:12.810 --> 00:07:15.120
and then as usual we'll check to see if

65
00:07:18.050 --> 00:07:29.690
he is now and then if object stock size is greater than zero if it is all loop through it expecting

66
00:07:29.750 --> 00:07:38.830
a bunch of pass uses to be returned I'll call them each user and its objects that we want to leap through.

67
00:07:41.500 --> 00:07:53.390
And we need to do here is add objects to the user's frailest so users start at and we want user don't

68
00:07:53.570 --> 00:07:54.050
get

69
00:07:56.790 --> 00:07:57.300
use the name

70
00:08:00.080 --> 00:08:00.810
simple as that.

71
00:08:00.830 --> 00:08:07.580
And then when we've done that we're going to take our array adapter and notify that the dataset has

72
00:08:07.790 --> 00:08:08.620
changed.

73
00:08:09.910 --> 00:08:13.870
All right let's give it a look.

74
00:08:14.200 --> 00:08:26.280
We should now find that we see three other uses that is cast in Ralphy and tell me only use IList and

75
00:08:26.290 --> 00:08:27.230
there we go.

76
00:08:27.730 --> 00:08:35.140
So there's our use list and while we're here will set up the transition to the chat activity where the

77
00:08:35.140 --> 00:08:38.040
user taps on one of those users.

78
00:08:38.980 --> 00:08:41.410
So let's create a new activity

79
00:08:46.880 --> 00:08:56.450
just the usual empty activity and I'll call this the chat activity and then either end user list activity.

80
00:08:56.840 --> 00:09:00.290
We want to add to our list view

81
00:09:05.780 --> 00:09:08.060
eye on item click listener

82
00:09:12.280 --> 00:09:16.550
it's going to be a new adaptively on item click listener.

83
00:09:17.160 --> 00:09:23.220
And so we want to do is when a user clicks on one of the items we wanted to jump to the chat activity

84
00:09:23.250 --> 00:09:27.180
and send the user name of the user that they tapped on.

85
00:09:27.360 --> 00:09:29.190
So of course we'll do that with an intent

86
00:09:34.550 --> 00:09:42.430
so it will create a new intent using the application context and we want to jump to chat activity.

87
00:09:45.250 --> 00:09:46.480
Dot plus

88
00:09:49.290 --> 00:09:54.100
and then we want to put an extra.

89
00:09:54.620 --> 00:10:02.270
And we want to put the user name and the value that we want to give it is going to be the user name

90
00:10:02.270 --> 00:10:03.650
of the user that they tapped on.

91
00:10:03.650 --> 00:10:04.950
So users don't get.

92
00:10:05.000 --> 00:10:10.820
And then I ibig the rest of the history that was tapped

93
00:10:13.710 --> 00:10:15.800
then we stopped activity

94
00:10:18.590 --> 00:10:31.040
with the intent and find out or we'll do it in chat activity is just get the user that was tapped on

95
00:10:33.880 --> 00:10:37.190
so we'll create an intent which will be get intent

96
00:10:40.300 --> 00:10:40.870
and then

97
00:10:45.120 --> 00:10:55.290
I'll call it active user and this is going to be intent get string extra.

98
00:10:56.030 --> 00:11:00.730
And so you want to get is the user name.

99
00:11:01.440 --> 00:11:03.420
And for now we'll just log

100
00:11:08.860 --> 00:11:11.880
active use up.

101
00:11:11.910 --> 00:11:14.670
OK so let's just try that out.

102
00:11:14.670 --> 00:11:19.730
We should now be able to tap on one of those users and be directed to the chat activity.

103
00:11:19.890 --> 00:11:24.420
And then in the logs see the user name is tapped on.

104
00:11:24.990 --> 00:11:25.690
And we get it.

105
00:11:25.690 --> 00:11:27.220
So let's give it a try.

106
00:11:27.840 --> 00:11:29.870
And yet we've been redirected.

107
00:11:29.940 --> 00:11:32.820
And you can see we've got the user name right there.

108
00:11:33.160 --> 00:11:33.880
Excellent.

109
00:11:35.480 --> 00:11:38.540
Let's just very quickly set the title

110
00:11:42.200 --> 00:11:43.500
of the chat activity.

111
00:11:43.610 --> 00:11:51.660
I'm going to call it chat with and then we'll add the user name right there.

112
00:11:52.790 --> 00:11:53.350
OK.

113
00:11:53.540 --> 00:11:59.840
So now we're ready to build the chat activity which is where we'll have a list view that shows the past

114
00:11:59.870 --> 00:12:03.810
chat between our user and the user that they've selected.

115
00:12:03.980 --> 00:12:05.720
We'll do that in the next video.
