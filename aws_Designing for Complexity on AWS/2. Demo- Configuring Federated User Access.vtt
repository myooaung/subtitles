WEBVTT
1
00:00:02.040 --> 00:00:07.240
[Autogenerated] let's enable a W s single sign on in our AWS organization and

2
00:00:07.240 --> 00:00:13.740
create Federated users and groups in the AWS SSO directory service will then

3
00:00:13.740 --> 00:00:18.940
define permission sets and assigned group access to A W s accounts in the

4
00:00:18.940 --> 00:00:24.810
organization finally will sign in with our Federated User to access the

5
00:00:24.810 --> 00:00:29.340
accounts in our AWS organization.

6
00:00:29.340 --> 00:00:34.440
I'm signed in to the master account of my AWS organization.

7
00:00:34.440 --> 00:00:42.140
Let's go to AWS single sign on and enable AWS sso,

8
00:00:42.140 --> 00:00:47.040
once it is successfully enabled, will need to choose the identity source.

9
00:00:47.040 --> 00:00:50.120
I'm going to leave the default of a W s s s.

10
00:00:50.120 --> 00:00:54.540
So if you have an Active Directory or other identity provider,

11
00:00:54.540 --> 00:00:58.940
this is where you would configure that I'll go ahead and cancel out.

12
00:00:58.940 --> 00:00:59.520
Next.

13
00:00:59.520 --> 00:01:03.540
Let's create some users.

14
00:01:03.540 --> 00:01:06.510
You can send an email to the user or generate a one time

15
00:01:06.510 --> 00:01:09.340
password that you would share with the user.

16
00:01:09.340 --> 00:01:10.210
I'll go ahead and have it.

17
00:01:10.210 --> 00:01:13.440
Send an email to the user.

18
00:01:13.440 --> 00:01:18.590
Next you'll enter the first last and display name for this username member.

19
00:01:18.590 --> 00:01:20.100
This is a directory service.

20
00:01:20.100 --> 00:01:24.740
So this would be like your company directory.

21
00:01:24.740 --> 00:01:27.950
You can add additional information like phone number,

22
00:01:27.950 --> 00:01:32.190
job information address or other preferences that you

23
00:01:32.190 --> 00:01:34.500
may want to associate with this user.

24
00:01:34.500 --> 00:01:38.140
You're just going to fill out the required information, then move on.

25
00:01:38.140 --> 00:01:39.890
We haven't created any groups yet.

26
00:01:39.890 --> 00:01:43.040
You could do that here or wait and do that later.

27
00:01:43.040 --> 00:01:46.240
I'll go ahead and create a group here for this user.

28
00:01:46.240 --> 00:01:52.400
I'll call it administrators I can Select the Administrators Group and that

29
00:01:52.400 --> 00:01:55.530
will associate the user I'm creating with this group.

30
00:01:55.530 --> 00:01:57.040
I'll add the user.

31
00:01:57.040 --> 00:01:58.680
Now the user is created.

32
00:01:58.680 --> 00:02:04.440
I'm going to create a couple of other groups before I add the other two users.

33
00:02:04.440 --> 00:02:05.840
We'll call this one E.

34
00:02:05.840 --> 00:02:12.940
C to access and S3 access.

35
00:02:12.940 --> 00:02:19.440
Let's add a couple of other users with their email and require details,

36
00:02:19.440 --> 00:02:26.800
and I'll assign user one to both the easy to access and the S3 access groups.

37
00:02:26.800 --> 00:02:32.440
I'll create one more user and enter the required information

38
00:02:32.440 --> 00:02:36.840
and assign this user only the S3 access.

39
00:02:36.840 --> 00:02:41.340
From here, you can see all of your AWS SSO users.

40
00:02:41.340 --> 00:02:46.240
Remember these error Federated users, not I am users.

41
00:02:46.240 --> 00:02:49.260
Here's where you can configure different things for the user,

42
00:02:49.260 --> 00:02:53.240
such as resetting the password or disabling this user.

43
00:02:53.240 --> 00:02:55.380
I want to change the display name for this one.

44
00:02:55.380 --> 00:02:58.340
So I can do that here.

45
00:02:58.340 --> 00:02:58.820
Okay,

46
00:02:58.820 --> 00:03:04.190
we have our users all defined and the groups that those users belong to Next

47
00:03:04.190 --> 00:03:08.290
we need to assign which accounts these users can access.

48
00:03:08.290 --> 00:03:15.640
Go to AWS accounts, then select the account where you would like to assign users.

49
00:03:15.640 --> 00:03:21.280
I'm going to assign these users to the global app DEV account Select

50
00:03:21.280 --> 00:03:28.050
Assigned users rather than a sign the users to this account.

51
00:03:28.050 --> 00:03:30.540
I'm going to assign groups.

52
00:03:30.540 --> 00:03:33.650
I'll do these one at a time since they're each going to have a

53
00:03:33.650 --> 00:03:37.960
different permission set attached to this access relationship

54
00:03:37.960 --> 00:03:40.440
will start with administrators.

55
00:03:40.440 --> 00:03:45.840
I'll need to create a new permission set that I can use and select either

56
00:03:45.840 --> 00:03:49.540
a job function policy or accustomed permission set.

57
00:03:49.540 --> 00:03:51.510
Let's take a look at some of the different job

58
00:03:51.510 --> 00:03:54.240
function policies that error to find.

59
00:03:54.240 --> 00:03:58.040
I'm going to choose administrator access.

60
00:03:58.040 --> 00:04:01.240
I'll assign the user to this permission set,

61
00:04:01.240 --> 00:04:07.010
then select finish when I go back to the AWS accounts I can see

62
00:04:07.010 --> 00:04:11.500
that the administrator access permission set is associate ID

63
00:04:11.500 --> 00:04:15.040
with the global app Deva account.

64
00:04:15.040 --> 00:04:18.760
When I drill into that we can see that the administrators

65
00:04:18.760 --> 00:04:23.580
group is attached to the administrator Access permission set

66
00:04:23.580 --> 00:04:26.340
for the Global app Deva account.

67
00:04:26.340 --> 00:04:28.970
The relationship is a little bit different than how

68
00:04:28.970 --> 00:04:31.460
we've been assigning roles to remember.

69
00:04:31.460 --> 00:04:38.440
A user or group is associated with a single A W s account in your organization,

70
00:04:38.440 --> 00:04:42.940
and a permission set is attached to that relationship.

71
00:04:42.940 --> 00:04:46.620
To allow your Federated users access to multiple accounts,

72
00:04:46.620 --> 00:04:51.830
you'll set up this permission set relationship between each user or group

73
00:04:51.830 --> 00:04:55.220
and each account that you want to give them access to.

74
00:04:55.220 --> 00:04:55.650
What A.

75
00:04:55.650 --> 00:05:01.040
W S SSO does for you in the background is create a role in the target

76
00:05:01.040 --> 00:05:05.160
account that allows these users or groups that you've assigned to the

77
00:05:05.160 --> 00:05:08.440
permission set to assume that role.

78
00:05:08.440 --> 00:05:12.790
Let's take a look at the roles that error in the global app DEVA account.

79
00:05:12.790 --> 00:05:16.250
Here are the roles that existed in the global app Deva account

80
00:05:16.250 --> 00:05:20.670
Before I created my AWS SSO organization,

81
00:05:20.670 --> 00:05:24.610
I'll refresh notice the new role that has an identity

82
00:05:24.610 --> 00:05:29.140
provider listed as a trusted entity.

83
00:05:29.140 --> 00:05:33.000
This is the role that was created by AWS Sso.

84
00:05:33.000 --> 00:05:37.720
If we look at the permissions we can see that it's selected the

85
00:05:37.720 --> 00:05:42.840
AWS managed policy for administrator access.

86
00:05:42.840 --> 00:05:47.220
Let's assign the other two groups to the global app Deva account with the

87
00:05:47.220 --> 00:05:54.640
appropriate permission sets for the easy to access,

88
00:05:54.640 --> 00:06:01.440
I want to create a new permission set that allows easy to full access.

89
00:06:01.440 --> 00:06:07.790
I'll select Amazon easy to full access and under session duration.

90
00:06:07.790 --> 00:06:11.480
You can choose how long a user could be logged in before they're

91
00:06:11.480 --> 00:06:14.640
automatically logged out of their session.

92
00:06:14.640 --> 00:06:18.440
I'll go ahead and leave it at the default of one hour.

93
00:06:18.440 --> 00:06:23.540
I'll select this new permission set that we just created.

94
00:06:23.540 --> 00:06:28.420
We can now see that the easy to access group has the permission set of E C to

95
00:06:28.420 --> 00:06:39.960
access for the global Aptiva Count will assign Our last S3 group will attach

96
00:06:39.960 --> 00:06:49.240
S3 full access and select it for this group.

97
00:06:49.240 --> 00:06:51.830
We have three different groups with three different permission

98
00:06:51.830 --> 00:06:55.130
sets to access the global Aptiva account.

99
00:06:55.130 --> 00:07:00.380
If we go back to roles in our global app Deva account we can see the

100
00:07:00.380 --> 00:07:05.460
additional roles that have been created by a W s S S O that have

101
00:07:05.460 --> 00:07:08.260
identity provider as a trusted entity.

102
00:07:08.260 --> 00:07:12.540
Let's log in with our Federated users to see how this works.

103
00:07:12.540 --> 00:07:14.440
When the user checks their email,

104
00:07:14.440 --> 00:07:21.540
they'll get a link to create a new password for their AWS SSO account.

105
00:07:21.540 --> 00:07:24.980
This is the AWS single sign on dashboard.

106
00:07:24.980 --> 00:07:32.840
This Federated user is associate ID with one AWS account, Global app Dev.

107
00:07:32.840 --> 00:07:36.040
Because this users was added to two different groups

108
00:07:36.040 --> 00:07:38.040
with two different permission sets,

109
00:07:38.040 --> 00:07:43.080
they'll need to select which role they want to assume to access the account.

110
00:07:43.080 --> 00:07:47.360
Let's start out with easy to access will go to the management console.

111
00:07:47.360 --> 00:07:49.110
Notice where the username is.

112
00:07:49.110 --> 00:07:53.040
It's the name of the role created for our Federated user.

113
00:07:53.040 --> 00:07:57.900
If we go to easy to we can, see that we have permissions to do things in.

114
00:07:57.900 --> 00:08:02.770
Easy to If we were to go to S3 notice how we get a

115
00:08:02.770 --> 00:08:06.500
permission error for this user to access S3,

116
00:08:06.500 --> 00:08:10.770
they'll need to go back to the AWS sso console and log

117
00:08:10.770 --> 00:08:13.940
in using a different permission set.

118
00:08:13.940 --> 00:08:21.180
Let's go to the management console using the S3 access permission set again.

119
00:08:21.180 --> 00:08:24.940
Notice the name change now we can go to S3,

120
00:08:24.940 --> 00:08:27.310
see the buckets that were already created in this

121
00:08:27.310 --> 00:08:30.320
account and even create a new bucket.

122
00:08:30.320 --> 00:08:35.300
If you're Federated User instead needed command line or programmatic access,

123
00:08:35.300 --> 00:08:38.140
they can select that link.

124
00:08:38.140 --> 00:08:41.810
Then it will generate a set of temporary credentials

125
00:08:41.810 --> 00:08:44.440
that they can use on the command line.

126
00:08:44.440 --> 00:08:51.000
These will expire after the configure time, so you don't have to worry about removing them when you're done.

