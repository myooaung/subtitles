1
00:00:00,690 --> 00:00:04,850
So were able to successfully upload an image to the fire based storage.

2
00:00:04,860 --> 00:00:10,020
Now the next step for us is we want to make it when we hit this next button then we can go select you

3
00:00:10,020 --> 00:00:13,640
know what user we want to send this information to.

4
00:00:13,890 --> 00:00:20,060
So in order to do that we have to have a list of users which means we now have to talk about firebase

5
00:00:20,070 --> 00:00:23,240
databases is a really exciting part of firebase.

6
00:00:23,310 --> 00:00:27,610
So let's go ahead and click on database here on the firebase Web site.

7
00:00:27,630 --> 00:00:30,470
Let's just go ahead and do the get started here.

8
00:00:31,110 --> 00:00:38,220
And basically the firebase databases anything that you want it to be I like to think of it as a big

9
00:00:38,820 --> 00:00:43,830
Jaison file where you can make arrays and dictionaries things like that.

10
00:00:43,860 --> 00:00:49,830
And so it's basically if you want to add something onto it you just say plus and you're going to add

11
00:00:49,830 --> 00:00:52,040
something new like in this case.

12
00:00:52,380 --> 00:00:56,940
If I want to have a whole bunch of users here I'm going to type out you know I'm going to have some

13
00:00:56,940 --> 00:01:02,100
users and then on those users right if I'm going to have a bunch of these one could have the name.

14
00:01:02,610 --> 00:01:04,830
You know Joe or something like that.

15
00:01:05,010 --> 00:01:06,090
And what does Joe have.

16
00:01:06,100 --> 00:01:14,360
Well Joe might have an e-mail which could be like Joe Zappy code dot com.

17
00:01:14,550 --> 00:01:14,880
Right.

18
00:01:14,880 --> 00:01:20,100
So if we go ahead and add this you can sort of see the breakdown and then you know if we want to add

19
00:01:20,100 --> 00:01:27,180
an additional user we might have like Jane or something in Jane's going to have an e-mail of like Jane

20
00:01:27,180 --> 00:01:30,720
at Zappy code dot com.

21
00:01:30,720 --> 00:01:35,490
So you'll notice this database it's not like Q Well or anything like that.

22
00:01:35,490 --> 00:01:39,400
It's sort of it's own thing here that firebase is created.

23
00:01:39,690 --> 00:01:42,690
But you can really set this up however you want.

24
00:01:42,690 --> 00:01:49,290
And so it kind of takes some time to learn how to appropriately create a database for your app that

25
00:01:49,290 --> 00:01:50,290
works well.

26
00:01:50,370 --> 00:01:54,990
I mean I'm going to show you the one that I created for snapchat here but lots of great documentation

27
00:01:54,990 --> 00:01:58,010
online that I encourage you to read more if you want to learn more about this.

28
00:01:58,020 --> 00:02:04,110
But just know this is sort of essentially what we want to do here is we want to have a list of users

29
00:02:04,110 --> 00:02:07,610
and we want to be able to get their e-mails and list those out.

30
00:02:07,620 --> 00:02:13,020
And then additionally be able to have these users to you know hold a bunch of snaps that people have

31
00:02:13,020 --> 00:02:14,870
sent them and things like that.

32
00:02:14,880 --> 00:02:20,430
Now with this we're not going to be storing anybody's users names in fact instead of using the name

33
00:02:20,460 --> 00:02:21,090
Jane here.

34
00:02:21,090 --> 00:02:25,680
We're going to use what's called the you I.D. which means like it stands for.

35
00:02:25,710 --> 00:02:31,210
I think just user ID and so with this if we were going to change this.

36
00:02:31,320 --> 00:02:33,160
C'mon let me change your name here.

37
00:02:33,300 --> 00:02:34,050
No maybe it won't.

38
00:02:34,110 --> 00:02:36,610
Let me change it here sort of on the fly.

39
00:02:36,620 --> 00:02:43,710
But basically these user names if we were going to add a new user usernames it's going to look something

40
00:02:43,710 --> 00:02:49,940
crazy like this and then they'll still have an e-mail that is going to be like you know Jane that be

41
00:02:49,980 --> 00:02:52,570
code dot com.

42
00:02:52,590 --> 00:02:53,250
Right.

43
00:02:53,340 --> 00:02:57,090
But just know when we list out all our users are going to look more like this.

44
00:02:57,110 --> 00:03:00,000
That's going to say Joe or something like that.

45
00:03:00,000 --> 00:03:06,620
So in order for this to work we have to make sure all of our users are here inside of the database.

46
00:03:06,930 --> 00:03:11,280
And I know this is a little bit different because you're thinking well over here in authentication we

47
00:03:11,280 --> 00:03:17,170
have a list of users like can't we just query the list of users here and it's not exactly the case and

48
00:03:17,190 --> 00:03:18,110
oh look it up.

49
00:03:18,210 --> 00:03:22,220
There's a user ID right here maybe stands for unique ID.

50
00:03:22,220 --> 00:03:22,790
I'm not sure.

51
00:03:22,800 --> 00:03:26,540
But you know that's what that's going to look like.

52
00:03:26,550 --> 00:03:31,200
But you might be seen walking can I just get a list of all the users here and know you need to be able

53
00:03:31,200 --> 00:03:32,820
to set this up on your own.

54
00:03:32,820 --> 00:03:38,730
And so I think the best way to handle this to add users onto here is we should make it so when someone

55
00:03:38,730 --> 00:03:44,010
signs up for the very first time that they will just automatically be added here and we'll go put in

56
00:03:44,010 --> 00:03:44,830
their e-mail.

57
00:03:44,940 --> 00:03:46,400
All that proper stuff.

58
00:03:46,620 --> 00:03:52,890
So I'm going to go ahead and delete everything here so we sort of start with a blank slate and you'll

59
00:03:52,890 --> 00:03:54,200
see how this gets out of hand.

60
00:03:54,210 --> 00:03:56,050
But we need to go at it.

61
00:03:56,070 --> 00:03:59,970
Our authentication code so we're going to move back to our main activity.

62
00:03:59,970 --> 00:04:06,240
Remember this is where we do all the log in stuff and we're going to change this to say hey if someone

63
00:04:06,570 --> 00:04:10,440
is signing up for the first time we need to add them to the database.

64
00:04:10,470 --> 00:04:13,290
So if we scroll down here.

65
00:04:14,300 --> 00:04:17,790
So if they were able to sign on we don't want to worry about that.

66
00:04:17,790 --> 00:04:19,170
They should already be in the database.

67
00:04:19,190 --> 00:04:25,170
But remember this common outline here add to database this is finally where we're going to start doing

68
00:04:25,170 --> 00:04:25,620
that.

69
00:04:25,620 --> 00:04:32,370
So what we need to do is access the firebase database which in order to do that we're going to have

70
00:04:32,370 --> 00:04:35,460
to go add another component to our great also.

71
00:04:35,760 --> 00:04:38,710
Let's get back to the documentation.

72
00:04:39,060 --> 00:04:45,240
We're now going to move to the real time database and let's just do get started with Android here.

73
00:04:46,620 --> 00:04:53,130
So now that we've got this we have to compile some code here so we'll go ahead and copy this go back

74
00:04:53,130 --> 00:05:01,320
to our project and the app level Bill doc great all add one more line here and you'll notice this ones

75
00:05:01,780 --> 00:05:03,110
11. 6.2.

76
00:05:03,120 --> 00:05:07,990
I'm going to keep this consistent with everything else I want everything to be 11. 6 thought.

77
00:05:08,310 --> 00:05:12,300
So once I've changed that I'm going to go ahead and get that sync up.

78
00:05:12,300 --> 00:05:18,570
But then let's move to our main activity and start writing the code for this to work.

79
00:05:18,780 --> 00:05:25,440
So we'll give this a second here because we need sort of some of that autocomplete that comes from this

80
00:05:25,440 --> 00:05:31,140
cradle function that's running right now but it's going to be called firebase database so I'm just going

81
00:05:31,140 --> 00:05:38,760
to start typing see if I can get that to come firebase database.

82
00:05:38,760 --> 00:05:39,530
There we go.

83
00:05:39,600 --> 00:05:40,620
Excellent.

84
00:05:40,620 --> 00:05:45,650
So firebase database thought Get instance does get reference.

85
00:05:45,690 --> 00:05:51,330
That's seems to be always our starting point for when we you know get to somewhere and think about this

86
00:05:51,330 --> 00:05:54,420
far based on the Get it and start get reference.

87
00:05:54,420 --> 00:05:59,700
This is essentially it starting at the beginning point in the database so if we want to create a bunch

88
00:05:59,700 --> 00:06:06,510
of users Well you know we need to create essentially a folder or an option here called users.

89
00:06:06,510 --> 00:06:12,810
In this case it's called a child so we're going to say Get reference that child and this is where we're

90
00:06:12,810 --> 00:06:16,130
going to pass in the term just lower case users.

91
00:06:16,200 --> 00:06:22,050
So this would be the exact same thing as hitting the plus button here and saying users and you know

92
00:06:22,170 --> 00:06:24,170
we'd have to put something inside of here.

93
00:06:24,180 --> 00:06:32,910
But think of that's you know we've added this then on this we're going to say Dot child again because

94
00:06:32,910 --> 00:06:39,990
we want to go even further down through here so we're going to say Dot child and on this this is where

95
00:06:39,990 --> 00:06:47,220
we want to add the user's ID so we can get that from this task object or I guess in this case it's that

96
00:06:47,220 --> 00:06:58,890
task object so we're going to say task dot result dot user dot you idea know kind of a long step to

97
00:06:58,890 --> 00:07:00,590
get there but tasks that result.

98
00:07:00,630 --> 00:07:02,320
User ID.

99
00:07:02,670 --> 00:07:09,210
So that's going to then essentially go into a database and say OK and let me type the cell a little

100
00:07:09,210 --> 00:07:10,900
bit better here.

101
00:07:11,030 --> 00:07:16,770
It's the same thing as saying All right we added the child users than on users we added someone new

102
00:07:16,770 --> 00:07:21,530
with the name like whatever the idea is some random thing.

103
00:07:21,600 --> 00:07:28,020
Then on top of that we want to be able to add their email so we're going to add one more child and we're

104
00:07:28,020 --> 00:07:33,660
going to say child and we're just going to type out all lowercase e-mail this is sort of our key.

105
00:07:33,690 --> 00:07:41,160
Now we're going to set the value for this and then we'll say Dot set value and we just want to get whatever

106
00:07:41,160 --> 00:07:46,530
the user's email is and we've done this a few times this email and text text to string we'll just copy

107
00:07:46,530 --> 00:07:52,680
this page sat right inside and that is all we need to add to the database it's amazing.

108
00:07:52,680 --> 00:07:57,930
So this is to kind of keep going with the example here this is the same thing as saying oh can you add

109
00:07:57,930 --> 00:08:07,230
something onto this you ID it's going to be email and it will be something like Nick Zappy code whatever

110
00:08:07,280 --> 00:08:09,280
dotcom we're going to delete this in a second.

111
00:08:09,390 --> 00:08:13,480
So this is essentially what we're trying to do sort of prove this.

112
00:08:13,620 --> 00:08:18,630
I'm going to go ahead and delete all of this so we can start fresh.

113
00:08:18,780 --> 00:08:21,660
And let's go ahead and run this on the emulator

114
00:08:24,130 --> 00:08:26,440
and we'll go ahead and give this a second.

115
00:08:26,440 --> 00:08:33,490
Now for everything to properly work here we're going to have to delete the user that we already have.

116
00:08:33,490 --> 00:08:33,720
Right.

117
00:08:33,720 --> 00:08:40,990
Because if we try and sign in with Nick at Zappy Cocom Well that's already a correct user so we'll just

118
00:08:40,990 --> 00:08:47,800
always go into the seinen portion and you know we won't ever get to do this so we have to do go back

119
00:08:47,800 --> 00:08:53,160
to firebase here and let's make sure the app opens up first so opens up.

120
00:08:53,260 --> 00:08:58,880
Let's do our log out here and then we're going to go to authentication.

121
00:08:59,140 --> 00:09:02,360
We want to hit the ellipsis here and delete this account.

122
00:09:02,560 --> 00:09:05,590
So now we have no users whatsoever.

123
00:09:05,590 --> 00:09:16,260
So now if I do for example Nick at Zappy code dot com I give the password of know ABC 1 2 3 4 and I

124
00:09:16,260 --> 00:09:17,430
hit go.

125
00:09:17,620 --> 00:09:22,630
Now I have to make sure I'm in the proper place before I hit go so I'm going to go to a database get

126
00:09:22,630 --> 00:09:23,830
started.

127
00:09:23,830 --> 00:09:24,190
Right.

128
00:09:24,250 --> 00:09:27,550
And I just want you to see this in real time is amazing.

129
00:09:27,640 --> 00:09:32,590
So I'm going to hit go first tries to sign in so then it says I'm going to do the sign up and when it

130
00:09:32,590 --> 00:09:33,340
does the sign up.

131
00:09:33,340 --> 00:09:34,280
Boom.

132
00:09:34,390 --> 00:09:34,920
Look at that.

133
00:09:34,910 --> 00:09:36,270
Did you see this.

134
00:09:36,320 --> 00:09:42,550
It created the child users then created the child of whatever the user is you idea was then on that

135
00:09:42,550 --> 00:09:45,610
it gave the e-mail of Nick Zappy code dot com.

136
00:09:45,610 --> 00:09:46,620
So watch this.

137
00:09:46,900 --> 00:09:52,680
Let's say I log out and now I want to add Joe at Zappy Cocom.

138
00:09:52,690 --> 00:09:55,920
So I hit the go button and boom.

139
00:09:55,960 --> 00:09:56,490
Look at that.

140
00:09:56,500 --> 00:10:01,300
We now have another user inside of here with their you I.D. right there.

141
00:10:01,390 --> 00:10:04,930
Just awesome how simple this is to work with.

142
00:10:05,130 --> 00:10:05,820
OK.

143
00:10:06,250 --> 00:10:11,440
So now that we have a couple of users here listen inside of our database.

144
00:10:11,440 --> 00:10:16,810
This means that when I go through the whole process of creating a new snap and then I want to send that

145
00:10:16,810 --> 00:10:19,870
snap to a user I can list out that information.

146
00:10:19,870 --> 00:10:22,690
So we need to make a new activity.

147
00:10:22,710 --> 00:10:29,510
Let's go to Android studio here we one new activity and empty activity.

148
00:10:29,750 --> 00:10:36,040
And let's go ahead and call this one choose user activity that's kind of the gist of what should be

149
00:10:36,040 --> 00:10:37,780
going on in this one.

150
00:10:37,780 --> 00:10:40,160
And this should just be one big list.

151
00:10:40,180 --> 00:10:40,860
List view.

152
00:10:40,900 --> 00:10:47,260
So I'm going to go to this choose user SML and basically just fill this up with a list view so let's

153
00:10:47,260 --> 00:10:48,880
go to containers.

154
00:10:48,950 --> 00:10:50,610
There's a nice list view.

155
00:10:50,740 --> 00:10:56,300
We'll bring that in and we'll go ahead and give an idea to this list view.

156
00:10:57,040 --> 00:11:03,150
Maybe you will just call this choose news or list view.

157
00:11:03,850 --> 00:11:04,450
Excellent.

158
00:11:04,610 --> 00:11:12,580
So now we've got this nice list view that we can have filled up with all the different e-mail addresses

159
00:11:12,580 --> 00:11:14,600
that you could send that snap to.

160
00:11:14,950 --> 00:11:20,620
So we need to make it so that we can actually move over here so I'm now going to go back to our create

161
00:11:20,620 --> 00:11:26,080
snap activity and this is where we have way too many things up at the top here song to close out a lot

162
00:11:26,940 --> 00:11:30,430
so that we can actually have some space to work with here.

163
00:11:30,550 --> 00:11:33,610
So there's that create snap activity.

164
00:11:34,030 --> 00:11:40,330
And with this we want to do an intent after we've successfully uploaded everything.

165
00:11:40,330 --> 00:11:45,930
This is where we want to make an intent to say hey you know we should go move on to the next one.

166
00:11:46,570 --> 00:11:53,510
So after we have the download your L all that stuff we are going to make a new intense save.

167
00:11:53,540 --> 00:11:58,700
So intent is equal to capital intent.

168
00:11:58,990 --> 00:12:05,890
It will pass and this and then we're trying to move to the choose user activity coal and coal and class

169
00:12:06,080 --> 00:12:12,230
Java and then we want to start that activity right now.

170
00:12:12,310 --> 00:12:16,670
There's a whole lot of different things that we're going to want to send forward like the image your

171
00:12:16,690 --> 00:12:22,960
L for instance they're calling it download your own but we're going to want to provide like the image

172
00:12:23,710 --> 00:12:28,060
or the message and also like the image name there's a couple of things that we want to throw for there

173
00:12:28,090 --> 00:12:34,220
but for the time being we're just going to simply move over on to the next one so that's OK.

174
00:12:34,390 --> 00:12:37,240
But let's go ahead and write the code to fill up that list view.

175
00:12:37,240 --> 00:12:41,060
So now let's get the choose user activity.

176
00:12:41,890 --> 00:12:48,550
And now we're going to make it so that when someone wants to you know pick somebody we can have them

177
00:12:48,580 --> 00:12:50,400
all show up in a list.

178
00:12:50,410 --> 00:12:58,330
So first thing that we got to do is provide the list view here so let's say var choose news or list

179
00:12:58,330 --> 00:13:09,040
view is going to be of type List View nullable will set that equal to no initially and then inside of

180
00:13:09,040 --> 00:13:18,580
our on create we'll say hey choose user list view your equal to find view by ID or Id choose news or

181
00:13:18,580 --> 00:13:19,600
list view.

182
00:13:19,660 --> 00:13:20,610
Great.

183
00:13:20,680 --> 00:13:27,600
All right so with that in place with any list view it's got to have an array adapter so we can show

184
00:13:27,990 --> 00:13:34,910
what should go inside of there so let's make a new thou here that I'm going to call adapter.

185
00:13:35,630 --> 00:13:39,530
And this is going to be a new array adapter.

186
00:13:39,900 --> 00:13:42,390
And with this will this provide.

187
00:13:42,390 --> 00:13:44,020
This is the context.

188
00:13:44,340 --> 00:13:51,010
And then we need to get what type of lay out there we want so Android are lay out.

189
00:13:51,040 --> 00:13:54,110
And I just want simple list item 1.

190
00:13:54,180 --> 00:13:59,440
So when we go ahead a simple list item one just like that.

191
00:13:59,730 --> 00:14:05,910
And then we need to provide a list view here and we don't have one yet so let's go ahead and talk about

192
00:14:05,910 --> 00:14:06,830
this.

193
00:14:06,860 --> 00:14:12,270
We're going to make a variable here called e-mails right.

194
00:14:12,300 --> 00:14:18,810
We want a list of all the user e-mails and we're going to say this is going to be an array list of type

195
00:14:19,110 --> 00:14:20,150
string.

196
00:14:20,600 --> 00:14:21,090
OK.

197
00:14:21,120 --> 00:14:27,930
And we'll simply set this equal to a new array list just like that and then we'll go ahead and provide

198
00:14:27,930 --> 00:14:34,060
e-mails here as the array that the adapter should look to in order to fill up that list view.

199
00:14:34,080 --> 00:14:40,880
Now that in place we've got to take our list view chooses your list view and set the adapter and say

200
00:14:40,890 --> 00:14:47,940
adapter so equal to adapter just like that and make sure we put a question mark there so that's all

201
00:14:47,940 --> 00:14:49,320
happy and ready to go.

202
00:14:49,560 --> 00:14:57,720
But then the next part is we have to be able to fill up this email's array list with actual emails from

203
00:14:57,720 --> 00:15:00,730
the database write like we want to go get this and this.

204
00:15:00,750 --> 00:15:01,800
Right.

205
00:15:01,800 --> 00:15:02,670
So how do we do that.

206
00:15:02,700 --> 00:15:08,460
Well we've got to work with the database and since we've already imported the cradle stuffer app we

207
00:15:08,460 --> 00:15:10,290
can start working with the database.

208
00:15:10,460 --> 00:15:15,630
We're going to add something called an event listener that says I'm looking at a particular part of

209
00:15:15,630 --> 00:15:21,480
the database to see if anything is added there remove their whatever it's going to give us back some

210
00:15:21,480 --> 00:15:22,260
info.

211
00:15:22,650 --> 00:15:28,950
So we're going to type out firebase database get instance get reference remember that sort of the starting

212
00:15:28,950 --> 00:15:35,110
point and we want to get to look we want to listen on this user's child here we want to say Hey any

213
00:15:35,110 --> 00:15:39,570
time something new is added removed updated we want to know about it.

214
00:15:39,570 --> 00:15:47,250
So on this after we do got in get instant stock get reference we're going to say Dot child and we have

215
00:15:47,250 --> 00:15:52,770
to provide the name here of users all lowercase exactly like it is here.

216
00:15:52,770 --> 00:15:55,860
It's important that that's exactly the same.

217
00:15:55,920 --> 00:16:02,110
So we're going to say on users we are then going to add a child event listener.

218
00:16:02,940 --> 00:16:09,570
So this is going to allow us to then you know successfully know oh what was it that they did someone

219
00:16:09,570 --> 00:16:10,770
add remove whatever.

220
00:16:10,860 --> 00:16:16,470
So we're first just going to give a name to this that we'll just call object colon and then now this

221
00:16:16,470 --> 00:16:23,340
is where we're going to say we want a child event listener and we're going to go ahead and provide curly

222
00:16:23,340 --> 00:16:27,730
brackets here for all the information that should go inside there.

223
00:16:27,750 --> 00:16:34,110
So now with this there's a ton of methods that we have to add here and in fact if we go ahead and hover

224
00:16:34,110 --> 00:16:39,840
over this let's go ahead and click on this red guy implement members.

225
00:16:39,840 --> 00:16:41,850
There's all these different options here.

226
00:16:41,880 --> 00:16:44,820
We just want to select everything and say OK.

227
00:16:44,820 --> 00:16:46,170
And it's going to provide these.

228
00:16:46,170 --> 00:16:49,780
So you might be thinking like whoa what have I done this is way too much.

229
00:16:50,310 --> 00:16:51,350
But that's OK.

230
00:16:51,600 --> 00:16:54,410
We just have to have these here we don't have to actually put code in them.

231
00:16:54,420 --> 00:17:01,430
And in fact the only one that we're interested in is the on child added on the removed cancelled whatever

232
00:17:01,440 --> 00:17:06,600
we're not necessarily interested in those the child added just tells us what is currently there and

233
00:17:06,600 --> 00:17:12,360
if anybody new has added it we'll sort of update for us and so on all of these we want to get rid of

234
00:17:12,360 --> 00:17:20,720
the DO's because that's going to crash are going to go ahead and get rid of all of those.

235
00:17:21,870 --> 00:17:28,110
Just like that and then what I want to do is I want to move this at on child out and I'm going to move

236
00:17:28,110 --> 00:17:33,490
this up to the top to know that this is kind of the most important one that we're working with here.

237
00:17:33,780 --> 00:17:40,110
And then for all these other ones I'm just going to make these be two curly brackets like this because

238
00:17:40,110 --> 00:17:44,430
we're not going to do anything with them we'll just sort of have them all together and if we ever want

239
00:17:44,430 --> 00:17:49,610
to do something you know or we have to do is put some information inside of those curly brackets.

240
00:17:49,610 --> 00:17:56,370
But it's I think sort of a waste to have those take up a ton of space to sort of have those all listed

241
00:17:56,370 --> 00:17:57,290
out there.

242
00:17:57,330 --> 00:17:57,920
All right.

243
00:17:58,290 --> 00:18:04,740
But then inside of this on child added again this tells us each user that they're inside of the database.

244
00:18:04,770 --> 00:18:10,520
So this is where we would want to for example start adding some e-mails to the survey list.

245
00:18:10,650 --> 00:18:17,250
So to get somebody's e-mail they give us back this p zero which is something called a data snapshot

246
00:18:17,260 --> 00:18:19,460
it contains everything that we need there.

247
00:18:19,570 --> 00:18:29,620
So to get somebody's e-mail we would say we want the G-0 dot child and be the child that we're looking

248
00:18:29,620 --> 00:18:33,580
for if I go back to the database it's given us this whole user.

249
00:18:33,580 --> 00:18:33,810
Right.

250
00:18:33,820 --> 00:18:39,370
But you'll see this user that signified with this you I.D. It has an email child.

251
00:18:39,370 --> 00:18:46,610
So we want to say we want to get to the child e-mail and then we want to get to e-mails value.

252
00:18:46,660 --> 00:18:48,940
So we've essentially said

253
00:18:51,780 --> 00:18:53,830
value just like that.

254
00:18:54,030 --> 00:18:59,490
We're trying to move into take this guy move to a child e-mail and get it's value.

255
00:18:59,490 --> 00:19:02,430
That's how we sort of arrived at that position.

256
00:19:02,430 --> 00:19:08,220
So when you say pay ZERO child whatever and we want this to come through as a string.

257
00:19:08,430 --> 00:19:13,170
And let's go ahead and put this inside of a value so we're say vile and we'll go ahead and call this

258
00:19:13,290 --> 00:19:17,210
e-mail and say that this is equal to this.

259
00:19:17,790 --> 00:19:23,610
Now with this you can see because this is knowable we've got to make sure that we haven't had a question

260
00:19:23,610 --> 00:19:27,710
mark there so that we'll be happy with what we've got.

261
00:19:27,820 --> 00:19:33,270
We've got another inaudible so I have to put a question mark there but then this gives us an e-mail

262
00:19:33,550 --> 00:19:39,780
so that then we can take this value and say All right e-mails a re list.

263
00:19:39,780 --> 00:19:44,330
We are going to add the last e-mail.

264
00:19:44,340 --> 00:19:45,570
Just simple as that.

265
00:19:45,570 --> 00:19:49,590
So now that will be something inside of there and after we've done this we should probably let the array

266
00:19:49,590 --> 00:19:52,950
adapter know that we have something new.

267
00:19:52,950 --> 00:20:00,570
So we're going to say guess what we're going to add a new or we want to get to our adapter so adapter

268
00:20:00,840 --> 00:20:03,720
dot notify data set change.

269
00:20:03,720 --> 00:20:07,680
So that should say hey each time we had somebody you should update that.

270
00:20:07,710 --> 00:20:09,090
So let's go ahead and see if this works.

271
00:20:09,120 --> 00:20:15,600
If it does we should see listed out the e-mails for our two current users that we have in the database

272
00:20:15,600 --> 00:20:19,980
so kind of a big moment of truth for us here.

273
00:20:22,360 --> 00:20:27,710
You know just to confirm right we've got these two users right here.

274
00:20:28,370 --> 00:20:33,690
And looks like that's finishing up because it's jumping up onto our screen here.

275
00:20:34,150 --> 00:20:36,470
An app opens up.

276
00:20:36,650 --> 00:20:42,770
So I want to create a new snap so I'm just actually going to use this default pink image and it will

277
00:20:42,770 --> 00:20:46,250
just upload that and just kind of make it simpler and look at that.

278
00:20:46,310 --> 00:20:49,690
There's nickered Zappy code and there's Joe Zappy code.

279
00:20:49,700 --> 00:20:50,130
Wow.

280
00:20:50,310 --> 00:20:52,580
We're moving really far through this app.

281
00:20:52,580 --> 00:20:53,510
We're doing great.

282
00:20:53,810 --> 00:20:58,070
So what's the next step for us right because now the user can select one of these people right and they've

283
00:20:58,070 --> 00:21:00,080
given everything that they need.

284
00:21:00,080 --> 00:21:02,180
They've provided an image.

285
00:21:02,180 --> 00:21:05,390
They provided a message and they've said who they want to send it to.

286
00:21:05,390 --> 00:21:10,890
We need to take all of that compile it into something and deliver it to the appropriate user.

287
00:21:10,940 --> 00:21:16,070
So to get to that point we have to write some code to recognize when someone has selected one of these

288
00:21:16,070 --> 00:21:21,010
options so let's go ahead and do that but then we'll talk about how we can sort of pack everything in.

289
00:21:21,230 --> 00:21:26,990
So let's go ahead and back to android studio after we've gone and grab everything.

290
00:21:26,990 --> 00:21:32,660
Let's go ahead and add a listener for the list view so that whenever somebody selects one of the items

291
00:21:32,660 --> 00:21:33,620
we know about it.

292
00:21:33,860 --> 00:21:39,650
So we're going to take our list view the choose news or list view a question mark there because that's

293
00:21:39,650 --> 00:21:40,500
novel.

294
00:21:40,520 --> 00:21:41,150
I want to set.

295
00:21:41,150 --> 00:21:54,050
It's on item click listener equal to and just do capital adapter view dot on item click listener and

296
00:21:54,050 --> 00:21:59,180
we want to make sure we do the one with the curly bracket here because that'll sort of auto add some

297
00:21:59,180 --> 00:22:03,790
code for us and if you've done this correctly should see like adapter iView view.

298
00:22:03,860 --> 00:22:08,070
Well you can change the names of those if you want to but I think that's pretty good for us.

299
00:22:08,090 --> 00:22:13,610
And then we now have these curly brackets that we can write any sort of code when somebody selects something

300
00:22:14,060 --> 00:22:15,130
inside of here.

301
00:22:15,410 --> 00:22:15,890
All right.

302
00:22:15,980 --> 00:22:22,940
And with this if somebody has selected the user right we need to package all the information and create

303
00:22:23,000 --> 00:22:27,230
a new snap or what goes into creating a new snap right.

304
00:22:27,230 --> 00:22:27,640
Like what.

305
00:22:27,670 --> 00:22:28,740
What does it take.

306
00:22:28,940 --> 00:22:31,640
Well let me just show you what it is that we're ultimately adding.

307
00:22:31,670 --> 00:22:38,330
Want to add to the database so if Nick at Zappy code dotcom for example wants to send a snap to Joe

308
00:22:38,560 --> 00:22:39,580
at Zappy code.

309
00:22:39,860 --> 00:22:48,590
Well what we should try and do is go to DZO's user ID here that you I.D. and we're going to add a new

310
00:22:48,980 --> 00:22:54,510
child here called Snap's and Snap's is going to be a list of all the snaps that people have sent.

311
00:22:54,650 --> 00:22:58,310
So in this snap there's a lot of different pieces that we want to add here.

312
00:22:58,310 --> 00:23:02,200
One of them is just going to say who it is that this is from.

313
00:23:02,210 --> 00:23:05,950
So we're going to say from as the name and then the value of this should be.

314
00:23:05,960 --> 00:23:09,860
For example Nick at Zappy code dot com.

315
00:23:09,890 --> 00:23:10,570
All right.

316
00:23:10,730 --> 00:23:13,990
So you can see Joe here Joe Zappy code.

317
00:23:14,030 --> 00:23:18,470
He has a list of snaps and one of them is going to be from this Nicot Zappy.

318
00:23:18,470 --> 00:23:21,860
And I guess I should mention each snap should have its own unique name.

319
00:23:21,860 --> 00:23:29,150
So first we should have something like this which then has you know some informations inside of it like

320
00:23:29,150 --> 00:23:30,120
from.

321
00:23:30,200 --> 00:23:34,370
And then Nick at Zappy code dot com.

322
00:23:34,400 --> 00:23:35,180
All right.

323
00:23:35,180 --> 00:23:37,880
So I'll go ahead and delete this guy.

324
00:23:37,880 --> 00:23:39,100
There we go.

325
00:23:39,320 --> 00:23:42,680
So you can see Joe has one snap here.

326
00:23:42,680 --> 00:23:44,570
And what's the information for the Snapple.

327
00:23:44,570 --> 00:23:47,020
One thing we know about is who it's from.

328
00:23:47,060 --> 00:23:51,110
We know who it's sent to because it's already inside of Joe's.

329
00:23:51,430 --> 00:23:52,990
You I.D. here.

330
00:23:53,030 --> 00:23:58,220
The next thing that we want to add onto this though is for example how do you download the image what

331
00:23:58,220 --> 00:24:01,190
is the image your L. So we're going to have something like image.

332
00:24:01,190 --> 00:24:01,660
You are.

333
00:24:01,660 --> 00:24:02,290
All right.

334
00:24:02,300 --> 00:24:05,980
And this will be like WWE image dot com.

335
00:24:06,050 --> 00:24:06,880
I don't know.

336
00:24:07,100 --> 00:24:11,570
Right like where someone can go ahead and download the image so that's another thing that we want to

337
00:24:11,570 --> 00:24:12,090
know.

338
00:24:12,350 --> 00:24:16,600
We want to know what the images name is so that we can.

339
00:24:16,610 --> 00:24:20,750
We're going to need that to delete things later so just trust me on this one.

340
00:24:20,780 --> 00:24:25,420
Image name should be like whatever dot Jay Pegge right.

341
00:24:25,570 --> 00:24:27,350
Do you I.D. stuff.

342
00:24:27,350 --> 00:24:29,940
So that's another thing that we should add inside of there.

343
00:24:30,110 --> 00:24:36,920
And the other thing that we want to add is whatever the messages so we want to add a message maybe something

344
00:24:36,920 --> 00:24:41,520
like Hey Joe you're cool.

345
00:24:41,720 --> 00:24:47,180
Really cheesy message here but this is all the information we need in order to send someone to snap.

346
00:24:47,180 --> 00:24:52,260
We need to know who it's going to so we can add it to their Snap's child here.

347
00:24:52,490 --> 00:24:58,100
Then we need to say who it's from the image name the image you are and what the message is this is what

348
00:24:58,100 --> 00:25:00,680
composes a snap.

349
00:25:00,680 --> 00:25:07,550
So if this is what we want to send We can do this in one fell swoop by creating a map and then setting

350
00:25:07,550 --> 00:25:10,100
that inside of the snaps for a particular user.

351
00:25:10,100 --> 00:25:16,350
So let me show you what this looks like inside if you're inside of the on item click Lessner.

352
00:25:16,430 --> 00:25:22,470
We want to create a new map so I'm going to call maybe new values are going to call the snap map write

353
00:25:22,490 --> 00:25:25,090
a map that represents the snap.

354
00:25:25,310 --> 00:25:28,020
And this is going to be of type map.

355
00:25:28,190 --> 00:25:31,490
And for our keys we want all of those to be string.

356
00:25:31,580 --> 00:25:38,900
And then for the values if we go ahead and look at our app here all of these are going to be strings.

357
00:25:38,900 --> 00:25:44,480
Now in some instances you would want to like be careful careful here to make sure that like you could

358
00:25:44,480 --> 00:25:50,220
have numbers for example if I said something I don't know like age.

359
00:25:50,220 --> 00:25:50,450
Right.

360
00:25:50,450 --> 00:25:54,260
Like you would want to be able to have a chance to add numbers there but we're actually not dealing

361
00:25:54,260 --> 00:25:54,870
with any.

362
00:25:54,890 --> 00:26:01,270
So we're going to make this a map of strings as keys and strings as the values.

363
00:26:01,430 --> 00:26:06,420
But if you were going to work with other options you'd want this to be any capital any.

364
00:26:06,470 --> 00:26:11,770
But in this case it's just going to be a map of strings of the keys strings is the values.

365
00:26:11,780 --> 00:26:16,880
So with that in place we're going to start creating this and we're going to just say map of.

366
00:26:16,880 --> 00:26:19,850
To create a map and we'll start writing things.

367
00:26:19,850 --> 00:26:22,180
So what is the first thing that we want to add here.

368
00:26:22,340 --> 00:26:24,230
We want to say who it's from.

369
00:26:24,230 --> 00:26:31,830
So we're going to say from and then to and right now we'll just leave that blank.

370
00:26:31,830 --> 00:26:34,200
Let's add the next thing that we need to have inside of there.

371
00:26:34,260 --> 00:26:35,630
The image name.

372
00:26:35,630 --> 00:26:40,470
So we're going to do image name too.

373
00:26:40,990 --> 00:26:42,760
We'll leave that blank.

374
00:26:42,920 --> 00:26:44,720
What's the next piece of information that we need.

375
00:26:44,730 --> 00:26:47,910
Well we need to know what the image your ls will say.

376
00:26:47,930 --> 00:26:49,130
OK.

377
00:26:49,610 --> 00:26:55,310
Image you are ill and connect that to something which right now will just leave blank.

378
00:26:55,550 --> 00:26:59,230
And then the last piece of information is the message right.

379
00:26:59,240 --> 00:27:01,900
What are they trying to tell the user with their picture.

380
00:27:01,910 --> 00:27:09,180
So we want to include a message and say to an empty string.

381
00:27:09,530 --> 00:27:12,130
So we're going to come back and fill in these empty strings.

382
00:27:12,140 --> 00:27:16,530
But for the time being we have a map that we're ready to add to the database.

383
00:27:16,550 --> 00:27:19,000
So how do we appropriately add this to the database.

384
00:27:19,070 --> 00:27:27,220
Well we've got to get to the correct position so we're going to do our firebase database Stockett instance

385
00:27:27,680 --> 00:27:33,290
I got reference as sort of our starting point that we want to move into the users so we're going to

386
00:27:33,290 --> 00:27:36,620
say child you want to get to users.

387
00:27:36,650 --> 00:27:40,030
Next we want to get to the user that we're sending it to.

388
00:27:40,220 --> 00:27:42,200
And so we're going to do child here.

389
00:27:42,220 --> 00:27:48,190
But then we're going to go to our e-mail list and while the e-mails would be great if we could use that

390
00:27:48,200 --> 00:27:51,150
e-mail but we've got to figure out the user's ID.

391
00:27:51,200 --> 00:27:57,380
So in order for that to work or going to have to have a separate array list here where we're we're going

392
00:27:57,380 --> 00:28:05,090
to list out the keys for all the different users so I'm going to copy and paste this array list and

393
00:28:05,090 --> 00:28:07,600
change this one to be called Keys.

394
00:28:07,940 --> 00:28:09,760
And again it's going to be an array of strings.

395
00:28:09,770 --> 00:28:16,700
But here when we're adding an e-mail to the e-mails R-ALA right we're going to also add one to the Keys

396
00:28:17,110 --> 00:28:24,410
and so on we're going to do here is say all right keys frailest list add and we can simply take this

397
00:28:24,410 --> 00:28:32,540
data snapshot which is called Zero sort of say zero dot and we can just get it's key.

398
00:28:32,570 --> 00:28:38,070
Now it's nullable So we want to make sure that we go do the double exclamation point here.

399
00:28:38,160 --> 00:28:42,820
So at least I thought it was knowable apparently not so we can go ahead and leave that as that.

400
00:28:42,830 --> 00:28:49,250
But now we have an array list of keys so then inside of here we can say okay for the child we're going

401
00:28:49,250 --> 00:28:57,530
to go do t's dot net and we want to pass in high which is the index the the one that they selected.

402
00:28:57,890 --> 00:29:02,260
OK so after we've done that then we want to go ahead and move on to.

403
00:29:02,270 --> 00:29:05,350
We've got this particular person we need to add it to their steps.

404
00:29:05,390 --> 00:29:11,660
So when I say Dot child and we're just going to do lowercase snaps if we're sort of following along

405
00:29:11,660 --> 00:29:13,130
here we've gone.

406
00:29:13,130 --> 00:29:13,510
All right.

407
00:29:13,520 --> 00:29:20,630
First of the child users then who we're sending it to their you ID then to their snaps then we have

408
00:29:20,630 --> 00:29:27,660
to create some sort of random ID for the snap and you could go use that ID code that we've done before

409
00:29:27,660 --> 00:29:32,540
but you could also just use this as an awesome functionality.

410
00:29:32,540 --> 00:29:40,790
You can just say push and it adds a new random child on a new child with a random name and then you

411
00:29:40,790 --> 00:29:45,590
can start putting information in here in this case we're going to say set value and we're going to pass

412
00:29:45,590 --> 00:29:51,500
in this whole map that we had just created so that snap map just like that.

413
00:29:51,640 --> 00:29:52,380
OK.

414
00:29:52,700 --> 00:29:56,190
So let's go ahead and give this a try.

415
00:29:56,270 --> 00:30:00,500
See what happens if we go ahead and run this code so we'll go ahead and start this.

416
00:30:00,740 --> 00:30:06,740
And while this is you know getting ready on the emulator I want to talk about after a user selects who

417
00:30:06,740 --> 00:30:11,930
they want to send it to we basically want to send them back to that Snap's activity right where they

418
00:30:11,930 --> 00:30:15,680
can see all the snaps you know been sent to them.

419
00:30:15,800 --> 00:30:20,600
And so if you want to do this it's as simple as Krien the but we're going to do something special here.

420
00:30:20,730 --> 00:30:26,430
So we're in a safe vault intent and we're going to get this equal to a new intent.

421
00:30:27,000 --> 00:30:29,490
Not instance we want intent.

422
00:30:29,480 --> 00:30:34,510
There we go past this and we're trying to move to the Snap's activity.

423
00:30:34,730 --> 00:30:40,080
So we'll go ahead and do that but we want to make it so that when the user hits the back button they

424
00:30:40,080 --> 00:30:44,910
don't go back to the select user screen like that kind of be a bad user experience.

425
00:30:44,910 --> 00:30:54,540
So with this intent we're going to say Dot add flags and we are going to do capital intent dot and we

426
00:30:54,540 --> 00:31:02,280
want flag underscore activity and we're looking for clear top Oh look there it is.

427
00:31:02,550 --> 00:31:08,490
And this basically says hey wipe everything out of you know the back button history there and we'll

428
00:31:08,490 --> 00:31:14,330
just keep it where it's currently at and then we'll just simply start that activity by passing that

429
00:31:14,330 --> 00:31:15,080
intent.

430
00:31:15,360 --> 00:31:15,970
OK.

431
00:31:16,230 --> 00:31:20,370
So this code that we just added won't be on the emulator right now but we should at least be able to

432
00:31:20,370 --> 00:31:22,410
add a snap to the database.

433
00:31:22,410 --> 00:31:26,900
So I want to get the database up and open here so that we can see that.

434
00:31:26,890 --> 00:31:34,250
So we've got our emulator and we are going to create a snap.

435
00:31:34,640 --> 00:31:40,050
We'll just kind of leave everything blank there and we want to send this to Joe at Zappy code so it

436
00:31:40,050 --> 00:31:41,370
should be going inside of here.

437
00:31:41,370 --> 00:31:42,710
Moment of Truth.

438
00:31:42,810 --> 00:31:44,700
We tap on Joe and look at that.

439
00:31:44,750 --> 00:31:45,960
It's a new snap.

440
00:31:45,960 --> 00:31:49,980
Exactly where we want it to the person that we want to if we want to test this.

441
00:31:50,010 --> 00:31:51,810
Let's try adding one to Nick.

442
00:31:51,870 --> 00:31:52,350
Look at that.

443
00:31:52,350 --> 00:31:57,300
Now it's added one to the snaps and there's something here but here's the thing that you should know

444
00:31:57,870 --> 00:32:01,920
right now the from the image name that you are.

445
00:32:01,920 --> 00:32:07,890
All this stuff is blank right now because we didn't put anything into that map yet we've got to go back

446
00:32:07,890 --> 00:32:12,990
and fix that so I'm going to delete the snaps for both these users because we know where it was that

447
00:32:12,990 --> 00:32:16,080
we were trying to go and the proper names for everything.

448
00:32:16,080 --> 00:32:21,020
Now it's just a matter of getting the correct data into those pieces of information.

449
00:32:21,120 --> 00:32:27,040
So you know for like the from the image name right this is where we got to start filling in things.

450
00:32:27,060 --> 00:32:29,110
So as far as who it's from.

451
00:32:29,130 --> 00:32:32,870
We just have to go get the current user and display their name here.

452
00:32:32,880 --> 00:32:42,310
So with this we're just going to do firebase off dot get instance and we want to get the current user.

453
00:32:42,720 --> 00:32:46,800
And then on this current user we want to get their e-mail.

454
00:32:46,910 --> 00:32:47,670
All right.

455
00:32:47,760 --> 00:32:49,650
And that's really as simple as it gets.

456
00:32:49,650 --> 00:32:56,430
Now with this we've got to sort of confirm that this is not going to add some exclamation points here

457
00:32:56,430 --> 00:33:03,770
to sort of confirm that but we've now provided who it is that it's from Bill one of the four is done.

458
00:33:03,780 --> 00:33:09,390
Now the next thing that we're going to be adding here like the image name the image or the message.

459
00:33:09,390 --> 00:33:15,330
All of these things we know about in the previous activity to create snap and we need to send them over

460
00:33:15,330 --> 00:33:17,090
to this one so that we can get that.

461
00:33:17,280 --> 00:33:21,900
So we should provide those as extras inside of the intent so here inside of our intent.

462
00:33:22,020 --> 00:33:26,510
This is where we're going to have to do a little bit of extra work to send that information.

463
00:33:26,520 --> 00:33:31,050
So remember three things that we've got to add so intent put extra.

464
00:33:31,050 --> 00:33:35,240
One of them is going to be the image your well.

465
00:33:35,400 --> 00:33:35,780
All right.

466
00:33:35,790 --> 00:33:40,200
And I'm just going to go ahead and copy and paste this two more times.

467
00:33:40,560 --> 00:33:45,030
So we want to add the image you are l want to add the image name.

468
00:33:45,240 --> 00:33:48,050
And we also want to add the message.

469
00:33:48,060 --> 00:33:49,050
So those three things.

470
00:33:49,050 --> 00:33:51,340
So where do we get the image you are.

471
00:33:51,420 --> 00:33:57,000
Oh look it's this download you are all things so we're just going to say download your elders to string

472
00:33:57,750 --> 00:34:01,880
and boom that's all we need to send that as an extra.

473
00:34:02,070 --> 00:34:03,360
Well what about the image name.

474
00:34:03,360 --> 00:34:09,810
Well remember we had that as a property up here at the top so we simply just have to type image name.

475
00:34:09,880 --> 00:34:10,310
Boom.

476
00:34:10,470 --> 00:34:11,900
That was handled.

477
00:34:11,970 --> 00:34:13,400
How do we get the message.

478
00:34:13,410 --> 00:34:15,450
Well we get our message at.

479
00:34:15,470 --> 00:34:19,110
Text Text and then turn that into a string.

480
00:34:19,110 --> 00:34:20,210
Now it's important.

481
00:34:20,220 --> 00:34:24,170
Make sure you have message and text text to string.

482
00:34:24,180 --> 00:34:30,210
Also a question mark there but when I was building this app preparing for it to teach you this I forgot

483
00:34:30,210 --> 00:34:35,670
the text and did to string and literally the message check that was coming through was that was saying

484
00:34:35,700 --> 00:34:38,020
oh edit text that blah blah blah blah.

485
00:34:38,190 --> 00:34:43,980
And it was trying to turn the actual edit text into a string rather than the text inside of the text

486
00:34:44,010 --> 00:34:44,830
anyways.

487
00:34:45,000 --> 00:34:49,590
Small little difference make sure you have this text or to get a really weird air that will just kind

488
00:34:49,590 --> 00:34:51,770
of make your mind hurt.

489
00:34:51,780 --> 00:34:57,720
So once we were passing these three pieces of information then we can come back and start adding these

490
00:34:57,720 --> 00:34:57,900
in.

491
00:34:57,900 --> 00:35:04,900
So as far as the image name goes rather than an empty string We're first going to get the intent.

492
00:35:05,070 --> 00:35:11,530
And we want to get a string extra with the name of Dimage name boom.

493
00:35:11,610 --> 00:35:14,880
That one's done as far as the image you are all goes again.

494
00:35:14,880 --> 00:35:16,560
Let's get the intent.

495
00:35:16,710 --> 00:35:21,410
Get string extra and the name for this one is image you are.

496
00:35:21,730 --> 00:35:23,370
Boom that's all done.

497
00:35:23,470 --> 00:35:31,060
And the last one for the message we're going to do our intent not get string extra and we'll just provide

498
00:35:31,060 --> 00:35:33,430
the name of the message here.

499
00:35:33,430 --> 00:35:36,940
Make sure it's spelled correctly and that should be all we need.

500
00:35:36,940 --> 00:35:42,310
So now if we we're going to send when it should have everything required so let's go ahead and try this

501
00:35:43,180 --> 00:35:48,120
or run this and this will kind of be our final step to see if you know if we're ready to then allow

502
00:35:48,130 --> 00:35:51,070
user to see if they have any new snaps to view.

503
00:35:51,070 --> 00:35:54,250
So go ahead and run that.

504
00:35:54,370 --> 00:35:57,670
Looks like it's coming up.

505
00:35:57,680 --> 00:35:58,690
So here's the app.

506
00:35:58,850 --> 00:36:04,640
And in the background I want to have this here so you can see this so let's create a snap and I'm actually

507
00:36:04,640 --> 00:36:08,510
going to send this to ourselves so we can see what it is.

508
00:36:08,510 --> 00:36:16,610
And in this case I'm actually going to pick a particular image and I can provide a message like our

509
00:36:16,610 --> 00:36:21,120
first snap and I'll hit next year.

510
00:36:21,380 --> 00:36:22,320
I should go do all that.

511
00:36:22,340 --> 00:36:26,450
Awesome upload stuff and I'm going to send it to my self so that I can.

512
00:36:26,600 --> 00:36:31,110
When we're you know sort of testing I'm working around here that I can actually see this information.

513
00:36:31,220 --> 00:36:34,730
So I a select Nick at Zappy code just like that.

514
00:36:34,820 --> 00:36:35,710
Oh my goodness.

515
00:36:35,750 --> 00:36:36,480
Look at that.

516
00:36:36,710 --> 00:36:39,550
Nick now has a Snap's inside of his Snap's child.

517
00:36:39,550 --> 00:36:43,330
And if we open it up hey this is from Joe at Zappy.

518
00:36:43,370 --> 00:36:45,290
Oh I forgot we were signed in as Joe.

519
00:36:45,400 --> 00:36:45,800
OK.

520
00:36:45,830 --> 00:36:48,370
Well I'll have to sign out and come back in his neck.

521
00:36:48,650 --> 00:36:50,870
But there's an image name here.

522
00:36:50,910 --> 00:36:52,200
There's an image you are all in.

523
00:36:52,220 --> 00:36:53,060
There's the text.

524
00:36:53,060 --> 00:36:56,230
Our first snaps we have everything that we need.

525
00:36:56,540 --> 00:36:58,110
So let's go ahead and log out here.

526
00:36:58,190 --> 00:37:09,810
I'm going to come back in as Nick and I have the code at the Cocom the BCT one two three four and we

527
00:37:09,810 --> 00:37:15,780
should be able to come in so now because I'm signed in as Nick this is where we should be seen a list

528
00:37:15,780 --> 00:37:17,880
of all the snaps that have been sent to us.

529
00:37:17,880 --> 00:37:19,700
But right now we don't have anything.

530
00:37:19,700 --> 00:37:22,610
So let's go ahead and get a snap listing.

531
00:37:22,800 --> 00:37:27,060
And then in the next lecture We'll talk about how we can view it get it to delete all that stuff but

532
00:37:27,060 --> 00:37:28,770
I at least want them to show up in a list.

533
00:37:28,770 --> 00:37:31,090
This will be a big step for us.

534
00:37:31,110 --> 00:37:37,380
So let's go ahead and go back to our Snap's activity right.

535
00:37:37,380 --> 00:37:42,930
That's where we should be listing out all the snaps that people have sent to us and talk about what

536
00:37:42,930 --> 00:37:44,280
it is that we're going to need here.

537
00:37:44,280 --> 00:37:47,250
So the first thing is we need a list view.

538
00:37:47,250 --> 00:37:54,290
So we're going to have to open up the layout file for that so Snap's activity.

539
00:37:55,510 --> 00:38:01,900
And we don't even have a list view inside of there so I can't even get an idea.

540
00:38:01,900 --> 00:38:04,130
I don't have a list view so containers.

541
00:38:04,520 --> 00:38:06,280
Let's have a list view.

542
00:38:06,910 --> 00:38:12,960
I'm going to call this the snaps list view seems simple enough.

543
00:38:13,300 --> 00:38:13,800
OK.

544
00:38:13,900 --> 00:38:15,370
Now we don't need this file anymore.

545
00:38:15,370 --> 00:38:18,130
That's the only thing visually that's going to be inside of there.

546
00:38:18,610 --> 00:38:22,890
But once we have that we need to go ahead and add this to the top as a prop..

547
00:38:23,200 --> 00:38:34,560
So will the Save our snaps list view is going to be of type list view nullable that you get to know

548
00:38:35,300 --> 00:38:40,890
them inside of her and create We're going to set that up so Snap's list views equal defined view by

549
00:38:40,890 --> 00:38:42,570
ID or not.

550
00:38:42,570 --> 00:38:44,980
Id snaps list view.

551
00:38:45,290 --> 00:38:45,690
Awesome.

552
00:38:45,700 --> 00:38:48,240
So now we have an appropriate list view.

553
00:38:48,240 --> 00:38:53,550
Then we need to go ahead and do similar to only what we've done before to get you know the adapter and

554
00:38:53,550 --> 00:38:54,840
everything working out.

555
00:38:54,840 --> 00:38:59,940
So in fact we can just go to our Choose user activity and I'm just going to copy these two lines of

556
00:38:59,940 --> 00:39:05,000
code come back and paste it in.

557
00:39:05,040 --> 00:39:11,940
All right we will have to change a few things like it's not choose user list view it's snaps list view

558
00:39:12,510 --> 00:39:17,880
and then also here we don't have something called emails in fact we don't have anything which then brings

559
00:39:17,880 --> 00:39:20,550
up the question what what is it that we're going to have.

560
00:39:20,670 --> 00:39:27,390
We want to have a list of the emails of people who have sent us a snap and so we're going to create

561
00:39:27,900 --> 00:39:33,460
a new array list here so going to call this one e-mails.

562
00:39:34,110 --> 00:39:47,940
And this is going to be of type Snap's or we want this to be re list of strings and we're going to set

563
00:39:47,940 --> 00:39:52,340
this equal to a new array list boom.

564
00:39:52,470 --> 00:39:54,540
So now we can go ahead and provide e-mails.

565
00:39:54,540 --> 00:39:57,410
There we go.

566
00:39:57,520 --> 00:40:01,200
All right I guess that was the same name so that's pretty good that that all worked out we ended up

567
00:40:01,200 --> 00:40:07,170
not having to change that but then we need to fill up the e-mails array list with some actual pertinent

568
00:40:07,410 --> 00:40:08,370
information.

569
00:40:08,610 --> 00:40:15,170
So with this in place let's go ahead and talk about how we can get these from the firebase database

570
00:40:15,180 --> 00:40:20,400
like we're trying to if I'm signed in as Nick is that be code I'm trying to get to my snaps and list

571
00:40:20,460 --> 00:40:24,160
all of these out and I'm trying to you know poll who it is that it's from.

572
00:40:24,190 --> 00:40:30,270
So I'm going to go back to android studio here after I've set up the adapter and all that good stuff.

573
00:40:30,480 --> 00:40:39,220
I'm going to get access to firebase database of firebase database.

574
00:40:39,300 --> 00:40:41,900
Get instance Dockett reference.

575
00:40:41,930 --> 00:40:45,590
Let's give ourselves some space to work with here then on this.

576
00:40:45,630 --> 00:40:54,270
I want to get to the child of users then I want to find myself right which in order to do that I'm going

577
00:40:54,270 --> 00:41:01,890
to have to you know figure out where that is and so we need to use this time off so we're going to say

578
00:41:01,890 --> 00:41:09,970
Dot child we're looking for em off dot and we want to get the current user.

579
00:41:10,680 --> 00:41:14,530
And then we want to go ahead and get the current users you ID.

580
00:41:14,730 --> 00:41:15,750
All right.

581
00:41:15,750 --> 00:41:21,150
So with this we've got to go ahead and provide that this is not going to be no else will go and then

582
00:41:21,150 --> 00:41:26,130
that question mark and then after we're here we want to go and get to the Snap's for ourselves so we're

583
00:41:26,130 --> 00:41:33,570
going to go to child one more time and say Snap's right inside of there and then this is where again

584
00:41:33,570 --> 00:41:40,230
we want to do a add child eventless center just like we've done before so I say add child event listener

585
00:41:40,770 --> 00:41:48,000
and we're going to provide inside of here something like object colon and then we want a child event

586
00:41:48,000 --> 00:41:49,060
listener.

587
00:41:49,110 --> 00:41:55,270
Now with this we have no functionality in fact let's go ahead and do our curly brackets here.

588
00:41:55,680 --> 00:42:01,940
But if we select object here and go hit the red light bulb we can say hey go implement.

589
00:42:02,170 --> 00:42:09,920
I wanted all of them so go back and do that again but forgot to select them so select everything had

590
00:42:09,930 --> 00:42:11,320
OK boom.

591
00:42:11,340 --> 00:42:13,260
Now we have everything.

592
00:42:13,260 --> 00:42:18,390
And in fact it might be a little bit simpler if I just go back to the choose user activity and copy

593
00:42:18,930 --> 00:42:22,460
what we have here because that's sort of already formatted how we like it.

594
00:42:22,530 --> 00:42:24,840
So we'll just paysite in.

595
00:42:24,840 --> 00:42:29,760
But now we'll just know that we can't we're not going to use the information that we had done before

596
00:42:29,780 --> 00:42:31,330
there.

597
00:42:31,950 --> 00:42:38,100
So now we get this awesome code for the on child added and then we have to make it so that we can go

598
00:42:38,100 --> 00:42:44,660
through each of these and go pull the appropriate emails and then add them to the list.

599
00:42:44,670 --> 00:42:53,340
So what we're going to do is take our e-mails array list and we are going to add onto that and we're

600
00:42:53,340 --> 00:42:57,080
going to add on this piece zero snapshot.

601
00:42:57,090 --> 00:43:02,520
We need to do this to say Dot child to then go see who it's from.

602
00:43:02,520 --> 00:43:07,710
So essentially you know we've gotten to for example this that we're trying to see who it's from so we're

603
00:43:07,710 --> 00:43:09,060
doing that.

604
00:43:09,060 --> 00:43:14,040
So we're going to get to the child from then on that we want to get to it's value.

605
00:43:14,310 --> 00:43:18,800
And we should specify that this should come through as a string.

606
00:43:19,170 --> 00:43:27,030
So that's going to add it to the e-mails array list then we've got to say that our adapter should be

607
00:43:27,030 --> 00:43:33,460
notified of that the dataset changed and then we should be able to list out all the steps.

608
00:43:33,460 --> 00:43:37,280
So let's go ahead and try this I will run the app here.

609
00:43:37,650 --> 00:43:38,730
So this should work.

610
00:43:38,730 --> 00:43:44,270
The second that this opens up it should show the one that came from Joe at Zappy code.

611
00:43:44,430 --> 00:43:50,510
But then also did just kind of prove that this works and oh we've got an error here.

612
00:43:50,790 --> 00:43:53,370
We forgot to do a question mark here.

613
00:43:53,400 --> 00:43:57,870
Go ahead and that well we're not done yet.

614
00:43:58,260 --> 00:44:02,150
Let's see it still needs to have another question mark there.

615
00:44:02,160 --> 00:44:02,700
All right.

616
00:44:03,030 --> 00:44:08,910
Let's go ahead and test that out which is what it told me before I started trying to build the app or

617
00:44:08,910 --> 00:44:14,340
whatnot but we'll get the one from Joe Zappy code but then also we'll send one to ourselves to really

618
00:44:14,340 --> 00:44:18,450
prove that this is working exactly like we were hoping for.

619
00:44:18,450 --> 00:44:25,830
So let me go ahead and get the database in the background so should be this snap that should show up

620
00:44:26,400 --> 00:44:28,900
and look there's a Joe Zappy code.

621
00:44:28,980 --> 00:44:32,060
I think that's the one to really prove that this is working.

622
00:44:32,400 --> 00:44:37,150
Let's go ahead and create a new snap for this one.

623
00:44:37,230 --> 00:44:41,780
Select one of these images and I'll say from me.

624
00:44:41,940 --> 00:44:49,320
Smiley face for this one that will go and upload that and look it spinless back to the Snap's page and

625
00:44:49,320 --> 00:44:54,690
it shows I've got one now from Nicot zip code and one from Joe Zappy called com.

626
00:44:54,900 --> 00:44:55,310
All right.

627
00:44:55,320 --> 00:44:58,860
So excellent place to stop right here we're getting really really close.

628
00:44:58,860 --> 00:45:06,300
We just need to make it so now when a user taps on one of these then we can go ahead and add the appropriate

629
00:45:06,300 --> 00:45:11,220
information like oh or not add the appropriate information we need to show the user the information

630
00:45:11,220 --> 00:45:11,410
right.

631
00:45:11,410 --> 00:45:16,100
When you download the image show him what the messages whatever that may be.

632
00:45:16,320 --> 00:45:21,570
And then we need to make it when they hit the back button delete so will cover all of that in the next

633
00:45:21,570 --> 00:45:22,190
lecture.
