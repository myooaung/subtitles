WEBVTT
1
00:00:00.660 --> 00:00:07.440
So were able to successfully get our user to log in now we need to work on the Snap's activity to say

2
00:00:07.800 --> 00:00:12.050
that you know we have some options for them we should provide a little menu option here.

3
00:00:12.060 --> 00:00:17.600
And if they want to create a new snap or they want to log out we should provide that functionality.

4
00:00:17.730 --> 00:00:20.060
So let's get back to android studio.

5
00:00:20.340 --> 00:00:23.730
Let's bring up the project for you and I'm going to move this back to android.

6
00:00:23.790 --> 00:00:27.870
I think visually for me this is just a little bit easier to work with.

7
00:00:27.870 --> 00:00:32.270
So now that we've got this in place right we can get to you know our main activity and stuff.

8
00:00:32.280 --> 00:00:37.260
But here inside of the Rez if we don't already have a Menu folder we need to create one song right click

9
00:00:37.800 --> 00:00:42.830
and say new and we want to do Android resource directory.

10
00:00:43.030 --> 00:00:49.440
We're going to go ahead and change this to be for a menu and that will properly change the name there.

11
00:00:49.600 --> 00:00:50.620
We'll just go ahead and hit.

12
00:00:50.620 --> 00:00:51.850
OK.

13
00:00:51.970 --> 00:00:58.540
We're going to Right-Click this menu and say that we want a new and we need a menu resource file so

14
00:00:58.570 --> 00:01:00.360
you can choose what you want to call this.

15
00:01:00.370 --> 00:01:04.560
I'm just going to call this Snap's and we'll go ahead and hit.

16
00:01:04.570 --> 00:01:05.890
OK.

17
00:01:06.700 --> 00:01:09.370
And now with that in place we've got the snapshot ex-MIL.

18
00:01:09.370 --> 00:01:15.310
I like to always go into the text version of this in order to go and add items so I'm going to say inside

19
00:01:15.310 --> 00:01:18.930
of here I want to add an item.

20
00:01:19.000 --> 00:01:21.670
Let's go ahead and give it an I.D..

21
00:01:21.790 --> 00:01:28.800
We'll do our app plus ID and call the first option that we have should be able to create a new Snap's

22
00:01:28.800 --> 00:01:29.180
or world.

23
00:01:29.180 --> 00:01:37.750
Just call this create snap and then we're going to provide a title here which I'm going to call Create

24
00:01:38.280 --> 00:01:41.850
Capital snap clean up a little bit right.

25
00:01:42.340 --> 00:01:48.310
And then let's go ahead and make a second option or item here to log out so will say item we need an

26
00:01:48.310 --> 00:01:57.320
ID that will just simply call log out and we'll go ahead and change that title to be capital log out.

27
00:01:57.760 --> 00:02:05.590
So with that in place we should see a menu that looks like this where we can create a snap and log out.

28
00:02:05.590 --> 00:02:12.250
Then we need to go over to our Snap's activity and make it so that we can actually go ahead and create

29
00:02:12.310 --> 00:02:13.140
this menu.

30
00:02:13.240 --> 00:02:21.610
So first step that we need to do is we need to make a new function called on create menu options on

31
00:02:22.240 --> 00:02:25.560
create menu options menu.

32
00:02:25.570 --> 00:02:26.380
There we go.

33
00:02:26.680 --> 00:02:34.720
So create options menu and before we do this return of the super create options menu we are going to

34
00:02:35.560 --> 00:02:45.220
create a new value called inflator and we're going to say this is equal to a menu inflator.

35
00:02:45.730 --> 00:02:51.310
And then we'll say inflator not inflate.

36
00:02:51.670 --> 00:02:59.500
And this is where we'll do our our menu Snap's that one that we had just created and will also pass

37
00:02:59.500 --> 00:03:01.970
in this menu object that comes in.

38
00:03:02.150 --> 00:03:02.750
Okay.

39
00:03:03.190 --> 00:03:08.500
So now go ahead and help us to create the menu but then we need to write some code for what happens

40
00:03:08.500 --> 00:03:10.870
when someone selects one of those options.

41
00:03:10.930 --> 00:03:18.670
So we're going to create another function here this one is going to be called on options and we want

42
00:03:18.670 --> 00:03:19.960
items selected.

43
00:03:19.960 --> 00:03:26.980
So on options items selected and before we do this return again this is where we want to do a little

44
00:03:26.980 --> 00:03:31.930
if statement to see which are we working with someone wanting to create a new snap or are they trying

45
00:03:31.930 --> 00:03:33.340
to log out.

46
00:03:33.340 --> 00:03:39.700
So we'll just do if statement here and what we're going to check for is see if this item that was passed

47
00:03:39.700 --> 00:03:43.340
through into our function if the item.

48
00:03:43.600 --> 00:03:49.660
Let's do a question mark because that's unknowable and I'll say item not item Id see if this is equal

49
00:03:49.660 --> 00:03:58.220
to our DOT ID dot and then this is where we would say for example create snap.

50
00:03:58.450 --> 00:03:58.950
Right.

51
00:03:59.260 --> 00:04:04.810
So then if that's not the case we're going to do an else and we want to do it exact same if like this

52
00:04:04.900 --> 00:04:09.670
except that we'll go ahead and pace that rather than create snap we're going to see if this one's equal

53
00:04:09.670 --> 00:04:15.040
to log out and then this way this is the code that runs if someone is trying to create a snap and this

54
00:04:15.040 --> 00:04:17.980
is the code that runs if someone's trying to log out.

55
00:04:18.010 --> 00:04:22.270
So let's go ahead and work first with if someone's trying to log out what do we need to do.

56
00:04:22.270 --> 00:04:28.530
Well we need to go ahead and say finish which basically finishes this activity and move the moves of

57
00:04:28.530 --> 00:04:31.210
the user back to the log in screen.

58
00:04:31.240 --> 00:04:34.210
We also need to be able to sign out the user.

59
00:04:34.240 --> 00:04:41.500
And that's a firebase skill that we're going to need it's a function there and so we're going to go

60
00:04:41.500 --> 00:04:45.750
back to our main activity and just copy this code to get r.m off.

61
00:04:45.790 --> 00:04:51.400
So go ahead and copy that come back and paste this in as a property.

62
00:04:52.030 --> 00:04:59.560
And with that pasted in before we go ahead and finish this activity we're going to say am off dot and

63
00:04:59.600 --> 00:05:05.920
simply just sign out and this is going to sign us out of the app which then means the next time we open

64
00:05:05.920 --> 00:05:09.390
it that we'd be able to log in and move forward.

65
00:05:09.670 --> 00:05:14.440
There's one more situation that I want to cover here and that's if the user hits the back button on

66
00:05:14.440 --> 00:05:15.330
their own.

67
00:05:15.410 --> 00:05:17.530
We also want to be able to sign out the user.

68
00:05:17.800 --> 00:05:25.150
So we're going to type in the function on back pressed and inside of here after we do the super back

69
00:05:25.150 --> 00:05:29.040
pressed we are going to do our same em off dot.

70
00:05:29.230 --> 00:05:30.890
Sign out King.

71
00:05:31.060 --> 00:05:36.610
So let's go ahead and give this a test and see if this is working on or emulator should simply be if

72
00:05:36.610 --> 00:05:41.670
we try to log out that we will be able to log out and then once when we have that working we'll go ahead

73
00:05:41.780 --> 00:05:45.000
move forward with creating the snap and all that good stuff.

74
00:05:45.020 --> 00:05:49.130
So let's get our emulator opened up here.

75
00:05:53.400 --> 00:06:00.940
Wait a moment for this to finish up there we go.

76
00:06:01.130 --> 00:06:02.950
All right so here comes the app.

77
00:06:03.050 --> 00:06:08.690
We are automatically logged into the screen so that means our code ran successfully that checks to see

78
00:06:08.690 --> 00:06:15.740
if we're already assigned and user and we'll go ahead and now hit log out and boom all of a sudden we

79
00:06:15.740 --> 00:06:20.780
are back here and then you know we'd have to provide our username and password so to check and see if

80
00:06:20.780 --> 00:06:22.090
we were really logged out here.

81
00:06:22.100 --> 00:06:27.410
Let's go ahead and just run this on the emulator one more time and this will tell us you know if the

82
00:06:27.410 --> 00:06:31.910
app opens up and shows the logon screen that means we were successfully logged out and look at that

83
00:06:32.420 --> 00:06:32.870
it did.

84
00:06:32.870 --> 00:06:34.410
So I'm going to go ahead and sign it again.

85
00:06:34.430 --> 00:06:40.350
Nick Zappy Cocom B C D.

86
00:06:40.510 --> 00:06:42.270
One two three four.

87
00:06:42.320 --> 00:06:49.310
Go ahead and hit go and boom we are back in and if we hit the back button for instance that will still

88
00:06:49.310 --> 00:06:54.160
go ahead and sign us out or we can hit the go button and sign back in again.

89
00:06:54.680 --> 00:07:00.680
Now if we want to go ahead and create a snap we have to have an activity that allows us to select an

90
00:07:00.680 --> 00:07:05.430
image and then also provide some sort of message for the user.

91
00:07:05.430 --> 00:07:13.280
And so we're going to have to make a new activity so let's do file we want new activity down here we'll

92
00:07:13.400 --> 00:07:15.230
just start with a blank one.

93
00:07:15.320 --> 00:07:19.600
And as far as the name for this goes lots of different options.

94
00:07:19.610 --> 00:07:26.360
But I think maybe something like create snap sort of signifies what it is that we're trying to do because

95
00:07:26.360 --> 00:07:32.540
this is where we say the image and the message and then the next activities will choose who it is that

96
00:07:32.540 --> 00:07:33.260
we're sending it to.

97
00:07:33.260 --> 00:07:35.390
But this is like the essence of the snap.

98
00:07:35.390 --> 00:07:38.560
So I think create snap is a pretty good name.

99
00:07:38.900 --> 00:07:43.390
So with this created Let's move back to our Snap's activity.

100
00:07:43.430 --> 00:07:48.440
So if someone wants to create a snapchat to go ahead and write the code to make an intent that will

101
00:07:48.440 --> 00:07:50.950
properly go ahead and get us there.

102
00:07:50.960 --> 00:07:52.910
So what we want to do here.

103
00:07:52.910 --> 00:07:53.810
Pretty straightforward.

104
00:07:53.810 --> 00:08:01.550
We just want to create an intent and this will be equal to a new intent where we're going to have this

105
00:08:01.550 --> 00:08:07.250
is the context and then we're going to move over to that create snap activity.

106
00:08:07.250 --> 00:08:11.730
Colin Colin and this is where you want to say class dot job.

107
00:08:12.160 --> 00:08:19.670
OK make sure we go ahead and get in 10 imported and then we can start that activity and pass in the

108
00:08:19.670 --> 00:08:21.310
proper intent.

109
00:08:21.440 --> 00:08:29.210
Really all that we need to do there but now we can go ahead and move on to our create snapped activity.

110
00:08:29.240 --> 00:08:34.310
So what is it that we're trying to do here we're trying to allow the user to select an image and also

111
00:08:34.310 --> 00:08:38.540
allow them to provide a message so let's go work on the visual side of this.

112
00:08:38.540 --> 00:08:41.570
So here's our create snapshot X amount.

113
00:08:42.140 --> 00:08:46.050
So the first thing that we want to add here is an image view.

114
00:08:46.160 --> 00:08:53.660
So let's go ahead and go to our images bring out an image view and I kind of like as a default just

115
00:08:53.660 --> 00:08:55.630
to have some sort of blank color.

116
00:08:55.700 --> 00:09:02.510
So I'm just going to choose this color accent then with this as far as the size of this I want this

117
00:09:02.510 --> 00:09:08.740
to be a standard size so I'm going to say something like 200 DP by 200 DP.

118
00:09:08.810 --> 00:09:10.970
You can decide what's the proper size for you.

119
00:09:10.970 --> 00:09:14.600
But I think that's a pretty decent image of you.

120
00:09:14.660 --> 00:09:21.210
So with this lower right click and make sure that this gets centered let's have it up near the top.

121
00:09:21.250 --> 00:09:26.090
I'm going to change this to 16 that sort of seems to be our magical spacing in between a lot of different

122
00:09:26.120 --> 00:09:27.310
objects.

123
00:09:27.380 --> 00:09:30.290
We then need a button to choose an image.

124
00:09:30.380 --> 00:09:35.930
So I'm going to go ahead and put a button down below this image Reto and I'm going to right click this

125
00:09:36.660 --> 00:09:42.950
and center that horizontally and then just change the name to be choose image.

126
00:09:43.010 --> 00:09:44.210
All right.

127
00:09:44.210 --> 00:09:47.060
We want to connect this up to our friends so we'll hit that.

128
00:09:47.060 --> 00:09:51.530
It was almost at 16 it was at 15 cival will fix that real quick.

129
00:09:51.540 --> 00:09:55.860
Then the next thing that we need is an edit text or the user can provide a message.

130
00:09:56.150 --> 00:10:04.640
So we'll go ahead and bring out an edit text and make sure that this guy is centered and we'll put it

131
00:10:04.640 --> 00:10:11.660
up near his friend let's change this to 16 and we're going to change this for him rather having any

132
00:10:11.660 --> 00:10:17.390
text in it by default to just the hint that says hey this is where you're going to provide a message.

133
00:10:17.390 --> 00:10:24.980
So with that in place we have everything that we need except for we have to have a button that sort

134
00:10:24.980 --> 00:10:31.390
of says I want to move on to the next screen so we'll go ahead and just drag out one more button here.

135
00:10:31.820 --> 00:10:38.100
Make sure that we can center this guy and also connect it up to its friend.

136
00:10:38.350 --> 00:10:44.020
Have that be 16 and we'll change this to say next k.

137
00:10:44.390 --> 00:10:50.270
So with all of this in place the app visually should be ok let's go ahead and give the proper IDs to

138
00:10:50.270 --> 00:10:51.640
everything here.

139
00:10:52.100 --> 00:10:59.090
So I think image view that's a fine name for what we've got going on here although I guess there's going

140
00:10:59.090 --> 00:11:03.960
to be a blamers use so let's maybe call this create snap image view.

141
00:11:04.300 --> 00:11:11.410
So create snap image view then for our button that we have here we'll have this called we'll call this

142
00:11:11.420 --> 00:11:19.120
choose the image button and then we want to work with our edit text here.

143
00:11:19.250 --> 00:11:25.870
We'll go ahead and call this message edit text and it will say yes.

144
00:11:25.880 --> 00:11:29.090
And then finally we want to have our next button.

145
00:11:29.090 --> 00:11:33.980
Although with this next button we won't probably have to work with the idea but let's just go ahead

146
00:11:33.980 --> 00:11:40.910
and do it for good measure call that next button but then we'll go ahead and say for the choosing of

147
00:11:40.910 --> 00:11:42.170
the image.

148
00:11:42.170 --> 00:11:44.970
Well we want this to have an on click function.

149
00:11:44.960 --> 00:11:49.220
We're going to call this use image clicked.

150
00:11:49.380 --> 00:11:50.610
All right.

151
00:11:50.970 --> 00:11:56.300
And for this next button we're going to have this called next clicked.

152
00:11:56.300 --> 00:12:01.490
All right so with that in place I think we have everything ready to now go ahead and write some code.

153
00:12:01.820 --> 00:12:05.160
So we're going to bring in a couple of things here.

154
00:12:05.180 --> 00:12:07.300
So the first one is the image view.

155
00:12:07.580 --> 00:12:17.740
So I'm going to call this the Create snap image view and this is going to be of type image view.

156
00:12:17.960 --> 00:12:28.160
Nullable will initially set that equal to no want to be equal to no no just no auto complete You're

157
00:12:28.160 --> 00:12:29.750
killing me here.

158
00:12:29.840 --> 00:12:37.590
The next thing that we're going to want to do here is we want to get our message added text.

159
00:12:37.820 --> 00:12:45.480
We'll say this should be of type text and also knowable and we'll set that equal to no initially.

160
00:12:45.910 --> 00:12:51.620
OK so with those two things in place then we've got to make it so that we can you know start working

161
00:12:51.620 --> 00:12:57.440
with these things and kind of the first functionality that we need is to allow it so that if someone

162
00:12:57.440 --> 00:13:01.970
wants to add an image that we have all the functionality for that.

163
00:13:01.970 --> 00:13:08.420
Now we've done this before in a previous project remember in section 5 when we were learning how to

164
00:13:08.420 --> 00:13:11.030
add images into our project we've done that before.

165
00:13:11.030 --> 00:13:18.110
And so I personally would recommend going to that app and copying pasting the text or the code that

166
00:13:18.110 --> 00:13:23.240
we had there in order to do that because there's no point in sort of reinventing the wheel and typing

167
00:13:23.240 --> 00:13:24.800
this stuff all out again.

168
00:13:24.800 --> 00:13:31.190
So I've actually gone ahead and downloaded that if you need to get access to it that is in Section 5

169
00:13:31.190 --> 00:13:34.540
and so let me go ahead and go to my downloads here.

170
00:13:35.730 --> 00:13:41.340
And we want to get our option where we upload the image.

171
00:13:41.520 --> 00:13:45.730
So the photo import demo that's the project that you should be looking for.

172
00:13:45.960 --> 00:13:49.920
You want to drill down until you find the main activity from there.

173
00:13:49.950 --> 00:13:56.160
But this is going to allow us to then sort of grab the code from that project and use that so I'm going

174
00:13:56.160 --> 00:14:00.080
to go ahead and just hear an android studio open up that project.

175
00:14:00.380 --> 00:14:05.800
So do file and I want to open up inside the downloads here.

176
00:14:06.630 --> 00:14:09.040
Our photo important IMO.

177
00:14:09.060 --> 00:14:10.470
So go ahead and open up that

178
00:14:13.850 --> 00:14:18.680
and we'll just kind of go ahead and copy paste the code because again we know that we've done this before

179
00:14:18.690 --> 00:14:24.070
let's just go ahead and reuse what we have and we're going to do this again when we're downloading image

180
00:14:24.080 --> 00:14:27.040
so be ready to check that out.

181
00:14:27.440 --> 00:14:32.290
But with this in place right there's a couple of awesome things that we've got here.

182
00:14:32.300 --> 00:14:40.220
So the first thing that we want to do is when someone hits that they want to you know add a photo in

183
00:14:40.310 --> 00:14:44.470
the app like what is it that we should be doing to check and see what's going on.

184
00:14:44.480 --> 00:14:49.160
Well this is where we want to check and see if there was permission and if there's not permission right.

185
00:14:49.160 --> 00:14:50.380
We need to go do things.

186
00:14:50.460 --> 00:14:55.190
So in the import photo import demo app this is inside of the create.

187
00:14:55.190 --> 00:14:59.870
So we're just going to go ahead and copy all of this code and you'll notice it's referencing this get

188
00:14:59.960 --> 00:15:03.130
photo function so maybe we should import that first.

189
00:15:03.140 --> 00:15:10.040
So I'm actually going to go ahead and copy and paste the photo first and we'll bring this into our project

190
00:15:10.040 --> 00:15:15.970
here is going to ask do you want to convert this and we will say yes.

191
00:15:16.090 --> 00:15:18.190
That came through beautifully.

192
00:15:18.200 --> 00:15:24.560
Next we need to make to write some code whenever the user says that they want to import something so

193
00:15:25.130 --> 00:15:32.150
if we go back here to our button the choose image let's see choose image clicked fact I'll just go ahead

194
00:15:32.150 --> 00:15:35.180
and copy and paste that to make sure I don't make a mistake.

195
00:15:35.180 --> 00:15:37.670
So function choose image clicked.

196
00:15:37.970 --> 00:15:41.350
We will provide a view in the situation.

197
00:15:41.420 --> 00:15:48.290
So let's go ahead and important that to our little curly brackets and now go over to this other project.

198
00:15:48.290 --> 00:15:54.440
And again the code that's inside of the on Create we want to copy and put that inside of our Choose

199
00:15:54.440 --> 00:15:55.160
image.

200
00:15:55.370 --> 00:15:57.220
So choose image clicked.

201
00:15:57.320 --> 00:15:58.550
We'll go ahead and paste this in.

202
00:15:58.550 --> 00:16:02.780
Yes you want to do the proper converting here.

203
00:16:03.020 --> 00:16:03.860
And that looks great.

204
00:16:03.860 --> 00:16:12.140
Looks like it's doing everything that we need now we need to talk about you know what happens if somebody

205
00:16:13.220 --> 00:16:18.220
you know picks the image right and then we go and get some information back for that.

206
00:16:18.230 --> 00:16:24.650
Well if we go over to the other project this is the on activity results or we'll just go ahead and copy

207
00:16:25.400 --> 00:16:29.780
all of this come back and paste this in.

208
00:16:30.110 --> 00:16:35.510
And yes we want to make sure that Disko goes ahead and gets converted and we'll have to import a few

209
00:16:35.510 --> 00:16:36.320
things here.

210
00:16:36.320 --> 00:16:42.310
Now this code was referencing an image view that had the name of image view.

211
00:16:42.500 --> 00:16:45.980
Right and so we had done this whole find view by ID stuff.

212
00:16:46.010 --> 00:16:50.980
And we've already done that so we're actually just going to delete that line of code and then here where

213
00:16:50.990 --> 00:16:52.700
it's referencing an image view.

214
00:16:52.700 --> 00:16:59.630
This is where we're going to say oh this is the choose not choose image clicked to create snap image

215
00:16:59.630 --> 00:17:00.000
view.

216
00:17:00.140 --> 00:17:07.040
So go ahead and change us to the Create snap image view then with that in place.

217
00:17:07.040 --> 00:17:10.050
We also need to talk about what happens.

218
00:17:10.090 --> 00:17:14.240
Also this is when we got back the permission information where we need to talk about what happens when

219
00:17:14.240 --> 00:17:21.450
we get back the actual you know data from the image so we'll go back.

220
00:17:21.480 --> 00:17:21.840
No.

221
00:17:21.870 --> 00:17:22.950
I'm all mixed up.

222
00:17:22.950 --> 00:17:23.730
That's what that was.

223
00:17:23.740 --> 00:17:27.030
It's this on request permission result that we want so let's copy.

224
00:17:27.030 --> 00:17:32.430
This is one issue when you copy and paste sometimes you get mixed up with what you're working on but

225
00:17:33.450 --> 00:17:35.190
it will save you a lot of time.

226
00:17:35.190 --> 00:17:44.610
So here inside of our create snap we want to go ahead and paste in this we'll say yes to that and everything

227
00:17:44.640 --> 00:17:50.010
is looking great here one thing what this creates snap images you are going to have to write a question

228
00:17:50.010 --> 00:17:51.730
mark because that's knowable.

229
00:17:51.990 --> 00:17:56.140
But with this this should be enough to get an image to show up inside of our app.

230
00:17:56.140 --> 00:18:04.340
So let's go ahead and run this on our device and see if we can get at least an image from the sort of

231
00:18:04.830 --> 00:18:06.080
photo library to show up.

232
00:18:06.090 --> 00:18:10.890
Now if you don't have one go ahead and open up the camera on this emulator and that's where you can

233
00:18:10.890 --> 00:18:16.530
take a picture of that little floating square that shows up on the screen with sort of the checkered

234
00:18:16.530 --> 00:18:19.900
background but you'll need to have some sort of photo.

235
00:18:19.910 --> 00:18:24.960
You could also go download a photo if you wanted to but you'll need something so that when you want

236
00:18:24.960 --> 00:18:28.330
to select a photo that there will be something there.

237
00:18:28.770 --> 00:18:30.750
So app opens up.

238
00:18:30.750 --> 00:18:36.480
Let's say I want to create a new snap look at that takes us to our new activity and I hit this choose

239
00:18:36.540 --> 00:18:37.440
image.

240
00:18:37.550 --> 00:18:38.620
OK.

241
00:18:39.120 --> 00:18:45.540
Well we are going to hit an issue here and that's because I forgot to ask for permission in order to

242
00:18:45.540 --> 00:18:49.470
use you know access the user's photos and all that.

243
00:18:49.470 --> 00:18:56.370
So let's go ahead and move over in our project here into the Android manifest and we've got to make

244
00:18:56.370 --> 00:19:04.680
sure we ask for here use permission and we want to do the read external storage so Android permission

245
00:19:04.820 --> 00:19:09.400
read external storage and we'll go ahead and close that up.

246
00:19:10.950 --> 00:19:17.100
Now with that in place we should see Arap work out here so let's go ahead and run this on the emulator

247
00:19:17.340 --> 00:19:18.500
one more time.

248
00:19:23.500 --> 00:19:30.460
OK so the app opens up and say I want to create a new snap and I go to choose an image that's going

249
00:19:30.460 --> 00:19:32.200
to say would you like to allow this.

250
00:19:32.200 --> 00:19:34.720
I will say yes allow.

251
00:19:34.750 --> 00:19:40.600
Then you can see oh and I thought I had a photo and apparently I don't.

252
00:19:40.600 --> 00:19:45.940
So let's go ahead and go home here and open up the camera.

253
00:19:48.540 --> 00:19:51.940
And I just want to take a photo.

254
00:19:51.960 --> 00:19:52.260
Nice.

255
00:19:52.260 --> 00:19:56.720
Now once I've taken a photo let me run the app one more time.

256
00:19:59.200 --> 00:20:01.670
That it changes from red to green.

257
00:20:01.680 --> 00:20:04.360
I thought it was just always one color.

258
00:20:05.100 --> 00:20:11.520
All right so now I want to create a snap in to choose an image and look now that shows up how I already

259
00:20:11.520 --> 00:20:12.440
did have an image.

260
00:20:12.450 --> 00:20:14.940
But for whatever reason then let me pick one.

261
00:20:14.940 --> 00:20:20.240
So I'll go ahead and select one and look at that.

262
00:20:20.310 --> 00:20:22.330
It doesn't show up inside of the image.

263
00:20:22.350 --> 00:20:23.280
So what gives.

264
00:20:23.280 --> 00:20:25.210
Why isn't this showing up.

265
00:20:25.560 --> 00:20:32.580
Well if we go back to our create snap activity in our uncreate We never set up the create snap image

266
00:20:32.580 --> 00:20:39.090
view or the message edit text so here this is where we're going to say OK create snap image view you

267
00:20:39.090 --> 00:20:42.420
are equal to find view by ID.

268
00:20:42.540 --> 00:20:51.510
ID create a snap image view and then for a message edit text Let's go ahead and set this up while we're

269
00:20:51.510 --> 00:20:52.280
at it.

270
00:20:52.470 --> 00:20:59.450
We want to do our find view by ID card ID message and text.

271
00:20:59.460 --> 00:20:59.880
All right.

272
00:20:59.940 --> 00:21:03.900
So with that in place let's go ahead and try this.

273
00:21:03.900 --> 00:21:09.780
Now you know we've we've come up a couple of times here and haven't gotten this to work so this hopefully

274
00:21:09.780 --> 00:21:14.270
will be a moment of triumph for us and we can move forward.

275
00:21:14.580 --> 00:21:21.930
So we'll go ahead and wait for app to finish up here while we watch this incredible square dance around

276
00:21:21.940 --> 00:21:25.180
the screen and here we go.

277
00:21:25.180 --> 00:21:28.670
Looks like our apps finally ready to rock n roll.

278
00:21:28.690 --> 00:21:33.050
So here it is we want to create a snap.

279
00:21:33.070 --> 00:21:39.780
I'm going to choose an image like this one and look at that.

280
00:21:39.820 --> 00:21:41.780
We have it in place.

281
00:21:41.790 --> 00:21:42.360
OK.

282
00:21:42.520 --> 00:21:50.880
So with this then we are ready to move on to the next activity where the user is going to fill in.

283
00:21:51.090 --> 00:21:57.100
You know and say oh I want to send it to this user but before we do that I want to teach you how we

284
00:21:57.100 --> 00:22:04.180
can actually upload this image to the storage part of firebase and then talk about picking the user

285
00:22:04.180 --> 00:22:10.120
because we don't want the user to select have to you know select somebody and wait for that image to

286
00:22:10.120 --> 00:22:10.510
upload.

287
00:22:10.510 --> 00:22:15.490
We should make it so when we hit this next button that starts that upload process.

288
00:22:15.580 --> 00:22:23.410
So what we're going to do is go back to our app here and we're going to write a function for when next

289
00:22:23.500 --> 00:22:24.720
is clicked.

290
00:22:24.880 --> 00:22:30.830
So I believe that we just call that next click souls say next clicked.

291
00:22:31.170 --> 00:22:37.670
And this is where we're going to pass in the view and we'll do our curly brackets like that.

292
00:22:37.810 --> 00:22:43.600
And there's a whole bunch of information that we'll need in order to upload a photo and we can get that

293
00:22:43.600 --> 00:22:46.030
from the documentation on the Web site.

294
00:22:46.030 --> 00:22:49.950
So now you can see we've been working in the authentication world.

295
00:22:50.050 --> 00:22:52.120
We're going to move down to storage.

296
00:22:52.270 --> 00:22:52.840
So go ahead.

297
00:22:52.840 --> 00:22:59.740
Open up storage you want to do Android get started and this will talk about how we can go ahead and

298
00:22:59.740 --> 00:23:00.240
save things.

299
00:23:00.250 --> 00:23:04.530
So first thing we've got to do install the SDK firebase console.

300
00:23:04.530 --> 00:23:08.320
Yeah yeah yeah we've done that but oh look at this.

301
00:23:08.320 --> 00:23:13.210
We need to make sure that we have the proper cloud storage for everything.

302
00:23:13.210 --> 00:23:21.250
So with this we're going to go ahead and copy this line where it says compile go back to our project

303
00:23:21.580 --> 00:23:28.330
and let's see we need to get to the cradle here.

304
00:23:28.710 --> 00:23:30.600
And we want the app level 1.

305
00:23:30.940 --> 00:23:32.650
So I'm going to go ahead and paste this in.

306
00:23:32.650 --> 00:23:37.450
You will notice that this is seen firebase storage eleven point eight.

307
00:23:37.450 --> 00:23:40.450
And we were working with eleven point six on the off.

308
00:23:40.480 --> 00:23:44.580
So it looks like maybe there are between versions just to be consistent here.

309
00:23:44.590 --> 00:23:49.780
I'm going to switch this to six because I want it to be eleven point six for everything because I think

310
00:23:49.810 --> 00:23:51.540
that's what's going to work best.

311
00:23:51.550 --> 00:23:56.860
Again you can experiment with this if you want but I'm just going to keep things sort of all on the

312
00:23:56.860 --> 00:24:04.810
same version of say sync now so this will then add the ability to save and retrieve storage files from

313
00:24:04.810 --> 00:24:10.150
firebase and if you're wondering what does that mean storage Well if you have any sort of file that

314
00:24:10.150 --> 00:24:13.060
you want to upload images movies sound

315
00:24:15.630 --> 00:24:20.830
documents whatever it is that you want to sort of store it's like a file that you want to save.

316
00:24:20.830 --> 00:24:23.250
You need to use firebase storage.

317
00:24:23.310 --> 00:24:27.270
But the great thing is they make it very very easy to work with.

318
00:24:27.330 --> 00:24:32.550
And let me just go ahead and walk through what we've got to do and in fact on their Web site they have

319
00:24:32.550 --> 00:24:38.490
great documentation about how you can actually go ahead and work with uploading an image so we're going

320
00:24:38.490 --> 00:24:40.650
to do upload files here.

321
00:24:40.830 --> 00:24:47.430
Go ahead and click on that and the one that we're looking for here is we want to upload from data in

322
00:24:47.430 --> 00:24:53.250
memory and you can see they have an example here where they're actually taking something from an image

323
00:24:53.250 --> 00:24:58.590
view and uploading it to firebase So that's pretty great for us.

324
00:24:58.590 --> 00:25:05.580
We're going to go ahead and just copy all this code and come back to android studio and wow we have

325
00:25:05.580 --> 00:25:08.030
a ton of tabs open up here.

326
00:25:08.220 --> 00:25:13.740
We want to make it so that when the next is clicked this is where we'll then go you know write the code

327
00:25:13.740 --> 00:25:14.580
for all this good stuff.

328
00:25:14.580 --> 00:25:16.510
So let's just go ahead paste it in.

329
00:25:16.560 --> 00:25:22.410
Say yes we want to go convert this stuff to Cartland will do enough to sort of change things around

330
00:25:22.410 --> 00:25:27.900
here and the first one is any time that it's referencing image view we have to use the name of our image

331
00:25:27.900 --> 00:25:34.440
view and it looks like we probably got a bad import here as well so I'm going to delete this import

332
00:25:34.440 --> 00:25:36.780
just because I saw a read there.

333
00:25:37.170 --> 00:25:43.920
But with this imported we're anywhere we see imagery we're going to have to use this create snap image

334
00:25:43.920 --> 00:25:52.380
view so just copy that paste that and their pace and their pace and their looks good this byte array

335
00:25:52.380 --> 00:25:53.260
outputs drame.

336
00:25:53.280 --> 00:26:00.530
We just have to import the code so that option enter to get that going then next with this bitmap.

337
00:26:00.540 --> 00:26:04.700
We've got to make sure we put a question mark here because that's unknowable nullable and this.

338
00:26:04.770 --> 00:26:09.510
So basically the code that's going on here it's taking what we have inside of our image view.

339
00:26:09.510 --> 00:26:17.400
It's turning it into to a bitmap and then turning that into a j peg file into this data that we can

340
00:26:17.400 --> 00:26:21.780
then use to then upload to the firebase storage.

341
00:26:21.780 --> 00:26:27.290
Now with this you'll see it's referencing something called Mountains ref and this is in their documentation

342
00:26:27.300 --> 00:26:30.150
this whole big thing that they had done to get to the right place.

343
00:26:30.150 --> 00:26:37.350
But let me instead show you how I would go ahead and talk about this so in our app we want to store

344
00:26:37.380 --> 00:26:40.730
all of our images inside of a folder called images.

345
00:26:40.770 --> 00:26:47.610
If we go back to firebase here if you click on storage it'll show you everything that's inside of storage.

346
00:26:47.940 --> 00:26:54.750
And when you say get started here this will sort of open up for the first time and if you want to you

347
00:26:54.750 --> 00:26:59.460
can create your own folders and upload files there but we're going to do this all via code.

348
00:26:59.460 --> 00:27:05.610
So let's get back to our project here and we need to make what's called a reference which is sort of

349
00:27:05.610 --> 00:27:09.870
like our starting point in order to be working with this.

350
00:27:09.870 --> 00:27:16.530
And so what we're going to do is we're going to get access to firebase and we want storage.

351
00:27:16.530 --> 00:27:21.690
And if you don't see that autocomplete it means something then go right with your build cradle and we're

352
00:27:21.690 --> 00:27:28.050
going to do a lot get instance and we're going to do get reference and just think after you've done

353
00:27:28.410 --> 00:27:34.740
get instance in dot get referenced this is essentially the starting point in firebase It's like gotten

354
00:27:34.740 --> 00:27:36.040
you to this point.

355
00:27:36.060 --> 00:27:40.950
So if we want to move into a folder that we're going to call images like we have to create that first

356
00:27:41.730 --> 00:27:46.710
we're going to go after the stock get reference or going to say Dot child.

357
00:27:46.710 --> 00:27:51.090
Think of child as adding something new like a folder or a file.

358
00:27:51.090 --> 00:27:54.790
And so this is where we're going to say images right.

359
00:27:54.890 --> 00:27:59.620
And I want to make a folder named images then we need to have a name for image.

360
00:27:59.670 --> 00:28:05.460
And so we're going to say Dot child to add onto this and we're going to say some sort of image name

361
00:28:05.460 --> 00:28:10.410
and this should be like ABC dot JPAC or something like that.

362
00:28:10.410 --> 00:28:15.000
Now the one issue that we have here is we don't want to do ABC that Jay Pegge because we're going to

363
00:28:15.000 --> 00:28:20.160
be uploading tons of images and if all of them have the name ABC they're going to overwrite each other

364
00:28:20.160 --> 00:28:24.780
and so we need to have a unique name for every single image that we upload.

365
00:28:24.780 --> 00:28:30.210
Now in order to do that there's this really awesome functionality called a you u ID which basically

366
00:28:30.210 --> 00:28:34.110
gives you a unique string that is guaranteed to be unique.

367
00:28:34.110 --> 00:28:39.870
I won't go into the details of it but it's really fascinating about how this is determined but if we

368
00:28:39.870 --> 00:28:45.000
go up to the top here we are going to make this a property of our class that we are going to call it's

369
00:28:45.060 --> 00:28:48.360
a value and we're going to call it Image Name Game.

370
00:28:48.450 --> 00:28:53.700
So essentially we want Image Name to be this you you ID thing.

371
00:28:53.820 --> 00:28:59.220
Plus we're going to go ahead and add a dot j peg on the end of that.

372
00:28:59.220 --> 00:29:02.540
So how do we create one of these you IDs we're going to do all caps.

373
00:29:02.540 --> 00:29:06.800
You you ID and you can see if you hit enter and we'll give you the proper import.

374
00:29:06.900 --> 00:29:13.500
So you ID dot random you ID dot to string and that's all it takes.

375
00:29:13.500 --> 00:29:17.880
So this is going to be like a 4 7 x 5 to blah blah blah whatever.

376
00:29:17.880 --> 00:29:20.560
Plus a dot JPAC at the end.

377
00:29:20.580 --> 00:29:26.730
So with that then all the way down here if we get back to this instead of saying ABC that jpeg will

378
00:29:26.730 --> 00:29:33.980
just provide image name here and then we can then say OK we've got firebase storage get insensed a reference

379
00:29:33.990 --> 00:29:39.430
we want to make a folder called images then we've given a name for an image that should go in that folder.

380
00:29:39.600 --> 00:29:45.360
We're then going to cut and paste this right here so that when we get to the right file We're going

381
00:29:45.360 --> 00:29:51.330
to say put bytes which basically says hey go upload something to the correct place.

382
00:29:51.330 --> 00:29:55.710
Now if you know after we've gone and done this there's a couple of options here one.

383
00:29:55.710 --> 00:29:59.020
If something doesn't work we have this failure.

384
00:29:59.100 --> 00:30:03.990
And so we'd want to do something here like probably display a message to the user or we weren't able

385
00:30:03.990 --> 00:30:05.510
to upload whatever.

386
00:30:05.580 --> 00:30:12.640
In fact maybe let's just go ahead and make a toast real quick where we say toast make text this and

387
00:30:12.660 --> 00:30:19.500
we'll say something like upload failed and we want to say how long that should go for.

388
00:30:19.500 --> 00:30:21.890
Let's make that sure and show that.

389
00:30:21.890 --> 00:30:22.560
All right.

390
00:30:22.710 --> 00:30:26.760
But if this was successful Well then a couple of things happened.

391
00:30:26.760 --> 00:30:33.510
One is we get this download your are about where we can access the image that was uploaded and then

392
00:30:33.840 --> 00:30:37.770
because we're inside of this on Success List and we know that everything worked out.

393
00:30:37.770 --> 00:30:41.210
So then we could go ahead and move onto the next activity or something like that.

394
00:30:41.430 --> 00:30:47.390
But in this case let's just go ahead and log out this download your L to see what it is so we'll just

395
00:30:47.400 --> 00:30:51.780
say your show and we want to pass forward this download.

396
00:30:51.820 --> 00:30:57.170
You are all going gonna have to turn that into a string so we'll say to string on that.

397
00:30:57.470 --> 00:31:02.380
But we should be able to successfully now upload an image when we hit that next button.

398
00:31:02.400 --> 00:31:05.650
So let's go ahead and run our app on the emulator and see if this works.

399
00:31:05.670 --> 00:31:11.690
Once we get this this will be a great place to sort of and and then we'll move forward in the next one

400
00:31:11.700 --> 00:31:15.240
talking about how we can select who we want to send the snap to.

401
00:31:15.540 --> 00:31:22.380
But with this in place let's go ahead and get our emulator up here and I'm going to go ahead move it

402
00:31:22.380 --> 00:31:26.420
to the homescreen so we don't have the camera up all the time.

403
00:31:26.440 --> 00:31:30.560
I just stare at that square not enough you'll go crazy I guarantee it.

404
00:31:30.600 --> 00:31:31.660
And you don't want that.

405
00:31:31.700 --> 00:31:36.830
So come on emulator we're really waiting for you.

406
00:31:36.830 --> 00:31:38.550
Here we go.

407
00:31:38.550 --> 00:31:38.880
All right.

408
00:31:38.890 --> 00:31:44.860
Installing the phone and here's the app.

409
00:31:45.090 --> 00:31:46.900
Start by creating a snap.

410
00:31:46.980 --> 00:31:53.220
Let's choose an image that we want to upload to this little square guy and I'm going to do some sort

411
00:31:53.220 --> 00:31:54.580
of message hello.

412
00:31:54.810 --> 00:31:57.930
It won't matter because we won't see.

413
00:31:57.960 --> 00:32:03.240
We're not taking that message anywhere but let's hit this next button and we'll just sort of wait around.

414
00:32:03.240 --> 00:32:08.730
We didn't have anything if it was successful to happen yet but we don't see any text message yet.

415
00:32:08.730 --> 00:32:11.330
So that is a good sign that something good has happened.

416
00:32:11.610 --> 00:32:17.790
But to kind of confirm this let's first go ahead and log cat and see did it give us your all look at

417
00:32:17.790 --> 00:32:18.090
that.

418
00:32:18.090 --> 00:32:19.060
It did.

419
00:32:19.290 --> 00:32:24.780
But you could also just go here to firebase and if you reload this page for storage make sure you have

420
00:32:24.780 --> 00:32:30.280
storage clicked over here look there's a folder called images and if we click into this folder there's

421
00:32:30.300 --> 00:32:35.340
this new image here and if we click on this you'll see a little preview of what it is and that's the

422
00:32:35.340 --> 00:32:42.800
image and look and this is the name of that got 770 d f 9 6 blah blah blah all this random hoo ha here.

423
00:32:42.900 --> 00:32:51.780
So this works or if you go back to android studio we could actually copy the URL here and we could paste

424
00:32:51.780 --> 00:32:58.510
this end and we could go ahead and just see the image straight up at the storage location in firebase.

425
00:32:58.510 --> 00:33:03.540
So pretty great position right now we are able to sign in.

426
00:33:03.570 --> 00:33:09.390
We're able to create a new snap upload that to firebase our next step is going to be selecting who it

427
00:33:09.390 --> 00:33:13.680
is that we're going to send this to and get all the appropriate information about like you know what

428
00:33:13.680 --> 00:33:15.660
use are we trying to send this to.

429
00:33:15.690 --> 00:33:20.790
What's the message that trying to send make sure we get the image you know provided at least the image

430
00:33:20.790 --> 00:33:24.180
you are l and we're going to talk about all that in the next one.
