1
00:00:00,740 --> 00:00:05,360
All right the next step for us in this project is we have to have a way for the user to upload some

2
00:00:05,360 --> 00:00:06,110
images.

3
00:00:06,200 --> 00:00:11,740
And so we're actually going to start a separate project here so we can learn how to do this.

4
00:00:11,750 --> 00:00:16,970
So while we have our current projects here we're going to go to file new project and started a completely

5
00:00:16,970 --> 00:00:21,720
new one learn how to work with photos and we'll come back and implemented into our own out.

6
00:00:21,770 --> 00:00:31,130
So the name for this one I'll maybe just go ahead and call it photo import demo tape and I'm going to

7
00:00:31,130 --> 00:00:34,440
do this at the latest API you don't have to go that far in advance.

8
00:00:34,460 --> 00:00:36,960
You can choose which one you want but I'll do that for this one.

9
00:00:37,370 --> 00:00:39,710
And we'll go ahead and hit finish here.

10
00:00:41,560 --> 00:00:48,130
So we'll go ahead and give Android studio a second here to get all caught up.

11
00:00:48,140 --> 00:00:55,070
And basically Android has provided us a way to very easily go get photos from a user's device whether

12
00:00:55,070 --> 00:00:59,250
that's photos they've taken or downloaded to their phone.

13
00:00:59,270 --> 00:01:01,420
It makes it very simple to go and grab those.

14
00:01:01,460 --> 00:01:03,310
And we do that through an intent.

15
00:01:03,440 --> 00:01:08,270
So a user intends to move to our own activities that we've created.

16
00:01:08,360 --> 00:01:14,150
But in this instance we're going to use activities to move to an android provided activity that's going

17
00:01:14,150 --> 00:01:17,360
to allow us to go and pick those particular images.

18
00:01:17,360 --> 00:01:26,600
So really the first step for us is we've got to go ahead and fill up the activity with him image view

19
00:01:26,600 --> 00:01:29,030
so that after we pick one we can go ahead and fill that.

20
00:01:29,030 --> 00:01:35,750
So we are going to be working with our main activity first and then like I said we want to be able to

21
00:01:35,750 --> 00:01:36,470
fill that in.

22
00:01:36,500 --> 00:01:41,510
And while it's taken a little bit of time here for the main activity lay out to pull up let's go to

23
00:01:41,510 --> 00:01:48,650
the main activity and we can very simply write the code to get the intent so that we can go grab an

24
00:01:48,650 --> 00:01:53,200
image and it's as follows we're going to make a new intent.

25
00:01:53,570 --> 00:01:56,320
And I'll just call that intent.

26
00:01:56,390 --> 00:02:02,960
We're going to say this is equal to new intent just like we've done before but this time we're going

27
00:02:02,960 --> 00:02:11,860
to say we're going to have intent that we want all caps action pic.

28
00:02:12,070 --> 00:02:14,670
So let's go down till we get to action.

29
00:02:14,680 --> 00:02:21,260
Pick Oh I and realize we have to scroll a long way down to get that.

30
00:02:21,460 --> 00:02:22,100
And there we go.

31
00:02:22,100 --> 00:02:26,950
Action pick then we're going to provide that we need to go to this media store.

32
00:02:26,950 --> 00:02:27,910
Think so.

33
00:02:28,040 --> 00:02:37,520
When you say Capital Media store and enter on that and then we're going to do dot capital images dot

34
00:02:38,150 --> 00:02:43,800
Capital Media dot and then an all caps onto external content.

35
00:02:43,810 --> 00:02:45,560
You or I can.

36
00:02:45,770 --> 00:02:48,510
So that's all it takes to get the intent.

37
00:02:48,650 --> 00:02:55,430
And really once we have this we're going to do start activity and we're not going to do just a straight

38
00:02:55,430 --> 00:02:56,660
up started activity.

39
00:02:56,660 --> 00:03:00,120
We wanted to start activity for result.

40
00:03:00,230 --> 00:03:02,150
So we're going to do the start activity for result.

41
00:03:02,150 --> 00:03:04,760
We're going to pass in the intent.

42
00:03:04,880 --> 00:03:10,010
And we're also going to be passing in a number here so we're going to go ahead and do the number one

43
00:03:10,010 --> 00:03:14,540
this is do you remember before we were requesting permissions where you could add codes and stuff.

44
00:03:14,540 --> 00:03:20,150
Well this is the request code so that you can keep track of the different results that you have.

45
00:03:20,150 --> 00:03:24,560
So with that I bet our layouts are ready to go here.

46
00:03:24,680 --> 00:03:25,900
Well just about.

47
00:03:26,060 --> 00:03:31,520
And so instead of having this text you let's go ahead and grab an image of you know we're going to have

48
00:03:31,520 --> 00:03:32,900
it take up the whole screen.

49
00:03:32,900 --> 00:03:40,320
So for the background the default image I'm just going to have this fill up a color for the time being.

50
00:03:40,760 --> 00:03:46,010
But with this image view let's go ahead and just set some constraints and I'm going to go ahead and

51
00:03:46,010 --> 00:03:53,120
set all of these to zero so that we have an image that fills up the entire screen.

52
00:03:53,120 --> 00:03:54,010
Excellent.

53
00:03:54,320 --> 00:03:59,510
And we'll go ahead and adjust our constraints so that it actually goes edge edged edge here so we can

54
00:03:59,690 --> 00:04:02,670
boom like that we have those nice pink color there.

55
00:04:02,690 --> 00:04:04,340
Well some people might think it's nice.

56
00:04:04,340 --> 00:04:05,540
Others not.

57
00:04:05,540 --> 00:04:12,050
And let's go ahead and set the image you now we could probably just call image that's fine enough.

58
00:04:12,110 --> 00:04:18,770
So with this in place we are now ready to start writing the code in order to go and get information

59
00:04:18,980 --> 00:04:23,360
when somebody picks an image and in fact if you want to see what this looks like I'm going to go ahead

60
00:04:23,360 --> 00:04:26,790
and get the emulator running here.

61
00:04:26,810 --> 00:04:33,530
It's going to show us this activity that has been provided by the Android system but it's not going

62
00:04:33,530 --> 00:04:33,930
to.

63
00:04:34,160 --> 00:04:38,990
If we select an image it's not going to be able to do anything we need to write the code the code to

64
00:04:38,990 --> 00:04:40,510
be able to handle that.

65
00:04:40,520 --> 00:04:44,390
So let's go ahead and start doing that now while we're waiting for the emulator to come.

66
00:04:44,390 --> 00:04:48,760
So just go ahead and start typing on activity.

67
00:04:48,770 --> 00:04:51,220
Result is what we're looking for.

68
00:04:51,380 --> 00:04:55,830
And then we go on activity result.

69
00:04:55,850 --> 00:05:02,300
And this is the function that's going to be called when we get a result back from this activity over

70
00:05:02,300 --> 00:05:02,600
here.

71
00:05:02,600 --> 00:05:08,090
And so you know we have to write the code write the code to essentially get the image that they selected

72
00:05:08,120 --> 00:05:10,290
and then choose something to do with it.

73
00:05:10,310 --> 00:05:12,880
Looks like emulators ready.

74
00:05:12,930 --> 00:05:19,730
So you'll notice when you get here there's no images and that's because this emulator doesn't have any

75
00:05:19,730 --> 00:05:20,310
images.

76
00:05:20,360 --> 00:05:25,190
And so it'd be hard to make an an immature app if we don't have any.

77
00:05:25,190 --> 00:05:29,710
So what I recommend to do is you can you can go download an image if you want to.

78
00:05:29,900 --> 00:05:34,850
If we do the camera button let's see if we can find the photo app here.

79
00:05:35,090 --> 00:05:37,970
We should be able to just take our own camera.

80
00:05:38,390 --> 00:05:43,050
So if you go to the camera all the emulators you want to get location.

81
00:05:43,050 --> 00:05:45,520
Sure whatever.

82
00:05:45,750 --> 00:05:46,360
All right.

83
00:05:46,410 --> 00:05:47,190
So we've got that.

84
00:05:47,190 --> 00:05:52,380
It's going to do this we're little square thing and if any time you take a photo it will take this little

85
00:05:52,740 --> 00:05:59,910
square thing so that now if we were to go back and let's run this app one more time we could select

86
00:05:59,910 --> 00:06:04,560
one of those images that won't do anything again because we don't have actually this function right

87
00:06:04,560 --> 00:06:04,770
here.

88
00:06:04,770 --> 00:06:09,440
This method that we needed to write some more for that's going to handle that situation.

89
00:06:09,450 --> 00:06:13,530
But you'll see when our app opens up look now we have two items that we could potentially choose from

90
00:06:13,530 --> 00:06:15,480
maybe I like the square here.

91
00:06:15,480 --> 00:06:21,340
So I go ahead and I select that but it doesn't show up yet because we haven't written the code for that.

92
00:06:21,450 --> 00:06:27,120
So the proper code that we need here is first we need to make sure it's the correct result that we're

93
00:06:27,120 --> 00:06:28,640
looking for.

94
00:06:28,830 --> 00:06:31,490
And so that has to do with this request code that we just made.

95
00:06:31,490 --> 00:06:35,400
So we're going to first check and say OK request code.

96
00:06:35,400 --> 00:06:41,250
Are you equal to one and the other thing that we're going to check is that there's this thing called

97
00:06:41,250 --> 00:06:42,270
the result code.

98
00:06:42,270 --> 00:06:44,640
It should be telling us that everything is OK.

99
00:06:44,640 --> 00:06:46,560
So that was our request code.

100
00:06:46,560 --> 00:06:49,040
We also have a result code.

101
00:06:49,170 --> 00:06:52,910
We're going to see if this is equal to capital result.

102
00:06:52,950 --> 00:06:54,350
OK.

103
00:06:54,510 --> 00:07:01,760
And we also are going to be checking to make sure that the data that we got back is not equal to you

104
00:07:02,060 --> 00:07:02,900
no.

105
00:07:03,780 --> 00:07:06,200
I'm thinking of stuff with swift.

106
00:07:06,270 --> 00:07:10,710
OK so we're going to make sure that the request code is one to make sure that's that one that we had

107
00:07:10,710 --> 00:07:11,100
picked.

108
00:07:11,100 --> 00:07:15,090
The result code is ok and that we actually have some data to work with.

109
00:07:15,120 --> 00:07:19,890
Now if that's the case we're going to be working with some code that's going to require a try catch.

110
00:07:19,890 --> 00:07:23,370
So let's go ahead and create one of those.

111
00:07:23,700 --> 00:07:28,050
We'll be able to handle an exception here that we'll call e.

112
00:07:28,410 --> 00:07:33,580
And let's just do the print stack trace if we have any sort of issue.

113
00:07:33,990 --> 00:07:38,210
And then in our tri here we are going to create a bitmap from this data.

114
00:07:38,220 --> 00:07:49,410
So we're going to make a new variable called bitmap and that we're going to go to media store dot images

115
00:07:49,710 --> 00:07:56,160
dot media dot get that map.

116
00:07:56,150 --> 00:08:07,950
Now while we are really going for this and then we're going to do this dot get to content resolver and

117
00:08:08,010 --> 00:08:12,190
we're also going to pass in the selected image.

118
00:08:12,260 --> 00:08:21,420
So we see that or not whereas our selected image how can that is.

119
00:08:21,480 --> 00:08:28,320
Oh I forgot one step here so we need to create something called a u r i which is basically the location

120
00:08:28,320 --> 00:08:35,290
of our selected images are selected and we sort of say you or I will call selected image and we're going

121
00:08:35,290 --> 00:08:39,870
to set this equal to data to get data.

122
00:08:40,890 --> 00:08:46,930
So with this now we can pass in the selected image for a semi-colon on that.

123
00:08:47,010 --> 00:08:51,720
So after we have this bit map we can update the image you with it but that means we have to get access

124
00:08:51,720 --> 00:08:52,250
to the imagery.

125
00:08:52,300 --> 00:08:55,680
So we're going to do image view.

126
00:08:55,770 --> 00:08:59,100
I'll just call it image view as equal to find view by ID.

127
00:08:59,100 --> 00:09:01,270
Capitol art indeed.

128
00:09:01,890 --> 00:09:03,570
Image you.

129
00:09:03,930 --> 00:09:11,010
And then we can take our image view and say Dot set image bitmap and we will provide that map right

130
00:09:11,010 --> 00:09:11,530
there.

131
00:09:11,620 --> 00:09:12,130
OK.

132
00:09:12,510 --> 00:09:18,270
So this should be the code that we need in order to take whatever image it was that was picked and have

133
00:09:18,270 --> 00:09:24,400
it show up inside of that nice big image that we have so let's open up the emulator here.

134
00:09:24,840 --> 00:09:26,880
And once this comes.

135
00:09:26,880 --> 00:09:30,630
Go ahead select one of these images and we'll come back and boom.

136
00:09:30,630 --> 00:09:31,830
Look at that.

137
00:09:31,890 --> 00:09:34,770
We have this image showing up.

138
00:09:34,770 --> 00:09:40,290
So I'm not sure why it's this way here in our app but most of the time if we're going to get into user's

139
00:09:40,410 --> 00:09:42,600
photo we have to have permission to do that.

140
00:09:42,600 --> 00:09:47,370
I'm not sure if the emulator just allows us to bypass that but we don't want to move forward without

141
00:09:47,370 --> 00:09:49,410
being able to write the appropriate code.

142
00:09:49,410 --> 00:09:51,470
So there's a couple of steps that we've got to do here.

143
00:09:51,470 --> 00:09:57,480
The first one is we need to get into the manifest for our app and we want to make sure that that's a

144
00:09:57,480 --> 00:10:01,150
use that we can access the user for so we're going to use permission.

145
00:10:01,380 --> 00:10:07,200
And the one that we're looking for in this situation is we want to get to the read external storage.

146
00:10:07,200 --> 00:10:10,070
So we're going to scroll down till we get to the Rs.

147
00:10:10,180 --> 00:10:11,150
We want that read.

148
00:10:11,160 --> 00:10:12,950
External storage.

149
00:10:13,080 --> 00:10:20,160
So go ahead and close that up and once we have that in place then let's go ahead and start writing the

150
00:10:20,160 --> 00:10:21,050
code.

151
00:10:21,280 --> 00:10:23,280
We're going to be needing an X that only did a new line.

152
00:10:23,280 --> 00:10:23,970
There we go.

153
00:10:24,030 --> 00:10:24,960
That looks better.

154
00:10:25,260 --> 00:10:28,750
So back inside of our main activity this is very similar to GPS.

155
00:10:28,980 --> 00:10:34,610
When we needed to get permission you know we had to request it on the handle all the different situations

156
00:10:34,620 --> 00:10:43,280
so we're going to go ahead and type out on the quest permission result.

157
00:10:43,330 --> 00:10:49,890
In fact the same exact method that we had before but this time we're you know doing it with getting

158
00:10:49,890 --> 00:10:54,880
the user's photo and we're going to say if we want to check that it's the proper request code so where

159
00:10:54,890 --> 00:11:01,470
you say if requests request code is equal to one and then the next thing we want to make sure is that

160
00:11:01,470 --> 00:11:03,870
you know we have access to be able to do this.

161
00:11:03,870 --> 00:11:05,610
And so.

162
00:11:05,610 --> 00:11:06,550
So that's first seen.

163
00:11:06,540 --> 00:11:12,690
Did you know is this even coming for the right thing and if it is that we want to say OK if Grant results

164
00:11:13,760 --> 00:11:27,420
length is greater than zero and Grant results at the first item is equal to package manager not permission

165
00:11:27,510 --> 00:11:28,460
granted.

166
00:11:28,760 --> 00:11:32,220
So that tells us that we got the proper information that we need.

167
00:11:32,220 --> 00:11:38,370
So if this is all good then we're going to want to go and ask for the photos which we there's a couple

168
00:11:38,370 --> 00:11:39,630
of times when we might want to do that.

169
00:11:39,640 --> 00:11:42,540
So let's go ahead and make a new function here.

170
00:11:42,540 --> 00:11:47,900
I'm going to say public void and I'll just call this maybe get a photo.

171
00:11:48,230 --> 00:11:56,340
And with this we're basically going to do this code of you know start and make a new intent and start

172
00:11:56,340 --> 00:12:00,960
that activity so we're going to go ahead and paste that in there and now that we have that in place

173
00:12:01,590 --> 00:12:06,300
if we get permission then we're going to go ahead and type that here.

174
00:12:06,390 --> 00:12:11,400
Say you know if we've got permission Let's go and get the photo and then the other situation you know

175
00:12:11,400 --> 00:12:13,420
we want to do it in this on create.

176
00:12:13,440 --> 00:12:20,580
But before we go ahead and do this get photo we would want to check first and see if we even have permission

177
00:12:21,060 --> 00:12:23,240
so let's do an if statement here first.

178
00:12:23,240 --> 00:12:30,300
So we're going to say if and the thing that we want to check for is check self permission and we're

179
00:12:30,300 --> 00:12:35,320
going to pass in capital manifest permission.

180
00:12:35,670 --> 00:12:37,500
Read external storage.

181
00:12:37,500 --> 00:12:39,130
Remember that's the one that we're working with.

182
00:12:39,130 --> 00:12:41,130
And so the location thing.

183
00:12:41,190 --> 00:12:49,650
So we're going to say if this is does not equal package manager dot.

184
00:12:49,840 --> 00:12:52,040
Permission granted.

185
00:12:52,540 --> 00:12:59,500
So we've go ahead and we will do that check to see hey you know if they don't have permission we probably

186
00:12:59,500 --> 00:13:06,670
need to go ahead and request permission so we're going to do I request permission and what we're going

187
00:13:06,670 --> 00:13:10,480
to pass inside of here is a new String Array.

188
00:13:10,720 --> 00:13:18,250
And we're going to do our curly brackets like we did before little say capitol manifest got permission

189
00:13:18,970 --> 00:13:24,190
that Capitol read external storage.

190
00:13:24,190 --> 00:13:28,280
The one that we asked for in the manifest.

191
00:13:28,330 --> 00:13:31,940
So we'll go ahead and pass the request code of one.

192
00:13:32,420 --> 00:13:38,230
So once we've gone ahead and done that we'll do an else statement here saying you know hey if it is

193
00:13:38,230 --> 00:13:43,150
the case that they actually do already have permission then we'll just automatically call get photo

194
00:13:43,150 --> 00:13:44,710
which we'll go ahead and start that in 10.

195
00:13:44,710 --> 00:13:47,480
But if they have to ask for permission it'll go ahead.

196
00:13:47,560 --> 00:13:49,150
Go ahead and do that.

197
00:13:49,240 --> 00:13:54,160
And if it all works out there it's going to call this function where then we can appropriately say hey

198
00:13:54,160 --> 00:13:57,160
if they gave permission then we can go ahead and get the photo.

199
00:13:57,160 --> 00:14:03,620
So again this is some code that we need to make sure that this all works out with our app.

200
00:14:03,700 --> 00:14:08,770
So let's go ahead and give this one last try and make sure everything's OK here and then we'll actually

201
00:14:08,770 --> 00:14:13,950
have everything we need to move back to our Instagram app and get that up and rolling.

202
00:14:14,290 --> 00:14:16,360
So here comes our app

203
00:14:19,120 --> 00:14:25,600
and you can see now it's asking for access and we say allow you can still go to an image choose an image

204
00:14:25,600 --> 00:14:30,850
so I'm still not 100 percent sure why it let us do it with out asking for that.

205
00:14:30,870 --> 00:14:34,960
I can promise that's going to be the case on the device so you want to we really want to make sure we

206
00:14:34,960 --> 00:14:35,690
have this code.

207
00:14:35,710 --> 00:14:40,790
But this is enough for us to go ahead and move back to our project.

208
00:14:40,960 --> 00:14:44,080
The Instagram app where we want to go ahead and add this code.

209
00:14:44,320 --> 00:14:49,990
So there's a couple of things that we want to do here first and that happens to be the way that we want

210
00:14:49,990 --> 00:14:52,880
someone to add a photo to this particular app.

211
00:14:52,960 --> 00:14:57,590
And let's go back to our other project on just up the simulator there.

212
00:14:57,870 --> 00:15:04,990
Go ahead and cut that out is we want someone to be able to hit the menu bar and be able to go and add

213
00:15:04,990 --> 00:15:10,390
this so we're going to open up our project and we are going to add a new directory here.

214
00:15:10,510 --> 00:15:15,620
So we're going to do a new resource directory and this is going to be for our menu.

215
00:15:15,640 --> 00:15:18,110
So just go ahead and call it menu.

216
00:15:18,490 --> 00:15:25,810
And then we're going to right click our menu here and say that we want to add a new menu resource file.

217
00:15:25,810 --> 00:15:34,390
So we'll go ahead and just give this a name a share underscore menu and we'll have this and this is

218
00:15:34,390 --> 00:15:37,570
going to allow us to put a little menu inside of our app.

219
00:15:37,570 --> 00:15:43,120
So with this it's best to just go ahead and go straight to the text view of this.

220
00:15:43,300 --> 00:15:47,290
And once we're inside of here there's really only one item that we want to add so we're going to add

221
00:15:47,290 --> 00:15:48,220
an item.

222
00:15:48,520 --> 00:15:57,460
And this is going to have the title solutes Android title is equal to capital share and we're also going

223
00:15:57,460 --> 00:16:00,170
to say Android D.

224
00:16:00,370 --> 00:16:07,810
Let's go ahead and set this equal to share just all lowercase and don't forget your app plus ID.

225
00:16:07,810 --> 00:16:12,530
All right so with this in place we can go ahead and that tag and we go back to the design.

226
00:16:12,550 --> 00:16:16,250
Look we get that nice little share functionality there.

227
00:16:16,480 --> 00:16:18,160
That puts us in a good place.

228
00:16:18,340 --> 00:16:23,620
Then we've got to go write the code in order to implement the menu option so let's go ahead and move

229
00:16:23,620 --> 00:16:26,780
over to we want to do this instead of our user list activity.

230
00:16:26,800 --> 00:16:32,940
So we're going to have to add a method up here at the top for the on create.

231
00:16:33,120 --> 00:16:40,310
We want to do this for the menu so create an options menu.

232
00:16:41,030 --> 00:16:41,970
And we go.

233
00:16:42,310 --> 00:16:48,730
And with this we want to do this return eventually at the end so before we do the return we're going

234
00:16:48,730 --> 00:16:57,280
to get a menu inflator we'll just call menu inflator is equal to our Get menu inflator and then will

235
00:16:57,280 --> 00:16:58,000
inflate the menu.

236
00:16:58,000 --> 00:17:08,070
So we're saying menu inflator dot inflate will pass and our menu Shearman you can.

237
00:17:08,470 --> 00:17:10,730
So that's going to be all we need to get that.

238
00:17:10,730 --> 00:17:16,570
Oh I forgot one parameter there and that's that we have to pass the menu parameter right there.

239
00:17:16,570 --> 00:17:22,120
Then once we have that in place there's a couple of things that we're going to have to add to our permissions

240
00:17:22,120 --> 00:17:28,150
here right because we want to access the user's photos so let's go ahead and open up in our Instagram

241
00:17:28,150 --> 00:17:33,490
app the Android manifest and up here at the top you can see there's already some permissions here it's

242
00:17:33,550 --> 00:17:40,030
asking for internet access access the network States and we actually already have read external storage.

243
00:17:40,030 --> 00:17:45,190
So that came bundled with the project so we're good there but it's a good thing to check to make sure

244
00:17:45,650 --> 00:17:47,960
you know that that is the case.

245
00:17:48,040 --> 00:17:52,720
So now we're going to want to go back to the user list so when someone select something from the menu

246
00:17:53,140 --> 00:17:58,380
the on options item selected gets called.

247
00:17:58,540 --> 00:18:04,770
And so with this let's go ahead we're going to leave our return there at the bottom.

248
00:18:04,870 --> 00:18:08,920
Well we want to do is make sure that they selected the share options so we're going to give an if statement

249
00:18:08,950 --> 00:18:09,850
here.

250
00:18:10,000 --> 00:18:14,900
And let's go ahead and check and make sure give ourselves some space to type.

251
00:18:14,980 --> 00:18:26,670
We're going to see if the item get item ID is equal to capital our menu share menu.

252
00:18:26,740 --> 00:18:33,730
So that's going to go ahead and tell us if this is correct and if we have that in not doing the proper

253
00:18:33,730 --> 00:18:39,500
thing here not the menu we're looking for the ID actually of just straight up share that would be for

254
00:18:39,520 --> 00:18:45,040
the actual share menu but this is what we're looking for so we're making sure they tapped on share.

255
00:18:45,040 --> 00:18:49,990
So if that is the case let's go ahead and check and make sure that they have permission and in fact

256
00:18:49,990 --> 00:18:52,800
the code that goes inside of here we've already written it.

257
00:18:52,810 --> 00:18:57,910
So I'm just going to pull up the other project where we go ahead and check for permissions and then

258
00:18:57,910 --> 00:18:59,710
you know if not we can go and request it.

259
00:18:59,710 --> 00:19:02,980
So I'm just going to go ahead and paste that in there.

260
00:19:03,160 --> 00:19:08,320
We're going to get a little air here because we don't have the photo code running.

261
00:19:08,320 --> 00:19:12,480
So in that situation there's a few more things we'll have to go copy and paste.

262
00:19:12,480 --> 00:19:17,890
So for example we are going to want to do this on request permission result.

263
00:19:17,890 --> 00:19:23,610
We also want to know what happens when someone doesn't want to have that get photo cut so I'm just going

264
00:19:23,610 --> 00:19:27,950
to go ahead and paste that in at the top of the project.

265
00:19:28,170 --> 00:19:29,610
Excellent.

266
00:19:29,610 --> 00:19:34,720
So with that in place that sort of settles the one air that we were having there.

267
00:19:35,250 --> 00:19:40,440
And the next thing that we want to do is we want to sort of move around a few things so let's go ahead

268
00:19:40,440 --> 00:19:44,460
and move down to this on activity result.

269
00:19:44,520 --> 00:19:47,110
Let's see do.

270
00:19:47,490 --> 00:19:53,310
Oh that reminds me we need to get the on activity results so when someone selects one of these we need

271
00:19:53,310 --> 00:20:01,110
to actually go ahead and copy this code so we're going to copy this bring that into our project.

272
00:20:01,110 --> 00:20:01,910
All right.

273
00:20:02,190 --> 00:20:06,960
Yes go ahead and import all those things so you'll notice we'll get a little bit of an air here because

274
00:20:07,290 --> 00:20:12,870
you know before when we were taking a bitmap of the image and we were trying to then go you know set

275
00:20:12,870 --> 00:20:13,670
the image view with it.

276
00:20:13,710 --> 00:20:18,120
In this case we're not trying to do that we want to eventually upload it to par so in this case let's

277
00:20:18,120 --> 00:20:23,400
just go ahead and log that we got this Orsay image selected

278
00:20:25,970 --> 00:20:27,350
and all tell ourselves.

279
00:20:27,390 --> 00:20:28,810
Good work.

280
00:20:29,010 --> 00:20:29,430
OK.

281
00:20:29,580 --> 00:20:31,920
So give ourselves a nice little pat on the back.

282
00:20:31,920 --> 00:20:39,330
Let's go ahead and run this and see if we can at least get the option to pick and imagine you know it's

283
00:20:39,330 --> 00:20:42,840
not going to do anything as of right now it's just going to simply log this.

284
00:20:42,840 --> 00:20:49,540
But the next step for us is you know we want to upload that to parse so we'll go ahead and give the

285
00:20:49,660 --> 00:20:51,720
emulator here a second.

286
00:20:53,930 --> 00:20:59,150
We really are close to getting to the end of this Instagram project now that we have the ability to

287
00:20:59,210 --> 00:21:04,040
grab an image we just have to learn in this lecture how to upload that to parse and then we're going

288
00:21:04,040 --> 00:21:10,670
to wrap everything up in the next lecture allowing users to not only upload images but also view other

289
00:21:10,670 --> 00:21:11,580
people's images.

290
00:21:11,580 --> 00:21:16,700
That's you know if you have an Instagram app and you can't see other people's pictures you know what's

291
00:21:16,700 --> 00:21:17,480
the point.

292
00:21:17,480 --> 00:21:22,790
I mean you're on Instagram you're trying to share your photos with the world so that's kind of the big

293
00:21:23,570 --> 00:21:28,720
pull there and looks like we're taking a little bit of time to get this emulator up and running.

294
00:21:28,730 --> 00:21:33,570
So while we're doing that I'm going to go ahead and get started on the parse code.

295
00:21:34,530 --> 00:21:37,440
So it can get pretty complex.

296
00:21:37,470 --> 00:21:44,070
To upload an image to parse but just go ahead and follow along with me in the code.

297
00:21:44,310 --> 00:21:49,230
It's you know this is nothing that you have to have memorized like I had to definitely reference material

298
00:21:49,230 --> 00:21:54,390
to make sure I was doing this correctly but once you kind of get in the flow of it it's not too bad

299
00:21:54,480 --> 00:22:00,360
and looks like maybe I was explaining that the emulator finish so let's go ahead and try our menu option

300
00:22:00,360 --> 00:22:00,990
for share.

301
00:22:00,990 --> 00:22:02,410
Yes allow that.

302
00:22:02,820 --> 00:22:05,030
Well go ahead and pick one of these.

303
00:22:05,410 --> 00:22:07,830
And if that worked we should get the image selected.

304
00:22:07,830 --> 00:22:09,240
Good work.

305
00:22:09,300 --> 00:22:12,210
So open up blog cat and image selected.

306
00:22:12,210 --> 00:22:13,020
Good work.

307
00:22:13,020 --> 00:22:13,650
OK.

308
00:22:14,070 --> 00:22:15,540
So we know that that worked.

309
00:22:15,540 --> 00:22:19,140
Now let's go ahead and dive in and upload our code to parse.

310
00:22:19,200 --> 00:22:24,480
So the first thing that we need to get is a byte array output stream.

311
00:22:24,540 --> 00:22:32,550
So go ahead and just call this stream and we are going to set this equal to a new byte array output

312
00:22:32,550 --> 00:22:33,660
stream.

313
00:22:33,690 --> 00:22:34,770
Excellent.

314
00:22:34,770 --> 00:22:40,740
Once we have that in place we want to take that bitmap that we had just extracted earlier and we're

315
00:22:40,740 --> 00:22:48,930
going to say bitmap dot and we want to compress this in so we're going to go ahead and take type out

316
00:22:48,930 --> 00:22:55,200
capital map compress format and we get to choose how we want to do this.

317
00:22:55,200 --> 00:22:59,880
So let's go ahead and you see there's Jay pagen and I haven't heard of wepe before but we're going to

318
00:22:59,880 --> 00:23:00,810
use p n g.

319
00:23:00,810 --> 00:23:02,530
So let's do that PMG.

320
00:23:02,620 --> 00:23:06,330
Next is going to ask you for the quality here let's go ahead and do 100.

321
00:23:06,570 --> 00:23:11,430
And then for the output stream while we already created one of those we'll go ahead and have that stream.

322
00:23:11,430 --> 00:23:15,930
So this is just getting our image into the correct format here.

323
00:23:16,200 --> 00:23:20,420
Once we have this then we are going to create a byte array.

324
00:23:20,670 --> 00:23:29,670
So let's go ahead and just call this lowercase byte array and we'll set this equal to our stream dot

325
00:23:29,910 --> 00:23:33,910
to byte array that's going to go and do our conversion there.

326
00:23:34,050 --> 00:23:38,870
Then once we have that in place we're able to create something called a parse file.

327
00:23:38,910 --> 00:23:46,520
So we're going to say capital parse file and we'll call the name of this file is equal to the new capital

328
00:23:46,530 --> 00:23:47,790
parse file.

329
00:23:47,940 --> 00:23:49,920
First we've got to go ahead and give this a name.

330
00:23:49,920 --> 00:23:56,160
And so we're going to maybe just call this image of P and G and then we have to give it a byte array.

331
00:23:56,160 --> 00:24:00,510
So we'll go ahead and pass in that byte array that we had created earlier.

332
00:24:00,720 --> 00:24:08,230
Once we have that file in place next we want to create a whole object or class around this file.

333
00:24:08,250 --> 00:24:12,030
So this is code that you've done before you should know how to do this.

334
00:24:12,060 --> 00:24:18,570
We're just going to make a new parse object and with this we'll just give it the name of object and

335
00:24:18,570 --> 00:24:24,120
we're going to say this is equal to a new parse object but the name of the class we're going to pass

336
00:24:24,120 --> 00:24:25,740
through here is image.

337
00:24:25,890 --> 00:24:31,590
So this is just going and creating something new here like we should see image showing up now inside

338
00:24:31,590 --> 00:24:32,620
of our dashboard.

339
00:24:32,640 --> 00:24:40,260
So back to android studio once we have that in place we'll take this new object that we have and we're

340
00:24:40,260 --> 00:24:43,990
going to put some data into here so we're going to stay put.

341
00:24:44,040 --> 00:24:49,200
And the first thing that we want to pass in is the actual image itself so we're going to pass the parse

342
00:24:49,200 --> 00:24:51,060
file right inside of there.

343
00:24:51,540 --> 00:24:58,100
And the next thing that we're going to pass are put on this object is a user name of who this user of

344
00:24:58,190 --> 00:24:59,400
who this image belongs to.

345
00:24:59,400 --> 00:25:07,200
So when I say put in all lowercase username and then we are going to go get whatever the current user

346
00:25:07,200 --> 00:25:08,010
is.

347
00:25:08,010 --> 00:25:16,590
So let me make sure I'm outside of the double quote there is say parse and I want Parsee user dot get

348
00:25:16,590 --> 00:25:20,970
current user dot get user name.

349
00:25:20,990 --> 00:25:26,460
All right so then I'll go get us whoever it is that took the image and as you know it was uploading

350
00:25:26,460 --> 00:25:28,130
that so we'll have that information.

351
00:25:28,170 --> 00:25:33,420
And now it's just like a regular parse object where we just say OK go ahead and save a background I'm

352
00:25:33,420 --> 00:25:39,180
going to pass you a callback so in this case we're going to say you save callback and this will tell

353
00:25:39,180 --> 00:25:44,070
us you know when it's all done so let's go ahead and do our normal checks where we say first you know

354
00:25:44,070 --> 00:25:45,790
hey if each is equal to no.

355
00:25:45,810 --> 00:25:48,320
That means that things have worked out.

356
00:25:48,330 --> 00:25:53,920
In this case we should do a text message to the user to let them know that everything worked out so

357
00:25:53,940 --> 00:25:55,360
do not make text.

358
00:25:55,590 --> 00:26:01,300
We're going to go ahead and pass in capital user list activity.

359
00:26:01,470 --> 00:26:11,000
Stop this and we're going to pass in a little message that says image has been shared.

360
00:26:11,290 --> 00:26:18,420
Excellent point and then we're going to see how long this should last for I like to do the shorts and

361
00:26:18,520 --> 00:26:21,140
we'll go ahead and show that to the user.

362
00:26:22,050 --> 00:26:26,010
Now the situation here means something has gone wrong.

363
00:26:26,040 --> 00:26:26,340
Right.

364
00:26:26,340 --> 00:26:31,720
So we could do a print drak trace but I'd rather just do a text message.

365
00:26:31,810 --> 00:26:33,890
Oh I forgot to add the extra equal.

366
00:26:33,910 --> 00:26:38,620
But I'm just going to go ahead and do a toast message here that says you know hey we had some sort of

367
00:26:38,620 --> 00:26:45,970
problem on the copy that tells from above and just change it to say something like there has been an

368
00:26:46,630 --> 00:26:55,470
issue uploading the image frowny face can better spell uploading correctly.

369
00:26:55,480 --> 00:27:00,000
All right so with this all in place let's go ahead and give this a try.

370
00:27:00,040 --> 00:27:06,340
We'll run this on the emulator and we should be able to upload one of our images and actually see it

371
00:27:06,670 --> 00:27:08,680
in the parce dashboard which is pretty great.

372
00:27:08,680 --> 00:27:12,740
So go ahead and get our emulator here.

373
00:27:14,630 --> 00:27:17,360
It is coming on the phone.

374
00:27:17,360 --> 00:27:21,770
So look we can see the users and I'm currently logged in as John so I'm going to say you know what I

375
00:27:21,770 --> 00:27:26,670
want to share an image and I want to share this lovely square box.

376
00:27:26,780 --> 00:27:32,600
So I go and I pick that one and it says hey the image has been shared so if that's the case when I reload

377
00:27:32,600 --> 00:27:35,130
here we should see image and then reload.

378
00:27:35,180 --> 00:27:40,340
Look there's a new image class if we selected there's a new object given uploaded with the user name

379
00:27:40,340 --> 00:27:46,880
of John that's a step in the right direction if we click on this PMG if we do download here we can actually

380
00:27:46,880 --> 00:27:48,700
see the image.

381
00:27:48,700 --> 00:27:50,280
Man how cool is that.

382
00:27:50,510 --> 00:27:58,280
So there you have it we have in place now the ability to upload images to parse for a particular user

383
00:27:58,280 --> 00:28:02,280
and now really just the next step for us is be able to view other users images.

384
00:28:02,290 --> 00:28:04,920
We're going to go ahead and cover that in the next lecture.

385
00:28:04,910 --> 00:28:06,230
It's the final one of the section.
