WEBVTT
1
00:00:00.630 --> 00:00:00.930
All right.

2
00:00:00.930 --> 00:00:08.240
So our user, they can log in and they can create a category, right.

3
00:00:08.250 --> 00:00:12.720
But obviously we want that to happen only for the admin user.

4
00:00:12.750 --> 00:00:19.680
So the admin should be able to access that decimal and create categories, posts and things like that.

5
00:00:20.220 --> 00:00:25.620
So that means we have to perform some kind of a take when they logging.

6
00:00:25.740 --> 00:00:27.180
So that's what we're going to do now.

7
00:00:28.350 --> 00:00:29.340
So let's go on.

8
00:00:29.340 --> 00:00:30.900
Let me just close all these.

9
00:00:31.050 --> 00:00:38.400
So let's go to our client and let's go to Page is sign in.

10
00:00:38.790 --> 00:00:42.030
So whenever users sign in for the first time.

11
00:00:43.440 --> 00:00:45.120
I mean, it's an every time.

12
00:00:45.420 --> 00:00:51.960
So we get this response from back in, which has all the information about the user, including the

13
00:00:51.960 --> 00:00:52.340
users.

14
00:00:52.580 --> 00:00:53.130
All right.

15
00:00:53.340 --> 00:01:00.750
So based on the role, we can redirect the user now to the correct phase.

16
00:01:00.870 --> 00:01:01.080
All right.

17
00:01:01.080 --> 00:01:04.530
So if it is admin, we take them to admin less desperate.

18
00:01:04.980 --> 00:01:12.690
Otherwise later, if the user is also, then we will redirect them to decimals less also.

19
00:01:12.780 --> 00:01:13.020
Right.

20
00:01:13.020 --> 00:01:16.410
So that's how we going to take them to a different place.

21
00:01:16.740 --> 00:01:19.650
So at the moment, we just want a focus for the admin user.

22
00:01:20.460 --> 00:01:20.700
All right.

23
00:01:20.700 --> 00:01:22.980
So that means unfinished.

24
00:01:22.980 --> 00:01:26.940
We get the response here.

25
00:01:30.060 --> 00:01:36.450
So instead of just pushing them to the homepage, we can redirect based on their role.

26
00:01:36.810 --> 00:01:37.920
So we can take for that.

27
00:01:38.010 --> 00:01:42.510
So we can do that here if we take for the data.

28
00:01:43.140 --> 00:01:46.230
And then on data, we want to access the user.

29
00:01:46.440 --> 00:01:48.720
And then from user, we want to access the role.

30
00:01:49.050 --> 00:01:49.320
Right.

31
00:01:49.860 --> 00:02:02.190
So if the user role is admin, I guess if it is admin, then we want to redirect them to less admin

32
00:02:02.190 --> 00:02:03.480
based else.

33
00:02:05.360 --> 00:02:05.720
If.

34
00:02:09.820 --> 00:02:10.280
Data.

35
00:02:10.450 --> 00:02:15.340
User role equals equals equals subscriber.

36
00:02:15.970 --> 00:02:23.770
Actually, we going to have the author as well and all our names are going to be going to have the capital

37
00:02:24.040 --> 00:02:24.760
starting later.

38
00:02:24.760 --> 00:02:26.380
So let's keep it like that.

39
00:02:26.680 --> 00:02:28.960
So if the user is admin, we take them to admin.

40
00:02:29.380 --> 00:02:42.400
If the user is user role is also, I guess we will take them to alter else else.

41
00:02:42.580 --> 00:02:49.510
Then every other user will have the role of subscribe so that for that we don't have to do any take

42
00:02:49.510 --> 00:02:50.050
like this.

43
00:02:50.320 --> 00:02:54.910
So if for everyone else we take them, do subscribe.

44
00:02:57.580 --> 00:02:57.970
Beautiful.

45
00:02:58.600 --> 00:03:07.090
Now once you have this take, we will be able to redirect the user to a different space based on their

46
00:03:07.120 --> 00:03:07.480
URL.

47
00:03:08.530 --> 00:03:08.770
Okay.

48
00:03:08.890 --> 00:03:13.840
So at the moment this user, I think we changed this useful to admin.

49
00:03:15.980 --> 00:03:17.330
Let me just take you.

50
00:03:23.730 --> 00:03:24.100
All right.

51
00:03:24.150 --> 00:03:31.020
We made this user admin manually in the previous video, so let's, let's try it for a log in.

52
00:03:31.830 --> 00:03:37.290
Now, when we log in because this is admin, we should be redirected to less admin space.

53
00:03:37.620 --> 00:03:38.520
Let's give it a try.

54
00:03:39.810 --> 00:03:43.830
You can see we have been redirected to admit it's beautiful right now.

55
00:03:43.830 --> 00:03:45.990
Let's try to log in as a different user.

56
00:03:46.050 --> 00:03:47.490
Lisa Ryan five.

57
00:03:49.930 --> 00:03:53.230
And then this user is a subscriber.

58
00:03:53.230 --> 00:03:55.990
So we have been redirected to a subscriber base.

59
00:03:56.200 --> 00:03:58.060
Now obviously displays we don't have yet.

60
00:03:58.070 --> 00:03:59.950
So we have got this for for him.

61
00:04:00.430 --> 00:04:03.190
But that's are we going to create it later anyways.

62
00:04:03.430 --> 00:04:04.870
So let's leave it like that.

63
00:04:05.350 --> 00:04:05.830
I guess so.

64
00:04:05.830 --> 00:04:06.310
That's good.

65
00:04:07.720 --> 00:04:08.590
So this is good.

66
00:04:08.600 --> 00:04:13.570
Now what we need to also do, let me just log.

67
00:04:14.740 --> 00:04:18.190
What we need to do here is when they click on the decimal, so we will.

68
00:04:18.190 --> 00:04:23.230
So this desperate for all the users, whether it's admin, author, subscriber doesn't matter.

69
00:04:23.920 --> 00:04:30.370
We will show this to everyone, but obviously based on the role of the options they will get here will

70
00:04:30.370 --> 00:04:31.150
be limited.

71
00:04:31.330 --> 00:04:31.540
All right.

72
00:04:31.540 --> 00:04:36.240
So admin will have all these options, also will have limited options.

73
00:04:36.250 --> 00:04:39.700
Maybe just create the post categories.

74
00:04:39.860 --> 00:04:41.680
Take out the comment I get to.

75
00:04:41.680 --> 00:04:44.620
That's all for author and for subscribe.

76
00:04:44.860 --> 00:04:46.600
They can basically only leave a comment.

77
00:04:47.140 --> 00:04:47.380
All right.

78
00:04:47.620 --> 00:04:49.110
So that's how it's going to turn.

79
00:04:49.170 --> 00:04:51.580
However, you can see here.

80
00:04:53.130 --> 00:05:00.540
We want to make this dynamic so based on the users role when they click here.

81
00:05:01.290 --> 00:05:03.100
We don't want to have to sue the admin.

82
00:05:03.130 --> 00:05:04.620
So instead we.

83
00:05:06.090 --> 00:05:07.290
We can call it desperate.

84
00:05:07.290 --> 00:05:10.080
And here we can choose to use this name, right?

85
00:05:10.260 --> 00:05:14.810
And then every user will see this link that will say desperate.

86
00:05:14.820 --> 00:05:19.770
However, when they click, it will take them to a different place based on their role.

87
00:05:20.340 --> 00:05:22.230
So let's work on this navigation.

88
00:05:23.710 --> 00:05:27.910
So it's good to component stop nav and.

89
00:05:29.830 --> 00:05:32.050
Let's go to that link.

90
00:05:33.160 --> 00:05:34.540
That is a dashboard.

91
00:05:35.290 --> 00:05:39.280
So we've got the brand name with got sign up, sign in.

92
00:05:40.000 --> 00:05:43.360
And we have got this admin link.

93
00:05:46.930 --> 00:05:53.320
So here, instead of calling it dashboard, as you can see you instead of calling it desperate, let's

94
00:05:53.320 --> 00:05:55.540
show the logged in users name.

95
00:05:56.140 --> 00:05:58.630
All right, so here.

96
00:06:00.180 --> 00:06:03.090
Title, we think for the authenticated user.

97
00:06:03.090 --> 00:06:08.130
Let's make sure we have the answers from the context which we have.

98
00:06:08.280 --> 00:06:08.910
That's great.

99
00:06:09.640 --> 00:06:10.980
Okay, so let's go back here.

100
00:06:13.050 --> 00:06:14.540
So we take for the office.

101
00:06:14.550 --> 00:06:17.340
If we have that, then we try to access the user.

102
00:06:17.550 --> 00:06:20.580
And then if we have the user, we try to access the user's name.

103
00:06:21.210 --> 00:06:26.430
Now, for some reason, sometimes because of errors, also, you might get some kind of a you may not

104
00:06:26.430 --> 00:06:27.210
get any value.

105
00:06:27.210 --> 00:06:29.310
So in that case, we will just

106
00:06:32.100 --> 00:06:32.710
we could.

107
00:06:32.730 --> 00:06:34.680
So some default name, however.

108
00:06:37.390 --> 00:06:40.370
Actually, let's just use desperate.

109
00:06:42.350 --> 00:06:48.370
I think we tried to sort of use this name and by default we have the value, but obviously we would

110
00:06:48.370 --> 00:06:49.630
be showing the user's name.

111
00:06:51.040 --> 00:06:58.450
I can see here we will show the user's name and here we can show link for the desperate.

112
00:06:59.200 --> 00:07:01.480
So instead of calling it admin, we can call it.

113
00:07:03.730 --> 00:07:04.360
Desperate.

114
00:07:08.360 --> 00:07:08.840
Beautiful.

115
00:07:09.200 --> 00:07:16.430
Know, what we need to do here is instead of this hardcoded value, we have to dynamically get this

116
00:07:16.430 --> 00:07:18.350
value just like we did in the sign in.

117
00:07:18.380 --> 00:07:22.310
So based on the rule, if it is admin, we return admin.

118
00:07:22.310 --> 00:07:26.330
If it is also we reach an author, otherwise we will return subscriber.

119
00:07:26.750 --> 00:07:31.070
So we have to do some dynamic return here.

120
00:07:32.000 --> 00:07:32.780
The hatred.

121
00:07:33.240 --> 00:07:37.250
So what are we going to do is we can discard this out.

122
00:07:37.490 --> 00:07:40.490
So a header if we need the dynamic value here.

123
00:07:40.490 --> 00:07:40.760
Right.

124
00:07:40.760 --> 00:07:43.190
So we can use a function for that.

125
00:07:43.700 --> 00:07:46.730
So let's call it role based link

126
00:07:49.460 --> 00:07:51.110
and we execute this function.

127
00:07:51.740 --> 00:07:52.100
All right.

128
00:07:53.900 --> 00:07:55.380
And let's read this function.

129
00:07:55.400 --> 00:08:01.970
So in this function, what we want to do is this function will take for the authenticated user this

130
00:08:01.970 --> 00:08:06.000
user's role and mission, the role it will return a string.

131
00:08:06.020 --> 00:08:11.660
So if it is admin, it will return SLAs admin string.

132
00:08:11.660 --> 00:08:13.100
Otherwise it will return.

133
00:08:14.060 --> 00:08:15.530
Also, you know, it's like.

134
00:08:17.120 --> 00:08:19.400
I guess at this function, that's what it will do.

135
00:08:19.430 --> 00:08:25.940
So let's go ahead and put this function that we will have the dynamic link here to.

136
00:08:25.940 --> 00:08:27.500
Let's go on top.

137
00:08:30.100 --> 00:08:32.590
And we can put that here, John.

138
00:08:33.720 --> 00:08:42.000
For Basslink, it will stoop to the unit to create this function so that we can return a dynamic string

139
00:08:42.840 --> 00:08:51.440
so we can take here if if us user group.

140
00:08:52.260 --> 00:08:58.350
So basically what we did here in the sign interpreting months, we can actually, if you want, you

141
00:08:58.350 --> 00:09:00.930
can even copy this code that we just wrote.

142
00:09:01.020 --> 00:09:03.300
So it's got that coming here.

143
00:09:05.640 --> 00:09:06.830
In the space that he.

144
00:09:09.400 --> 00:09:13.060
I guess if the users admin now this time we're not going to.

145
00:09:15.610 --> 00:09:20.170
Execute this code instead of we just going to return this string,

146
00:09:23.410 --> 00:09:24.670
we just returned like that.

147
00:09:24.670 --> 00:09:28.660
So if it is admin, we return admin.

148
00:09:28.660 --> 00:09:35.040
Otherwise if it is also will return also otherwise return subscriber.

149
00:09:40.570 --> 00:09:40.960
Beautiful.

150
00:09:41.710 --> 00:09:45.640
Now you can see this function will return a different.

151
00:09:48.050 --> 00:09:53.060
The devout different Parthenon based on the role.

152
00:09:53.690 --> 00:09:56.600
And this function is executed right here.

153
00:10:04.630 --> 00:10:05.620
Couldn't find.

154
00:10:07.800 --> 00:10:11.190
Rule based links or may have some type of solid copy this one.

155
00:10:12.500 --> 00:10:13.340
It's worth.

156
00:10:16.090 --> 00:10:17.530
No, it's it's correct.

157
00:10:20.800 --> 00:10:21.190
Okay.

158
00:10:21.190 --> 00:10:22.900
So I had s express.

159
00:10:22.900 --> 00:10:23.770
I guess it's perfect.

160
00:10:24.220 --> 00:10:26.500
All right, so let's give this a try.

161
00:10:26.710 --> 00:10:27.400
Let's try this.

162
00:10:34.880 --> 00:10:35.240
Okay.

163
00:10:35.240 --> 00:10:36.470
So it shouldn't be done.

164
00:10:36.490 --> 00:10:39.280
It should be us, right?

165
00:10:40.000 --> 00:10:40.660
And because.

166
00:10:43.280 --> 00:10:44.780
Apart from the context.

167
00:10:46.930 --> 00:10:47.320
Okay.

168
00:10:48.340 --> 00:10:49.000
Let's try.

169
00:10:58.250 --> 00:11:00.950
Listen, let's sign in as a regular user.

170
00:11:03.430 --> 00:11:07.750
Our service uses regular use of Strava, so he has been redirected to subscribe.

171
00:11:08.050 --> 00:11:14.830
You can see the user's name is here if it is still his taking to the subscriber base.

172
00:11:14.990 --> 00:11:18.070
As you can see here, if you click on the dashboard.

173
00:11:19.240 --> 00:11:22.930
He goes to subscribe is as expert in profit.

174
00:11:23.470 --> 00:11:26.500
Now we don't have the offer, but it will definitely work.

175
00:11:27.640 --> 00:11:30.830
We can actually.

176
00:11:30.940 --> 00:11:35.950
Let's let's go ahead and make this another user, Ryan, to let's make him possible.

177
00:11:39.860 --> 00:11:45.290
Ryan is Edmund Ryan to his author and everyone else's subscriber.

178
00:11:45.530 --> 00:11:45.860
Okay.

179
00:11:45.950 --> 00:11:47.750
So that has been updated.

180
00:11:47.750 --> 00:11:50.060
So we got the author as well to just give it a try.

181
00:11:51.020 --> 00:11:51.490
Let's try.

182
00:11:51.500 --> 00:11:52.610
Logan is Ryan too?

183
00:11:54.990 --> 00:11:57.170
Okay, so this round also we don't have.

184
00:11:57.620 --> 00:11:58.130
That's right.

185
00:11:58.190 --> 00:12:02.480
You see this for fun, but we have been redirected to the right here.

186
00:12:03.560 --> 00:12:04.160
Ryan, do.

187
00:12:04.160 --> 00:12:05.900
That's the name dashboard.

188
00:12:06.230 --> 00:12:07.250
That's in December.

189
00:12:07.580 --> 00:12:08.120
Beautiful.

190
00:12:08.930 --> 00:12:09.650
So works.

191
00:12:09.830 --> 00:12:11.210
Now let's log in as admin.

192
00:12:12.260 --> 00:12:12.500
All right.

193
00:12:12.500 --> 00:12:13.880
So it works.

194
00:12:16.070 --> 00:12:16.600
Beautiful.

195
00:12:18.380 --> 00:12:25.850
I guess this is just the redirecting, but still anyone can access this this desperately.

196
00:12:25.850 --> 00:12:27.170
Still it is not secure.

197
00:12:27.770 --> 00:12:29.930
We just have this navigation fixed.

198
00:12:29.930 --> 00:12:37.910
But for example, anyone can manually try to go to admin.

199
00:12:38.840 --> 00:12:43.790
They still can because we don't have we haven't secured the place yet.

200
00:12:43.790 --> 00:12:47.330
We just worked on the the links and redirects.

201
00:12:47.480 --> 00:12:47.730
All right.

202
00:12:47.730 --> 00:12:51.620
So let's go ahead and see how we can secure the piece.
