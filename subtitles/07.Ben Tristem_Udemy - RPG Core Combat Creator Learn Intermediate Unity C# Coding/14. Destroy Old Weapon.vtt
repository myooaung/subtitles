WEBVTT
1
00:00:04.670 --> 00:00:09.920
Well again this video is going to be a problem and solution type video where the problem as I see it

2
00:00:09.920 --> 00:00:14.870
at the moment is I can run over an extra weapon and my plan ends up holding multiple weapons which is

3
00:00:14.870 --> 00:00:18.530
kind of cool until you get to the point where you've got 10 weapons and then you look like you're playing

4
00:00:18.530 --> 00:00:21.500
kind of Mario DiMasi with all these things hanging off you.

5
00:00:21.500 --> 00:00:22.760
So we're going to resolve that.

6
00:00:22.790 --> 00:00:27.860
First of all what I'd like to do is just create a second weapon pickup so one for the bow and to set

7
00:00:27.890 --> 00:00:30.650
our structure here so we're using prefab variance.

8
00:00:30.650 --> 00:00:35.210
He's a little mini challenge for you if you think you know how to do that then go ahead and create a

9
00:00:35.240 --> 00:00:38.640
route pickup and then a sword and a bow variant from the pick up.

10
00:00:38.660 --> 00:00:40.360
So take on that challenge.

11
00:00:40.370 --> 00:00:42.050
Otherwise we can do this together.

12
00:00:42.080 --> 00:00:44.810
I'm going to start by let's see.

13
00:00:44.930 --> 00:00:50.680
I'll start by renaming this to be route pick up and within my route pick up jump into my prefab here.

14
00:00:51.020 --> 00:00:57.070
I'm going to delete the weapon prefab so we don't have any actual mesh sitting in there.

15
00:00:57.080 --> 00:00:58.640
We've got a sphere collider and a trigger.

16
00:00:58.640 --> 00:00:59.300
That's all good.

17
00:00:59.300 --> 00:01:02.920
The weapon itself I will just switch to unarmed as my route.

18
00:01:02.930 --> 00:01:06.800
So there kind of is not really a weapon at this point which is fine.

19
00:01:06.800 --> 00:01:09.140
Why bother making prefabs when it's also simple.

20
00:01:09.140 --> 00:01:14.090
Well in the future we might want to add Santa Fe X or particle effects or other cool things to our pick

21
00:01:14.090 --> 00:01:14.600
ups.

22
00:01:14.600 --> 00:01:18.090
We don't have to go and add all of them individually we can just add them to the route.

23
00:01:18.170 --> 00:01:20.470
So right click Create.

24
00:01:20.480 --> 00:01:27.890
And where are we prefab variant more recreate our sword pick up.

25
00:01:27.890 --> 00:01:34.850
Excellent double click on that as we did before find the sword heads in Sinti prefabs down the bottom

26
00:01:35.240 --> 00:01:42.620
drag the sword underneath the sword pick up check that we have the sword zeroed Yep 0 0 0 I'm going

27
00:01:42.620 --> 00:01:48.050
to change the rotation to ninety so it's kind of lying flat on the ground and then let's see how it

28
00:01:48.050 --> 00:01:53.840
fits within the collider not so well so I need to move the weapon a little bit backwards on this access

29
00:01:53.840 --> 00:01:58.990
to that there it looks like a little bit backwards further to about there.

30
00:01:59.000 --> 00:02:02.910
So it's sitting roughly in the middle of my my sphere quite cool.

31
00:02:02.990 --> 00:02:07.790
OK so jump out of that will just do a little bit of sanity check to make sure that worked properly.

32
00:02:07.790 --> 00:02:13.310
And I've just noticed while editing my video that I forgot to delete my previous sword pick up that's

33
00:02:13.310 --> 00:02:18.470
now sitting in my scene just with the route pick up so it's lost its mesh so make sure you delete your

34
00:02:18.470 --> 00:02:24.530
old pickups so that they're not going to get in the way and be little invisible death traps and scroll

35
00:02:24.530 --> 00:02:31.640
down to pickups drop the sword pick up into our scene run over the sword pick up I run run run.

36
00:02:31.670 --> 00:02:32.780
Beep beep beep.

37
00:02:32.780 --> 00:02:37.430
One thing we do need to put in our pickups is a little bit of that worked but it didn't go into the

38
00:02:37.430 --> 00:02:41.670
hand because I forgot to tell it that it is a sword.

39
00:02:42.200 --> 00:02:43.720
So there we are just there.

40
00:02:43.720 --> 00:02:45.520
That should work sword.

41
00:02:45.530 --> 00:02:45.980
Excellent.

42
00:02:45.980 --> 00:02:47.140
One last check.

43
00:02:47.240 --> 00:02:50.810
So don't lead you down a dead end run run run run.

44
00:02:51.390 --> 00:02:54.430
And also I and it becomes huge when we pick it up.

45
00:02:54.440 --> 00:02:55.220
I love it.

46
00:02:55.220 --> 00:03:04.610
Now let's create our bow again right click on root create prefab variant called bow pick up Oh I was

47
00:03:04.610 --> 00:03:08.150
in the middle of saying one thing that would be really cool is to add a little bit of light a little

48
00:03:08.150 --> 00:03:12.610
bit of sparkle on the pickup so you can see them in the world and you know exactly ah there's a pickup

49
00:03:12.650 --> 00:03:17.090
because they're a little bit disappearing into our world at the moment but I will do that later for

50
00:03:17.090 --> 00:03:26.570
now I need to grab my bow asset which should be under Kim def TV assets I believe simple bow prefab

51
00:03:26.570 --> 00:03:34.530
drag that underneath bow pick up excellent double click right click reset that as we did in the past.

52
00:03:34.650 --> 00:03:35.310
Okay.

53
00:03:35.420 --> 00:03:40.670
I know this is covering territory again but should be pretty straightforward rotate 90 laying flat.

54
00:03:40.670 --> 00:03:41.170
Good.

55
00:03:41.240 --> 00:03:41.780
Done.

56
00:03:41.780 --> 00:03:43.040
Excellent.

57
00:03:43.040 --> 00:03:44.300
Just make sure it's sitting in the middle.

58
00:03:44.300 --> 00:03:46.530
It's not Rupert.

59
00:03:46.550 --> 00:03:51.650
There we go in the middle of our pick up quite the middle still on this a couple of times.

60
00:03:51.650 --> 00:03:57.230
There we go OK look shop while we're here make sure we say that this is a beaut.

61
00:03:57.240 --> 00:04:03.300
It's the bow with the blue projectile and back into our game drop one of these into the scene.

62
00:04:03.420 --> 00:04:08.110
Find our pickups bow pick up drop it into the scene.

63
00:04:08.210 --> 00:04:08.480
Okay.

64
00:04:08.490 --> 00:04:13.230
I was going to put these a little bit more where I can see them bit easier probably make them bigger

65
00:04:13.230 --> 00:04:17.460
which should probably put them on stuff on top of stuff soon we'll add a little bit of set dressing

66
00:04:17.460 --> 00:04:19.290
to our world and make it a little bit spiffy.

67
00:04:19.320 --> 00:04:22.060
But just doing functionality at this point in time.

68
00:04:22.080 --> 00:04:27.830
So next I'll click on the player re turned the player to default weapon being unarmed.

69
00:04:27.900 --> 00:04:29.350
Click on play.

70
00:04:29.420 --> 00:04:30.630
Okay run run run run.

71
00:04:30.630 --> 00:04:33.010
Pick up the sword blowing huge pick out the bow.

72
00:04:33.030 --> 00:04:33.230
Yeah.

73
00:04:33.330 --> 00:04:33.660
Okay.

74
00:04:33.660 --> 00:04:35.670
So we can pick things up as intended.

75
00:04:35.670 --> 00:04:36.370
Great.

76
00:04:36.400 --> 00:04:43.060
Just gonna apply this one back to the prefab apply overwriting preferred player.

77
00:04:43.110 --> 00:04:43.980
Okay great.

78
00:04:43.980 --> 00:04:45.440
Now let's go have a look at our scripts.

79
00:04:45.450 --> 00:04:48.900
We'll have a look at our weapon script combat and weapon.

80
00:04:48.900 --> 00:04:54.130
This is where we need to make some changes now within our weapon class here when we spawn.

81
00:04:54.120 --> 00:04:58.080
The first thing we want to do is to destroy the old weapon.

82
00:04:58.080 --> 00:05:02.580
If we have an old weapon so really making a new method that would be destroy old weapon and then giving

83
00:05:02.580 --> 00:05:08.790
it some logic to say check your right hand check your left hand and destroy whatever you find in either

84
00:05:08.790 --> 00:05:09.760
of those hands.

85
00:05:09.810 --> 00:05:13.920
And throughout this we're gonna be using a string reference to weapon because we'll be using the Find

86
00:05:13.920 --> 00:05:18.010
method and the fine is looking for a string reference find and then something.

87
00:05:18.090 --> 00:05:22.710
And so instead of having to have a string references scattered throughout our code here which gets a

88
00:05:22.710 --> 00:05:31.200
little bit messy and clunky I'm going to use a concept so const string weapon name equals weapon semicolon.

89
00:05:31.200 --> 00:05:37.020
That way we can be just using weapon name it's a nicer cleaner way for us to be changing things or accessing

90
00:05:37.260 --> 00:05:39.750
this particular string reference that we have here.

91
00:05:40.140 --> 00:05:40.450
Okay.

92
00:05:40.470 --> 00:05:44.250
Sorry it all makes sense if that doesn't if you ever use that technique before it makes sense in a moment

93
00:05:44.970 --> 00:05:52.050
under spawn we will call our method that we haven't created just yet destroy old weapon and we need

94
00:05:52.050 --> 00:05:58.140
to be passing in right hand and left hand so that we can check those two.

95
00:05:58.140 --> 00:05:58.860
That's great.

96
00:05:58.860 --> 00:06:01.350
And then after we instantiate.

97
00:06:01.350 --> 00:06:05.820
Well actually when we instantiate we want to instantiate as a game object so that we have a reference

98
00:06:05.820 --> 00:06:06.770
that we can access.

99
00:06:06.770 --> 00:06:13.290
So game objects will add this in front of instantiate we will call this weapon and that will equal our

100
00:06:13.290 --> 00:06:17.660
instantiation and then we are going to say weapon.

101
00:06:17.730 --> 00:06:22.740
Name equals what micro challenge for you here equals weapon.

102
00:06:22.770 --> 00:06:26.200
Name one about easy and micro challenges I suspect.

103
00:06:26.370 --> 00:06:26.640
Okay.

104
00:06:26.670 --> 00:06:27.290
That's cool.

105
00:06:27.300 --> 00:06:31.700
Now copy Maya destroy old weapon or just extract it as a method.

106
00:06:31.740 --> 00:06:36.270
I'm gonna copy it and type out private void destroy old weapon.

107
00:06:36.270 --> 00:06:39.500
We need to require the arguments of right hand and left hand.

108
00:06:39.510 --> 00:06:49.700
So transform right hand transform left hand and then we're going to check in both of the hands.

109
00:06:49.700 --> 00:06:55.500
So first of all we will create a variable which will call old weapon could call all weapon or previous

110
00:06:55.500 --> 00:06:56.790
weapon or current weapon.

111
00:06:56.790 --> 00:07:00.240
I want to destroy and this will be of type trance form.

112
00:07:00.300 --> 00:07:03.000
We just need to know where it is or what it is like.

113
00:07:03.030 --> 00:07:12.150
Yes there is one and that we will define as right hand dot find because we're looking in the right hand

114
00:07:12.280 --> 00:07:17.670
and we're trying to find a particular string reference string reference is weapon name that we've nicely

115
00:07:17.670 --> 00:07:20.160
turned into our const variable up the top.

116
00:07:20.160 --> 00:07:23.550
Okay so we're looking for is there something in the right hand.

117
00:07:23.550 --> 00:07:29.070
Now if old weapon that we've just looked in our right hand.

118
00:07:29.100 --> 00:07:31.600
If old weapon is no.

119
00:07:31.740 --> 00:07:40.260
If there's no weapon in our right hand basically then what we want to do is old weapon now equals what.

120
00:07:40.380 --> 00:07:47.130
What's it going to equal if it's not the right hand it's going to equal left hand don't find weapon

121
00:07:47.130 --> 00:07:54.480
name and then if old weapon is again equal to no then we want to return.

122
00:07:54.480 --> 00:07:55.220
Nothing to do here.

123
00:07:55.230 --> 00:07:56.040
We don't have a weapon.

124
00:07:56.040 --> 00:07:57.860
Nothing to be destroyed.

125
00:07:57.870 --> 00:07:59.050
All is well.

126
00:07:59.070 --> 00:08:07.510
However if we have found a weapon then what we want to say is destroy old weapon dart game object.

127
00:08:08.070 --> 00:08:12.900
So essentially if we find a game object in the right hand you know that's a weapon in the right hand

128
00:08:12.900 --> 00:08:13.740
or in the left hand.

129
00:08:13.740 --> 00:08:14.640
Then we destroy it.

130
00:08:14.640 --> 00:08:16.070
Now there's one little technicality.

131
00:08:16.080 --> 00:08:18.440
I won't take you through the debugging of this.

132
00:08:18.640 --> 00:08:22.560
The pain of trying to hunt down and make this make this bug appear.

133
00:08:22.560 --> 00:08:28.020
But because there's a little bit of an order issue or a frame issue or when things get cold we need

134
00:08:28.020 --> 00:08:33.120
to change the name from weapon for this old weapon that we're destroying.

135
00:08:33.120 --> 00:08:40.430
So at this point right before we destroy we're going to say old weapon name equals destroying all right.

136
00:08:40.440 --> 00:08:42.210
This in capitals is very clear.

137
00:08:42.210 --> 00:08:46.020
And essentially that's going to make sure that we don't have an issue where we've picked up a new weapon

138
00:08:46.410 --> 00:08:47.950
and we are.

139
00:08:48.090 --> 00:08:52.710
There's a confusion around is that the new weapon that we just picked up a second ago or is it the old

140
00:08:52.710 --> 00:08:58.290
weapon that we already had in our hands so we then destroy old weapon we are going to find that old

141
00:08:58.290 --> 00:09:04.440
weapon rename it to destroying and then that will allow us to destroy the old weapon without having

142
00:09:04.440 --> 00:09:09.800
confusion over the naming the new one being named weapon and so on such as one of those things that

143
00:09:09.800 --> 00:09:11.090
we found through our play testing.

144
00:09:11.100 --> 00:09:15.040
We get a bit of an issue if we don't rename it right before we destroy it.

145
00:09:15.140 --> 00:09:16.290
So let's save all that up.

146
00:09:16.280 --> 00:09:20.440
There's the code will jump back into unity see if this works we've got our two weapons.

147
00:09:20.540 --> 00:09:23.540
We start off with no weapon I believe unarmed.

148
00:09:23.570 --> 00:09:25.310
Okay let's run over the first weapon.

149
00:09:25.310 --> 00:09:29.810
Yes we pick up a sword run over the second weapon yes that works we'll see if we can shoot run over

150
00:09:29.810 --> 00:09:33.920
here shoot a few times bound bound and success.

151
00:09:33.920 --> 00:09:37.060
I think every guy is so great work and I'll see you in the next video.
