WEBVTT
1
00:00:01.020 --> 00:00:01.470
Hi.

2
00:00:01.770 --> 00:00:07.980
We didn't like your regrouping to learn how to work with five star database so that we can get all of

3
00:00:07.980 --> 00:00:12.420
this information and save them to our database.

4
00:00:12.480 --> 00:00:20.820
So let's go to our firebase dashboard in which we can click on this database and we can initialize the

5
00:00:20.820 --> 00:00:22.560
database process.

6
00:00:22.650 --> 00:00:30.420
So we're going to do this for bonds as we did in the storage and authentication so click on this database

7
00:00:30.420 --> 00:00:37.710
and you will see this file your store option where you're going to go with fire star and in below you

8
00:00:37.710 --> 00:00:43.840
can see the real time database as well but we're not going to use this because that's old news.

9
00:00:43.890 --> 00:00:52.140
Fi your store is the next generation of the real time database and it really has more powerful features

10
00:00:52.140 --> 00:00:54.660
compared to real time database.

11
00:00:54.720 --> 00:00:57.090
So we're not going to use real time database.

12
00:00:57.090 --> 00:01:03.830
We're going to go for called fires star which is the latest and best technology available in the fire

13
00:01:03.830 --> 00:01:04.410
base.

14
00:01:04.470 --> 00:01:04.920
OK.

15
00:01:05.790 --> 00:01:13.110
I'm telling all of this because you may encounter some real time database examples in online tutorials

16
00:01:13.170 --> 00:01:20.790
in the U.S. Army or any other tutorial sites like YouTube or the tutorials that you can see on the stack

17
00:01:20.790 --> 00:01:25.960
overflow you can encounter it is a real time database.

18
00:01:26.070 --> 00:01:30.890
But we're gonna go for five serve because that's better anywhere.

19
00:01:30.960 --> 00:01:37.460
So if you create create this you will be asked if you want to go for locked or task board.

20
00:01:37.480 --> 00:01:39.270
We're going to start with the test mode.

21
00:01:39.270 --> 00:01:46.470
So this is the security rules that we have talked about in this storage default for the database is

22
00:01:46.540 --> 00:01:49.980
loving reading a writing for test mode.

23
00:01:50.130 --> 00:01:54.600
And we're going to go for test mode and then we can change it later on.

24
00:01:54.630 --> 00:02:00.970
And as you can see for location we cannot choose anything because it has to be same with the storage.

25
00:02:01.020 --> 00:02:09.250
It makes sense to be same with the on the same location with storage because we're using the same database.

26
00:02:09.340 --> 00:02:14.810
It has to be synchronized so it doesn't let us choose another location at this moment.

27
00:02:15.840 --> 00:02:16.620
So here you go.

28
00:02:16.650 --> 00:02:21.120
That's our database before we go on and use databases in code.

29
00:02:21.120 --> 00:02:24.230
We have to understand the database structure.

30
00:02:24.540 --> 00:02:28.500
So if you have worked with a well before this is nothing like a square.

31
00:02:28.530 --> 00:02:35.400
So you have to forget about your a or sequel whatever you want to pronounce it.

32
00:02:35.430 --> 00:02:36.050
OK.

33
00:02:36.180 --> 00:02:38.310
This is not like sequel.

34
00:02:38.520 --> 00:02:39.720
OK.

35
00:02:39.870 --> 00:02:43.080
In here we have collections and documents.

36
00:02:43.110 --> 00:02:46.880
So for example we we have to start with a collection.

37
00:02:46.890 --> 00:02:52.970
If you click on the start collection you can call your collection posts it under the collection.

38
00:02:52.980 --> 00:02:54.630
You will have a document.

39
00:02:54.630 --> 00:02:54.990
OK.

40
00:02:54.990 --> 00:02:57.580
So this will be your individual posts.

41
00:02:57.720 --> 00:03:05.100
If you click on these photo I.D. will create a unique I.D. for your documents and in the document you

42
00:03:05.100 --> 00:03:09.480
may how whatever field and value you want.

43
00:03:09.480 --> 00:03:13.910
So this is like a dictionary like key and value pairings.

44
00:03:14.070 --> 00:03:17.990
For example in the post we we will have comments right.

45
00:03:18.010 --> 00:03:24.600
They are going to be strings and something like I love this picture I love this photo.

46
00:03:24.600 --> 00:03:28.080
And let me add this so you can see it better.

47
00:03:28.080 --> 00:03:29.970
So this is our collection.

48
00:03:29.970 --> 00:03:31.250
This is the main thing.

49
00:03:31.260 --> 00:03:32.860
This is like a class.

50
00:03:32.910 --> 00:03:40.170
And under this class we have all these objects like posts and these are called documents in the file.

51
00:03:40.170 --> 00:03:41.020
Yes sir.

52
00:03:41.040 --> 00:03:45.880
And then you click on a document you see its properties you see its values.

53
00:03:45.900 --> 00:03:52.380
So for example we can have a user e-mailed and James said Metallica dot com value in here.

54
00:03:52.740 --> 00:03:58.890
And actually we're going to have the user e-mailed the commands and we're going to have a date as well.

55
00:03:58.920 --> 00:04:07.470
OK let me just put a dummy value in here and then we're gonna add another post later on for example

56
00:04:07.690 --> 00:04:10.370
and we can add as many as we want.

57
00:04:10.440 --> 00:04:14.970
So they will have another value like Lara said Metallica dot com.

58
00:04:14.970 --> 00:04:20.940
So when I click on this now I mean I'm inside the other post if I click on this I'm inside the previous

59
00:04:20.940 --> 00:04:24.960
post I can add as many as fields as I want in here.

60
00:04:25.560 --> 00:04:34.470
So this is the most basic representation of the five year base data database actually fire store database

61
00:04:35.040 --> 00:04:41.070
and you can have as many as collections you want you can have as many as documents you want inside of

62
00:04:41.070 --> 00:04:48.070
the collection and yet better you can have a collection inside of a document as well.

63
00:04:48.090 --> 00:04:55.470
So if you want some layered structure structured you can have a new collection inside of this document

64
00:04:55.500 --> 00:04:56.270
as well.

65
00:04:56.340 --> 00:05:04.730
And then another document I under that's called so you can have layered collections on documents inside

66
00:05:04.730 --> 00:05:06.630
of fire start.

67
00:05:06.830 --> 00:05:13.790
That's not very fit for our purpose right now because we just want to save the posts and we we will

68
00:05:13.790 --> 00:05:16.010
have as many as we want in here.

69
00:05:16.040 --> 00:05:21.250
So this is currently meeting my expectation in the fire store.

70
00:05:21.260 --> 00:05:29.600
But if I want to add another collection like users or I don't know like likes collection or something

71
00:05:29.690 --> 00:05:33.180
else then I can add it from here.

72
00:05:33.180 --> 00:05:39.140
And we're not going to do anything manual in the fire store as well I'm just doing this just to show

73
00:05:39.140 --> 00:05:46.910
you how the structure of the fire sword looks like in order to let you understand the fire store collections

74
00:05:46.910 --> 00:05:48.020
and documents.

75
00:05:48.080 --> 00:05:54.940
We're going to do that all by inside all by code inside of our exe code.

76
00:05:55.190 --> 00:06:02.630
But if you'll take a mental picture of the if you remember this visualization then you can actually

77
00:06:02.690 --> 00:06:05.350
understand what we writing in The X code.

78
00:06:05.360 --> 00:06:11.290
So you have to remember we have field and values like a key and value pairing in here.

79
00:06:11.300 --> 00:06:16.610
In fact we're going to use dictionaries to supply this information to the fire store.

80
00:06:17.200 --> 00:06:17.630
OK.

81
00:06:18.020 --> 00:06:23.150
And that's what we're going to do in the X code so I'm going to delete this collection from here.

82
00:06:23.300 --> 00:06:29.960
And we're going to start from scratch so that you will see we don't have to do anything manually inside

83
00:06:29.960 --> 00:06:31.280
of this database.

84
00:06:31.340 --> 00:06:38.720
Once you initialize this database then you're good to go to come here and write your actual code.

85
00:06:39.800 --> 00:06:47.210
So remember we're using fire store so we can come over here to cloud fire star documentation not a real

86
00:06:47.210 --> 00:06:56.090
time database and click on one of these tabs like get started or structured data add data delete data

87
00:06:56.480 --> 00:07:04.010
retrieve data whatever you want you can find any documentation in here as you wish.

88
00:07:04.020 --> 00:07:11.810
And I really suggest you take a look in here as well because I'm going to be using the most common techniques

89
00:07:12.050 --> 00:07:18.710
inside of our app but of course I cannot tell you everything about to fire your base because it has

90
00:07:18.710 --> 00:07:20.420
so many features.

91
00:07:20.480 --> 00:07:22.590
So let me refresh this.

92
00:07:22.790 --> 00:07:30.350
And in order to leverage those features in your apps you all you have to do just come here and take

93
00:07:30.350 --> 00:07:34.320
a look of course after understanding the basics.

94
00:07:34.550 --> 00:07:39.950
Here you see some sample codes for different kinds of programming languages.

95
00:07:39.950 --> 00:07:40.620
OK.

96
00:07:40.620 --> 00:07:43.880
Obviously we want to see the ones in swift.

97
00:07:44.150 --> 00:07:51.500
And don't worry I'm going to show you how it's done and I'm just showing you this is as an example so

98
00:07:51.500 --> 00:07:58.240
that you get the habit of reading documentation before you go in in an operation like this.

99
00:07:58.310 --> 00:08:04.430
So we're going to do what we have been doing so far are we going to create a five star database variable

100
00:08:04.730 --> 00:08:07.300
and this will drive from the file your store.

101
00:08:07.400 --> 00:08:07.850
OK.

102
00:08:07.850 --> 00:08:12.400
Fire star database as you can see that fires start.

103
00:08:12.680 --> 00:08:20.390
So this is going to be our instance of the fires or class and later on we're going to use this to download

104
00:08:20.390 --> 00:08:22.520
and upload data.

105
00:08:22.550 --> 00:08:29.450
So next thing to do is just to create a reference as well but this will be a little bit different than

106
00:08:29.450 --> 00:08:30.080
before.

107
00:08:30.320 --> 00:08:33.930
So we're going to call this fire store reference.

108
00:08:33.950 --> 00:08:39.440
OK and this will be actually a document reference type.

109
00:08:39.440 --> 00:08:47.990
So put a column not equals sign because I'm going to use this document to reference to upload and download

110
00:08:47.990 --> 00:08:49.730
data as you can see retried.

111
00:08:49.730 --> 00:08:58.010
Listen data and I'm going to make this optional and in fact I can make this Neal to begin with.

112
00:08:58.100 --> 00:09:02.800
OK because after this I'm just going to initialize this.

113
00:09:02.960 --> 00:09:07.160
I'm going to initialize this using file your stored database.

114
00:09:07.160 --> 00:09:15.070
So we're going to do something like this fire sir reference is now five star database Dot.

115
00:09:15.170 --> 00:09:23.660
OK if I use your database dot collection so I will ask me for a collection name.

116
00:09:23.660 --> 00:09:27.230
So that's where I want to give posts.

117
00:09:27.350 --> 00:09:32.390
So after you create your connection you choose your collection name.

118
00:09:32.480 --> 00:09:41.360
You can say add documents and in here it asks you for a string to any dictionary and choose the one

119
00:09:41.360 --> 00:09:47.800
with the completion block because as usual we want to see what happens after we do this.

120
00:09:47.810 --> 00:09:54.800
So here we have to provide a string to any dictionary because remember in the database in the field

121
00:09:54.800 --> 00:09:57.880
of values we have value key pairings.

122
00:09:57.890 --> 00:09:59.420
So that's what we're going to do.

123
00:09:59.470 --> 00:10:06.050
We are going to create key value prey pairings with dictionaries and supply all of this information

124
00:10:06.290 --> 00:10:08.630
with dictionaries to fires start.

125
00:10:09.080 --> 00:10:15.720
So that's why it asks us to create string to any dictionaries.

126
00:10:16.100 --> 00:10:21.890
And after that it will give me a completion and then the completion if you enter you will only see an

127
00:10:22.010 --> 00:10:22.780
error.

128
00:10:22.880 --> 00:10:28.670
And of course we are going to check to see if areas not nil if area is not nil we are going to display

129
00:10:28.670 --> 00:10:32.560
an alert message to the user and else if it's nil.

130
00:10:32.570 --> 00:10:34.430
We are going to do what we have to do.

131
00:10:35.600 --> 00:10:43.820
So since we have our Make alert function let's call this safe setup make Eller title input will be error

132
00:10:43.880 --> 00:10:50.720
message input will be error that localized description of cars it doesn't auto complete right now because

133
00:10:50.720 --> 00:10:58.060
I haven't taken care of this problem in here but I believe I have written it correct.

134
00:10:58.070 --> 00:11:00.420
So we can check it later on.

135
00:11:00.440 --> 00:11:07.680
So let's take care of this string to any dictionary so that we can proceed.

136
00:11:07.850 --> 00:11:15.080
So in the string to any dictionary I want to save all my information all my related information right.

137
00:11:15.080 --> 00:11:17.760
So I'm going to call this file your star post.

138
00:11:17.780 --> 00:11:25.910
I'm going to open this braces in here I'm re going to write the first key first field name as image

139
00:11:25.910 --> 00:11:27.820
you're out right.

140
00:11:27.830 --> 00:11:33.380
So if you put that column the image your l value will be this image your url.

141
00:11:33.500 --> 00:11:40.610
So let's do image euro and put an exclamation point in order to make this not optional.

142
00:11:40.610 --> 00:11:46.510
Of course you can check for it flat in here but I believe this will be okay.

143
00:11:46.580 --> 00:11:57.260
And later on after the image Euro what do we how we how the name of the file name of the owner of the

144
00:11:57.260 --> 00:11:57.650
file.

145
00:11:57.650 --> 00:11:58.300
Right.

146
00:11:58.340 --> 00:12:01.670
So we have the user name and we have the comment.

147
00:12:01.790 --> 00:12:05.130
So I'm going to call this posted by.

148
00:12:05.240 --> 00:12:09.350
So I'm going to select whoever posts this.

149
00:12:09.470 --> 00:12:11.340
So who posts this.

150
00:12:11.390 --> 00:12:18.890
Of course the current user using our app is going to post this and we can get this user by saying off

151
00:12:19.170 --> 00:12:23.140
that of that current user as you might remember.

152
00:12:23.160 --> 00:12:26.530
OK but we're not done here after that.

153
00:12:26.540 --> 00:12:32.700
We have to get the email address of these users so I'm going to say email.

154
00:12:32.750 --> 00:12:33.930
So that's it.

155
00:12:33.950 --> 00:12:36.230
That's how I get the current user.

156
00:12:36.230 --> 00:12:39.820
So let me close this site paints so we can see better.

157
00:12:40.020 --> 00:12:43.400
And after the image you're out and the posted by.

158
00:12:43.730 --> 00:12:45.790
So what else do we get here.

159
00:12:45.830 --> 00:12:48.020
We have to get post to comment as well.

160
00:12:48.020 --> 00:12:48.800
Right.

161
00:12:48.860 --> 00:12:52.500
We have a comment in here in the south that comment tax.

162
00:12:52.580 --> 00:12:55.710
So let me write this as well.

163
00:12:55.940 --> 00:13:05.390
I'm going to call this post comment and the value of this post comment will come from self doubt comment

164
00:13:05.390 --> 00:13:11.540
texts dot texts and I can wrap this as well.

165
00:13:11.540 --> 00:13:19.520
So finally we have to you it's a date and actually not finally we have to give it a date and then likes

166
00:13:20.000 --> 00:13:28.190
because we're going to have likes option in our app as well and for dates I'm just going to say dates

167
00:13:28.190 --> 00:13:30.160
right now we're live it's empty.

168
00:13:30.170 --> 00:13:32.720
We're going to see how to do that later on.

169
00:13:33.000 --> 00:13:33.460
OK.

170
00:13:33.470 --> 00:13:37.780
I'm just going to say dates right now and for likes.

171
00:13:37.880 --> 00:13:45.860
I'm going to start with zero and then I'm going to add one after somebody likes our posts so I'm going

172
00:13:45.860 --> 00:13:48.770
to say zero over here.

173
00:13:48.830 --> 00:13:59.150
So once I do that this will ask me to cast is as strict to any because we're having a lot of different

174
00:13:59.180 --> 00:14:01.310
objects as values.

175
00:14:01.310 --> 00:14:09.390
And even though we didn't ask I have to cast this as string to any anyway because this fire is still

176
00:14:09.410 --> 00:14:14.490
a reference method asks me to give an input of string to any anyway.

177
00:14:14.620 --> 00:14:23.300
OK so whatever you write here has value you have to cast is as s String any and after that you can just

178
00:14:23.300 --> 00:14:31.700
say hi fi your store post in here and we're getting some kind of error here it says that Forester reference

179
00:14:31.700 --> 00:14:34.830
is a constant and you're changing it.

180
00:14:34.970 --> 00:14:41.330
So let me hit fixed to make it var or you can just come over here and write var as well.

181
00:14:41.660 --> 00:14:49.430
And in here it asks for an optional or force and wrapping value in here so I'm going to go for optional

182
00:14:49.910 --> 00:14:57.130
and later on you can provide the default value if this is an empty value here saying two questions Mark.

183
00:14:57.170 --> 00:14:57.820
Error.

184
00:14:58.100 --> 00:14:58.590
OK.

185
00:14:59.050 --> 00:15:09.120
So I believe now this is OK because we have created our fire store post we have created our dictionaries

186
00:15:09.140 --> 00:15:15.400
during to any dictionary and by using this fire still reference we're uploading that information in

187
00:15:15.400 --> 00:15:17.040
the Post's collection.

188
00:15:17.470 --> 00:15:23.540
OK so now I believe you're ready to test this later on.

189
00:15:23.550 --> 00:15:27.300
We are going to change this date to the actual date.

190
00:15:27.310 --> 00:15:34.150
But for right now we can actually test to see if we can in fact provide this image you're all posted

191
00:15:34.150 --> 00:15:37.130
by post command to the server or not.

192
00:15:37.720 --> 00:15:39.460
So let's open our simulator.

193
00:15:39.460 --> 00:15:41.470
Let's go to upload section.

194
00:15:41.530 --> 00:15:42.170
OK.

195
00:15:42.310 --> 00:15:48.670
Let's select a picture so that we can upload it to the storage and let's write a comment this time because

196
00:15:48.670 --> 00:15:50.390
we're going to test this.

197
00:15:50.410 --> 00:15:52.050
So let's say Starry Night.

198
00:15:52.090 --> 00:15:56.310
And if I hit upload it won't take me to the feet.

199
00:15:56.410 --> 00:16:04.030
This is an expected behavior because we haven't written that called yet but we can come over to the

200
00:16:04.030 --> 00:16:09.450
database and refresh it to see if we have the Post's collection created.

201
00:16:10.720 --> 00:16:15.070
So here you go we now see the posts we now see to their comments.

202
00:16:15.430 --> 00:16:25.360
And under this document we see the date image URL likes and the all the other at result the other feel

203
00:16:25.360 --> 00:16:29.930
them values that I have defined in my post dictionary.

204
00:16:29.980 --> 00:16:35.880
So here in the image URL I see the current uploaded images your URL.

205
00:16:36.040 --> 00:16:37.380
So that's good.

206
00:16:37.390 --> 00:16:39.970
That's all I wanted to do.

207
00:16:40.090 --> 00:16:47.500
We have to take care of this date in order to order all of this information order all of these posts

208
00:16:47.740 --> 00:16:50.060
by date in our feet.

209
00:16:50.230 --> 00:16:53.710
So let's stop here and do that within the next lecture.
