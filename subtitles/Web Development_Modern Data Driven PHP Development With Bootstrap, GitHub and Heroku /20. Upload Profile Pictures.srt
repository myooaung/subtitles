1
00:00:00,000 --> 00:00:01,520
Hey,

2
00:00:01,520 --> 00:00:01,900
guys,

3
00:00:01,900 --> 00:00:05,980
in this video will be modifying over attendance application toe alot,

4
00:00:05,980 --> 00:00:09,350
potential attendees to upload a picture.

5
00:00:09,350 --> 00:00:13,360
The scenario is that when somebody sending for a conference,

6
00:00:13,360 --> 00:00:16,250
you want to give them the option to upload a picture,

7
00:00:16,250 --> 00:00:17,620
maybe a self portrait,

8
00:00:17,620 --> 00:00:19,350
so that maybe we can put it on the i.

9
00:00:19,350 --> 00:00:22,380
D for them when the conference comes.

10
00:00:22,380 --> 00:00:25,890
If they do not upload a picture because it's completely optional,

11
00:00:25,890 --> 00:00:27,210
then we want toe.

12
00:00:27,210 --> 00:00:30,150
Make sure that we put a default picture instead.

13
00:00:30,150 --> 00:00:32,630
To accomplish all of these objectives,

14
00:00:32,630 --> 00:00:37,350
we need to modify our form or database and are supporting court.

15
00:00:37,350 --> 00:00:38,950
Let's start with the form.

16
00:00:38,950 --> 00:00:47,210
So the support of file upload we need to include a file upload control from on our form.

17
00:00:47,210 --> 00:00:50,140
So I go to the court for our form,

18
00:00:50,140 --> 00:00:51,790
which is index dot PHP.

19
00:00:51,790 --> 00:00:58,160
And then I am just going to duplicate one off the existing form groups and then make the

20
00:00:58,160 --> 00:00:59,400
changes accordingly.

21
00:00:59,400 --> 00:01:00,060
No,

22
00:01:00,060 --> 00:01:09,120
for a form we still need over label on going to see four avatar on what it will print is

23
00:01:09,120 --> 00:01:11,670
upload image,

24
00:01:11,670 --> 00:01:15,820
and then I'm going to put in brackets optional so that they know for sure that they don't

25
00:01:15,820 --> 00:01:17,470
have toe next.

26
00:01:17,470 --> 00:01:23,750
The import type that we need to use is off type file and then or class.

27
00:01:23,750 --> 00:01:26,930
He's not going to be formed control this time,

28
00:01:26,930 --> 00:01:31,040
but I'm going to use our custom class given to us Bible trip,

29
00:01:31,040 --> 00:01:36,510
for that's his custom bash file bash Input.

30
00:01:36,510 --> 00:01:43,350
This will kind of give us a a slightly remixed version off a file input control.

31
00:01:43,350 --> 00:01:44,820
Also,

32
00:01:44,820 --> 00:01:48,250
go ahead and change the idea and name Toe Avatar.

33
00:01:48,250 --> 00:01:51,690
So that's everything on.

34
00:01:51,690 --> 00:01:56,480
I don't need this attributes area described by salty.

35
00:01:56,480 --> 00:01:58,300
That's oats on.

36
00:01:58,300 --> 00:02:01,200
I don't need this label underneath it either.

37
00:02:01,200 --> 00:02:02,090
On.

38
00:02:02,090 --> 00:02:02,600
Then,

39
00:02:02,600 --> 00:02:07,760
I'm going to include a class custom file in our def.

40
00:02:07,760 --> 00:02:08,250
So instead,

41
00:02:08,250 --> 00:02:16,530
off form group on when tohave custom file Onda Finally,

42
00:02:16,530 --> 00:02:20,600
I'm going to have a label below.

43
00:02:20,600 --> 00:02:25,970
So all of this is just required for the custom files Understood.

44
00:02:25,970 --> 00:02:29,670
Duplicating this label on goingto have four.

45
00:02:29,670 --> 00:02:30,420
Instead,

46
00:02:30,420 --> 00:02:35,800
I'm going toe Have class equals cost,

47
00:02:35,800 --> 00:02:36,270
um,

48
00:02:36,270 --> 00:02:38,430
dash file dash label.

49
00:02:38,430 --> 00:02:42,750
So if you actually look up on the internet for bootstrap custom forms,

50
00:02:42,750 --> 00:02:48,270
you actually see some references to these kind of custom labels that I'm talking about or

51
00:02:48,270 --> 00:02:55,250
classes rather on the the text inside off this label will be choose file.

52
00:02:55,250 --> 00:02:59,930
So you see where this label falls into place when everything is printed.

53
00:02:59,930 --> 00:03:02,610
So the class that sorry Dave,

54
00:03:02,610 --> 00:03:05,050
is custom file as a class.

55
00:03:05,050 --> 00:03:08,050
Then we have a label because you know,

56
00:03:08,050 --> 00:03:10,320
every form control has its label.

57
00:03:10,320 --> 00:03:16,850
And then we have the input off type file class cost on file input with an i D and name.

58
00:03:16,850 --> 00:03:19,350
Now let's see what that produces.

59
00:03:19,350 --> 00:03:19,930
All right,

60
00:03:19,930 --> 00:03:22,970
so that's what it produces and notice.

61
00:03:22,970 --> 00:03:26,140
We don't have the top label appearing here,

62
00:03:26,140 --> 00:03:27,390
and also when we click,

63
00:03:27,390 --> 00:03:28,210
it's not working.

64
00:03:28,210 --> 00:03:29,190
I'm clicking it right now.

65
00:03:29,190 --> 00:03:29,890
It's not working.

66
00:03:29,890 --> 00:03:32,630
So I got a bit overzealous.

67
00:03:32,630 --> 00:03:33,820
And firstly,

68
00:03:33,820 --> 00:03:35,040
in a custom situation,

69
00:03:35,040 --> 00:03:36,690
we don't have that label here,

70
00:03:36,690 --> 00:03:39,730
at least not for the file and put somewhere to take this label.

71
00:03:39,730 --> 00:03:40,180
Haute.

72
00:03:40,180 --> 00:03:41,510
Since we already have that,

73
00:03:41,510 --> 00:03:45,210
Bottomley will seem to file on then for this label,

74
00:03:45,210 --> 00:03:50,040
I'm going to have to put in the attribute for avatars.

75
00:03:50,040 --> 00:03:53,690
Remember that all the labels have the four on the control that therefore,

76
00:03:53,690 --> 00:03:54,520
based on the I D.

77
00:03:54,520 --> 00:03:55,940
So if ID's of attire,

78
00:03:55,940 --> 00:03:57,570
then choose who I choose.

79
00:03:57,570 --> 00:04:04,560
File is four or avatar control and since we have no real visual cue.

80
00:04:04,560 --> 00:04:07,050
What I'm going to do is modify.

81
00:04:07,050 --> 00:04:12,300
They set up similar toe our phone where we had this small text being printed that showed a

82
00:04:12,300 --> 00:04:13,390
little help.

83
00:04:13,390 --> 00:04:17,100
So I'm going to just put underneath it something to say.

84
00:04:17,100 --> 00:04:24,420
The file upload is optional so that people who don't wish to blow the final know that they

85
00:04:24,420 --> 00:04:26,330
don't have to write on.

86
00:04:26,330 --> 00:04:34,790
I'm going to change this to maybe text dash warning so that it pops a bit more.

87
00:04:34,790 --> 00:04:36,200
So when I refresh,

88
00:04:36,200 --> 00:04:39,990
I'm so no text off warning doesn't look very good to understand,

89
00:04:39,990 --> 00:04:40,830
to say danger.

90
00:04:40,830 --> 00:04:44,780
So it pops on the screen and they're so far abilities,

91
00:04:44,780 --> 00:04:45,220
options.

92
00:04:45,220 --> 00:04:49,710
So that may not be the best choice off because the second arrow he can find a better one if

93
00:04:49,710 --> 00:04:51,290
you in your context.

94
00:04:51,290 --> 00:04:53,660
But I leave that for no on that.

95
00:04:53,660 --> 00:04:58,500
Just put a slight br in between these two controls.

96
00:04:58,500 --> 00:05:00,440
So that s Oh,

97
00:05:00,440 --> 00:05:03,180
that looks a bit cleaner on.

98
00:05:03,180 --> 00:05:04,610
Then notes when I click,

99
00:05:04,610 --> 00:05:06,530
it brings up that fire search.

100
00:05:06,530 --> 00:05:07,180
Ballack.

101
00:05:07,180 --> 00:05:12,610
Now the fire search dialog is going to be displaying every single post civil file on these

102
00:05:12,610 --> 00:05:12,750
air.

103
00:05:12,750 --> 00:05:14,710
Some script plaza on this machine.

104
00:05:14,710 --> 00:05:17,580
I don't need script files being uploaded as avatars.

105
00:05:17,580 --> 00:05:18,450
I need images,

106
00:05:18,450 --> 00:05:21,860
someone to make one more adjustment to this control.

107
00:05:21,860 --> 00:05:28,560
So the input on went to add an attribute that says except and then equal on.

108
00:05:28,560 --> 00:05:33,060
Then the value for that will be image slash star.

109
00:05:33,060 --> 00:05:38,010
So that means I'm limiting the type of fires that this control will accept.

110
00:05:38,010 --> 00:05:41,570
Toe image types with its JPEG PNG.

111
00:05:41,570 --> 00:05:44,710
You can always list them out if you want more limitations.

112
00:05:44,710 --> 00:05:46,300
But I just leave star.

113
00:05:46,300 --> 00:05:49,550
And so when I refresh and try that again,

114
00:05:49,550 --> 00:05:54,820
notice if I go back to my desktop I'm not seeing any of the script files because,

115
00:05:54,820 --> 00:05:55,030
no,

116
00:05:55,030 --> 00:05:57,720
I'm only limiting it toe image files.

117
00:05:57,720 --> 00:05:58,330
So no,

118
00:05:58,330 --> 00:05:59,890
that's step one is completed,

119
00:05:59,890 --> 00:06:02,340
and we are allowing the person to be able to Bro's,

120
00:06:02,340 --> 00:06:05,010
their computer selected image and submit.

121
00:06:05,010 --> 00:06:08,540
We no need to modify what happens upon submission.

122
00:06:08,540 --> 00:06:09,640
So to do that,

123
00:06:09,640 --> 00:06:12,490
we need to go to our or action page,

124
00:06:12,490 --> 00:06:14,280
which is success like PHP,

125
00:06:14,280 --> 00:06:15,950
and makes a modification.

126
00:06:15,950 --> 00:06:16,400
Still,

127
00:06:16,400 --> 00:06:24,700
our post processing court here will be introduced to a new super global variable called

128
00:06:24,700 --> 00:06:25,530
files,

129
00:06:25,530 --> 00:06:28,210
so I'm just going to make some space here on.

130
00:06:28,210 --> 00:06:30,120
Then what I'm going to do firstly,

131
00:06:30,120 --> 00:06:37,420
is I'm going to define a directory Orwell a target location for anything that is uploaded.

132
00:06:37,420 --> 00:06:43,230
So I firstly created a director called Uploads that has created a new folder.

133
00:06:43,230 --> 00:06:44,380
Did that our screen.

134
00:06:44,380 --> 00:06:47,150
So I created a new folder called Uploads.

135
00:06:47,150 --> 00:06:51,440
And then this is where all of my uploaded files will be going so you can go ahead and

136
00:06:51,440 --> 00:06:54,650
create that folder and then you can continue along on,

137
00:06:54,650 --> 00:06:57,750
then till to set the target directory.

138
00:06:57,750 --> 00:07:01,020
I'm just going to define a new variable on.

139
00:07:01,020 --> 00:07:05,560
I'm going to call it a target on the score the i R.

140
00:07:05,560 --> 00:07:07,600
Short for directory on.

141
00:07:07,600 --> 00:07:12,340
Then I'm going to set its value to be uploads.

142
00:07:12,340 --> 00:07:13,070
Sorry.

143
00:07:13,070 --> 00:07:16,190
In string uploads slash.

144
00:07:16,190 --> 00:07:19,950
So my target nurture is my uploads folder.

145
00:07:19,950 --> 00:07:26,160
Next time went to build a string that will represent the name off my file.

146
00:07:26,160 --> 00:07:28,210
So to build the string,

147
00:07:28,210 --> 00:07:31,150
I'm going to first start off with the target directory.

148
00:07:31,150 --> 00:07:34,550
So that's Dallas and targets on the score directory.

149
00:07:34,550 --> 00:07:39,540
And then I'm going to conduct attorney that onto the name off the file,

150
00:07:39,540 --> 00:07:42,490
which I'm going to get by seeing this name,

151
00:07:42,490 --> 00:07:50,150
which is a PHP function on it receives some file path or find him so inside off base name.

152
00:07:50,150 --> 00:07:57,620
I'm going to then reference my super global variable called files and then finance has to

153
00:07:57,620 --> 00:07:58,920
worry sub scripts.

154
00:07:58,920 --> 00:08:03,870
The first Ari subscript would be the name off the control.

155
00:08:03,870 --> 00:08:05,750
So just like with Post,

156
00:08:05,750 --> 00:08:08,990
only wanted the value coming from the first name control.

157
00:08:08,990 --> 00:08:10,510
We reference it by name.

158
00:08:10,510 --> 00:08:11,710
So in this case,

159
00:08:11,710 --> 00:08:15,180
we want the file coming from or file upload control,

160
00:08:15,180 --> 00:08:15,870
which in this case,

161
00:08:15,870 --> 00:08:21,040
we called Avatar on then the attributes off the father we wish toe have.

162
00:08:21,040 --> 00:08:21,860
So in this case,

163
00:08:21,860 --> 00:08:23,710
I want attributes Name.

164
00:08:23,710 --> 00:08:27,560
So the attributes is just like when you right click Ah file.

165
00:08:27,560 --> 00:08:27,800
You know,

166
00:08:27,800 --> 00:08:29,140
Windows system on.

167
00:08:29,140 --> 00:08:31,500
Then you see the name the date created the size.

168
00:08:31,500 --> 00:08:33,190
All of those are five attributes.

169
00:08:33,190 --> 00:08:34,280
So in this situation,

170
00:08:34,280 --> 00:08:35,210
I want the name.

171
00:08:35,210 --> 00:08:38,540
Now that's have the name off the uploaded file.

172
00:08:38,540 --> 00:08:43,750
The next thing to do is to actually move the file somewhere to say moved uploaded file,

173
00:08:43,750 --> 00:08:45,740
which is a PHP function on.

174
00:08:45,740 --> 00:08:48,130
Then This one takes to permit is itics.

175
00:08:48,130 --> 00:08:51,980
What files should be moved as well as the destination.

176
00:08:51,980 --> 00:08:53,200
So to me.

177
00:08:53,200 --> 00:08:54,950
This a big cleaner.

178
00:08:54,950 --> 00:09:02,520
What I'm going to do is I'm going to create another very book and call it original file are

179
00:09:02,520 --> 00:09:03,050
five,

180
00:09:03,050 --> 00:09:10,180
and that will be equal to the original name coming through our post.

181
00:09:10,180 --> 00:09:10,550
All right,

182
00:09:10,550 --> 00:09:14,040
so art file is storing the file,

183
00:09:14,040 --> 00:09:20,570
the name off the AB attire or the name off the file coming through our of attire control on

184
00:09:20,570 --> 00:09:20,570
.

185
00:09:20,570 --> 00:09:24,880
Then I'm setting the Tirlea character to be uploads on.

186
00:09:24,880 --> 00:09:28,890
Then I am determining that this is my destination.

187
00:09:28,890 --> 00:09:29,310
So really,

188
00:09:29,310 --> 00:09:29,610
actually,

189
00:09:29,610 --> 00:09:33,990
I could have called this one destination so much really in that destination,

190
00:09:33,990 --> 00:09:40,210
because what this will do is act as the destination path for this file.

191
00:09:40,210 --> 00:09:41,770
So by building it to say,

192
00:09:41,770 --> 00:09:49,870
uploads slash the name off the file on the I'm preparing it to be moved by this function.

193
00:09:49,870 --> 00:09:50,950
When I see,

194
00:09:50,950 --> 00:09:52,320
move,

195
00:09:52,320 --> 00:09:52,860
uploaded,

196
00:09:52,860 --> 00:09:54,880
file and see dollar signs,

197
00:09:54,880 --> 00:09:59,750
original file and then comma dollar sign destination.

198
00:09:59,750 --> 00:10:02,000
So this function,

199
00:10:02,000 --> 00:10:02,940
once it's called,

200
00:10:02,940 --> 00:10:11,080
will look for the original file coming through our submit action on then create it at this

201
00:10:11,080 --> 00:10:17,120
destination that we have specified come winter and a cursory test.

202
00:10:17,120 --> 00:10:17,790
But obviously,

203
00:10:17,790 --> 00:10:18,360
if I submit,

204
00:10:18,360 --> 00:10:20,830
the form has been to attempt to do a database Inter,

205
00:10:20,830 --> 00:10:23,460
which I don't necessarily want someone to show you.

206
00:10:23,460 --> 00:10:29,110
A little d bullying trick where you can actually use a function called Exit that actually

207
00:10:29,110 --> 00:10:31,620
stops the execution at that line.

208
00:10:31,620 --> 00:10:32,700
So in other words,

209
00:10:32,700 --> 00:10:35,950
when I submit the form it will get this far.

210
00:10:35,950 --> 00:10:37,470
Once it hits the exit,

211
00:10:37,470 --> 00:10:38,880
nothing else will happen.

212
00:10:38,880 --> 00:10:42,370
So I don't want you to submit anything to the database just yet,

213
00:10:42,370 --> 00:10:49,030
So I'm going to use this to pause the execution on just validates that the file is moved as

214
00:10:49,030 --> 00:10:49,820
specified.

215
00:10:49,820 --> 00:10:52,000
So I'm going to go back to my form,

216
00:10:52,000 --> 00:10:54,600
refresh Philip totals,

217
00:10:54,600 --> 00:10:57,500
and then I'm going to choose a file,

218
00:10:57,500 --> 00:11:03,520
and I have to hear our student of stealing details someone to to students on.

219
00:11:03,520 --> 00:11:06,190
Then I'm going to click submit and,

220
00:11:06,190 --> 00:11:06,410
well,

221
00:11:06,410 --> 00:11:07,350
nothing happened.

222
00:11:07,350 --> 00:11:07,870
Hold.

223
00:11:07,870 --> 00:11:09,010
I validate this.

224
00:11:09,010 --> 00:11:11,440
I would have to go to my file system,

225
00:11:11,440 --> 00:11:13,830
or I can just go back to visual studio cord on.

226
00:11:13,830 --> 00:11:19,130
Look at the contents off the upload folder on Nothing happened on.

227
00:11:19,130 --> 00:11:22,390
Nothing happened because I made a mistake here.

228
00:11:22,390 --> 00:11:26,170
So the original file really should not have the name,

229
00:11:26,170 --> 00:11:30,250
but rather the TMP name that's the attributes off the fire that we want,

230
00:11:30,250 --> 00:11:31,780
so I'll explain what that means.

231
00:11:31,780 --> 00:11:39,440
Name is what we see when I see student that PNG on the fire system that's the name over pH

232
00:11:39,440 --> 00:11:39,440
.

233
00:11:39,440 --> 00:11:41,990
B is not trucking it by the name off the file,

234
00:11:41,990 --> 00:11:44,180
but it generated ah,

235
00:11:44,180 --> 00:11:48,780
temporary name for transit between the post action.

236
00:11:48,780 --> 00:11:55,220
So for us to be able to actually move the file or interact with the file itself in any

237
00:11:55,220 --> 00:11:56,140
physical matter,

238
00:11:56,140 --> 00:12:00,680
we have to reference it by the TMP on the score Name attributes.

239
00:12:00,680 --> 00:12:04,900
So in the orig file variable that's I created here.

240
00:12:04,900 --> 00:12:11,560
I want to say files of attire and instead of saying name with just a t m p underscore name

241
00:12:11,560 --> 00:12:11,560
,

242
00:12:11,560 --> 00:12:14,460
So move uploaded file will be moving.

243
00:12:14,460 --> 00:12:21,890
Whatever file has that temporary name toe a more permanent destination on our fast system,

244
00:12:21,890 --> 00:12:25,560
someone to see if these changes and then I went to just refresh.

245
00:12:25,560 --> 00:12:29,590
So it actually just submits everything to the form again and click.

246
00:12:29,590 --> 00:12:30,810
Continue on.

247
00:12:30,810 --> 00:12:36,730
Then we're going to go back to our uploads folder on defy Look inside or close for you see

248
00:12:36,730 --> 00:12:41,450
that a fire has been created by the name student that P and G.

249
00:12:41,450 --> 00:12:42,610
No.

250
00:12:42,610 --> 00:12:49,420
One thing we don't want is any tour registrants uploading the same image with the same name

251
00:12:49,420 --> 00:12:51,320
on one over writing the other.

252
00:12:51,320 --> 00:12:56,480
It's always good practice to rename your file to something that is unique on that.

253
00:12:56,480 --> 00:12:58,350
When you're storing it in the database,

254
00:12:58,350 --> 00:13:02,890
you are always sure that you're getting the CART picture for the courts person.

255
00:13:02,890 --> 00:13:08,700
So in a situation where you have people creating user profiles with unique user names,

256
00:13:08,700 --> 00:13:13,640
then you probably want to rename the image to the user name or to some unique I.

257
00:13:13,640 --> 00:13:13,910
D.

258
00:13:13,910 --> 00:13:15,910
That you're also starring in the database.

259
00:13:15,910 --> 00:13:16,900
For this person.

260
00:13:16,900 --> 00:13:18,430
In this situation,

261
00:13:18,430 --> 00:13:24,620
the little really unique things about any registrants will probably be their email address

262
00:13:24,620 --> 00:13:26,760
on maybe their contacts number.

263
00:13:26,760 --> 00:13:32,430
And I think contact is probably more unique than email address in this situation.

264
00:13:32,430 --> 00:13:39,450
So I'm goingto be renaming the files that they upload toe have the name that looks like

265
00:13:39,450 --> 00:13:41,120
they're full number now.

266
00:13:41,120 --> 00:13:42,330
In order to do this,

267
00:13:42,330 --> 00:13:49,510
I'm going tohave toe change the way I set up the destination by setting whatever custom

268
00:13:49,510 --> 00:13:50,610
name I need here.

269
00:13:50,610 --> 00:13:54,760
But then I still have to add back the extension off the fire,

270
00:13:54,760 --> 00:13:59,660
which I don't know what extension it is since I'm looking for images which can be PNG J

271
00:13:59,660 --> 00:14:02,280
pick or G I f.

272
00:14:02,280 --> 00:14:06,090
So instead of trying to force an extension,

273
00:14:06,090 --> 00:14:08,980
I'm going to have to dynamically determine the extension.

274
00:14:08,980 --> 00:14:15,850
But then I can on the fly determined the name because I'm collecting the full number from

275
00:14:15,850 --> 00:14:17,800
this variable.

276
00:14:17,800 --> 00:14:25,520
So what I'm going to do is create another variable under orig file and I want to call this

277
00:14:25,520 --> 00:14:27,680
one txt short for extension.

278
00:14:27,680 --> 00:14:33,810
And then I'm going to use a peace be function path in fourth into which I'm going to pass

279
00:14:33,810 --> 00:14:34,620
the files.

280
00:14:34,620 --> 00:14:35,620
Super variable,

281
00:14:35,620 --> 00:14:37,210
sometimes stopping this.

282
00:14:37,210 --> 00:14:39,860
But I'm passing in the name,

283
00:14:39,860 --> 00:14:41,120
not the TMP name.

284
00:14:41,120 --> 00:14:43,290
Because the TMP name is only known to PHP,

285
00:14:43,290 --> 00:14:49,750
it only makes sense the PHP So I want the name which is going to be student dot PNG on.

286
00:14:49,750 --> 00:14:58,720
Then I am going to use path in four extension as the next parameters,

287
00:14:58,720 --> 00:15:05,890
so path inflows and to get certain information about any file that is given to it on the

288
00:15:05,890 --> 00:15:11,870
information I want is the extension on then that will be stored in my txt variable.

289
00:15:11,870 --> 00:15:12,660
Next.

290
00:15:12,660 --> 00:15:18,410
I want to modify my destination toe instead off passing in the base.

291
00:15:18,410 --> 00:15:19,850
Name off the file.

292
00:15:19,850 --> 00:15:25,850
I want to pass in whatever value is inside contact as a variable coming back through from

293
00:15:25,850 --> 00:15:27,620
my form on.

294
00:15:27,620 --> 00:15:29,230
Then I'm also going to con Katyn,

295
00:15:29,230 --> 00:15:33,270
eat whatever value comes back in my extension.

296
00:15:33,270 --> 00:15:37,310
Variable after finding off the path info off whatever fire was uploaded.

297
00:15:37,310 --> 00:15:43,880
So then the destination will have uploads slash whatever for number the person entered dot

298
00:15:43,880 --> 00:15:46,910
Whatever extension that file hat on,

299
00:15:46,910 --> 00:15:52,940
then the move uploaded Will store that file with that new name inside or uploads folder,

300
00:15:52,940 --> 00:15:58,550
someone to run a test again with the same file and see the result.

301
00:15:58,550 --> 00:15:59,540
So,

302
00:15:59,540 --> 00:15:59,800
no,

303
00:15:59,800 --> 00:16:01,950
we choose the file on.

304
00:16:01,950 --> 00:16:07,760
I'm choosing student at PNG once again on Then I submit on Remember that we have the exit,

305
00:16:07,760 --> 00:16:09,280
so nothing really happens,

306
00:16:09,280 --> 00:16:11,000
But we can go back on,

307
00:16:11,000 --> 00:16:11,670
then we see.

308
00:16:11,670 --> 00:16:12,100
Okay,

309
00:16:12,100 --> 00:16:14,590
so I messed up the quarter bit,

310
00:16:14,590 --> 00:16:17,730
but at least we're seeing the phone number on the file extension.

311
00:16:17,730 --> 00:16:20,010
But what we're not seeing is the dots,

312
00:16:20,010 --> 00:16:24,650
because windows needs that dot in order to determine the file name.

313
00:16:24,650 --> 00:16:31,220
So I'm just going toe modify the way I wrote this altogether on.

314
00:16:31,220 --> 00:16:35,450
I'm just going to put in braces on day,

315
00:16:35,450 --> 00:16:40,120
create one be contiguous string with interpolations.

316
00:16:40,120 --> 00:16:40,770
So no,

317
00:16:40,770 --> 00:16:44,250
my destination looks like the variable target directory,

318
00:16:44,250 --> 00:16:50,770
which is upload slash than the value coming back from the contact docked.

319
00:16:50,770 --> 00:16:55,430
Whatever value comes back from extension someone to see that change.

320
00:16:55,430 --> 00:17:00,790
And I'm just going to re first re submits and re tries that operation and then when I go

321
00:17:00,790 --> 00:17:01,120
back,

322
00:17:01,120 --> 00:17:04,190
I am no seeing the full number docked.

323
00:17:04,190 --> 00:17:05,080
PNG.

324
00:17:05,080 --> 00:17:11,400
I'm just going to remove this file from the folder.

325
00:17:11,400 --> 00:17:12,510
All right.

326
00:17:12,510 --> 00:17:12,710
So,

327
00:17:12,710 --> 00:17:13,140
no,

328
00:17:13,140 --> 00:17:17,920
for each person who registers whatever full number they enter will be used.

329
00:17:17,920 --> 00:17:26,140
The Brini more file on that file extension will always change based on what they put so

330
00:17:26,140 --> 00:17:29,890
know that were successfully uploading fast our server?

331
00:17:29,890 --> 00:17:30,360
No.

332
00:17:30,360 --> 00:17:36,690
We need to modify the rest of the court so that the data bees knows about the uploaded fast

333
00:17:36,690 --> 00:17:36,690
.

334
00:17:36,690 --> 00:17:40,140
So the first thing I want to do is modify my database using Petri.

335
00:17:40,140 --> 00:17:42,010
My admitted to add the new column.

336
00:17:42,010 --> 00:17:45,240
So I'm going to my database into my attendee table.

337
00:17:45,240 --> 00:17:47,510
And then I went to modify the structure by saying,

338
00:17:47,510 --> 00:17:51,560
I want to add one column after specialty on the score i d.

339
00:17:51,560 --> 00:17:54,330
So I'm setting off this column toe.

340
00:17:54,330 --> 00:18:00,840
Have the name of a tire path be off Time of arch are 200 on dime sitting it to be no level

341
00:18:00,840 --> 00:18:05,980
because once again the picture is optional and then we click Save on,

342
00:18:05,980 --> 00:18:08,230
then that new column is no added.

343
00:18:08,230 --> 00:18:08,630
No.

344
00:18:08,630 --> 00:18:14,740
I need to modify my court to make sure that I'm passing in the file path off for uploaded

345
00:18:14,740 --> 00:18:16,310
file to the database,

346
00:18:16,310 --> 00:18:20,020
which would be in the column avatar path.

347
00:18:20,020 --> 00:18:23,730
So we know the destination because we build the destination.

348
00:18:23,730 --> 00:18:27,760
So we need to make sure that we're passing destination in tow.

349
00:18:27,760 --> 00:18:31,510
Our insert attendees function on by extension.

350
00:18:31,510 --> 00:18:33,010
We need to modify the function.

351
00:18:33,010 --> 00:18:36,600
So I'm going to pass state destination,

352
00:18:36,600 --> 00:18:41,000
and I'm going to add it as a parameter to the insert attend the function,

353
00:18:41,000 --> 00:18:47,480
and then I'm going to go over toe my crowd file where no insert attendees is on.

354
00:18:47,480 --> 00:18:51,320
I'm going to make sure that I have representation off that new parameter.

355
00:18:51,320 --> 00:18:52,730
So it's expecting a new apartment.

356
00:18:52,730 --> 00:18:54,000
They're called destination,

357
00:18:54,000 --> 00:18:56,470
or I can call it Avatar Pa.

358
00:18:56,470 --> 00:19:00,390
So remember that we don't need to call them the same thing as long as they're in the right

359
00:19:00,390 --> 00:19:01,050
position.

360
00:19:01,050 --> 00:19:07,440
So about our path will no be represented in my quarry when I come down here and I say comma

361
00:19:07,440 --> 00:19:09,180
of attire path on,

362
00:19:09,180 --> 00:19:12,690
then if I'm putting that there than I need to have my parameter,

363
00:19:12,690 --> 00:19:13,740
which is being bone.

364
00:19:13,740 --> 00:19:16,320
So that's colon of a tarp path on.

365
00:19:16,320 --> 00:19:19,710
Then I just make another line here on,

366
00:19:19,710 --> 00:19:26,010
but make sure represent avatar path as both a parameter in the quarry onda parameter.

367
00:19:26,010 --> 00:19:26,900
In the function,

368
00:19:26,900 --> 00:19:31,040
I'm going to execute the test where I fill out the form,

369
00:19:31,040 --> 00:19:35,820
select the same student that PNG file on attempt to submit.

370
00:19:35,820 --> 00:19:37,080
When I do all of that,

371
00:19:37,080 --> 00:19:41,930
I get my success message on my take note of the contact number.

372
00:19:41,930 --> 00:19:42,480
Of course,

373
00:19:42,480 --> 00:19:43,250
I didn't change it,

374
00:19:43,250 --> 00:19:48,180
so that just goes socially that it will not try to duplicate the finally will always

375
00:19:48,180 --> 00:19:51,190
replace once it sees ah file with the same name.

376
00:19:51,190 --> 00:19:56,780
So make sure that whatever nimir giving the file for each user is very unique.

377
00:19:56,780 --> 00:19:57,720
However,

378
00:19:57,720 --> 00:20:02,050
if I go to my database and I look at my attendee table and my data,

379
00:20:02,050 --> 00:20:04,520
I see that the new column.

380
00:20:04,520 --> 00:20:05,880
No has values.

381
00:20:05,880 --> 00:20:15,590
On the path is uploads slash whatever the file name WAAS or has been changed toe now final

382
00:20:15,590 --> 00:20:16,730
step Just to complete.

383
00:20:16,730 --> 00:20:22,880
All of this would be to display this profile picture whenever the person submits

384
00:20:22,880 --> 00:20:23,890
successfully,

385
00:20:23,890 --> 00:20:28,210
as well as whenever one off the admin users views the profile for the user.

386
00:20:28,210 --> 00:20:33,960
So that means we need to modify over success that PHP page as well as,

387
00:20:33,960 --> 00:20:34,360
oh,

388
00:20:34,360 --> 00:20:42,420
we're view dot PHP page to make sure that we're seeing the image as it is being referenced

389
00:20:42,420 --> 00:20:44,350
on the persons database record.

390
00:20:44,350 --> 00:20:51,140
So what I'm going to do in my success that PHP paid is go down to the section where the

391
00:20:51,140 --> 00:20:53,310
information is being printed on.

392
00:20:53,310 --> 00:20:53,890
I'm just number.

393
00:20:53,890 --> 00:20:55,090
Listen to keep it simple,

394
00:20:55,090 --> 00:20:59,590
I'm not really going to focus on getting it to aesthetically pleasing.

395
00:20:59,590 --> 00:21:01,640
I'll leave you to experiment and do that.

396
00:21:01,640 --> 00:21:04,160
I just want to show you how to display the image.

397
00:21:04,160 --> 00:21:06,560
So since we're on the success that Ph.

398
00:21:06,560 --> 00:21:11,790
B page we know the destination is going to be somewhere in our project on,

399
00:21:11,790 --> 00:21:19,820
we just need to set up on image tohave an image tac toe have the value as whatever path is

400
00:21:19,820 --> 00:21:22,280
being stored inside of this destination variable.

401
00:21:22,280 --> 00:21:27,440
So I'm just going to go down to the sexual where I want to display the image on going to

402
00:21:27,440 --> 00:21:32,880
see I m g SRC is equal to on.

403
00:21:32,880 --> 00:21:35,290
Let me just leave that blank for no on.

404
00:21:35,290 --> 00:21:35,550
Then.

405
00:21:35,550 --> 00:21:39,850
Remember that whenever we want to put ph be content inside often.

406
00:21:39,850 --> 00:21:40,880
Html tag.

407
00:21:40,880 --> 00:21:47,100
We need to have our PHP tag on eco whatever variable it is that we want.

408
00:21:47,100 --> 00:21:54,930
So I'm just going to see inside off these quotation marks a PHP tag and I disclose it at

409
00:21:54,930 --> 00:21:56,350
the same time on.

410
00:21:56,350 --> 00:22:00,600
Then I'm echoing my variable destination.

411
00:22:00,600 --> 00:22:01,560
Remember,

412
00:22:01,560 --> 00:22:03,820
destination is the path.

413
00:22:03,820 --> 00:22:09,150
So this will say something like uploads slash file name Dr Extension on.

414
00:22:09,150 --> 00:22:11,350
When this echoes that value,

415
00:22:11,350 --> 00:22:14,710
it will be the image source value.

416
00:22:14,710 --> 00:22:19,180
So if I do that and I refresh after submitting,

417
00:22:19,180 --> 00:22:21,880
then I see where my file is.

418
00:22:21,880 --> 00:22:26,110
This is the student found that I upload it once again.

419
00:22:26,110 --> 00:22:28,300
I'm not too concerned right now about the placement.

420
00:22:28,300 --> 00:22:31,540
You can go ahead and fix it how you need it.

421
00:22:31,540 --> 00:22:36,770
But I'm going to just show you that whatever you do in the AMG tag affects that image.

422
00:22:36,770 --> 00:22:38,900
So if I think it's too big,

423
00:22:38,900 --> 00:22:40,490
I wanted to be,

424
00:22:40,490 --> 00:22:48,720
maybe have a width off 200 by on the height off 200 I can say 200 on.

425
00:22:48,720 --> 00:22:49,220
Well,

426
00:22:49,220 --> 00:22:51,470
CSS is the best way to accomplish that,

427
00:22:51,470 --> 00:23:03,380
so I would actually just a style style is equal to on then set the which so be maybe 50%

428
00:23:03,380 --> 00:23:04,000
instead,

429
00:23:04,000 --> 00:23:08,540
Andi height to be 50%.

430
00:23:08,540 --> 00:23:15,920
So when I do with that and I refresh you see that the CSS would okay,

431
00:23:15,920 --> 00:23:17,450
that's not much of our resize.

432
00:23:17,450 --> 00:23:18,880
But you see my point.

433
00:23:18,880 --> 00:23:20,770
Whatever you do on the ancient sites,

434
00:23:20,770 --> 00:23:28,010
only sit this 20 on 20 and then you see a bigger resize happen on.

435
00:23:28,010 --> 00:23:33,550
Then I have some bootstrap classes that can help me to make it look a bit cleaner.

436
00:23:33,550 --> 00:23:42,260
So there is a bull shop class that sees rounded so that one gives it a little Rhone border

437
00:23:42,260 --> 00:23:42,820
on.

438
00:23:42,820 --> 00:23:43,520
If I do that,

439
00:23:43,520 --> 00:23:44,500
then refers,

440
00:23:44,500 --> 00:23:45,400
well,

441
00:23:45,400 --> 00:23:48,010
the effects off road that aren't very visible,

442
00:23:48,010 --> 00:23:53,070
someone to try another one and see rounded dash circles around.

443
00:23:53,070 --> 00:23:55,440
It kind of takes the sharp edges off the corners,

444
00:23:55,440 --> 00:23:56,110
but rounded.

445
00:23:56,110 --> 00:24:01,020
That circle actually creates a circle circular representation off the image.

446
00:24:01,020 --> 00:24:05,230
And there you go so you can actually go ahead and use bootstrap and whatever other tools on

447
00:24:05,230 --> 00:24:08,350
make your image look nice representation.

448
00:24:08,350 --> 00:24:08,860
Now,

449
00:24:08,860 --> 00:24:09,930
this was a success,

450
00:24:09,930 --> 00:24:16,260
but I need to repeat that feat on the view dot PHP p it's understand to call back on,

451
00:24:16,260 --> 00:24:20,630
but actually just them to copy this scored because it will be doing something similar on on

452
00:24:20,630 --> 00:24:21,720
the View page.

453
00:24:21,720 --> 00:24:25,220
I'm going to Rio put my I'm g tug in my court.

454
00:24:25,220 --> 00:24:31,600
But then you notice that on the view page we were referencing things by seeing results on

455
00:24:31,600 --> 00:24:32,340
the subscript.

456
00:24:32,340 --> 00:24:35,160
So that means I can't call destination on this side.

457
00:24:35,160 --> 00:24:35,990
Instead,

458
00:24:35,990 --> 00:24:41,590
I'm going to just reuse this bit off cord on.

459
00:24:41,590 --> 00:24:44,710
Instead of echoing first name as image SRC,

460
00:24:44,710 --> 00:24:49,230
I'm going to echo avatar underscore half,

461
00:24:49,230 --> 00:24:51,490
because when we did our select query,

462
00:24:51,490 --> 00:24:55,200
we selected star and star brings back all the columns.

463
00:24:55,200 --> 00:24:58,770
So one of the columns that we get back is avatar path,

464
00:24:58,770 --> 00:25:03,250
which is storing the path toe or image inside the beta bees.

465
00:25:03,250 --> 00:25:03,900
So that's it.

466
00:25:03,900 --> 00:25:09,900
So we can dynamically lord the image for the person who is logged in so I'm just going to

467
00:25:09,900 --> 00:25:12,370
put this statist someone to go on on,

468
00:25:12,370 --> 00:25:13,050
log in.

469
00:25:13,050 --> 00:25:14,900
I know that I'm in.

470
00:25:14,900 --> 00:25:17,430
I'm going to go ahead and view one of thes.

471
00:25:17,430 --> 00:25:21,260
So if I view one from before,

472
00:25:21,260 --> 00:25:24,150
then you see the images broken.

473
00:25:24,150 --> 00:25:27,270
So we don't want that off course because this is broken.

474
00:25:27,270 --> 00:25:28,420
Um,

475
00:25:28,420 --> 00:25:28,620
well,

476
00:25:28,620 --> 00:25:33,160
this is broken because this record existed before we started putting in images on There's

477
00:25:33,160 --> 00:25:34,270
no image to display.

478
00:25:34,270 --> 00:25:36,430
So we don't want that someone to go back.

479
00:25:36,430 --> 00:25:39,570
And I want to find one that we just entered on.

480
00:25:39,570 --> 00:25:40,240
There we go.

481
00:25:40,240 --> 00:25:45,160
So the image is being loaded not because it's being stored in a database,

482
00:25:45,160 --> 00:25:46,970
but the path to it is in the data.

483
00:25:46,970 --> 00:25:51,870
Bees attached to the person's record on the file is present on our system.

484
00:25:51,870 --> 00:25:55,110
So we know where to reference for what you know.

485
00:25:55,110 --> 00:26:00,790
The last thing that I want to do is make sure that if nothing comes back for that person,

486
00:26:00,790 --> 00:26:06,520
meaning they didn't upload an image or the register before the feature was available that

487
00:26:06,520 --> 00:26:11,570
we displace something off a default avatar for them regardless.

488
00:26:11,570 --> 00:26:17,090
So I'm going to adjust the court that is printing our of attire.

489
00:26:17,090 --> 00:26:23,530
And I'm going to just put in so called Turner operator inside this string so that we can

490
00:26:23,530 --> 00:26:27,750
determine if whatever is being returned from the data bases empty.

491
00:26:27,750 --> 00:26:28,310
If it is,

492
00:26:28,310 --> 00:26:29,740
then we want to print something.

493
00:26:29,740 --> 00:26:30,460
If it is not,

494
00:26:30,460 --> 00:26:31,290
then it's fine.

495
00:26:31,290 --> 00:26:35,350
So there is a function in PHP that's is empty,

496
00:26:35,350 --> 00:26:38,490
which takes ah parameter,

497
00:26:38,490 --> 00:26:41,460
which is probably going to be a stringy can.

498
00:26:41,460 --> 00:26:47,470
Binary can be anything but empty is basically I just seeing Is there any content inside off

499
00:26:47,470 --> 00:26:49,210
this variable on?

500
00:26:49,210 --> 00:26:52,680
Then it returns a bulletin which is a true or false.

501
00:26:52,680 --> 00:26:57,700
So the Turner operator that we're going to put instead off a whole if else just to know

502
00:26:57,700 --> 00:27:02,550
what to echo is we're going to see question Mark,

503
00:27:02,550 --> 00:27:05,030
and then we see if it is empty.

504
00:27:05,030 --> 00:27:07,130
So this is going to return Shore Falls.

505
00:27:07,130 --> 00:27:07,880
What comes after?

506
00:27:07,880 --> 00:27:10,440
The question mark is what will be done if it is true.

507
00:27:10,440 --> 00:27:18,060
So if it is true that it is empty than what we want to do is put in the value up lords

508
00:27:18,060 --> 00:27:19,180
slash on day,

509
00:27:19,180 --> 00:27:21,990
I went and found some generic,

510
00:27:21,990 --> 00:27:22,950
um,

511
00:27:22,950 --> 00:27:23,660
image.

512
00:27:23,660 --> 00:27:24,810
I'm calling a blank,

513
00:27:24,810 --> 00:27:33,790
that being PNG So I want to reference that blank file if that If the string is indeed empty

514
00:27:33,790 --> 00:27:33,790
,

515
00:27:33,790 --> 00:27:41,400
so blank dot p and g So this will act as my default um of attire for anybody without an

516
00:27:41,400 --> 00:27:43,620
image reference in the database.

517
00:27:43,620 --> 00:27:45,300
So if it is empty,

518
00:27:45,300 --> 00:27:50,550
then I want to echo this value on then we have a colon.

519
00:27:50,550 --> 00:27:51,260
That is,

520
00:27:51,260 --> 00:27:53,320
if this does not evaluate to true,

521
00:27:53,320 --> 00:27:54,180
What do I want?

522
00:27:54,180 --> 00:27:59,530
And what I want is to echo the actual path to the image.

523
00:27:59,530 --> 00:28:05,330
So right here in our image SRC we're doing a quick if else are making a quick decision to

524
00:28:05,330 --> 00:28:13,980
see echo this value based on the turn Eri operators old So the Turner operators seeing I

525
00:28:13,980 --> 00:28:17,510
want something that is going to return to our falls in this case,

526
00:28:17,510 --> 00:28:19,690
is the string empty or not?

527
00:28:19,690 --> 00:28:20,670
If it is,

528
00:28:20,670 --> 00:28:27,400
then I want to echo this or return this value so that we can be echoed if it is not,

529
00:28:27,400 --> 00:28:33,330
then echo the actual avatar particles from the database.

530
00:28:33,330 --> 00:28:37,880
So if I go back to my listing and this is one with it,

531
00:28:37,880 --> 00:28:43,960
so I can refresh and I see that it's still keeps that image if I go back to the list and go

532
00:28:43,960 --> 00:28:47,330
back to one of the first registrants who didn't get to upload an image.

533
00:28:47,330 --> 00:28:49,590
Then we see that they get that default.

534
00:28:49,590 --> 00:28:53,880
If I go to any other one that didn't upload an image on this person,

535
00:28:53,880 --> 00:28:55,450
will this person is giving me.

536
00:28:55,450 --> 00:28:56,680
Okay,

537
00:28:56,680 --> 00:29:00,230
so I'm getting that default Archibald default.

538
00:29:00,230 --> 00:29:00,850
Right?

539
00:29:00,850 --> 00:29:07,160
But then this attendee with I d four is not giving me that someone to look into this.

540
00:29:07,160 --> 00:29:07,980
All right?

541
00:29:07,980 --> 00:29:09,380
So by looking in the database,

542
00:29:09,380 --> 00:29:11,040
I can see what is happening.

543
00:29:11,040 --> 00:29:13,930
So the attend you with the i d.

544
00:29:13,930 --> 00:29:17,860
For those have content in the avatar path over.

545
00:29:17,860 --> 00:29:23,570
The problem is that the file name is basically dot g pg,

546
00:29:23,570 --> 00:29:26,040
whereas their own is that PNG?

547
00:29:26,040 --> 00:29:26,330
So,

548
00:29:26,330 --> 00:29:27,040
in testing,

549
00:29:27,040 --> 00:29:30,380
I change the extension and change of fast around on dso.

550
00:29:30,380 --> 00:29:35,170
The first fewer distress that we tested it with would have a dot PNG,

551
00:29:35,170 --> 00:29:37,620
but the rest have the correct that JP.

552
00:29:37,620 --> 00:29:42,510
So that is why you are seeing that broken image.

553
00:29:42,510 --> 00:29:43,550
So it does work.

554
00:29:43,550 --> 00:29:44,490
Um,

555
00:29:44,490 --> 00:29:51,380
but then it's still a concern because then it's seeing that it can't find the file so well

556
00:29:51,380 --> 00:29:51,380
,

557
00:29:51,380 --> 00:29:53,580
we can We can determine if the file exists.

558
00:29:53,580 --> 00:29:55,680
You can probably do some research,

559
00:29:55,680 --> 00:29:56,870
but I'm not going to get into that.

560
00:29:56,870 --> 00:29:58,800
I just want us to get over the hump off,

561
00:29:58,800 --> 00:30:01,840
uploading a file on having it displayed.

562
00:30:01,840 --> 00:30:06,050
So I'm going to just run through this with an entirely different person,

563
00:30:06,050 --> 00:30:11,660
this time on a different full number so that the file is different.

564
00:30:11,660 --> 00:30:16,110
So this is a different full number on I went to choose the file on.

565
00:30:16,110 --> 00:30:18,390
I'm going to go on the Internet and find a different file.

566
00:30:18,390 --> 00:30:19,490
So far.

567
00:30:19,490 --> 00:30:22,130
I phoned a file off with a fox,

568
00:30:22,130 --> 00:30:23,310
an image of a fox.

569
00:30:23,310 --> 00:30:27,210
So that's the other tire that this registrant wants on.

570
00:30:27,210 --> 00:30:28,490
Then when I click submit,

571
00:30:28,490 --> 00:30:29,850
we're seeing the Fox.

572
00:30:29,850 --> 00:30:34,470
And if I go and view attendees and I view that persons profile,

573
00:30:34,470 --> 00:30:37,270
then I'm going to see the Fox as their avatar.

574
00:30:37,270 --> 00:30:39,030
If I look in the data base by,

575
00:30:39,030 --> 00:30:40,580
just refresh the database,

576
00:30:40,580 --> 00:30:47,450
then Archibald Douglas was inserted with a different file with a different file name

