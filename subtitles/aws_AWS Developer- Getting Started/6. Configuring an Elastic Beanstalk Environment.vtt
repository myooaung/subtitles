WEBVTT
1
00:00:00.940 --> 00:00:03.420
[Autogenerated] in the last module I mentioned that if you were

2
00:00:03.420 --> 00:00:06.600
going to try to deploy your application to Ec two,

3
00:00:06.600 --> 00:00:10.580
you needed to update the I am role to give it the necessary

4
00:00:10.580 --> 00:00:13.640
permissions to access RDS and dynamo DB.

5
00:00:13.640 --> 00:00:17.250
Well now that we are deploying our application to a W.

6
00:00:17.250 --> 00:00:17.620
S.

7
00:00:17.620 --> 00:00:21.740
We need to do this, navigate to the I am dashboard,

8
00:00:21.740 --> 00:00:22.790
select the roles,

9
00:00:22.790 --> 00:00:26.730
menu option on the left and click the Pizza Ec two roll

10
00:00:26.730 --> 00:00:29.840
list entry in the permissions tab.

11
00:00:29.840 --> 00:00:33.570
We need to add policies to give any instances using this

12
00:00:33.570 --> 00:00:35.930
role access to the database services,

13
00:00:35.930 --> 00:00:39.750
click the attached policy button in the policy filter,

14
00:00:39.750 --> 00:00:47.040
type R D S from the results, select amazon Rds full access,

15
00:00:47.040 --> 00:00:51.810
now clear the filter and type dynamo DB in the results

16
00:00:51.810 --> 00:00:56.340
section select amazon dynamodb full access.

17
00:00:56.340 --> 00:00:56.900
Now,

18
00:00:56.900 --> 00:00:59.940
since the Ec two instance is running on elastic

19
00:00:59.940 --> 00:01:02.940
beanstalk we need to add one more policy.

20
00:01:02.940 --> 00:01:08.940
Search for Aws elastic beanstalk web tier and select it.

21
00:01:08.940 --> 00:01:12.620
This will add some permissions for the instance to do things

22
00:01:12.620 --> 00:01:16.740
like pushing logs to S three and logs to cloudwatch Now

23
00:01:16.740 --> 00:01:19.200
click the attached policy button.

24
00:01:19.200 --> 00:01:21.940
Our role should now have four policies.

25
00:01:21.940 --> 00:01:24.500
One for S3 one for RDS,

26
00:01:24.500 --> 00:01:29.640
one for dynamo DB and one for that elastic beanstalk stuff.

27
00:01:29.640 --> 00:01:34.450
We also need to ensure our existing Rds instance is configured

28
00:01:34.450 --> 00:01:37.740
to allow access from our ec two instances.

29
00:01:37.740 --> 00:01:42.910
So navigate to the RDS dashboard then click databases in the

30
00:01:42.910 --> 00:01:47.740
menu and select our Pizza DB instance.

31
00:01:47.740 --> 00:01:49.700
We need to update the security group.

32
00:01:49.700 --> 00:01:56.470
So click this link under Vpc Security groups then in the inbound tab,

33
00:01:56.470 --> 00:01:59.860
go ahead and click on edit if you don't plan on

34
00:01:59.860 --> 00:02:02.800
accessing this database externally anymore,

35
00:02:02.800 --> 00:02:07.250
you can just go ahead and remove the rule giving access to your own ip.

36
00:02:07.250 --> 00:02:09.670
Now click add rule in the type.

37
00:02:09.670 --> 00:02:14.770
Drop down select postgres SQL then in the source input field,

38
00:02:14.770 --> 00:02:21.440
type pizza And select the security group with the label Pizza EC two SG.

39
00:02:21.440 --> 00:02:25.090
Then click save now your instances and elastic

40
00:02:25.090 --> 00:02:28.560
beanstalk have access to the RDS database.

41
00:02:28.560 --> 00:02:32.360
These changes to I am Rolls and security group access will

42
00:02:32.360 --> 00:02:36.440
probably require us to restart the ec two instance.

43
00:02:36.440 --> 00:02:40.490
You can do this easily in the elastic beanstalk environment panel,

44
00:02:40.490 --> 00:02:46.340
go back to the elastic beanstalk dashboard and select Pizza Lovers E N V.

45
00:02:46.340 --> 00:02:49.440
If you don't see a view similar to this one then your

46
00:02:49.440 --> 00:02:51.670
environment is probably still setting up.

47
00:02:51.670 --> 00:02:54.350
So just wait a few more minutes now,

48
00:02:54.350 --> 00:03:00.420
click the actions button in the top right and select restart app servers in

49
00:03:00.420 --> 00:03:04.440
the confirmation modal click restart application servers,

50
00:03:04.440 --> 00:03:08.230
the health icon will change to a loading icon and

51
00:03:08.230 --> 00:03:10.640
your app servers will be restarted.

52
00:03:10.640 --> 00:03:15.280
This could take a couple of minutes but once the green okay icon is

53
00:03:15.280 --> 00:03:17.950
showing it means that your application is ready,

54
00:03:17.950 --> 00:03:22.060
you can use this URL to navigate to your Pizza Lovers

55
00:03:22.060 --> 00:03:25.340
application running an elastic beanstalk,

56
00:03:25.340 --> 00:03:26.970
go through all the actions,

57
00:03:26.970 --> 00:03:38.000
logging in and creating a pizza to confirm that the connections to dynamodb. Rds and S3 are all working in elastic beanstalk.

