1
00:00:00,540 --> 00:00:01,100
[Autogenerated] Okay,

2
00:00:01,100 --> 00:00:05,230
so we just got done viewing how we can update our CloudFormation

3
00:00:05,230 --> 00:00:10,740
stacks with both direct updates and change sets.

4
00:00:10,740 --> 00:00:14,640
Now, this time we wanna look at configuration Drifts.

5
00:00:14,640 --> 00:00:19,830
So to do this I want to find drifts and you can see we have not checked.

6
00:00:19,830 --> 00:00:21,650
So that's our current status.

7
00:00:21,650 --> 00:00:27,440
So if I go ahead, detect stack drift, this will run in the background.

8
00:00:27,440 --> 00:00:29,050
And while this is running,

9
00:00:29,050 --> 00:00:33,850
I'll show you what I did now in the instantiation group.

10
00:00:33,850 --> 00:00:38,380
The original one here I actually added an additional rule to

11
00:00:38,380 --> 00:00:44,440
allow ICMP traffic from anywhere on the net.

12
00:00:44,440 --> 00:00:47,160
And now, after I refreshed this page here,

13
00:00:47,160 --> 00:00:48,640
you can see Hey,

14
00:00:48,640 --> 00:00:53,180
our stack has drifted and it shows the resource drift

15
00:00:53,180 --> 00:00:56,480
statuses that are available we can see,

16
00:00:56,480 --> 00:01:00,630
three of our four current resource is are in sync.

17
00:01:00,630 --> 00:01:06,040
But hey are instantiation group which is the one we looked at here,

18
00:01:06,040 --> 00:01:09,390
has been modified and is not current.

19
00:01:09,390 --> 00:01:15,610
So if I select this and I've you drift details you can see Hey,

20
00:01:15,610 --> 00:01:20,940
we added a rule to our security group for ingress traffic.

21
00:01:20,940 --> 00:01:25,560
It shows us what kind of change it was the expected as well as the

22
00:01:25,560 --> 00:01:29,780
current value and what's neat is down here at the bottom.

23
00:01:29,780 --> 00:01:33,340
It shows the expected template format,

24
00:01:33,340 --> 00:01:37,380
and then it shows the actual template format so you

25
00:01:37,380 --> 00:01:39,150
can see the differences here.

26
00:01:39,150 --> 00:01:41,250
This is where we added that new rule.

27
00:01:41,250 --> 00:01:44,900
So we've went ahead and detected our drift status.

28
00:01:44,900 --> 00:01:48,650
But how do we actually go about and remediated?

29
00:01:48,650 --> 00:01:51,540
Well, unfortunately, as of now,

30
00:01:51,540 --> 00:01:55,560
A W s only allows us to actually detect the drift,

31
00:01:55,560 --> 00:01:57,740
not automate the fixes.

32
00:01:57,740 --> 00:02:00,800
So in this case, let's go to security groups.

33
00:02:00,800 --> 00:02:06,240
I want to get rid of these two rules here.

34
00:02:06,240 --> 00:02:06,860
I'll save.

35
00:02:06,860 --> 00:02:10,300
It will go back to our stack and let me detect our

36
00:02:10,300 --> 00:02:12,840
drift again for that resource.

37
00:02:12,840 --> 00:02:13,530
And there we go.

38
00:02:13,530 --> 00:02:15,340
It's now in sync.

39
00:02:15,340 --> 00:02:16,070
So Ah,

40
00:02:16,070 --> 00:02:20,380
good thing to do here might be to create a lambda or some

41
00:02:20,380 --> 00:02:23,320
type of automation that can do this for you.

42
00:02:23,320 --> 00:02:30,140
So that's going to do it for detecting drift within a W s CloudFormation stacks.

43
00:02:30,140 --> 00:02:39,000
We'll go ahead and end here and in the next clip will dive into stack sets as well as nested stacks

