1
00:00:00,640 --> 00:00:01,030
[Autogenerated] cool.

2
00:00:01,030 --> 00:00:01,950
Welcome back.

3
00:00:01,950 --> 00:00:04,770
Let's go ahead and dive into Route 53.

4
00:00:04,770 --> 00:00:09,060
Now I'm at the dashboard in Route 53 and you'll see we

5
00:00:09,060 --> 00:00:11,700
have several different options now.

6
00:00:11,700 --> 00:00:16,140
The 1st 1 I want to talk about is registering a domain,

7
00:00:16,140 --> 00:00:20,870
so Route 53 can actually register our new domains forests.

8
00:00:20,870 --> 00:00:26,340
So if I just make up a new domain here and I check the domain availability,

9
00:00:26,340 --> 00:00:29,940
it checks worldwide if that's able to be purchased.

10
00:00:29,940 --> 00:00:30,930
And it is.

11
00:00:30,930 --> 00:00:33,680
So if I wanted to, I could add this to the cart.

12
00:00:33,680 --> 00:00:38,640
I would go through and edit my contact information for this domain,

13
00:00:38,640 --> 00:00:40,340
and then I would say, Hey,

14
00:00:40,340 --> 00:00:44,550
I want to automatically renew or I don't want to automatically renew.

15
00:00:44,550 --> 00:00:48,200
I agreed to the terms, and I want to complete my order,

16
00:00:48,200 --> 00:00:53,040
and this sub total would just get billed to my Amazon Web service bill.

17
00:00:53,040 --> 00:00:56,820
So I'll cancel out, and this brings me to my next point.

18
00:00:56,820 --> 00:01:01,390
We have are registered domains that we have via Route 53 so you

19
00:01:01,390 --> 00:01:03,960
can see these are all my domains that I own.

20
00:01:03,960 --> 00:01:07,070
We have our expiration dates if they're set to auto

21
00:01:07,070 --> 00:01:10,040
renew as well as a transfer lock.

22
00:01:10,040 --> 00:01:15,730
So what's cool about Rue 53 is if you purchase a domain in a another D.

23
00:01:15,730 --> 00:01:18,580
N s registrar, maybe like go, Daddy,

24
00:01:18,580 --> 00:01:25,120
you can transfer your domain to route 53 from that original register.

25
00:01:25,120 --> 00:01:30,790
So what you do is you basically point your domain toe 0.2 Amazons name servers.

26
00:01:30,790 --> 00:01:34,480
So then you can host that here and edit the records.

27
00:01:34,480 --> 00:01:35,780
Now with that, let's go ahead.

28
00:01:35,780 --> 00:01:37,870
I want to jump in tow, hosted zones.

29
00:01:37,870 --> 00:01:44,200
So ah, hosted zone is the logical grouping of our records for a specific domain.

30
00:01:44,200 --> 00:01:47,150
Now there's public zones which are for Internet traffic,

31
00:01:47,150 --> 00:01:53,540
their public and there's private zones in a private zone is for vpc use on Lee.

32
00:01:53,540 --> 00:01:57,120
So this will be used for an internal application that you don't want to

33
00:01:57,120 --> 00:02:01,050
host publicly or have someone result from the outside.

34
00:02:01,050 --> 00:02:04,130
So let me go to my Andrew estes dot me and you'll see we

35
00:02:04,130 --> 00:02:06,370
have our name servers and then I have ah,

36
00:02:06,370 --> 00:02:09,040
authoritative server value as well.

37
00:02:09,040 --> 00:02:12,390
So for this demo, I want to create a new record set.

38
00:02:12,390 --> 00:02:16,580
But for this one, you probably know how to create a record already.

39
00:02:16,580 --> 00:02:20,470
I want to discuss the routing policies in the fail overs.

40
00:02:20,470 --> 00:02:26,080
So I'll create in a record I'll do W W w I'll make it an alias and I

41
00:02:26,080 --> 00:02:29,780
want my primary to be our load balancer that we had.

42
00:02:29,780 --> 00:02:33,090
So this is pointing at that static site on R L B.

43
00:02:33,090 --> 00:02:35,310
And you see we have routing policy.

44
00:02:35,310 --> 00:02:38,830
Now the default is simple and simple is good.

45
00:02:38,830 --> 00:02:43,310
But the problem in this aspect is if I create this record,

46
00:02:43,310 --> 00:02:47,120
I can't go back and create a secondary record with same thing.

47
00:02:47,120 --> 00:02:52,430
So I go here and I just 0.2 s three just for a demo sake will get an error.

48
00:02:52,430 --> 00:02:53,840
And there you go.

49
00:02:53,840 --> 00:02:55,140
So I'll click on close.

50
00:02:55,140 --> 00:02:56,900
Let me go ahead and go here.

51
00:02:56,900 --> 00:02:59,810
I want to edit this and what I want to do is I want to

52
00:02:59,810 --> 00:03:02,780
select out of this list I want to select.

53
00:03:02,780 --> 00:03:04,480
Fail over now Wait.

54
00:03:04,480 --> 00:03:05,560
It is going to wait.

55
00:03:05,560 --> 00:03:11,120
Requests and load balance them in a way Leighton see is based on the

56
00:03:11,120 --> 00:03:14,290
best Leighton see available to the client request.

57
00:03:14,290 --> 00:03:18,360
So whichever path provides the lowest Leighton see, that's what they get.

58
00:03:18,360 --> 00:03:22,680
And then Geo location is based on what it sounds like geo location.

59
00:03:22,680 --> 00:03:24,540
So where are they located?

60
00:03:24,540 --> 00:03:28,640
So whichever path is closest to the client that gets selected.

61
00:03:28,640 --> 00:03:32,410
And it's important to know in the exam that just because

62
00:03:32,410 --> 00:03:36,760
someone's Geo location is closer to a point does not mean that

63
00:03:36,760 --> 00:03:39,840
the Leighton see will necessarily be lower.

64
00:03:39,840 --> 00:03:42,740
Usually it is, but not always.

65
00:03:42,740 --> 00:03:44,800
So for this I'll choose fail over.

66
00:03:44,800 --> 00:03:48,500
And that's because I wanna have a primary and secondary record.

67
00:03:48,500 --> 00:03:50,150
So we set our record type.

68
00:03:50,150 --> 00:03:53,740
This is going to be our primary, so I'll leave primary in here.

69
00:03:53,740 --> 00:03:58,740
We give it an I D, which is just a human name for us to quickly identify it.

70
00:03:58,740 --> 00:04:01,100
And then we evaluate target health.

71
00:04:01,100 --> 00:04:04,160
So I want to say yes because I want to make sure that our

72
00:04:04,160 --> 00:04:07,030
health on the back end is good to go.

73
00:04:07,030 --> 00:04:11,380
And if we had a health check, I can associate it with it right here.

74
00:04:11,380 --> 00:04:13,780
We don't have any, so I can't select one.

75
00:04:13,780 --> 00:04:16,040
But I want to go ahead and let's save this.

76
00:04:16,040 --> 00:04:16,680
And there we go.

77
00:04:16,680 --> 00:04:19,820
So we added that to our load balancer here and then what I

78
00:04:19,820 --> 00:04:24,750
want to do is go back in W W W It's an alias,

79
00:04:24,750 --> 00:04:28,960
and I want to point to our cloudfront distribution as a backup.

80
00:04:28,960 --> 00:04:30,870
So I'll go to fail over.

81
00:04:30,870 --> 00:04:32,840
This is our secondary.

82
00:04:32,840 --> 00:04:36,400
We're not going to evaluate health target because we can't

83
00:04:36,400 --> 00:04:39,090
do it being an alias of a CLOUDFRONT.

84
00:04:39,090 --> 00:04:42,700
So this is why you wouldn't want to make it your primary record on a

85
00:04:42,700 --> 00:04:46,440
health check because you cannot evaluate the health.

86
00:04:46,440 --> 00:04:48,710
So when I click on create here,

87
00:04:48,710 --> 00:04:53,730
you can see we have to a records for the W W W sub domain,

88
00:04:53,730 --> 00:04:56,880
and they're pointing at our alias records.

89
00:04:56,880 --> 00:05:00,340
Now, whenever I go to this domain,

90
00:05:00,340 --> 00:05:03,390
you'll see that it pulls it from the E C two and load balancer,

91
00:05:03,390 --> 00:05:04,940
so that's perfect.

92
00:05:04,940 --> 00:05:06,950
But let's make sure that this actually works.

93
00:05:06,950 --> 00:05:09,320
So if I go through here and you remember,

94
00:05:09,320 --> 00:05:12,640
we set our load balancer as our primary target,

95
00:05:12,640 --> 00:05:16,290
What I want to do is I want to go and I want to kill that instance.

96
00:05:16,290 --> 00:05:18,620
Let me go ahead and go too easy, too.

97
00:05:18,620 --> 00:05:20,740
I'm gonna find my running instance for our Web

98
00:05:20,740 --> 00:05:22,910
server and I want to shut this off.

99
00:05:22,910 --> 00:05:26,230
Let me go ahead and stop it.

100
00:05:26,230 --> 00:05:32,870
And what this is going to do is cause route 53 to evaluate our target health.

101
00:05:32,870 --> 00:05:35,870
It's going to see hey, this targets not resolving.

102
00:05:35,870 --> 00:05:38,650
So let's go and swap over to secondary.

103
00:05:38,650 --> 00:05:41,020
And then that should push us to our cloudfront,

104
00:05:41,020 --> 00:05:44,110
which is pulling from our S three bucket as a backup.

105
00:05:44,110 --> 00:05:48,540
Now, this is a pretty common scenario once again on the exam.

106
00:05:48,540 --> 00:05:51,790
So be sure to understand how you can implement these fail over

107
00:05:51,790 --> 00:05:56,650
technologies via Route 53 cloudfront if needed.

108
00:05:56,650 --> 00:06:00,740
So what I'll do is I'll go ahead and give this some time to start failing.

109
00:06:00,740 --> 00:06:04,890
And then once it starts showing that it's swapping over all resume and

110
00:06:04,890 --> 00:06:08,100
you can see we have a 503 So here in a little bit,

111
00:06:08,100 --> 00:06:11,040
I should start getting redirected to our cloudfront.

112
00:06:11,040 --> 00:06:14,160
Okay, so I went ahead and gave it some time.

113
00:06:14,160 --> 00:06:17,930
And now when I go to my Andrew s to stop me page with

114
00:06:17,930 --> 00:06:21,740
that w w w prefix for the sub domain,

115
00:06:21,740 --> 00:06:26,600
we get our cloudfront distribution because our load balancer is now failing.

116
00:06:26,600 --> 00:06:31,120
So rue 53 automatically failed over to our cloudfront

117
00:06:31,120 --> 00:06:35,900
distribution so our users can have seamless interaction or

118
00:06:35,900 --> 00:06:39,240
near seamless interaction for recovery.

119
00:06:39,240 --> 00:06:40,570
Now, before we wrap up,

120
00:06:40,570 --> 00:06:44,540
I want to go back in here and I want to show you some health checks.

121
00:06:44,540 --> 00:06:48,060
So when you create a health check, you give it a name.

122
00:06:48,060 --> 00:06:51,790
You can choose what you want to monitor so you can do other health checks.

123
00:06:51,790 --> 00:06:56,640
You can do a cloud watch alarm, or you can do an end point.

124
00:06:56,640 --> 00:06:59,300
You can do I ___ or domain name.

125
00:06:59,300 --> 00:07:03,170
You can specify your protocol, so let's just go ahead and give this.

126
00:07:03,170 --> 00:07:08,280
Andrew estes dot me will do Port 443 and we'll switch

127
00:07:08,280 --> 00:07:13,510
this to https will do a path of index that HTML We can

128
00:07:13,510 --> 00:07:15,610
view our advanced configuration.

129
00:07:15,610 --> 00:07:21,340
So a standard is gonna check every 30 seconds, and fast is every 10.

130
00:07:21,340 --> 00:07:25,540
Now It's important to know here, depending on what you choose,

131
00:07:25,540 --> 00:07:30,940
your back and compute can be getting hit very hard with these health checks.

132
00:07:30,940 --> 00:07:33,240
A standard one, as you can see,

133
00:07:33,240 --> 00:07:38,100
is sending an in point a health check every two or three seconds.

134
00:07:38,100 --> 00:07:42,740
But a fast selection is sending multiple per second,

135
00:07:42,740 --> 00:07:46,620
so that can add up quickly on networking bandwith,

136
00:07:46,620 --> 00:07:50,580
depending on your back in architectures we specify the

137
00:07:50,580 --> 00:07:53,440
failure threshold that we want across.

138
00:07:53,440 --> 00:07:56,110
We can look for strings if we wanted to.

139
00:07:56,110 --> 00:07:59,410
So if we had in health check in point that returns a string

140
00:07:59,410 --> 00:08:03,180
in the request body or response body, I should say,

141
00:08:03,180 --> 00:08:05,040
Then you can look for that here.

142
00:08:05,040 --> 00:08:08,570
Now I'll do know we can show our Leighton see graphs.

143
00:08:08,570 --> 00:08:12,500
So if we wanted to, we can see what requests are taking longer.

144
00:08:12,500 --> 00:08:15,900
We can enable S and I which we do want because we

145
00:08:15,900 --> 00:08:17,840
have that on our load balancer.

146
00:08:17,840 --> 00:08:19,120
You can invert it.

147
00:08:19,120 --> 00:08:20,860
So if you want to go ahead and say hey,

148
00:08:20,860 --> 00:08:25,820
when this is unhealthy it should actually be considered healthy and vice versa.

149
00:08:25,820 --> 00:08:30,630
You can disable it by default and you can customize your health check regions.

150
00:08:30,630 --> 00:08:34,170
So the recommended is most of the region's offered But you

151
00:08:34,170 --> 00:08:36,710
can customize and select what you want.

152
00:08:36,710 --> 00:08:39,230
So depending on where your user base is,

153
00:08:39,230 --> 00:08:42,640
you can select some of these and remove others.

154
00:08:42,640 --> 00:08:44,310
I'll click on next.

155
00:08:44,310 --> 00:08:49,990
We can create an alarm if we wanted to To push to a topic or create a new one.

156
00:08:49,990 --> 00:08:52,670
I'll click No click on create And there we go.

157
00:08:52,670 --> 00:08:54,590
We now have our health check.

158
00:08:54,590 --> 00:08:57,440
So this is going to start checking.

159
00:08:57,440 --> 00:09:04,520
Our end point www dot Andrew s is dot me, which is what we see right here.

160
00:09:04,520 --> 00:09:08,400
And what it's gonna do is it's gonna send http calls to

161
00:09:08,400 --> 00:09:10,400
our domain name that we specified,

162
00:09:10,400 --> 00:09:14,340
and you can see the health checks that is here.

163
00:09:14,340 --> 00:09:17,600
And as I give it more time, there's more checks.

164
00:09:17,600 --> 00:09:21,770
You can see the region, the I ___ when it was last checked,

165
00:09:21,770 --> 00:09:23,110
and then our status code.

166
00:09:23,110 --> 00:09:27,950
So it's saying, Hey, status co 200 then that means that's okay.

167
00:09:27,950 --> 00:09:29,560
So after a while,

168
00:09:29,560 --> 00:09:34,090
this should swap two healthy once we get enough thresholds cross.

169
00:09:34,090 --> 00:09:38,230
And that will be about a minute and 1/2 of waiting so we can get this.

170
00:09:38,230 --> 00:09:40,130
So I'll go ahead and wait for this to go well,

171
00:09:40,130 --> 00:09:43,300
fast forward and then we'll check it when it says healthy.

172
00:09:43,300 --> 00:09:44,500
Okay, there we go.

173
00:09:44,500 --> 00:09:45,330
So that's awesome.

174
00:09:45,330 --> 00:09:49,930
So we now have a healthy because it's been reported healthy by all of these

175
00:09:49,930 --> 00:09:54,910
instances in our threshold and specified amount of time.

176
00:09:54,910 --> 00:09:58,910
So now what we can do with this health check if we wanted to weaken,

177
00:09:58,910 --> 00:10:00,930
go into our records here.

178
00:10:00,930 --> 00:10:05,230
I can select my A L B primary record and we can

179
00:10:05,230 --> 00:10:07,800
associate this with a health check.

180
00:10:07,800 --> 00:10:08,700
So we can say, Hey,

181
00:10:08,700 --> 00:10:12,020
we wanna look for this particular health check and that's how

182
00:10:12,020 --> 00:10:15,140
we're going to evaluate our target health as well.

183
00:10:15,140 --> 00:10:20,040
So this can speed up the process, depending on your configuration.

184
00:10:20,040 --> 00:10:22,950
Now, I'm not going to select this just because that wouldn't make sense.

185
00:10:22,950 --> 00:10:26,240
I'm pointing to my static site for a L B.

186
00:10:26,240 --> 00:10:27,670
And that kind of defeats the purpose.

187
00:10:27,670 --> 00:10:30,230
We would just point to a dead end.

188
00:10:30,230 --> 00:10:31,410
So I want to click on No,

189
00:10:31,410 --> 00:10:35,750
but that's how you can create a health check and associate it with a record.

190
00:10:35,750 --> 00:10:36,570
So we'll go ahead,

191
00:10:36,570 --> 00:10:40,850
will wrap up this Route 53 overview and in the next clip will

192
00:10:40,850 --> 00:10:47,000
start looking at traffic flow and our resolve, our options that we have

