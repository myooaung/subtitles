WEBVTT
1
00:00:00.740 --> 00:00:01.210
[Autogenerated] All right,

2
00:00:01.210 --> 00:00:06.240
let's go ahead and begin diving into our auto scaling group sections.

3
00:00:06.240 --> 00:00:10.120
Now the first thing I want to show you is how we can automate

4
00:00:10.120 --> 00:00:13.670
installation of certain software on our E.

5
00:00:13.670 --> 00:00:17.990
C two instances using something called the Cloud innit?

6
00:00:17.990 --> 00:00:19.120
That lives on R E.

7
00:00:19.120 --> 00:00:19.280
C.

8
00:00:19.280 --> 00:00:20.980
Two instances.

9
00:00:20.980 --> 00:00:27.480
So if I go to launch instance here and I scroll to the bottom of config,

10
00:00:27.480 --> 00:00:29.010
instance details,

11
00:00:29.010 --> 00:00:32.700
I'll leave the top part the defaults we see here at the

12
00:00:32.700 --> 00:00:35.600
bottom that we have a user data section.

13
00:00:35.600 --> 00:00:41.340
Now this user data section is what allows us to pass in a script,

14
00:00:41.340 --> 00:00:46.230
either as text or as a file and executed on R E.

15
00:00:46.230 --> 00:00:50.440
C two instances locally as they're being created.

16
00:00:50.440 --> 00:00:53.760
So let's go ahead and demo that right now let me go in

17
00:00:53.760 --> 00:00:56.040
Copy and paste a script in here,

18
00:00:56.040 --> 00:00:59.280
and all this is doing is it's installing Apache Web

19
00:00:59.280 --> 00:01:03.440
server Maria de B and some PHP packages,

20
00:01:03.440 --> 00:01:04.720
and at the top of it,

21
00:01:04.720 --> 00:01:09.040
you'll notice that it's executing shebang slash been slash

22
00:01:09.040 --> 00:01:13.430
bash like a normal shell script does.

23
00:01:13.430 --> 00:01:17.240
So these air just execution commands that we want to run

24
00:01:17.240 --> 00:01:23.180
now let me skip their storage and tags and then all select

25
00:01:23.180 --> 00:01:27.840
an existing security group.

26
00:01:27.840 --> 00:01:30.840
I'll launch it.

27
00:01:30.840 --> 00:01:33.740
And then as this becomes available,

28
00:01:33.740 --> 00:01:42.540
I'll go ahead and sshh into it and will view this installation process.

29
00:01:42.540 --> 00:01:46.230
So what I'm going to do here is I'll pause the clip and then all

30
00:01:46.230 --> 00:01:49.780
resume when I'm able to S S h into the instance,

31
00:01:49.780 --> 00:01:51.400
and we can continue.

32
00:01:51.400 --> 00:01:53.360
All right, so I'm s s a ____ in now.

33
00:01:53.360 --> 00:01:58.100
And you can see that here and what I want to do is I want to run a tale of

34
00:01:58.100 --> 00:02:02.780
our cloud innit file so we can view what's going on.

35
00:02:02.780 --> 00:02:05.060
You'll see we're running some yum commands.

36
00:02:05.060 --> 00:02:07.000
It's cleaning up currently.

37
00:02:07.000 --> 00:02:08.770
And as this proceeds,

38
00:02:08.770 --> 00:02:15.540
we should start seeing some of those packages that we specified being installed.

39
00:02:15.540 --> 00:02:19.240
You see the Amazon Lennox extras repo,

40
00:02:19.240 --> 00:02:25.340
and now we're installing PHP and then Maria database.

41
00:02:25.340 --> 00:02:28.930
So this is automating our installation for our Web

42
00:02:28.930 --> 00:02:30.670
server and at the bottom there,

43
00:02:30.670 --> 00:02:34.780
you can see that it created our sim link in The service has started.

44
00:02:34.780 --> 00:02:42.840
So if I go back to the console and I navigate to this public i p,

45
00:02:42.840 --> 00:02:45.430
we have our web server, but let's check our P H.

46
00:02:45.430 --> 00:02:52.970
P Info page that we created in our script and voila!

47
00:02:52.970 --> 00:02:53.740
There you go.

48
00:02:53.740 --> 00:02:59.000
We've installed PHP and enable it on our Web server all via

49
00:02:59.000 --> 00:03:02.880
an automated script past Envy a user data.

50
00:03:02.880 --> 00:03:07.140
Now let me show you one other way that we can do this.

51
00:03:07.140 --> 00:03:13.740
Now I'll go ahead and launch an instance similar to this.

52
00:03:13.740 --> 00:03:19.230
But under configure instance, I'm going to make some changes at the bottom here.

53
00:03:19.230 --> 00:03:24.830
I'm going to get rid of this entire script and I'll paste in a new one.

54
00:03:24.830 --> 00:03:29.800
Now, what this is doing is copying a script from an s three bucket,

55
00:03:29.800 --> 00:03:33.180
pulling it locally and then executing it.

56
00:03:33.180 --> 00:03:37.080
Now, this script is the exact same thing that we just ran.

57
00:03:37.080 --> 00:03:41.280
But now it's stored in a central location that any instance

58
00:03:41.280 --> 00:03:44.150
can grab if it has the correct permissions.

59
00:03:44.150 --> 00:03:48.230
And speaking of permissions, since we're interacting with s three,

60
00:03:48.230 --> 00:03:49.970
I need to change my role.

61
00:03:49.970 --> 00:03:54.640
So if I go upto I am role and select my s three access role,

62
00:03:54.640 --> 00:04:02.370
all review and launch it and what I'll do here is once this is up and running,

63
00:04:02.370 --> 00:04:03.680
I'll go ahead and connect to it.

64
00:04:03.680 --> 00:04:08.490
The SS H and will do the same thing or view that output look.

65
00:04:08.490 --> 00:04:11.980
So I'll pause here and then pick up when I can connect.

66
00:04:11.980 --> 00:04:12.520
Okay,

67
00:04:12.520 --> 00:04:16.440
I'm connected here and you can see my easy to and let me go ahead and

68
00:04:16.440 --> 00:04:22.120
tail that same output file so we can follow along.

69
00:04:22.120 --> 00:04:24.650
You can see here are download command.

70
00:04:24.650 --> 00:04:27.930
That was just there, and it's running the same script.

71
00:04:27.930 --> 00:04:31.370
So it's executing and installing those different

72
00:04:31.370 --> 00:04:34.720
packages to stand up a Web server.

73
00:04:34.720 --> 00:04:38.880
Now I'll go ahead and pause the clip and then pick up when it's done,

74
00:04:38.880 --> 00:04:41.840
and we'll make sure that everything worked correctly.

75
00:04:41.840 --> 00:04:44.400
Okay, so we see the same message.

76
00:04:44.400 --> 00:04:49.290
And now if I go back to my console and I go ahead and navigate to this,

77
00:04:49.290 --> 00:04:54.440
I p this time we get the same screen.

78
00:04:54.440 --> 00:04:59.280
Let's make sure PHP installed as well.

79
00:04:59.280 --> 00:05:00.360
And there we go again.

80
00:05:00.360 --> 00:05:03.760
We have our other instance with its own Web server,

81
00:05:03.760 --> 00:05:09.040
stood up, and we use the same exact script just in a different method.

82
00:05:09.040 --> 00:05:14.090
So that's how you can use user data within a W S on our E C.

83
00:05:14.090 --> 00:05:20.400
Two instances toe automate installation procedures on our instances now.

84
00:05:20.400 --> 00:05:23.630
I started with this because in the upcoming clips,

85
00:05:23.630 --> 00:05:28.560
we're going to look at leveraging this user data to automate Cem

86
00:05:28.560 --> 00:05:31.940
installation procedures in an auto scaling group.

87
00:05:31.940 --> 00:05:35.600
So let's go ahead and wrap up here, and in the next clip,

88
00:05:35.600 --> 00:05:42.000
I'll start diving into the different components that make up auto scaling groups.

