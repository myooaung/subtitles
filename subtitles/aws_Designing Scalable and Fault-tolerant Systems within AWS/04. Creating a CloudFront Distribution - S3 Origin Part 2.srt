1
00:00:01,140 --> 00:00:01,620
[Autogenerated] cool.

2
00:00:01,620 --> 00:00:05,380
Okay, we just created our first cloud friend distribution.

3
00:00:05,380 --> 00:00:11,440
Now, just a caveat that took probably about, I would say, 15 to 20 minutes.

4
00:00:11,440 --> 00:00:15,840
So be aware that any changes to your distribution

5
00:00:15,840 --> 00:00:21,220
could take that long or longer, depending on what's going on.

6
00:00:21,220 --> 00:00:24,540
Any time you make a change to your distribution,

7
00:00:24,540 --> 00:00:28,610
it essentially redeploys that distribution toe all the

8
00:00:28,610 --> 00:00:31,040
edge locations that you selected.

9
00:00:31,040 --> 00:00:36,290
So now what I can do is I can go to this cloudfront domain.

10
00:00:36,290 --> 00:00:39,040
And if I go to index dot html,

11
00:00:39,040 --> 00:00:42,750
we'll get our bucket page and you can see it's from s three.

12
00:00:42,750 --> 00:00:46,170
So this is serving that static site in our bucket,

13
00:00:46,170 --> 00:00:50,350
and we're actually pointing at the cloudfront your L Now

14
00:00:50,350 --> 00:00:53,640
you'll recall we said we want to restrict access to our

15
00:00:53,640 --> 00:00:56,100
bucket objects from cloudfront.

16
00:00:56,100 --> 00:01:07,020
But if I go ahead and go to s three and get that bucket in point again,

17
00:01:07,020 --> 00:01:10,700
you'll notice that Hey, we can still access the objects.

18
00:01:10,700 --> 00:01:12,240
What's going on here?

19
00:01:12,240 --> 00:01:15,690
Well, we still have to edit our bucket policy.

20
00:01:15,690 --> 00:01:17,640
If we had one in place,

21
00:01:17,640 --> 00:01:22,040
you'll see that cloudfront added this second statement here,

22
00:01:22,040 --> 00:01:27,710
and it allows our origin access identity to get objects within our bucket,

23
00:01:27,710 --> 00:01:29,640
but the 1st 1 allows everyone.

24
00:01:29,640 --> 00:01:32,440
So what I want to do is I want to kill this.

25
00:01:32,440 --> 00:01:34,940
We'll save our bucket policy.

26
00:01:34,940 --> 00:01:37,770
It's Mark does not public now.

27
00:01:37,770 --> 00:01:41,890
If I go back to my tab and I refresh there you go,

28
00:01:41,890 --> 00:01:45,140
we get a forbidden, so that's perfect.

29
00:01:45,140 --> 00:01:46,700
But if I go to my cloudfront,

30
00:01:46,700 --> 00:01:51,420
I can still access these files because now we're restricting

31
00:01:51,420 --> 00:01:54,000
access to our cloudfront distribution.

32
00:01:54,000 --> 00:01:54,210
Now.

33
00:01:54,210 --> 00:01:56,540
One last thing before we wrap up.

34
00:01:56,540 --> 00:01:58,710
We want to give this a domain name.

35
00:01:58,710 --> 00:02:03,180
If you remember, we gave it an alternate name of Andrew ss dot me.

36
00:02:03,180 --> 00:02:05,870
So to do that, we'll go to Route 53.

37
00:02:05,870 --> 00:02:09,610
I'll load my hosted zone for my Andrew ss dot me,

38
00:02:09,610 --> 00:02:12,310
and what I'll do is I'll create a record set.

39
00:02:12,310 --> 00:02:16,440
I'll leave it at the domain or apex of the domain.

40
00:02:16,440 --> 00:02:18,070
It'll be in a record.

41
00:02:18,070 --> 00:02:23,540
It's an alias, and I wanna point it at our cloudfront distribution.

42
00:02:23,540 --> 00:02:25,650
We'll leave the routing policy and target health

43
00:02:25,650 --> 00:02:29,140
evaluation at the default I'll click on create,

44
00:02:29,140 --> 00:02:32,400
and what we'll do here is I'll give it a few minutes for

45
00:02:32,400 --> 00:02:35,340
this to propagate around the globe.

46
00:02:35,340 --> 00:02:39,430
And what I'll do is I'll go to Andrew Estes that me once it's

47
00:02:39,430 --> 00:02:42,540
loaded to make sure that we can get there.

48
00:02:42,540 --> 00:02:43,580
All right, there we go.

49
00:02:43,580 --> 00:02:46,230
So now, after a few minutes are d.

50
00:02:46,230 --> 00:02:48,490
N s record has propagated,

51
00:02:48,490 --> 00:02:53,910
and I'm now accessing our static site from s3 via

52
00:02:53,910 --> 00:02:56,540
cloudfront on a secure listener.

53
00:02:56,540 --> 00:02:59,920
Now that's gonna do it for this first part covering

54
00:02:59,920 --> 00:03:03,060
cloudfront distributions in the next one.

55
00:03:03,060 --> 00:03:08,600
What will do here is will set up an origin that is actually pointing to an

56
00:03:08,600 --> 00:03:19,000
application load balancer delivering the same content. So let's end here and then in the next one will continue on where we left off.

