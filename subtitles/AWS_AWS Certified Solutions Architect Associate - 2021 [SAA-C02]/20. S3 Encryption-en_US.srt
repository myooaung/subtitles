1
00:00:02,120 --> 00:00:05,510
We're now going to talk about encryption on S3.

2
00:00:05,510 --> 00:00:10,700
So there's a few different ways that you can encrypt your data on S3.

3
00:00:10,700 --> 00:00:16,940
On the left hand side here you can see two different types of encryption that use keys which are managed

4
00:00:17,180 --> 00:00:22,750
by even free or the key management service so they're managed by AWS.

5
00:00:23,110 --> 00:00:29,570
And on the right hand side here you can see two different options for where the client your organization

6
00:00:29,660 --> 00:00:32,680
actually manages the keys.

7
00:00:32,870 --> 00:00:38,130
So starting from the left there the first one is we've got the S3 managed key.

8
00:00:38,130 --> 00:00:44,990
So this this means that Amazon has free will actually manage those keys it creates a unique object key

9
00:00:44,990 --> 00:00:52,550
for each object and then a master key which encrypts the object keys and it uses the standard AES 256

10
00:00:52,550 --> 00:00:58,970
which is a very good standard the encryption decryption takes place here.

11
00:00:59,010 --> 00:01:00,560
It happens actually on the bucket.

12
00:01:00,590 --> 00:01:08,810
So if you upload data the data is not encrypted it gets encrypted when it reaches S3 and gets written

13
00:01:08,810 --> 00:01:11,180
to the bucket in an encrypted state.

14
00:01:11,300 --> 00:01:18,870
If you then want to retrieve that data it's decrypted and then sends over the wire bound to you the

15
00:01:18,890 --> 00:01:27,440
next option is KMS and this basically means that AWS manages the key but in KMS rather than an Amazon

16
00:01:27,440 --> 00:01:28,320
S3.

17
00:01:28,340 --> 00:01:33,760
So the first one is known as server side encryption with S3 managed keys or SSE S3.

18
00:01:34,010 --> 00:01:37,330
And this one is called service side encryption with a.

19
00:01:37,460 --> 00:01:42,770
Excuse me AWS KMS managed keys so AWS KMS.

20
00:01:43,070 --> 00:01:48,530
So in this case rather than S3 managing the keys we're using the key management service one of

21
00:01:48,530 --> 00:01:54,980
the differences is you can use customer master keys you can actually supply a master key to KMS which

22
00:01:54,980 --> 00:02:01,340
it then uses for its encryption and that can be customer generated so it can be one of yours or it can

23
00:02:01,340 --> 00:02:05,410
be automatically generated by KMS itself.

24
00:02:05,510 --> 00:02:10,960
Again the encryption is done very similarly to with the SSE S3.

25
00:02:11,000 --> 00:02:15,800
It's performed at the bucket level.

26
00:02:15,900 --> 00:02:21,120
We then have the service side encryption with client provided keys SSE-C.

27
00:02:21,240 --> 00:02:25,260
So in this case the encryption still takes place up here in the cloud.

28
00:02:25,290 --> 00:02:32,040
So data is not encrypted as it sends up or retrieved from the cloud it's encrypted by S3 as it

29
00:02:32,040 --> 00:02:35,700
is written to and and decrypted when it's read from the bucket.

30
00:02:36,480 --> 00:02:41,100
But the difference is the keys aren't stored at all AWS or the keys are actually managed

31
00:02:41,100 --> 00:02:49,370
by the client and then the full function is where the encryption and decryption takes place entirely

32
00:02:49,460 --> 00:02:52,200
on the company side of the connection.

33
00:02:52,280 --> 00:02:56,440
AWS doesn't know anything about the encryption at all.

34
00:02:56,480 --> 00:03:02,750
You just send encrypted data to AWS and you pull the encrypted data back down again you manage the

35
00:03:02,750 --> 00:03:06,590
keys and you manage the encryption process as well.

36
00:03:07,780 --> 00:03:12,050
So those are the four different types of encryption you can use with S3.

37
00:03:12,070 --> 00:03:16,020
Let's have a look into the console at where we configure encryption.

38
00:03:16,270 --> 00:03:23,840
So we're gonna head into our DCT company bucket and if we go to properties we have default encryption.

39
00:03:23,950 --> 00:03:30,070
So in here we can specify that we set the default which means then that all data is returned to the

40
00:03:30,070 --> 00:03:36,290
bucket unless it has a header which specifies that it's encryption should be different.

41
00:03:36,430 --> 00:03:39,290
It will use whatever setting you use here.

42
00:03:39,310 --> 00:03:45,430
So this is where we have two options we have the service side encryption with AWS managed keys, SSE-S3,

43
00:03:45,610 --> 00:03:54,370
or the K M.S. option whereas key KMS managed keys or as KMS so you can set the default encryption

44
00:03:54,370 --> 00:03:55,010
here.

45
00:03:55,120 --> 00:03:57,910
It won't apply to existing objects.

46
00:03:57,910 --> 00:04:05,760
So if you have objects in that bucket already they won't be encrypted they'll just stay as they are.

47
00:04:05,770 --> 00:04:08,640
The other option we have is when we actually upload data.

48
00:04:09,310 --> 00:04:16,150
So if we go and just grab a file I'm just going to grab my file here and we click next and we could

49
00:04:16,150 --> 00:04:19,720
specify permissions on here but we're going to leave that as it is.

50
00:04:19,870 --> 00:04:25,900
And then this is where we have a couple of options to either modify the storage class and also down

51
00:04:25,900 --> 00:04:32,440
here we can set the encryption so again we see these two options the SSE-S3 and the SSE-KMS

52
00:04:32,450 --> 00:04:33,180
.

53
00:04:34,060 --> 00:04:40,830
And if you choose one of those options you'll then get presented with some available keys so I could

54
00:04:40,830 --> 00:04:55,460
choose came as master key or S3 and if we just click next here and click upload we now have

55
00:04:55,460 --> 00:05:03,260
this file and if we go to properties we can see that it's encrypted with AES 256 and if we want

56
00:05:03,260 --> 00:05:09,620
to we can actually change this so we can then go in and say well now I want to use KMS managed keys

57
00:05:10,220 --> 00:05:17,450
and I'm going to change to this key here and simple as that it would just change to that key.

58
00:05:17,960 --> 00:05:25,610
So that takes care of these two options SSE-S3 and SSE-KMS. if you're using server side encryption

59
00:05:25,610 --> 00:05:30,440
with client provided keys it's not an option that you see here in the console.

60
00:05:30,590 --> 00:05:37,010
So there's a good article here which talks about how it's done and if you come down to here you can see

61
00:05:37,010 --> 00:05:42,260
that this is the encryption key information that you need to put in your request headers.

62
00:05:42,260 --> 00:05:51,470
So when you make a request to S3 you can specify this information to configure what sort of encryption

63
00:05:51,470 --> 00:05:52,460
you're going to be using

64
00:05:55,770 --> 00:05:57,420
so that covers the third option.

65
00:05:57,420 --> 00:06:01,060
And then with the fourth option there really is nothing in AWS for this.

66
00:06:01,080 --> 00:06:03,540
So you actually have to do everything on the client side

67
00:06:07,150 --> 00:06:09,070
so that's most of what I want to show you.

68
00:06:09,250 --> 00:06:14,040
But the other thing that we could do is just have a look in the KMS service.

69
00:06:14,110 --> 00:06:20,740
So this is the AWS Key Management Service which you can use to create and manage encryption keys.

70
00:06:20,890 --> 00:06:26,050
You can go under AWS managed keys here and you can see some of the keys that are being created such

71
00:06:26,260 --> 00:06:33,780
as this AWS S3 key which is the default master key that protects S3 objects.

72
00:06:33,790 --> 00:06:39,430
And then you can go to customer managed keys and this is where you can create your CMK keys your customer

73
00:06:39,430 --> 00:06:43,460
manage keys that can be used with S3 encryption.

74
00:06:43,630 --> 00:06:50,560
So there is lots more to KMS and we'll be using it in other sections of the course but for S3 encryption

75
00:06:51,310 --> 00:06:53,230
this is really all we need to know at this point.

76
00:06:53,230 --> 00:07:00,610
So just understand the four different options and have an understanding of when you might use one over

77
00:07:00,610 --> 00:07:00,970
another.

