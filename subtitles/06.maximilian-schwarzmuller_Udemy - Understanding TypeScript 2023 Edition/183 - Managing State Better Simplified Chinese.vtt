WEBVTT

00:02.190 --> 00:04.310
讲师：那么我们应该如何更新状态呢？

00:04.310 --> 00:06.970
我们可以在这里使用spread运算符,

00:06.970 --> 00:09.680
将所有现有的TODO扩展到这个数组中,

00:09.680 --> 00:13.520
然后在末尾添加新的TODO作为新项｡

00:13.520 --> 00:16.300
这是可行的, 但不是更新的最干净的方式｡ 

00:16.300 --> 00:20.090
它最有可能在我们在此应用程序中的所有场景中工作,

00:20.090 --> 00:23.170
但理论上, react schedule状态更新和因此,

00:23.170 --> 00:30.710
我们这里的TODO值中的内容可能不一定是执行此更新时的最新状态｡

00:30.710 --> 00:35.340
为了保证这一点, 我们可以传递一个函数给这个状态更新函数｡

00:35.340 --> 00:37.500
一个函数, 它获取前面的TODO,

00:37.500 --> 00:39.680
然后返回新的状态｡

00:39.680 --> 00:41.460
这一切都是靠着反应过来的｡ 

00:41.460 --> 00:51.363
react也会调用此函数, 然后我们可以依赖此函数中的prevTodos来真正获取最新的状态快照｡

00:52.220 --> 00:57.080
现在, 我们用旧的TODO和新的TODO更新我们的TODO,

00:57.080 --> 00:59.100
现在我们在这里有一个函数,

00:59.100 --> 01:01.860
我们应该能够添加新的TODO｡

01:01.860 --> 01:03.800
如果我们现在保存所有这些内容,

01:03.800 --> 01:05.470
然后返回应用程序, 在此处输入“finish

01:05.470 --> 01:10.260
the course”（完成课程）, 就可以了｡

01:10.260 --> 01:15.650
如果我在这里输入一个月内完成它, 这个也是加上去的｡

01:15.650 --> 01:17.330
现在一切正常了｡ 

01:17.330 --> 01:21.180
现在缺少的功能是我们还可以删除它们｡

01:21.180 --> 01:22.790
下节课我们会讲这个, 但更重要的是,

01:22.790 --> 01:28.260
你们现在还学到了如何用react和typescript来管理状态, 当然,

01:28.260 --> 01:31.693
除了道具, 这是另一个核心概念｡
