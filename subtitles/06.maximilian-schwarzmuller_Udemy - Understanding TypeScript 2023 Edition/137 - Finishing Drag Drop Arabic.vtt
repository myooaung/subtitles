WEBVTT

00:02.300 --> 00:03.133
المدرب: بالطبع

00:03.133 --> 00:05.250
، ليس هدفنا مجرد تسجيل هذا المعرف.

00:05.250 --> 00:09.340
بدلاً من ذلك ، أريد استخراج معرف المشروع هنا في السجل

00:09.340 --> 00:11.110
، في معالج الإسقاط.

00:11.110 --> 00:15.410
وبهذا ، فإن الهدف هو نقل المشروع بالفعل الآن ، أو

00:15.410 --> 00:18.910
تغيير حالة المشروع ، على وجه الدقة.

00:18.910 --> 00:21.400
الآن ، كيف يمكننا فعل ذلك؟

00:21.400 --> 00:26.063
حسنًا ، في حالتنا ، أود أن أقول ، في حالة مشروعنا ، حيث لدينا

00:26.950 --> 00:30.000
حاليًا طريقة addProject ، نحتاج أيضًا

00:30.000 --> 00:33.160
إلى طريقة moveProject.

00:33.160 --> 00:35.060
والهدف من هذه الطريقة

00:35.060 --> 00:38.550
هو تبديل حالة المشروع بشكل أساسي.

00:38.550 --> 00:40.180
بالطبع ، يمكنك أيضًا تسميته ، SwitchProjectStatus

00:40.180 --> 00:46.440
، أو أي شيء تريده ، ولكن نظرًا لأننا نقوم بالسحب والإفلات ، فأنا أطلق عليه اسم MoveProject.

00:46.440 --> 00:49.470
لذلك ، في MoveProject ، الهدف هو نقل مشروع

00:49.470 --> 00:53.860
من القائمة الموجودة حاليًا ، إلى قائمة جديدة.

00:53.860 --> 00:55.460
الآن ، هذا لا يعني دائمًا

00:55.460 --> 00:58.030
أنه يتعين علينا فقط قلب حالة المشروع

00:58.030 --> 01:00.480
من نشط إلى منتهي والعكس صحيح.

01:00.480 --> 01:02.870
بعد كل شيء ، يمكن للمستخدم القيام بذلك

01:02.870 --> 01:05.060
، السحب والإفلات في نفس المربع.

01:05.060 --> 01:07.120
لذلك ، إذا قمنا دائمًا بتشغيل

01:07.120 --> 01:10.680
طريقة تقوم بتبديل الحالة ، فسيكون لدينا تأثير غير

01:10.680 --> 01:12.690
متوقع حيث لا يزال السقوط في نفس

01:12.690 --> 01:15.754
المربع يحول المشروع إلى المربع الآخر.

01:15.754 --> 01:18.972
لذا بدلاً من ذلك ، في MoveProject ، علينا حقًا

01:18.972 --> 01:23.402
معرفة المشروع الذي يجب نقله ، وأي مربع يكون الصندوق الجديد.

01:23.402 --> 01:24.235
إذن ، ما هو الوضع الجديد.

01:25.940 --> 01:28.190
لذلك ، أتوقع الحصول على معرف المشروع

01:28.190 --> 01:31.410
هنا ، والذي يجب أن يكون سلسلة ، والحالة الجديدة.

01:31.410 --> 01:34.130
والوضع الجديد هنا ، بالطبع ، يمكن أن

01:34.130 --> 01:36.410
يكون من نوع ProjectStatus.

01:38.580 --> 01:40.803
ثم داخل MoveProject ، أريد

01:41.692 --> 01:44.320
العثور على مشروع بهذا المعرف في

01:44.320 --> 01:46.830
مجموعة المشاريع الخاصة بي.

01:46.830 --> 01:49.090
هنا ، في هذه المجموعة من

01:49.090 --> 01:51.680
المشاريع ، ثم نقلب وضعها.

01:51.680 --> 01:54.580
لذلك يمكننا الوصول إلى هذا المشروع

01:54.580 --> 01:57.450
، والعثور على مشروع هناك ، وطريقة

01:57.450 --> 01:59.440
البحث مثالية لذلك.

01:59.440 --> 02:01.210
يتم تشغيله على كل عنصر في هذه المصفوفة ،

02:01.210 --> 02:02.680
ويمنحنا الوصول إلى كل عنصر ، ومن

02:02.680 --> 02:03.970
ثم يتعين علينا العودة صحيحًا

02:03.970 --> 02:05.770
إذا كان هذا هو العنصر الذي نبحث عنه.

02:05.770 --> 02:07.150
وأريد أن أعود صحيحًا

02:07.150 --> 02:09.860
إذا كان معرّف العنصر الذي نبحث عنه حاليًا

02:09.860 --> 02:12.830
يساوي المشروع ، هل سأحصل على حجة هنا ، إذن

02:12.830 --> 02:15.420
لدينا العنصر الذي يجب تغييره ، وهناك

02:15.420 --> 02:17.470
في هذا العنصر ، علينا فقط تغيير

02:17.470 --> 02:21.070
الحالة إلى الوضع الجديد.

02:21.070 --> 02:22.653
الآن قد يكون هذا فارغًا

02:23.490 --> 02:26.490
، لذلك سأسمي هذا ، المشروع ، المخزن على أنه ثابت

02:26.490 --> 02:28.080
الآن يسمى المشروع ، وتحقق

02:28.080 --> 02:30.550
مما إذا كان المشروع موجودًا.

02:30.550 --> 02:34.160
وإذا كان موجودًا ، فأنا أريد تعيين الحالة

02:34.160 --> 02:39.160
مساوية للوضع الجديد هنا. سهل هكذا.

02:39.250 --> 02:42.900
سيؤدي هذا بالفعل إلى تغيير الكائن في المصفوفة

02:42.900 --> 02:45.643
وقد انتهينا منه بشكل أساسي.

02:46.970 --> 02:50.010
بالطبع ، لم ننتهي تمامًا.

02:50.010 --> 02:52.250
نحتاج الآن إلى إخبار الجميع ، جميع

02:52.250 --> 02:56.040
مستمعينا ، أن شيئًا ما قد تغير في مشروعنا ، وأنه يجب

02:56.040 --> 02:57.870
عليهم إعادة العرض.

02:57.870 --> 02:59.980
لذلك علينا أن نراجع جميع المستمعين

02:59.980 --> 03:01.910
مرة أخرى ، وبما أننا نكرر الكود هنا

03:01.910 --> 03:04.080
، سأقوم بالاستعانة بمصادر خارجية لهذا

03:04.080 --> 03:07.920
بطريقة خاصة جديدة ، يمكن أن يكون مستمعوا التحديث اسمًا قابلاً

03:07.920 --> 03:10.490
للتطبيق ، وهناك سأحصل على حلقة for ، حيث نذهب

03:10.490 --> 03:13.660
من خلال كل المستمعين ثم يفعلون شيئًا.

03:13.660 --> 03:15.890
وبعد ذلك سأسمي هذا updateListeners

03:15.890 --> 03:17.430
من addProject وأيضًا

03:17.430 --> 03:20.890
من طريقة moveProject.

03:20.890 --> 03:23.033
هنا ، فقط إذا قمنا بتغيير شيء ما.

03:24.350 --> 03:26.100
حتى الآن سيتم تشغيل جميع المستمعين.

03:26.100 --> 03:28.980
وإذا كنت تتذكر ، فإن المستمع الموجود في تطبيقنا

03:28.980 --> 03:33.010
هنا ، يؤدي بشكل أساسي إلى القائمة لإعادة عرض عناصرها.

03:33.010 --> 03:35.310
لذلك سيعمل هذا تمامًا كما ينبغي

03:35.310 --> 03:37.940
، أو يجب أن يعمل تمامًا كما ينبغي.

03:37.940 --> 03:40.640
الآن لدينا طريقة moveProject هذه ، بالأسفل

03:40.640 --> 03:43.730
هناك في معالج الإسقاط ، يمكننا الآن استخدام هذا.

03:43.730 --> 03:46.390
هناك يمكننا الآن استخدام projectState

03:46.390 --> 03:49.670
، استدعاء moveProject ، وتمرير معرف المشروع

03:49.670 --> 03:52.296
، والآن حالة المشروع الجديد.

03:52.296 --> 03:54.190
وتعتمد حالة المشروع

03:54.190 --> 03:57.880
الجديد على القائمة التي نتخلى عنها.

03:57.880 --> 03:59.630
لذا ، أريد الربط التلقائي

04:00.760 --> 04:01.790
لمعالج الإسقاط

04:01.790 --> 04:04.050
الخاص بي ، بحيث تشير الكلمة الرئيسية

04:04.050 --> 04:06.020
الموجودة في معالج الإسقاط إلى

04:06.020 --> 04:08.500
الفئة المحيطة ، وهذه الفئة المحيطة

04:08.500 --> 04:10.320
هي قائمة مشروع ، إذا كنت تتذكر

04:10.320 --> 04:13.020
، سيكون لها خاصية نوع هنا ، ونحن نقوم بتخزينها

04:13.020 --> 04:18.120
هنا ، لدينا نوع ، خاصية ، وهي نشطة أو منتهية.

04:18.120 --> 04:21.000
الآن علينا فقط ترجمة القيمة النشطة أو النهائية إلى

04:21.000 --> 04:22.640
قيم التعداد الخاصة بنا.

04:22.640 --> 04:24.850
لذلك هنا ، مررت في هذا. اكتب ، وأتحقق مما

04:24.850 --> 04:27.230
إذا كان يساوي نشطًا ، وفي هذه الحالة

04:27.230 --> 04:31.580
، نمرر في ProjectStatus. نشط ، كحالة جديدة للمشروع

04:31.580 --> 04:33.750
، لأن هذه هي حالة القائمة

04:33.750 --> 04:38.160
التي نقلنا المشروع إليها.

04:38.160 --> 04:41.733
خلاف ذلك ، فإننا نمر في ProjectStatus. انتهيت ، واسمحوا لي أن

04:42.660 --> 04:45.423
أعيد صياغة ذلك لتسهيل قراءته.

04:46.730 --> 04:48.110
مع ذلك دعونا نجربها.

04:48.110 --> 04:52.440
دعنا نحفظ كل شيء ، ونضيف مشروعًا جديدًا هنا ، والآن اسحبه

04:52.440 --> 04:56.620
إلى المشاريع المنتهية وسيتبدل ، ونفس الشيء إذا قمت

04:56.620 --> 04:58.270
بنقله مرة أخرى.

04:58.270 --> 05:02.320
إذا تركت هنا في المشاريع النشطة ، فلن يتغير شيء.

05:02.320 --> 05:04.400
الآن سترى ، إذا قمت بفحص DOM ، فإنه

05:04.400 --> 05:08.100
يتم إعادة عرضه تقنيًا ، والذي قد لا يكون مثاليًا ، لذلك

05:08.100 --> 05:11.450
يمكننا التفكير في التوصل إلى بعض الحلول التي تتحقق

05:11.450 --> 05:15.290
مما إذا كانت الحالة قد تغيرت بالفعل ، وإذا لم يحدث ذلك

05:15.290 --> 05:17.400
، فإننا لا هذا شيء يمكننا القيام

05:17.400 --> 05:18.890
به.

05:18.890 --> 05:22.620
ولكن من منظور واجهة المستخدم ، يتم تحديثه تمامًا كما ينبغي.

05:22.620 --> 05:24.570
الآن دعنا نضيف أيضًا مشروعًا

05:24.570 --> 05:27.120
ثانيًا ونرى ما إذا كان هذا يدمر شيئًا

05:27.120 --> 05:29.260
ما ، إذا كان كل شيء لا يزال يعمل ،

05:29.260 --> 05:31.750
وأود أن أقول أن هذا يبدو لائقًا ، فهذا

05:31.750 --> 05:33.720
يبدو جيدًا بالنسبة لي.

05:33.720 --> 05:37.120
يبدو أن كل شيء يعمل بالضبط بالطريقة التي ينبغي أن يعمل بها.

05:37.120 --> 05:40.230
لذا فإن السحب والإفلات يعملان بشكل جيد هنا ولكن

05:40.230 --> 05:42.600
هناك هذا التحسين الذي ذكرته مرة أخرى

05:42.600 --> 05:46.305
في حالة المشروع ، في moveProject ، عندما اتصلت بهذا التحديث

05:46.305 --> 05:49.470
مستمع ، يمكننا بالفعل التحقق مما إذا كنا قد غيرنا

05:49.470 --> 05:51.920
الحالة بالفعل.

05:51.920 --> 05:54.150
هنا يمكننا التحقق مما إذا كان المشروع

05:54.150 --> 05:57.940
، لذلك إذا وجدنا واحدًا ، وإذا كانت حالة المشروع ، مختلفة

05:57.940 --> 06:00.270
عن الحالة الجديدة ، وعندها فقط نقوم

06:00.270 --> 06:03.830
بتغيير الحالة وتحديث المستمعين.

06:03.830 --> 06:06.060
إذا كانت الحالة هي نفسها ، فإننا

06:06.060 --> 06:09.310
لا نفعل ذلك ونتجنب دورة العرض غير الضرورية.

06:09.310 --> 06:10.143
الآن مع ذلك ،

06:10.143 --> 06:12.900
إذا حفظناه وأضفنا مشروعًا جديدًا بسرعة

06:12.900 --> 06:14.790
، سترى ما إذا قمت بفحص العناصر

06:14.790 --> 06:18.190
هنا وتشاهد L-I وتحقق مما إذا كان هذا وميض ، مما يعني

06:18.190 --> 06:21.800
أنه سيتم عرضه ، لا يومض هنا ، فقط ومضات قابلة للإفلات

06:21.800 --> 06:24.490
، الفئة التي أضفناها للتو ، لكن L-I لا

06:24.490 --> 06:27.970
يومض إذا أسقطت في نفس المربع ، فإنه يومض فقط إذا قمت

06:27.970 --> 06:30.990
بنقله إلى صندوق مختلف.

06:30.990 --> 06:34.460
ويجب أن تومض بعد ذلك لأننا حركناه بالفعل.

06:34.460 --> 06:36.180
الآن قمنا بتحسين هذا قليلاً ،

06:36.180 --> 06:39.050
والآن لدينا عمل السحب والإفلات هنا ، وكلها مبنية

06:39.050 --> 06:42.223
ومدعومة بواسطة TypeScript وبواسطة TypeScript.
