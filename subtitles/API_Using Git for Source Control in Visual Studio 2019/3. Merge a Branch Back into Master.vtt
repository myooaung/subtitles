WEBVTT
1
00:00:01.931 --> 00:00:02.741
In this demonstration,

2
00:00:02.741 --> 00:00:05.991
you will learn how to merge a branch back into the master branch.

3
00:00:05.991 --> 00:00:09.941
Let's switch to Visual Studio.

4
00:00:09.941 --> 00:00:12.981
As you can see, we have now the perspective of Julia.

5
00:00:12.981 --> 00:00:17.941
Julia has checked out the master branch that you can see here in the status bar.

6
00:00:17.941 --> 00:00:20.951
Also when I go to the Branches page of Team Explorer,

7
00:00:20.951 --> 00:00:23.941
you can see that the master branch is bold.

8
00:00:23.941 --> 00:00:26.938
Now let's go to the synchronization page of Team Explorer,

9
00:00:26.938 --> 00:00:32.901
and let's click here on Fetch to check if there are any incoming commits.

10
00:00:32.901 --> 00:00:35.981
Oh, here are 2 commits from Thomas on the master branch.

11
00:00:35.981 --> 00:00:40.051
Julia can see here that Thomas has implemented the quit command

12
00:00:40.051 --> 00:00:42.991
and that Thomas has merged Julia's help message.

13
00:00:42.991 --> 00:00:45.921
Oh, what did he actually do here?

14
00:00:45.921 --> 00:00:49.991
Let's double click this commit, and now you can see here the commit details.

15
00:00:49.991 --> 00:00:53.941
You can see that Thomas changed the Program.cs file.

16
00:00:53.941 --> 00:00:57.981
Let's right-click it and let's compare it with a previous version.

17
00:00:57.981 --> 00:01:01.527
Julia can see that Thomas added the string coffee

18
00:01:01.527 --> 00:01:03.941
shop that she had in her commit.

19
00:01:03.941 --> 00:01:08.951
Beside this change, Julia can also see here a bit of code that she doesn't know.

20
00:01:08.951 --> 00:01:11.941
Here is the string, write quit to exit application,

21
00:01:11.941 --> 00:01:14.961
and the if statement to handle the quit command,

22
00:01:14.961 --> 00:01:17.961
but these changes are not part of this commit.

23
00:01:17.961 --> 00:01:20.931
So let's take a look at the previous commit.

24
00:01:20.931 --> 00:01:22.921
Let's go back to the Team Explorer,

25
00:01:22.921 --> 00:01:25.901
let's navigate back to the Synchronization page,

26
00:01:25.901 --> 00:01:27.991
and let's double-click here the second commit.

27
00:01:27.991 --> 00:01:32.981
Now let's right-click on the Program.cs file and let's compare with previous.

28
00:01:32.981 --> 00:01:35.699
Here you can see that Thomas has added this write

29
00:01:35.699 --> 00:01:37.971
quit to exit application string,

30
00:01:37.971 --> 00:01:41.948
and that he has added this if statement to handle the

31
00:01:41.948 --> 00:01:43.961
quit string from the command line.

32
00:01:43.961 --> 00:01:45.981
Now let's go back to the Team Explorer,

33
00:01:45.981 --> 00:01:49.931
and let's navigate back to the Synchronization page.

34
00:01:49.931 --> 00:01:54.911
As you know, the user Thomas did these two commits in the previous module.

35
00:01:54.911 --> 00:01:56.981
Now let's click on Pull to pull these two commits

36
00:01:56.981 --> 00:01:59.971
into Julia's local master branch.

37
00:01:59.971 --> 00:02:03.961
Let's go now to the Branches page of Team Explorer.

38
00:02:03.961 --> 00:02:05.991
Let's open up remotes/origin,

39
00:02:05.991 --> 00:02:10.931
and here Julia can also see the coffeeShopCommands branch.

40
00:02:10.931 --> 00:02:12.941
If you don't see the latest branches here,

41
00:02:12.941 --> 00:02:15.981
you need to pull the changes from the remote repository.

42
00:02:15.981 --> 00:02:19.931
Now let's assume you want to see what Thomas is working on.

43
00:02:19.931 --> 00:02:23.951
You can right-click this remote branch and check it out locally.

44
00:02:23.951 --> 00:02:24.289
Alternatively,

45
00:02:24.289 --> 00:02:28.981
you can just double click the remote branch to check it out locally.

46
00:02:28.981 --> 00:02:33.951
Now you can see, we have here a local coffeeShopCommands branch.

47
00:02:33.951 --> 00:02:37.991
Let's go to Solution Explorer and let's open up the Program.cs file.

48
00:02:37.991 --> 00:02:39.931
Let's scroll down,

49
00:02:39.931 --> 00:02:42.780
and here you can see the else block where Thomas

50
00:02:42.780 --> 00:02:44.951
handles the coffee shop commands.

51
00:02:44.951 --> 00:02:46.961
Now without using Team Explorer,

52
00:02:46.961 --> 00:02:50.981
you can use the status bar to switch back to the master branch.

53
00:02:50.981 --> 00:02:55.941
And you see, in the master branch, this else block does not exist.

54
00:02:55.941 --> 00:02:58.495
Let's go back to the feature/coffeeShopCommands

55
00:02:58.495 --> 00:03:00.921
branch and we get the else block.

56
00:03:00.921 --> 00:03:04.941
Now Julia could work together with Thomas on that feature branch,

57
00:03:04.941 --> 00:03:08.931
but instead, Julia will implement another feature.

58
00:03:08.931 --> 00:03:12.733
She will implement now the feature that the coffee shops have also

59
00:03:12.733 --> 00:03:15.941
the information about the paper cups in stock.

60
00:03:15.941 --> 00:03:20.911
So let's go to Team Explorer and let's create here a new branch.

61
00:03:20.911 --> 00:03:25.951
Let's call the branch feature/paperCupsInStock.

62
00:03:25.951 --> 00:03:28.981
We don't want to branch off from Thomas's feature branch.

63
00:03:28.981 --> 00:03:32.971
This is displayed here because we have checked out this branch.

64
00:03:32.971 --> 00:03:36.911
So now let's select there the master branch.

65
00:03:36.911 --> 00:03:37.595
This time,

66
00:03:37.595 --> 00:03:40.737
let's keep this Checkout branch checkbox checked so that the

67
00:03:40.737 --> 00:03:43.981
branch will be checked out after it was created.

68
00:03:43.981 --> 00:03:47.921
Now let's click this Create Branch button.

69
00:03:47.921 --> 00:03:52.981
Here we go, you can see our new local branch, paperCupsInStock is checked out.

70
00:03:52.981 --> 00:03:55.971
You can also see this branch in the status bar.

71
00:03:55.971 --> 00:03:58.961
Now if you don't want to work on Thomas's branch,

72
00:03:58.961 --> 00:04:02.931
you can just right-click it, and you can delete that local branch.

73
00:04:02.931 --> 00:04:03.991
Let's do this.

74
00:04:03.991 --> 00:04:07.941
It's still here available in the remote repository.

75
00:04:07.941 --> 00:04:09.991
Now let's work on our branch.

76
00:04:09.991 --> 00:04:15.901
Let's go to the Solution Explorer and let's open up the CoffeeShop class.

77
00:04:15.901 --> 00:04:22.921
Let's add here a new property of type int, and let's call it PaperCupsInStock.

78
00:04:22.921 --> 00:04:26.475
Now let's go to the CoffeeShopDataProvider class and let's

79
00:04:26.475 --> 00:04:28.981
ensure that we return data for that new property.

80
00:04:28.981 --> 00:04:35.941
So here for Frankfurt, let's say that they have 350 paper cups in stock.

81
00:04:35.941 --> 00:04:38.961
Let me press Ctrl+K+D to format this code.

82
00:04:38.961 --> 00:04:43.931
Now let's say Freiburg has 250 paper cups in stock,

83
00:04:43.931 --> 00:04:48.981
and let's say Munich has 427 paper cups in stock.

84
00:04:48.981 --> 00:04:52.961
I press again Ctrl+K+D to format this document.

85
00:04:52.961 --> 00:04:57.981
Now we provide the PaperCupsInStock data on all the three coffee shops.

86
00:04:57.981 --> 00:05:01.911
Now let's commit this change to our feature branch.

87
00:05:01.911 --> 00:05:03.931
Let's go to Team Explorer.

88
00:05:03.931 --> 00:05:08.951
Let's navigate to the Changes page and let's enter here a commit message.

89
00:05:08.951 --> 00:05:13.931
Add PaperCupsInStock property.

90
00:05:13.931 --> 00:05:17.931
Here you can double check that you are on the right branch.

91
00:05:17.931 --> 00:05:22.911
Now let's use here the drop-down, and let's select Commit All and Push.

92
00:05:22.911 --> 00:05:28.931
Yes, I want to save these changes, and now you can see here the outgoing commit.

93
00:05:28.931 --> 00:05:30.961
Now Julia successfully pushed the branch,

94
00:05:30.961 --> 00:05:34.931
feature/paperCupsInStock to the remote repository.

95
00:05:34.931 --> 00:05:38.500
Now let's assume that Julia is done with her feature and she

96
00:05:38.500 --> 00:05:40.971
wants to merge it back to the master branch.

97
00:05:40.971 --> 00:05:45.971
To do this, she just needs to go to the Branches page of Team Explorer.

98
00:05:45.971 --> 00:05:50.971
Beside creating a new branch, you can also merge and rebase a branch.

99
00:05:50.971 --> 00:05:52.971
So let's click here on Merge,

100
00:05:52.971 --> 00:05:56.694
and you can see the target branch of the merge is the

101
00:05:56.694 --> 00:05:58.921
branch that you have checked out.

102
00:05:58.921 --> 00:06:02.017
But Julia wants to merge the feature

103
00:06:02.017 --> 00:06:04.911
paperCupsInStock branch into the master branch.

104
00:06:04.911 --> 00:06:08.911
So let's check out the master branch by double-clicking it here.

105
00:06:08.911 --> 00:06:11.991
Now you can see we merge into the master branch.

106
00:06:11.991 --> 00:06:12.978
Before you merge,

107
00:06:12.978 --> 00:06:17.981
it's a good idea to check if you have the latest version of the master branch.

108
00:06:17.981 --> 00:06:22.281
You can do this by going to the Synchronization page of Team Explorer,

109
00:06:22.281 --> 00:06:24.901
or you just right-click it here,

110
00:06:24.901 --> 00:06:27.961
then you select here Pull to get the latest version.

111
00:06:27.961 --> 00:06:31.961
As you can see, our repository is already up to date.

112
00:06:31.961 --> 00:06:33.961
So let's click again on Merge,

113
00:06:33.961 --> 00:06:37.372
and now let's select our feature/paperCupsInStock

114
00:06:37.372 --> 00:06:40.961
branch to merge this branch into master.

115
00:06:40.961 --> 00:06:46.911
Here is a checkbox that the changes are automatically committed after the merge.

116
00:06:46.911 --> 00:06:49.951
Let's uncheck this, and let's click the Merge button.

117
00:06:49.951 --> 00:06:53.911
Now you can see here that a merge is in progress.

118
00:06:53.911 --> 00:06:56.911
You can click on Abort to abort the merge.

119
00:06:56.911 --> 00:06:58.951
If you would have conflicts in this merge,

120
00:06:58.951 --> 00:07:02.615
you would see here also the conflicts like you saw it already

121
00:07:02.615 --> 00:07:05.688
in the previous module when we merged the remote master

122
00:07:05.688 --> 00:07:08.901
branch to the local master branch.

123
00:07:08.901 --> 00:07:11.951
Now let's go to the Changes page of Team Explorer.

124
00:07:11.951 --> 00:07:14.921
Here you can see the Staged Changes.

125
00:07:14.921 --> 00:07:16.724
So now I could right-click here again CoffeeShop,

126
00:07:16.724 --> 00:07:18.951
Compare with Unmodified,

127
00:07:18.951 --> 00:07:23.921
and you can see that here is our new PaperCupsInStock property.

128
00:07:23.921 --> 00:07:24.941
This looks good.

129
00:07:24.941 --> 00:07:26.961
So let's enter here the commit message.

130
00:07:26.961 --> 00:07:32.961
Let's call it Merge feature/paperCupsInStock.

131
00:07:32.961 --> 00:07:36.951
And let's select here from the drop-down Commit Staged and Push.

132
00:07:36.951 --> 00:07:40.951
Now you can see the two commits that go to the master branch.

133
00:07:40.951 --> 00:07:41.400
Great!

134
00:07:41.400 --> 00:07:44.991
We have successfully pushed our changes to master.

135
00:07:44.991 --> 00:07:48.921
Now let's assume that Julia is done with her feature.

136
00:07:48.921 --> 00:07:51.921
As she merged her feature branch into the master branch,

137
00:07:51.921 --> 00:07:54.951
she can now safely delete her feature branch.

138
00:07:54.951 --> 00:07:57.981
Let's go to the Branches page of Team Explorer.

139
00:07:57.981 --> 00:08:02.991
Let's right-click here on the paperCupsInStock branch, and then select Delete.

140
00:08:02.991 --> 00:08:07.981
Here in Team Explorer, you can also delete branches from the remote repository.

141
00:08:07.981 --> 00:08:11.901
So let's right-click here on the remote PaperCupsInStock branch,

142
00:08:11.901 --> 00:08:15.921
and let's select here Delete Branch From Remote.

143
00:08:15.921 --> 00:08:19.691
Now Visual Studio asks me if I'm really sure that I

144
00:08:19.691 --> 00:08:21.941
want to delete this remote branch.

145
00:08:21.941 --> 00:08:22.951
Yes, of course,

146
00:08:22.951 --> 00:08:26.385
we are sure because we just merged all the commits from

147
00:08:26.385 --> 00:08:28.961
that branch to the master branch.

148
00:08:28.961 --> 00:08:30.961
So let's click Yes.

149
00:08:30.961 --> 00:08:36.901
Now you can see that the branch was also deleted from the remote repository.

150
00:08:36.901 --> 00:08:38.951
So now with these paper cups in stock,

151
00:08:38.951 --> 00:08:47.000
Julia wants to create a tag for that version. Let's see how to do this in the next clip.

