1
00:00:00,940 --> 00:00:01,260
[Autogenerated] Okay,

2
00:00:01,260 --> 00:00:03,140
welcome to this clip where we're going to start

3
00:00:03,140 --> 00:00:05,570
looking at Amazon guard duty now,

4
00:00:05,570 --> 00:00:10,790
AWS defines guard duty as a continuous security monitoring service that

5
00:00:10,790 --> 00:00:14,350
analyzes and processes the following data sources.

6
00:00:14,350 --> 00:00:19,480
We see VPC flow logs, cloud trail event logs and then DNS logs.

7
00:00:19,480 --> 00:00:23,790
Okay, but what does guard duty really do while the first thing is,

8
00:00:23,790 --> 00:00:29,900
it uses machine learning to identify malicious attacks on your AWS account.

9
00:00:29,900 --> 00:00:34,900
Now it does this by utilizing different threat feeds which can contain

10
00:00:34,900 --> 00:00:40,380
resource is like lists of bad I peas or malicious i peas or maybe some

11
00:00:40,380 --> 00:00:43,700
reported abnormalities within accounts.

12
00:00:43,700 --> 00:00:47,460
So they're using all of this built upon data to identify these

13
00:00:47,460 --> 00:00:50,170
different malicious attacks automatically.

14
00:00:50,170 --> 00:00:53,170
Now, it also scans for exposed credentials,

15
00:00:53,170 --> 00:00:56,320
privilege, escalations and malicious traffic.

16
00:00:56,320 --> 00:00:57,110
So basically,

17
00:00:57,110 --> 00:01:02,010
it's gonna be able to see if any access keys static credentials were exposed.

18
00:01:02,010 --> 00:01:07,900
If you've had unwanted privilege escalations to maybe admin level roles or

19
00:01:07,900 --> 00:01:12,830
if you have some type of incoming malicious traffic into your AWS account

20
00:01:12,830 --> 00:01:17,640
and then lastly it's going to be able to detect compromise resource is as

21
00:01:17,640 --> 00:01:19,820
well as unauthorized deployments.

22
00:01:19,820 --> 00:01:23,230
So if someone does get into your account and they compromise or resource

23
00:01:23,230 --> 00:01:28,010
is and maybe start deploying tons and tons of unauthorized resource is

24
00:01:28,010 --> 00:01:31,140
just incurring an enormous amount of cost.

25
00:01:31,140 --> 00:01:33,610
Guard duty is going to be able to alert on that.

26
00:01:33,610 --> 00:01:36,740
So let's check out guard duty in the console.

27
00:01:36,740 --> 00:01:39,270
Now, when you load up guard duty for the first time,

28
00:01:39,270 --> 00:01:41,560
you get brought to this getting started page.

29
00:01:41,560 --> 00:01:44,310
Now, this is a pretty familiar page for most of us,

30
00:01:44,310 --> 00:01:46,540
and it just has the getting started guide,

31
00:01:46,540 --> 00:01:48,480
the different steps that go along with it.

32
00:01:48,480 --> 00:01:51,660
And then we have documentation in support here at the bottom.

33
00:01:51,660 --> 00:01:54,140
So I'm gonna going click on getting started and you can

34
00:01:54,140 --> 00:01:56,580
see were greeted with a welcome screen.

35
00:01:56,580 --> 00:01:58,970
Now the first thing is going to do is warn us about

36
00:01:58,970 --> 00:02:00,780
the service permissions needed.

37
00:02:00,780 --> 00:02:04,020
So we are granting guard duty permission that analyze our

38
00:02:04,020 --> 00:02:09,300
cloud trail logs are VPC flow logs in our DNS query logs

39
00:02:09,300 --> 00:02:10,640
to generate these findings,

40
00:02:10,640 --> 00:02:13,600
which is kind of what we discussed in that first slide.

41
00:02:13,600 --> 00:02:17,300
An important note here is that we can suspend or disabled guard duty at

42
00:02:17,300 --> 00:02:21,920
any time to stop it from processing and underneath that you can see when

43
00:02:21,920 --> 00:02:24,240
we enable guard duty for the first time,

44
00:02:24,240 --> 00:02:28,110
your account is automatically enrolled in a 30 day free trial.

45
00:02:28,110 --> 00:02:31,990
And I can tell you from experience that guard duty can get pretty expensive.

46
00:02:31,990 --> 00:02:34,240
If you're using in all of your different regions,

47
00:02:34,240 --> 00:02:37,720
it adds up pretty quickly, but it is a great tool to use.

48
00:02:37,720 --> 00:02:39,200
So before we enable this,

49
00:02:39,200 --> 00:02:43,040
we can actually view this service role permissions that are going to be needed.

50
00:02:43,040 --> 00:02:44,650
You can see the permissions here.

51
00:02:44,650 --> 00:02:46,720
And then we also have our trust relationship,

52
00:02:46,720 --> 00:02:50,810
which is saying that hey, guard duty is allowed to assume this role,

53
00:02:50,810 --> 00:02:53,330
so I don't see anything funky in the permissions.

54
00:02:53,330 --> 00:02:56,680
It looks like it could basically just describe our images and instances.

55
00:02:56,680 --> 00:03:00,250
So I'm gonna close this out and let's go ahead and enable this.

56
00:03:00,250 --> 00:03:02,950
Now we can see were brought to our guard duty dashboard.

57
00:03:02,950 --> 00:03:05,520
So we're in our free trial mode here, as it's noted.

58
00:03:05,520 --> 00:03:07,320
And if I click on this, you're gonna see hate.

59
00:03:07,320 --> 00:03:11,120
We have basically 29 more days of our free trial here,

60
00:03:11,120 --> 00:03:14,670
and then eventually, after this gets going a little bit more,

61
00:03:14,670 --> 00:03:19,640
they're going to be able to provide us an estimated cost after our trial ends.

62
00:03:19,640 --> 00:03:21,980
So you're not gonna see this updated in this clip?

63
00:03:21,980 --> 00:03:26,120
But if you enable this on your account, you will see this after a few days.

64
00:03:26,120 --> 00:03:30,400
We can also see here that we can have different accounts underneath this.

65
00:03:30,400 --> 00:03:31,400
So this is handy.

66
00:03:31,400 --> 00:03:34,130
For if you have organizations where you're having a

67
00:03:34,130 --> 00:03:36,100
ton of different sub accounts,

68
00:03:36,100 --> 00:03:39,340
you can have one master account that has all of your different

69
00:03:39,340 --> 00:03:42,870
member accounts underneath it in one location.

70
00:03:42,870 --> 00:03:46,420
So you basically send out an invite to these sub accounts,

71
00:03:46,420 --> 00:03:50,790
and they accept it in order to be added to your account screen here.

72
00:03:50,790 --> 00:03:53,350
The next thing we see here is lists right above that.

73
00:03:53,350 --> 00:03:57,070
And this is where you can essentially white list certain items.

74
00:03:57,070 --> 00:03:59,770
So the first thing we see here is trusted I p's.

75
00:03:59,770 --> 00:04:03,220
So it's going to essentially ignore any eyepiece that

76
00:04:03,220 --> 00:04:05,590
you adhere in your trusted I P list,

77
00:04:05,590 --> 00:04:08,740
and it's not going to report on any of those findings.

78
00:04:08,740 --> 00:04:11,350
The next thing underneath that is the threat, Lis.

79
00:04:11,350 --> 00:04:11,570
Now,

80
00:04:11,570 --> 00:04:15,210
the threat list is going to essentially allow you to add a

81
00:04:15,210 --> 00:04:19,910
known malicious I P address toe a list so that guard duty can

82
00:04:19,910 --> 00:04:22,250
immediately generate findings on it.

83
00:04:22,250 --> 00:04:25,620
It's not gonna have to take a little bit of time and generate some

84
00:04:25,620 --> 00:04:28,340
type of threat model based on some machine learning,

85
00:04:28,340 --> 00:04:30,840
because you can specify immediately.

86
00:04:30,840 --> 00:04:34,350
So it kind of helps guard duty out and speed the process up.

87
00:04:34,350 --> 00:04:36,250
The next thing we see here is our settings.

88
00:04:36,250 --> 00:04:37,180
So if we go to that,

89
00:04:37,180 --> 00:04:41,050
we can see our about guard duty section weaken CR permissions,

90
00:04:41,050 --> 00:04:44,030
which is the service role that we gave earlier.

91
00:04:44,030 --> 00:04:46,190
The next thing we see is our cloudwatch events,

92
00:04:46,190 --> 00:04:50,520
so we can automatically send notifications to cloudwatch events here

93
00:04:50,520 --> 00:04:53,680
and then we can set up or frequency that we want.

94
00:04:53,680 --> 00:04:56,810
So new findings are going to be updated immediately.

95
00:04:56,810 --> 00:05:00,260
You can see here and they put a caveat of hate that's really within

96
00:05:00,260 --> 00:05:04,400
five minutes and then any updated findings we can specify so we can

97
00:05:04,400 --> 00:05:09,360
send it to a default of every six hours or weaken set these one hour

98
00:05:09,360 --> 00:05:11,340
or maybe every 15 minutes.

99
00:05:11,340 --> 00:05:14,270
And then the next thing we see is our sample findings.

100
00:05:14,270 --> 00:05:17,320
So this is where we can generate sample findings to help us

101
00:05:17,320 --> 00:05:20,780
visualize and analyze the different types of findings that

102
00:05:20,780 --> 00:05:23,620
are produced by guard duty, so it just kind of helps us South.

103
00:05:23,620 --> 00:05:26,050
Let's just go and click this button here and we can see that.

104
00:05:26,050 --> 00:05:28,880
Hey, it successfully generated sample findings,

105
00:05:28,880 --> 00:05:30,260
so we'll go over that in a minute.

106
00:05:30,260 --> 00:05:34,480
But let me continue on this page and we can see we can suspend guard duty.

107
00:05:34,480 --> 00:05:39,100
So when you suspend, it stops your monitoring and doesn't generate new findings.

108
00:05:39,100 --> 00:05:39,360
Now,

109
00:05:39,360 --> 00:05:41,620
a key part of this is that you're not going to be

110
00:05:41,620 --> 00:05:44,440
charged when the service is suspended.

111
00:05:44,440 --> 00:05:45,840
So if you want to take a break from it,

112
00:05:45,840 --> 00:05:49,240
you can just suspend it and you're not gonna be billed for that.

113
00:05:49,240 --> 00:05:51,000
The next thing we can do is disable it.

114
00:05:51,000 --> 00:05:54,580
So if you want to disable it completely, you can do this as well.

115
00:05:54,580 --> 00:05:58,190
And obviously, a W s will not bill you if you disable it now.

116
00:05:58,190 --> 00:06:01,560
The big difference between these two is that when you suspend it,

117
00:06:01,560 --> 00:06:03,860
your existing findings are going to stay there.

118
00:06:03,860 --> 00:06:07,640
You don't have to reconfigure your settings and rediscover your findings.

119
00:06:07,640 --> 00:06:10,550
But when you disable guard duty, you're going to lose everything.

120
00:06:10,550 --> 00:06:13,110
You don't recover anything if you decide to re

121
00:06:13,110 --> 00:06:14,960
enable it and you can see they say,

122
00:06:14,960 --> 00:06:19,430
Here you can save or you should save a copy of existing findings.

123
00:06:19,430 --> 00:06:22,830
So with that understood, let's actually look at these findings here,

124
00:06:22,830 --> 00:06:23,930
and you can see that these air,

125
00:06:23,930 --> 00:06:26,510
the generated ones that we had because we obviously don't

126
00:06:26,510 --> 00:06:28,360
really have any traffic on this account.

127
00:06:28,360 --> 00:06:30,200
But you can see how they classify everything.

128
00:06:30,200 --> 00:06:34,240
So these air sample events that are found v a guard duty.

129
00:06:34,240 --> 00:06:36,610
You can see it looks like we have a tour I p caller.

130
00:06:36,610 --> 00:06:37,760
And when you hover over it,

131
00:06:37,760 --> 00:06:40,490
you see the message in the reason why and you can see it

132
00:06:40,490 --> 00:06:42,330
pretty much scans for a lot of stuff.

133
00:06:42,330 --> 00:06:46,570
A tor relay, our cloud trail logging was disabled by a user,

134
00:06:46,570 --> 00:06:48,050
and then you can even see we actually hate.

135
00:06:48,050 --> 00:06:49,080
We have a ______ here,

136
00:06:49,080 --> 00:06:52,390
and it was on our particular instance here of I and then

137
00:06:52,390 --> 00:06:55,810
repeating nines so it gets very detailed,

138
00:06:55,810 --> 00:06:59,990
and it can actually scan pretty deeply into our resource is within our account.

139
00:06:59,990 --> 00:07:02,480
Let me go and click on one of these and then you can

140
00:07:02,480 --> 00:07:04,420
see when I do that and I select it,

141
00:07:04,420 --> 00:07:06,870
it's gonna populate our screen over here on the right,

142
00:07:06,870 --> 00:07:08,750
we can see our unique finding I d.

143
00:07:08,750 --> 00:07:11,920
And then it gives us a reason or a status of what's going on.

144
00:07:11,920 --> 00:07:14,620
We can see that this instance is attempting to query domain

145
00:07:14,620 --> 00:07:17,350
names that resemble Expo traded data.

146
00:07:17,350 --> 00:07:19,520
So this could be an indication of a compromise.

147
00:07:19,520 --> 00:07:22,350
Instance they classify as, ah, high severity.

148
00:07:22,350 --> 00:07:24,730
It gives us the amount of times it was hit,

149
00:07:24,730 --> 00:07:28,240
the region, the resource and then the resource affected.

150
00:07:28,240 --> 00:07:31,320
Underneath that which shows the resource role is an actor.

151
00:07:31,320 --> 00:07:35,440
The instant state, what image it is the different daisies,

152
00:07:35,440 --> 00:07:36,840
what type of instance,

153
00:07:36,840 --> 00:07:41,600
and really just all types of very detailed information that

154
00:07:41,600 --> 00:07:45,630
we can use to isolate and maybe fix or just completely

155
00:07:45,630 --> 00:07:47,840
remove this particular resource.

156
00:07:47,840 --> 00:07:49,120
So this is a very,

157
00:07:49,120 --> 00:07:53,440
very powerful tool that a lot of organizations use when they

158
00:07:53,440 --> 00:07:57,010
need to enable some type of overall compliance monitoring

159
00:07:57,010 --> 00:07:59,150
from a centralized standpoint.

160
00:07:59,150 --> 00:08:01,790
So I do recommend you go ahead and check guard duty out,

161
00:08:01,790 --> 00:08:04,860
especially if you're in enterprise account and play around

162
00:08:04,860 --> 00:08:06,630
with it to see what works best for you.

163
00:08:06,630 --> 00:08:08,010
That's gonna do it for this clip.

164
00:08:08,010 --> 00:08:16,000
We're gonna wrap it up and then we'll wrap up this section overall in the next clip with In I Am Best Practices Review

