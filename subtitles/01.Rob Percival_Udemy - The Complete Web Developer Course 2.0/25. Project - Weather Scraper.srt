1
00:00:00,480 --> 00:00:06,570
Congratulations on making it to the end of the PH P.S. of the complete web developer course you've now

2
00:00:06,570 --> 00:00:12,420
covered a huge range of different programming structures and variable and array types as well as doing

3
00:00:12,420 --> 00:00:17,720
some pretty advanced things like sending emails including files and getting the contents of other Yawara

4
00:00:17,720 --> 00:00:18,270
else.

5
00:00:18,270 --> 00:00:22,490
You should also be in a position that pretty much anything you wanted to know how to do in PE.

6
00:00:22,620 --> 00:00:24,980
You could find out with a quick Google.

7
00:00:25,180 --> 00:00:28,340
So on that note welcome to the HP challenge.

8
00:00:28,470 --> 00:00:29,060
And this is it.

9
00:00:29,070 --> 00:00:34,350
We're going to create a what's the weather web page whether you can put in the name of any city.

10
00:00:34,470 --> 00:00:41,110
So say Dubai for example and the weather for that city will be returned.

11
00:00:41,130 --> 00:00:45,630
You see it looks nice and pretty obviously using bootstrap here and I've got a nice background image

12
00:00:45,840 --> 00:00:47,470
from an splash as well.

13
00:00:47,640 --> 00:00:53,410
We're also pretty neat if they put in an era.

14
00:00:54,210 --> 00:00:58,810
Then we get a nice error message displaying as an alert as well.

15
00:00:59,520 --> 00:01:04,830
So you may be wondering how are we getting the weather for all of these cities then stored on our database

16
00:01:04,830 --> 00:01:05,940
or anything anywhere.

17
00:01:05,940 --> 00:01:14,310
So what we're doing is we're getting the contents of another Web site and that is whether hyphen forecast

18
00:01:14,560 --> 00:01:16,330
dot com.

19
00:01:16,350 --> 00:01:21,840
And the reason I've chosen this particular site is that if we get the forecast for a particular city

20
00:01:22,350 --> 00:01:27,840
you can see that the name of that city is put directly in the world.

21
00:01:27,900 --> 00:01:35,130
So if we got the contents of this whole you are well as we know how to do then hidden in there.

22
00:01:35,130 --> 00:01:38,580
We've got the weather summary which is what we want.

23
00:01:38,610 --> 00:01:44,310
So what your code is going to need to do is get the contents of this you Arel and then extract this

24
00:01:44,310 --> 00:01:45,830
bit of text from it.

25
00:01:46,260 --> 00:01:48,460
Now that last bit we haven't quite done.

26
00:01:48,480 --> 00:01:52,480
We've done similar things but not quite extracting text from within a string.

27
00:01:52,530 --> 00:01:57,180
So you're going to need to do a little bit of googling there to figure out how that's done or of course

28
00:01:57,240 --> 00:01:59,530
if you have problems you can watch me do it.

29
00:01:59,580 --> 00:02:04,080
One word of warning before I set you off although this is a great challenge for practicing all that

30
00:02:04,080 --> 00:02:05,730
we've used in HP.

31
00:02:05,730 --> 00:02:11,400
It's not a great use case for a real live production web site for two main reasons.

32
00:02:11,400 --> 00:02:13,880
First off you're dependent on weather.

33
00:02:13,880 --> 00:02:19,380
I often forecast dotcom not only remaining live but remaining in the same format that it does now.

34
00:02:19,470 --> 00:02:24,450
If they were to change their code or change the layout of that page that would likely break your page.

35
00:02:24,450 --> 00:02:28,530
So that's not a great system for a live and popular Web site.

36
00:02:28,770 --> 00:02:34,080
Secondly if you if your web site does become popular then weather dash forecast outcome will not be

37
00:02:34,080 --> 00:02:39,810
happy with you because you're essentially taking their data and then displaying it to the user without

38
00:02:39,840 --> 00:02:42,580
giving any credits to weather forecast com themselves.

39
00:02:42,600 --> 00:02:46,240
So they may well block your website if it gets too popular.

40
00:02:46,410 --> 00:02:51,180
So it's a good thing to practice and it can be very useful in other ways if you want to get a large

41
00:02:51,180 --> 00:02:57,210
amount of data from a web page for example that's known as scraping and they use very similar techniques

42
00:02:57,240 --> 00:02:59,780
as to what we're going to do in this challenge.

43
00:03:00,000 --> 00:03:04,380
But if you did want to create something like a Web site you're much better off using what's known as

44
00:03:04,380 --> 00:03:10,320
an API which is set up for this sort of site and we'll look at in a couple of sections time.

45
00:03:10,320 --> 00:03:11,580
All right.

46
00:03:12,120 --> 00:03:13,070
So that's it.

47
00:03:13,140 --> 00:03:14,720
This is what you're creating.

48
00:03:14,730 --> 00:03:30,040
Best of luck hope because well effort.

49
00:03:30,060 --> 00:03:30,520
All right then.

50
00:03:30,540 --> 00:03:31,770
Here we go.

51
00:03:31,770 --> 00:03:37,320
So I'm going to start by setting up my user interface and I'll do that of course by searching for bootstrap

52
00:03:37,320 --> 00:03:41,520
for and then I'm going to get the template

53
00:03:44,050 --> 00:03:52,340
set up K say download bootstrap and then getting started.

54
00:03:52,570 --> 00:03:58,190
Scroll down and here it is number that might be in a slightly different place on the bootstrap website

55
00:03:58,220 --> 00:03:58,790
V.

56
00:04:02,080 --> 00:04:03,980
K. lovely Let's have a look.

57
00:04:05,510 --> 00:04:06,580
We've got our beat strapped.

58
00:04:06,590 --> 00:04:07,500
Hello world.

59
00:04:08,730 --> 00:04:10,640
Fantastic.

60
00:04:10,650 --> 00:04:12,870
So let's just pop in a title this time

61
00:04:19,490 --> 00:04:24,140
because it's always good to have one where the scraper should pop up that lovely

62
00:04:27,100 --> 00:04:29,810
And then we're going to want a nice background image.

63
00:04:30,010 --> 00:04:34,270
So let's go to splash dot com and see what we can find.

64
00:04:36,420 --> 00:04:37,110
Let's have a look.

65
00:04:37,110 --> 00:04:45,030
We're looking for something sort of fairly plain and simple and maybe a little bit Wetherbee

66
00:04:49,310 --> 00:04:51,760
not quite there yet I don't think

67
00:04:57,150 --> 00:04:58,790
that's not too bad.

68
00:04:59,100 --> 00:05:00,190
Let's keep looking.

69
00:05:02,070 --> 00:05:03,010
When we've seen before

70
00:05:09,630 --> 00:05:10,890
it's pretty good.

71
00:05:11,040 --> 00:05:16,190
It's got that big to the bottom or this one that looks good.

72
00:05:17,100 --> 00:05:24,590
Pretty relevant to weather but not too much distraction in the background.

73
00:05:24,800 --> 00:05:26,910
Great.

74
00:05:26,950 --> 00:05:28,000
So let's download.

75
00:05:28,000 --> 00:05:28,660
That's

76
00:05:31,230 --> 00:05:37,930
so I'm just going to control a click or right click and save image as and I'm going to save it in the

77
00:05:38,110 --> 00:05:45,280
HP folder on my hard drive and I'll just call it background.

78
00:05:45,280 --> 00:05:46,190
There we go.

79
00:05:46,600 --> 00:05:47,230
So that's saved.

80
00:05:47,230 --> 00:05:49,480
Remember though that we're working on the server.

81
00:05:49,720 --> 00:05:58,420
So I need to go back over to Firefox and fire of T-P refresh find my background or jpg file and then

82
00:05:58,990 --> 00:06:05,730
upload it just before we upload that if we just check it is three megabytes three thousand kilobytes

83
00:06:06,000 --> 00:06:08,680
which is pretty big for a photo on the web.

84
00:06:08,790 --> 00:06:11,700
So let's just resize it for megabytes.

85
00:06:11,820 --> 00:06:12,260
In fact

86
00:06:15,280 --> 00:06:21,480
again we can do that pretty easily on a Mac in Preview in Windows you can use the photo editor.

87
00:06:21,880 --> 00:06:27,160
I'm just going to go to tools and adjust size.

88
00:06:27,380 --> 00:06:30,390
I mean yeah we don't need anywhere near 7000 pixels.

89
00:06:30,600 --> 00:06:36,720
So let's bring it down to 2000 that's already plenty of pixels for us.

90
00:06:37,140 --> 00:06:41,890
And then I'm just going to say that's as it is.

91
00:06:45,650 --> 00:06:53,720
K and then jump back over to the fire of t.p and we can see you now 300 kilobytes a lot more reasonable

92
00:06:55,870 --> 00:07:04,120
that we get right I have now uploaded that to the service so we should be able to access it in our script.

93
00:07:05,650 --> 00:07:06,430
That stee that

94
00:07:10,280 --> 00:07:19,600
so I'll just do a quick check straight off image S.R. see it coils and a should be at background dot

95
00:07:20,680 --> 00:07:21,470
JPAC.

96
00:07:25,240 --> 00:07:28,760
Just to make sure as usual that everything's connected up right.

97
00:07:30,460 --> 00:07:31,490
And there we go.

98
00:07:31,990 --> 00:07:34,320
So you can see it's definitely plenty big enough.

99
00:07:34,330 --> 00:07:36,680
Might even want to get it smaller than that on a live site.

100
00:07:36,880 --> 00:07:38,280
But this will do it for a test.

101
00:07:38,380 --> 00:07:44,290
Now as I mentioned at the beginning we wanted a full screen but not stretched out background.

102
00:07:44,410 --> 00:07:45,910
That's something that we haven't done before.

103
00:07:46,120 --> 00:07:49,560
So let's have a google and see if we can figure out how to do it.

104
00:07:51,700 --> 00:07:56,910
So something like HMO full page background that day

105
00:08:01,430 --> 00:08:08,650
perfect full page background image fantastic.

106
00:08:08,700 --> 00:08:12,090
That sounds great you've got a nice new methods.

107
00:08:12,100 --> 00:08:16,330
Yes I want a full page background brilliance.

108
00:08:16,460 --> 00:08:18,410
But if CSSA three.

109
00:08:18,800 --> 00:08:22,160
Another advantage of doing this is that you learn some new techniques as well.

110
00:08:26,380 --> 00:08:26,760
OK.

111
00:08:26,770 --> 00:08:38,620
So let's put in some internal styles.

112
00:08:38,690 --> 00:08:42,070
So it's actually just the HTL element that we're going to be editing here.

113
00:08:45,730 --> 00:08:50,640
And all I should need to change there is the file name is now background.

114
00:08:50,740 --> 00:08:51,650
Jay Pech

115
00:08:55,700 --> 00:08:56,820
All right let's have a look.

116
00:08:59,010 --> 00:09:00,320
Just get rid of that image

117
00:09:06,580 --> 00:09:08,940
down here and we'll get rid of hello world as well.

118
00:09:12,460 --> 00:09:13,990
Wonderful.

119
00:09:14,050 --> 00:09:19,600
So that looks really nice perfectly sized to our screen and it doesn't look badly stretched.

120
00:09:20,110 --> 00:09:20,960
All right.

121
00:09:21,340 --> 00:09:22,050
It's going well.

122
00:09:22,120 --> 00:09:25,040
Let's start adding some content.

123
00:09:26,780 --> 00:09:32,090
So I'm going to put everything in sight.

124
00:09:33,100 --> 00:09:34,250
I can take the day of

125
00:09:37,880 --> 00:09:39,460
and I'm going to start with an H1

126
00:09:42,620 --> 00:09:50,690
which will say what's the weather so let's have a little look at that.

127
00:09:51,390 --> 00:09:51,900
OK.

128
00:09:51,900 --> 00:09:52,740
Not bad.

129
00:09:52,860 --> 00:09:57,790
But first I wanted to be centered and I definitely don't want it to have a white background.

130
00:09:57,900 --> 00:09:59,070
So let's set

131
00:10:02,480 --> 00:10:13,780
the background of body which remember we'll set the background of everything within it as well to none.

132
00:10:16,050 --> 00:10:18,320
And that should get rid of this problem.

133
00:10:18,700 --> 00:10:22,700
So now everything is going to be on top of our nice background image.

134
00:10:26,690 --> 00:10:35,290
And let's see if I can to everything in container using text.

135
00:10:35,290 --> 00:10:42,260
The line is sent to great looking good so far.

136
00:10:42,280 --> 00:10:44,350
Let's just move that down a little bit

137
00:10:48,320 --> 00:10:56,100
we'll give it a margin top of 200 pixels.

138
00:10:56,510 --> 00:11:00,290
OK that's fine for now we may want to play around with the positioning when we've got the rest of our

139
00:11:00,290 --> 00:11:04,270
content in but that will do for now.

140
00:11:05,060 --> 00:11:15,790
So under these what's underneath what's the weather that's have a paragraph tag into the name of a city.

141
00:11:19,970 --> 00:11:24,400
And then we'll have our form.

142
00:11:24,470 --> 00:11:32,090
So as we're adding a bootstrap component always good to get the code direct from Bootstrap.

143
00:11:32,090 --> 00:11:34,630
Otherwise we're likely to forget something important.

144
00:11:34,640 --> 00:11:36,960
Not that our form is going to be particularly complicated.

145
00:11:41,140 --> 00:11:47,400
But in fact let's just take the default form we can get rid of what we don't need.

146
00:11:52,340 --> 00:11:56,960
OK great so we actually once is

147
00:12:00,030 --> 00:12:03,810
that first input and

148
00:12:06,690 --> 00:12:08,410
the submit button.

149
00:12:09,210 --> 00:12:17,850
And in fact we could put this as a label.

150
00:12:18,130 --> 00:12:20,120
We'll see if that works out for us.

151
00:12:20,830 --> 00:12:29,400
So this is going to be a label for city that type is going to be text email the ID is going to be city

152
00:12:30,760 --> 00:12:42,060
and the placeholder will put e.g. London comma here to give them an idea of what we're after and when

153
00:12:42,140 --> 00:12:46,020
we're worried about sharing our email address here.

154
00:12:46,960 --> 00:12:48,420
So let's take a look.

155
00:12:50,830 --> 00:12:51,510
OK.

156
00:12:51,920 --> 00:12:56,560
Nice but a bit too wide there I think it's a little bit ridiculous.

157
00:12:56,810 --> 00:13:02,300
So let's limit that fact we can just limit the width of our container.

158
00:13:03,250 --> 00:13:09,280
Let's try something like 350 pixels a little narrower

159
00:13:13,940 --> 00:13:15,110
400 pixels

160
00:13:18,750 --> 00:13:24,850
built in our 450 that we get that looks better.

161
00:13:25,030 --> 00:13:32,890
So we're looking is if I enter a city name however it doesn't actually submit through as you can see

162
00:13:32,890 --> 00:13:34,040
there.

163
00:13:34,220 --> 00:13:35,740
And why is that.

164
00:13:36,160 --> 00:13:42,220
It's because we're missing a name for our input.

165
00:13:42,220 --> 00:13:45,520
So have a name of a city as well.

166
00:13:47,870 --> 00:13:53,840
So now if we put London in them we get London in.

167
00:13:53,900 --> 00:13:56,130
You are right up the top.

168
00:13:56,250 --> 00:13:59,940
I would like to just spread things out a little bit.

169
00:13:59,940 --> 00:14:13,370
So I think I'll add a bit of styling for my inputs which will give it a margin of let's say 20 pixels

170
00:14:13,370 --> 00:14:14,400
on the top and bottom.

171
00:14:14,480 --> 00:14:21,000
We don't need any margin on the left or right should spread things out a little bit more nicely quite.

172
00:14:21,140 --> 00:14:22,610
I'm happy with that.

173
00:14:22,610 --> 00:14:28,250
So now the fun bit as I mentioned at the beginning we're going to use a Web site called weather dash

174
00:14:28,310 --> 00:14:37,270
forecast or come here we go and let's go for the weather forecast for London.

175
00:14:37,270 --> 00:14:43,900
So as I mentioned what we want is to extract this forecast here.

176
00:14:44,500 --> 00:14:49,560
So for now let's not worry about that in the user.

177
00:14:49,630 --> 00:14:54,940
But we'll just get the London weather every time and let's get the contents of this page and take a

178
00:14:54,940 --> 00:14:58,310
look at it so that we can work out how to extract what we need.

179
00:15:02,070 --> 00:15:07,850
A case so we're going to do this at the very top of our script.

180
00:15:10,420 --> 00:15:15,150
And we'll do this if someone has requested a city

181
00:15:19,700 --> 00:15:32,400
then we'll set up a forecast page and this is going to be file get contents and the file that we want

182
00:15:32,400 --> 00:15:44,240
to get the contents of is that one and for now we'll just echo forecast page to make sure that we've

183
00:15:44,240 --> 00:15:49,010
got it and to see what the code is.

184
00:15:49,710 --> 00:15:51,870
OK did I write something wrong.

185
00:15:51,880 --> 00:15:52,560
Yes I did.

186
00:15:52,570 --> 00:15:54,570
I spelt it wrong in the first place.

187
00:15:54,600 --> 00:15:56,900
Aggregate those warnings are really handy.

188
00:15:59,310 --> 00:15:59,850
Great.

189
00:16:00,150 --> 00:16:01,700
So we've got to code.

190
00:16:01,710 --> 00:16:04,710
It's kind of mixing weirdly with our page now.

191
00:16:04,960 --> 00:16:07,460
But let's have a look at the source.

192
00:16:08,160 --> 00:16:09,830
So I'm going to use command.

193
00:16:09,910 --> 00:16:16,470
You can also right click and view source and then if you want to find the bit you're interested in.

194
00:16:16,620 --> 00:16:21,080
We want the weather forecast summary.

195
00:16:21,570 --> 00:16:31,150
So I'm going to use Command F or control f on Windows and we want weather forecast summary Let's have

196
00:16:31,150 --> 00:16:31,680
a look.

197
00:16:34,340 --> 00:16:35,060
OK.

198
00:16:35,170 --> 00:16:41,250
So this is what we want we want to extract that bit there.

199
00:16:41,630 --> 00:16:48,140
So we want to get rid of everything before this selected part and we want to get rid of everything after

200
00:16:48,140 --> 00:16:48,980
as well.

201
00:16:49,280 --> 00:16:51,300
As I mentioned that's something that we haven't done yet.

202
00:16:51,320 --> 00:16:56,560
So let's think of a sensible thing to Google to figure out how to do it.

203
00:16:56,570 --> 00:16:58,610
Remember the AGM is just a string.

204
00:16:58,640 --> 00:17:00,980
And what we're trying to do is split it up.

205
00:17:01,130 --> 00:17:13,400
So let's see if we can get anything as a result for PH P and split up string split a string by a string.

206
00:17:13,460 --> 00:17:16,350
That sounds pretty perfect to us.

207
00:17:16,380 --> 00:17:17,080
Let's have a look.

208
00:17:17,130 --> 00:17:22,100
So the explode functions even got a cool name.

209
00:17:22,300 --> 00:17:26,220
I always like to scroll straight down to an example because that makes it a lot clearer.

210
00:17:26,630 --> 00:17:33,010
Aha ha so it looks like with the explode function I can put in a string and then another string and

211
00:17:33,010 --> 00:17:35,580
it will split up that string into an array.

212
00:17:36,620 --> 00:17:39,320
By whatever I put in the string.

213
00:17:39,890 --> 00:17:41,760
So that seems pretty perfect.

214
00:17:42,410 --> 00:17:43,910
Let's take a look.

215
00:17:45,300 --> 00:17:47,580
Said the bit before.

216
00:17:47,960 --> 00:17:53,630
What we want to get rid of is that but then that looks a bit generic to me.

217
00:17:54,470 --> 00:17:58,880
So I think that might appear in the page more than once so I'm going to select more of them.

218
00:17:58,880 --> 00:18:03,350
That's I suspect this bit will only appear in the page once.

219
00:18:03,590 --> 00:18:07,180
So I'm just going to copy that and just do a search for it as well.

220
00:18:09,850 --> 00:18:13,180
I'll actually appears several times.

221
00:18:13,340 --> 00:18:14,390
So that's no good.

222
00:18:14,400 --> 00:18:21,510
I need to select a bit more so London is going to change because we're always going to be looking for

223
00:18:21,510 --> 00:18:21,920
London.

224
00:18:21,930 --> 00:18:29,060
So let's select up to three day weather forecast.

225
00:18:29,060 --> 00:18:33,010
Surely that will only appear once it does.

226
00:18:33,320 --> 00:18:40,040
So what we're going to do is we're going to explode the string using this as our many string to explain

227
00:18:40,040 --> 00:18:45,710
it with and then then array where the zeroth item is everything before.

228
00:18:45,860 --> 00:18:52,700
What we want and the first item is starting with what we want and then the rest of the page which will

229
00:18:52,700 --> 00:18:55,440
need to get rid of later on.

230
00:18:55,460 --> 00:18:56,910
All right let's give that a try.

231
00:19:02,060 --> 00:19:07,590
So we want say create Let's call it a page array.

232
00:19:08,090 --> 00:19:16,040
And this is going to be explode and then we want to explode it by that string there.

233
00:19:16,100 --> 00:19:22,520
Notice I've used single quotes there because there are some double quotes in the string itself.

234
00:19:22,550 --> 00:19:24,040
So it makes life easier.

235
00:19:24,530 --> 00:19:26,630
I don't have to escape them.

236
00:19:27,330 --> 00:19:32,580
And then the thing that we want to explode is forecast page.

237
00:19:32,620 --> 00:19:33,450
All right.

238
00:19:33,760 --> 00:19:45,870
So now we have a look at page array one should start with exactly the code that we want and there we

239
00:19:45,870 --> 00:19:50,940
go you see we've got some weirdness down there which we're going to get rid of now but it does start

240
00:19:51,000 --> 00:19:55,450
exactly where we wanted to great.

241
00:19:55,470 --> 00:19:56,520
So we're getting that.

242
00:19:56,730 --> 00:20:03,200
Let's now have a look at the beginning of the part that we want to get rid of and that is this end of

243
00:20:03,210 --> 00:20:04,130
span here.

244
00:20:04,350 --> 00:20:06,620
So three span closes.

245
00:20:06,630 --> 00:20:13,320
I don't need to be so careful about whether that appears multiple times in the page anymore because

246
00:20:13,410 --> 00:20:15,510
all I want to do is get rid of the first one.

247
00:20:15,540 --> 00:20:18,120
We don't really care what happens further on down here.

248
00:20:22,800 --> 00:20:26,750
So we need to do another explained.

249
00:20:26,940 --> 00:20:29,380
So let's have a second page.

250
00:20:29,400 --> 00:20:30,650
Right.

251
00:20:31,510 --> 00:20:38,960
And this is going to be explode again and we're going to expose it explain it by that little string.

252
00:20:39,120 --> 00:20:41,410
And the thing that we want to explode is page.

253
00:20:41,610 --> 00:20:44,010
What.

254
00:20:44,670 --> 00:20:45,810
All right.

255
00:20:45,910 --> 00:20:55,850
Now then second page Auray zero should be exactly the code that we want.

256
00:20:57,740 --> 00:21:02,570
There it is wonderful perfect.

257
00:21:02,580 --> 00:21:10,700
So what we need to do is put that in our output and display it nicely to the user.

258
00:21:11,180 --> 00:21:14,020
And let's give it a nice a variable name as well.

259
00:21:14,340 --> 00:21:21,360
So I'll just call it whether weather is equal to that.

260
00:21:21,440 --> 00:21:26,420
And then we're going to display the weather underneath the submit button down here.

261
00:21:29,470 --> 00:21:31,180
So we're going to need to do that

262
00:21:38,040 --> 00:21:40,630
so we'll have I.D. is equal to weather.

263
00:21:42,180 --> 00:21:44,850
And then we can just put some ph P right in that

264
00:21:49,640 --> 00:21:53,430
to say if we have some weather

265
00:22:00,170 --> 00:22:02,610
then we want to display the weather.

266
00:22:03,230 --> 00:22:06,630
And we're going to do that with a nice beat strap as well.

267
00:22:06,710 --> 00:22:10,830
So it looks pretty.

268
00:22:10,870 --> 00:22:12,480
So let's have a success.

269
00:22:12,500 --> 00:22:12,960
Let

270
00:22:18,560 --> 00:22:20,140
again I'm using single quites

271
00:22:22,860 --> 00:22:24,300
so I didn't have to worry about

272
00:22:28,750 --> 00:22:32,070
any double quotes in the string itself.

273
00:22:33,040 --> 00:22:36,380
And then we just want to get the weather right in there.

274
00:22:39,850 --> 00:22:40,980
So let's have a look.

275
00:22:43,210 --> 00:22:45,230
Hasn't displayed that nicely for me.

276
00:22:45,260 --> 00:22:46,060
Not a problem.

277
00:22:50,940 --> 00:22:53,370
We can just spend it.

278
00:22:55,090 --> 00:22:57,760
To the rest of the string there we go.

279
00:22:58,980 --> 00:22:59,860
OK that's good.

280
00:22:59,870 --> 00:23:02,500
I think we need to move everything up a little bit.

281
00:23:05,780 --> 00:23:12,920
So let's change the margin top to 100 pixels.

282
00:23:12,920 --> 00:23:24,670
And also I want a bit of a margin there between the button and the alert so let's style out a weather

283
00:23:25,240 --> 00:23:26,500
alert.

284
00:23:26,620 --> 00:23:27,330
Just checking.

285
00:23:27,340 --> 00:23:27,890
I call that weather

286
00:23:33,500 --> 00:23:37,090
give it a margin of 15 pixels.

287
00:23:39,150 --> 00:23:40,000
Great.

288
00:23:40,760 --> 00:23:41,970
So that looks good.

289
00:23:42,200 --> 00:23:47,660
Let's see if we can change our code to work with any city name

290
00:23:51,180 --> 00:23:52,030
site.

291
00:23:52,130 --> 00:23:57,140
First off let's try just replacing London with

292
00:24:01,490 --> 00:24:13,580
the city that was entered by the use of which is to get it right and then city.

293
00:24:13,640 --> 00:24:15,490
So if I now put Tokyo in them

294
00:24:19,660 --> 00:24:21,060
we get the weather for Tokyo.

295
00:24:21,490 --> 00:24:22,430
Wonderful.

296
00:24:23,080 --> 00:24:26,330
Let's just play around and see what happens.

297
00:24:26,350 --> 00:24:28,500
What if I put a capital T for Tokyo.

298
00:24:28,570 --> 00:24:29,680
Does that mess things up.

299
00:24:29,690 --> 00:24:32,520
No it still works great.

300
00:24:32,530 --> 00:24:37,450
One of the cities that we did think we might have an issue with is San Francisco because it's got a

301
00:24:37,450 --> 00:24:38,570
space in it.

302
00:24:39,640 --> 00:24:42,340
And then things go horribly wrong.

303
00:24:42,340 --> 00:24:48,220
So we get a nasty four or four ERA but we should be able to fix that quite easily by just removing all

304
00:24:48,220 --> 00:24:55,990
the spaces in the string as we saw at the beginning of the video because let's just remind ourselves

305
00:24:55,990 --> 00:24:57,310
why that should work.

306
00:24:58,170 --> 00:25:07,710
So if we search for San Francisco then you can see it puts in a hyphen there but we don't even need

307
00:25:07,710 --> 00:25:12,740
to do that because if we remove the space it'll put the hyphen in for us.

308
00:25:12,840 --> 00:25:15,880
So all we need to do is remove the spaces from our string.

309
00:25:16,030 --> 00:25:18,020
Got to be an easy way to do that.

310
00:25:20,920 --> 00:25:23,910
Have a google page remove spaces from string.

311
00:25:24,080 --> 00:25:28,500
Hey we get how to strip out all spaces from a string.

312
00:25:31,750 --> 00:25:32,820
And here we go.

313
00:25:32,830 --> 00:25:33,570
Oh yeah.

314
00:25:34,300 --> 00:25:40,420
So we've got SDR underskirt replace and it replaces anything we put in there with whatever we put in

315
00:25:40,420 --> 00:25:40,690
there.

316
00:25:40,690 --> 00:25:45,580
So if we want to remove something we just put that in there and then nothing in the second

317
00:25:48,430 --> 00:25:54,220
that looks perfect for us.

318
00:25:54,450 --> 00:25:56,760
So we can change the get variable itself

319
00:26:02,700 --> 00:26:05,490
so we want to replace spaces with nothing in

320
00:26:09,590 --> 00:26:18,770
they get array City OK let's have a look now.

321
00:26:19,000 --> 00:26:25,990
If I now put San Francisco in them and submit it works great.

322
00:26:25,990 --> 00:26:27,060
Fantastic.

323
00:26:27,430 --> 00:26:30,460
What if I put in a city and here it doesn't exist.

324
00:26:31,340 --> 00:26:33,240
Let's see what happens there.

325
00:26:33,750 --> 00:26:35,870
We get a nasty error message.

326
00:26:35,970 --> 00:26:37,740
So ideally we want to do two things.

327
00:26:37,770 --> 00:26:42,990
Want to stop that warning coming and we want to let the user know that their search for that particular

328
00:26:42,990 --> 00:26:45,100
city hasn't worked.

329
00:26:45,120 --> 00:26:51,030
It might also be worth keeping the users city in the input here as well so that they can see what they

330
00:26:51,030 --> 00:26:53,010
search for.

331
00:26:53,760 --> 00:26:54,600
Let's do that last bit.

332
00:26:54,600 --> 00:26:58,200
First it's actually quite straightforward.

333
00:26:59,540 --> 00:27:08,380
We need to do is set a value attribute for the inputs and then without ph P We just echo

334
00:27:12,270 --> 00:27:15,020
the city.

335
00:27:15,730 --> 00:27:16,960
There we go.

336
00:27:17,420 --> 00:27:18,290
So that should work fine.

337
00:27:18,290 --> 00:27:22,100
I've just realized that that's going to remove the spaces from it which will look a bit weird for the

338
00:27:22,100 --> 00:27:22,840
user.

339
00:27:22,880 --> 00:27:29,690
So let's use a city variable up here.

340
00:27:31,330 --> 00:27:37,510
And then we'll leave the gate array unchanged.

341
00:27:37,780 --> 00:27:41,710
So let's just check that's actually him and

342
00:27:46,810 --> 00:27:52,550
if I put something like that in there it doesn't strip out the spaces for the input.

343
00:27:52,870 --> 00:27:56,070
It'd be nice to not have these nasty warnings though.

344
00:27:56,270 --> 00:28:01,500
So to do that we need to check whether or not this page actually exists.

345
00:28:01,540 --> 00:28:03,120
So let's see if we can do that.

346
00:28:03,270 --> 00:28:03,640
HP

347
00:28:07,750 --> 00:28:11,120
something like that check if you are ill exists.

348
00:28:11,290 --> 00:28:16,060
Perfect.

349
00:28:16,150 --> 00:28:17,780
And here we go.

350
00:28:18,070 --> 00:28:24,340
This looks pretty perfect So we're getting the file headers and we're checking to see whether they are

351
00:28:24,610 --> 00:28:29,920
equal to or forfour not found error brilliant.

352
00:28:30,010 --> 00:28:31,690
Looks like exactly what we want.

353
00:28:31,690 --> 00:28:33,850
So let's try that out.

354
00:28:37,010 --> 00:28:37,950
So once with

355
00:28:42,930 --> 00:28:43,850
we'll check this.

356
00:28:43,860 --> 00:28:48,370
We want to get the R L up here.

357
00:28:51,140 --> 00:28:51,840
There we go.

358
00:28:51,890 --> 00:28:52,880
And if

359
00:28:55,690 --> 00:29:03,740
the file headers are for for not found them we want to give the user an error.

360
00:29:03,760 --> 00:29:04,500
Otherwise

361
00:29:07,730 --> 00:29:10,300
we'll do that.

362
00:29:10,310 --> 00:29:15,890
So first off that should get rid of the nasty warnings at the top of the page.

363
00:29:15,900 --> 00:29:17,470
That's excellent.

364
00:29:17,660 --> 00:29:21,220
Although we do have a warning down here now.

365
00:29:21,530 --> 00:29:22,400
Not a problem.

366
00:29:24,390 --> 00:29:30,220
So let's set weather to be an empty string

367
00:29:34,250 --> 00:29:35,500
at the very beginning.

368
00:29:37,650 --> 00:29:39,660
And then we lose that error.

369
00:29:39,870 --> 00:29:43,940
So this is great but we're not showing the use of that anything's gone wrong here.

370
00:29:46,100 --> 00:29:53,440
So let's say if they file head as a 4 4 then let's have an error string

371
00:29:56,300 --> 00:30:01,110
something like that City could not be found.

372
00:30:03,230 --> 00:30:04,170
OK.

373
00:30:04,760 --> 00:30:10,670
And we'll put a string up there.

374
00:30:10,680 --> 00:30:16,980
And initially it's going to be empty and we'll do this here in a very similar way.

375
00:30:16,980 --> 00:30:26,290
So if there's some weather then will display the weather if there's an error then we'll display the

376
00:30:26,290 --> 00:30:27,020
error.

377
00:30:28,150 --> 00:30:32,260
But this time with a danger alert.

378
00:30:32,450 --> 00:30:35,520
So it's nice in red and scary.

379
00:30:36,840 --> 00:30:38,330
All right let's give that a go.

380
00:30:38,550 --> 00:30:40,170
Excellent.

381
00:30:40,200 --> 00:30:41,320
Looking great.

382
00:30:41,790 --> 00:30:43,310
So this is pretty perfect.

383
00:30:43,320 --> 00:30:50,550
The one thing I do want to check for is the possibility that even though we could find that page we

384
00:30:50,550 --> 00:30:52,710
still couldn't extract the weather.

385
00:30:52,710 --> 00:30:58,760
And that's certainly not impossible if the page we're getting our data from changes it's HDMI out which

386
00:30:58,770 --> 00:31:04,290
it could well do then that will break our script and we'd like to have a friendly error message if that

387
00:31:04,290 --> 00:31:07,240
happens rather than some nasty warning.

388
00:31:07,290 --> 00:31:11,870
So let's have a couple of checks in place for this.

389
00:31:11,970 --> 00:31:17,440
And I'll just expand a little so that we can say it all going on.

390
00:31:17,440 --> 00:31:27,340
So for this to work we need to have a pager right being right with at least two items in it so we can

391
00:31:27,340 --> 00:31:39,570
check to see if size of page array is greater than one because it will always have at least one thing

392
00:31:39,570 --> 00:31:40,080
in it.

393
00:31:40,170 --> 00:31:45,800
Because if this is not there at all then it will just return the whole string.

394
00:31:46,910 --> 00:31:50,140
So if it is greater than one that means that something is going well

395
00:31:55,790 --> 00:31:57,790
so we'll carry on.

396
00:31:59,000 --> 00:32:03,530
If it's not then we've got an area.

397
00:32:03,840 --> 00:32:05,980
So we'll just have the same error as before.

398
00:32:08,070 --> 00:32:12,520
That city could not be found and then we'll do the same thing here.

399
00:32:12,900 --> 00:32:22,580
Once we get the second page array we'll do a check to see if size of second page array

400
00:32:29,640 --> 00:32:35,180
is greater than one then we want to set the weather

401
00:32:38,760 --> 00:32:40,120
equal to that.

402
00:32:40,290 --> 00:32:44,150
If it's not then something's gone wrong.

403
00:32:44,490 --> 00:32:46,780
So again let's give that error message.

404
00:32:48,880 --> 00:32:49,970
Great.

405
00:32:50,960 --> 00:32:52,820
Now we can actually make that happen.

406
00:32:53,900 --> 00:32:58,110
Whoops I've got a nasty error there on online 23 What have I done.

407
00:32:58,130 --> 00:32:58,740
Oh yeah.

408
00:32:58,740 --> 00:32:59,500
There we go.

409
00:32:59,850 --> 00:33:03,600
I haven't put brackets around page array.

410
00:33:03,680 --> 00:33:09,490
And I haven't even closed my brackets in the second if statement as well.

411
00:33:10,920 --> 00:33:16,290
Not my finest hour but they would get greater as I was saying we can't test that because all of our

412
00:33:16,290 --> 00:33:19,830
cities should either fully work or not work at all.

413
00:33:19,830 --> 00:33:23,630
But let's just have a working one.

414
00:33:23,770 --> 00:33:25,650
So Paris looks great.

415
00:33:26,310 --> 00:33:30,150
And then we can simulate if we got.

416
00:33:30,510 --> 00:33:32,970
So if they changed three day to four day

417
00:33:36,170 --> 00:33:39,550
Van we get a nice error message.

418
00:33:39,550 --> 00:33:45,110
Now whereas before we would have got some nasty warnings and then just no output.

419
00:33:45,900 --> 00:33:51,600
So when you're using other sites in this way you need to be very careful because they could change the

420
00:33:51,600 --> 00:33:58,260
HDMI at any time and you want your app to not break or at least if it does break to break and a nice

421
00:33:59,730 --> 00:34:00,940
user friendly way.

422
00:34:03,010 --> 00:34:04,110
Great.

423
00:34:04,930 --> 00:34:11,750
So once again congratulations on making it to the end of the HP section of the complete web developer

424
00:34:11,770 --> 00:34:12,350
course.

425
00:34:12,430 --> 00:34:18,890
I hope you enjoyed it and I hope you manage to make at least most of the weather scraper by yourself.

426
00:34:19,180 --> 00:34:26,450
We now have just one piece left of the Web Developer puzzle and that is storing changing user data online.

427
00:34:26,530 --> 00:34:32,990
And for that we use databases and the most popular database used in web development today is Maya school.

428
00:34:33,160 --> 00:34:35,990
And that's what we're going to be looking at in the next section.

429
00:34:36,670 --> 00:34:41,830
And just before I leave you there is one more thing I'd like to point out that we do get a warning with

430
00:34:41,830 --> 00:34:48,580
the code in its current form and we get that if we don't enter a city name at all and that's because

431
00:34:48,580 --> 00:34:57,250
we're checking here to see if they get array has a city variable but we need to check that in a different

432
00:34:57,250 --> 00:34:59,560
way to avoid getting a warning here.

433
00:34:59,560 --> 00:35:04,320
Remember we won't get this warning if we were running on a live site because we would switch off ph

434
00:35:04,480 --> 00:35:05,360
warnings.

435
00:35:05,410 --> 00:35:08,680
But it's always nice when we're developing to avoid warnings wherever we can.

436
00:35:08,680 --> 00:35:19,350
So let's see if there's a better way to check if an array has a certain key

437
00:35:23,600 --> 00:35:27,870
or we get check if the given key or index exists in the array.

438
00:35:30,500 --> 00:35:33,030
Array underscore key exists.

439
00:35:33,270 --> 00:35:33,770
Perfect

440
00:35:38,310 --> 00:35:40,970
OK so that's what we want.

441
00:35:40,970 --> 00:35:42,480
So let's just replace that

442
00:35:46,610 --> 00:35:50,750
we're checking the get array for

443
00:35:53,540 --> 00:35:55,750
the key city.

444
00:35:56,540 --> 00:35:57,370
All right.

445
00:35:57,500 --> 00:36:02,060
So let's just run that again and make sure we no longer get that warning.

446
00:36:05,350 --> 00:36:08,300
Just put a test in safety can be found

447
00:36:11,460 --> 00:36:18,140
here again and we get our Web just to be absolutely sure.

448
00:36:18,150 --> 00:36:26,330
Get rid of the city reload the page and we do get one notice down there in the inputs.

449
00:36:26,550 --> 00:36:37,890
So we'll need to do a quick check again to see if the city key exists and we'll do that here.

450
00:36:38,440 --> 00:36:39,520
Give us a bit of room

451
00:36:48,140 --> 00:36:53,040
if the key exists.

452
00:36:57,810 --> 00:37:01,260
Well to supply whatever it is

453
00:37:09,360 --> 00:37:13,700
to bring that back in OK.

454
00:37:14,140 --> 00:37:15,570
Just check that now.

455
00:37:15,870 --> 00:37:16,550
Excellent.

456
00:37:16,810 --> 00:37:22,710
We get our placeholder and we can still put it in London and get the weather.

457
00:37:22,840 --> 00:37:23,550
There you go.

458
00:37:23,870 --> 00:37:25,660
Hope that helps if you are confused by that warning.

459
00:37:25,660 --> 00:37:27,110
Now on to my ask you El.
