WEBVTT
1
00:00:00.300 --> 00:00:05.880
So now that we've built our log in and sign up system let me just give you a quick reminder of what

2
00:00:05.880 --> 00:00:07.770
we're working towards.

3
00:00:07.770 --> 00:00:13.890
So in this video will be obviously prettifying things quite a bit using bootstrap and getting a nice

4
00:00:13.890 --> 00:00:18.960
background image in that we're going to be using a little bit of jay Querrey to switch between log in

5
00:00:19.050 --> 00:00:20.770
and sign up forms.

6
00:00:21.090 --> 00:00:22.920
And then when the user does sign up

7
00:00:27.480 --> 00:00:33.090
we're going to jump from that to our secret diary page which will look like this.

8
00:00:33.400 --> 00:00:42.240
And then they can site whatever they like and it will get updated immediately in the database that we

9
00:00:42.280 --> 00:00:53.150
have and of course the user will be able to see logout clicking the button at the top.

10
00:00:53.170 --> 00:00:54.510
So that's what we're after.

11
00:00:54.900 --> 00:00:55.740
Let's get a crack in

12
00:01:03.750 --> 00:01:04.260
OK then.

13
00:01:04.260 --> 00:01:05.990
Here we go.

14
00:01:06.000 --> 00:01:10.470
I'm going to start Of course by jumping over to strap.

15
00:01:10.680 --> 00:01:12.380
I'm getting our starter template

16
00:01:20.530 --> 00:01:24.950
our usual route to getting started which may be slightly different for you.

17
00:01:25.850 --> 00:01:34.470
If the Web site has updated but what we want is this starter template and then we're going to put all

18
00:01:34.470 --> 00:01:36.040
of this beneath our ph P

19
00:01:39.300 --> 00:01:40.590
and I'll pop the form

20
00:01:44.250 --> 00:01:45.200
into it.

21
00:01:47.030 --> 00:01:47.570
Now

22
00:01:53.800 --> 00:01:56.120
we get.

23
00:01:56.290 --> 00:02:02.310
So this is going to be a similar process to when we made the what's the weather app for.

24
00:02:03.060 --> 00:02:07.620
So we'll have a class of container

25
00:02:11.660 --> 00:02:13.490
and then we'll have an H-1 of

26
00:02:16.190 --> 00:02:20.470
secret diary then we'll put in our forms.

27
00:02:22.580 --> 00:02:24.270
We'll make those pretty later on.

28
00:02:28.690 --> 00:02:36.630
And then well let's have a quick look at that before we do anything else.

29
00:02:36.630 --> 00:02:37.120
Great.

30
00:02:37.140 --> 00:02:43.020
So you can see that's what happens if you don't apply the bootstrap form stylings So let's do those

31
00:02:43.020 --> 00:02:44.410
next.

32
00:02:44.680 --> 00:02:46.980
Remember the form is a component

33
00:02:50.580 --> 00:02:55.410
and then click forms and I'm not going to copy and paste the whole thing this time.

34
00:02:55.440 --> 00:02:56.990
I'm just going to remind myself right.

35
00:02:56.990 --> 00:03:02.480
So we need field sets around the inputs

36
00:03:11.290 --> 00:03:15.130
and then we're going to end the field set then.

37
00:03:15.400 --> 00:03:17.160
So let's put all of these in fast

38
00:03:26.310 --> 00:03:27.430
failed sets there

39
00:03:35.130 --> 00:03:40.740
and then we'll close the field set and the inputs go inside the field sets.

40
00:03:47.360 --> 00:03:47.780
OK.

41
00:03:47.810 --> 00:03:48.680
And then the same

42
00:03:53.200 --> 00:03:54.840
for the second form

43
00:04:08.850 --> 00:04:15.390
and then we'll close that final fill set and let's indent everything

44
00:04:22.250 --> 00:04:22.860
OK.

45
00:04:23.220 --> 00:04:30.820
And then we need to give inputs a class of form control

46
00:04:40.020 --> 00:04:47.430
except the submit which is going to have a type of button and OK for Button success.

47
00:04:47.430 --> 00:04:48.670
So a nice green button.

48
00:04:50.740 --> 00:05:04.660
And then similarly up here.

49
00:05:05.590 --> 00:05:07.330
All right let's have a look.

50
00:05:09.710 --> 00:05:11.920
Okay looking quite a bit nicer.

51
00:05:13.330 --> 00:05:19.540
All right so let's add a bit of text to our checkbooks

52
00:05:24.460 --> 00:05:25.780
so I'll just add.

53
00:05:25.780 --> 00:05:26.870
Stay logged in

54
00:05:31.680 --> 00:05:33.470
there and that will create the cookie.

55
00:05:33.600 --> 00:05:34.560
If they take the books

56
00:05:40.760 --> 00:05:41.730
that have a look.

57
00:05:42.170 --> 00:05:43.860
OK that's not quite what we need.

58
00:05:43.910 --> 00:05:48.230
So let's just take a look.

59
00:05:48.560 --> 00:05:55.020
Probably some special code that we need for the checkbox.

60
00:05:55.030 --> 00:05:58.210
OK so we need a div with a class

61
00:06:01.700 --> 00:06:09.060
of checkbooks and then a label for that one.

62
00:06:09.090 --> 00:06:21.230
So let's get rid of our field set for the check box and add in the div as our label stay logged in and

63
00:06:21.230 --> 00:06:22.580
then we'll close the label

64
00:06:26.790 --> 00:06:34.530
and close the div and then we're not using the field set to Caylus just have a look.

65
00:06:34.560 --> 00:06:35.460
Make sure that works

66
00:06:38.180 --> 00:06:38.840
OK.

67
00:06:38.880 --> 00:06:42.390
Still lower down.

68
00:06:42.410 --> 00:06:44.160
Let's get rid of the line break.

69
00:06:44.190 --> 00:06:45.430
See if that does the trick.

70
00:06:48.280 --> 00:06:50.260
Say something's going wrong.

71
00:06:50.960 --> 00:06:55.320
Oh I noticed the check box doesn't actually have a form control class.

72
00:06:57.330 --> 00:06:59.780
That's probably what's causing the problem.

73
00:07:00.210 --> 00:07:01.400
Ok that's better.

74
00:07:03.130 --> 00:07:05.170
So let's not do the same thing.

75
00:07:08.550 --> 00:07:09.660
Fill out the form

76
00:07:18.800 --> 00:07:20.540
and close the label.

77
00:07:20.540 --> 00:07:26.750
Place the div get rid of the clays field set

78
00:07:33.380 --> 00:07:39.830
and of course the form control class.

79
00:07:40.400 --> 00:07:42.160
So already looking a lot nicer.

80
00:07:43.380 --> 00:07:45.900
Let's send to everything inside.

81
00:07:48.380 --> 00:07:49.340
I'll contain div

82
00:07:53.480 --> 00:07:55.550
been enthusiastic with my styles then

83
00:08:07.840 --> 00:08:12.170
so we might be able to use just text or with center.

84
00:08:13.390 --> 00:08:16.800
Let's have a let's see if that makes everything a bit crazy wide.

85
00:08:16.810 --> 00:08:19.190
I think it does.

86
00:08:19.220 --> 00:08:24.170
So let's give it a way of say 400 pixels

87
00:08:27.910 --> 00:08:34.210
OK the last bit of styling I'm going to do before we get rid of the loggin form initially and allow

88
00:08:34.210 --> 00:08:35.740
the user to toggle between the two.

89
00:08:35.800 --> 00:08:38.620
It's a nice background image.

90
00:08:39.580 --> 00:08:42.880
So we'll go over to n splash dot com.

91
00:08:43.110 --> 00:08:47.220
And this time I know a little bit more about what I want.

92
00:08:47.400 --> 00:08:55.340
So I'm going to do a search for nature because I want a nice clean simple nature image which will inspire

93
00:08:55.340 --> 00:09:03.500
people to write in their diary I think I like that one.

94
00:09:03.600 --> 00:09:08.760
So it's good to kind of solitary feel to it.

95
00:09:08.810 --> 00:09:16.590
So let's click there and save image as and I'm going to save it into my my school folder

96
00:09:22.930 --> 00:09:27.860
has background and then I suspect I'm going to need to resize it.

97
00:09:27.960 --> 00:09:29.140
So let's have a look.

98
00:09:29.160 --> 00:09:32.760
Yep 4.7 megabytes is a lot more than we need.

99
00:09:32.940 --> 00:09:44.820
So I'm just going to DoubleClick and then Tools adjust size and we'll go for a with 2000 which is absolutely

100
00:09:44.820 --> 00:09:45.270
plenty

101
00:09:50.120 --> 00:09:54.050
and then save.

102
00:09:54.290 --> 00:09:55.610
It's still pretty large.

103
00:09:55.880 --> 00:10:00.240
I would definitely make that smaller if this was going to be a production site but it will do for us

104
00:10:03.160 --> 00:10:06.810
and back over to Firefox with fire FGP.

105
00:10:07.000 --> 00:10:14.080
And then let's just drag out the folder contents that will do a quick refresh as background.

106
00:10:14.130 --> 00:10:18.960
JPEG So let's upload it.

107
00:10:19.350 --> 00:10:19.850
Wonderful.

108
00:10:22.590 --> 00:10:27.510
So just to check as before that everything's connected.

109
00:10:31.110 --> 00:10:40.010
And working let's pop the image into our container Dave direcly.

110
00:10:40.150 --> 00:10:45.790
So it was background's dot and then that's just check background.

111
00:10:45.830 --> 00:10:52.790
Jay Pegge without any this time.

112
00:10:53.040 --> 00:10:54.610
And let's have a look.

113
00:10:56.930 --> 00:10:57.440
Great.

114
00:10:57.760 --> 00:10:59.340
It's that.

115
00:10:59.640 --> 00:11:07.090
Now our next challenge is to get it full screen and stretched.

116
00:11:07.600 --> 00:11:16.870
So in fact we could do a c s s full page background Google but I've still got the page that we found

117
00:11:16.870 --> 00:11:17.940
when we did that last time

118
00:11:21.730 --> 00:11:30.160
so I'm just going to grab the C-s s that we know works.

119
00:11:31.930 --> 00:11:32.830
Puppet in there.

120
00:11:34.690 --> 00:11:36.880
Get some nice indenting

121
00:11:43.860 --> 00:11:51.870
and then change the background image to background of JPAC.

122
00:11:52.470 --> 00:11:54.920
And we'll get rid of the other image tag.

123
00:11:55.760 --> 00:11:56.440
Take a look.

124
00:11:58.150 --> 00:11:59.660
OK that's good.

125
00:12:00.770 --> 00:12:05.390
We just need to get rid of the background

126
00:12:11.000 --> 00:12:19.200
on everything except how each DML element that we can put them.

127
00:12:19.270 --> 00:12:25.860
So obviously we need to work on a vertical positioning a little that's for now.

128
00:12:26.000 --> 00:12:36.820
Give it a margin top of 200 pixels just to move it down a little a little too much I think.

129
00:12:40.460 --> 00:12:41.470
150.

130
00:12:41.740 --> 00:12:42.330
Great.

131
00:12:42.620 --> 00:12:43.020
OK.

132
00:12:43.100 --> 00:12:48.770
So now we need to deal with the fact that we've got to log in or sign up forms displaying at the same

133
00:12:48.770 --> 00:12:50.820
time which is definitely not what we want.

134
00:12:53.410 --> 00:13:02.910
So first I'm going to give them both an ID so that we can refer to them.

135
00:13:02.950 --> 00:13:06.760
So the idea for this one is going to be sign up form

136
00:13:10.360 --> 00:13:19.540
the idea that this one is going to be in for and the crucial thing about log in form

137
00:13:22.390 --> 00:13:31.920
is that it's going to be hidden.

138
00:13:32.040 --> 00:13:33.350
There we go.

139
00:13:33.630 --> 00:13:44.070
So let's add some text to the bottom of the sign up form to allow the user to log in if they want to

140
00:13:48.570 --> 00:13:50.250
have a paragraph and then

141
00:13:54.210 --> 00:13:55.570
we'll just have a link

142
00:13:58.470 --> 00:14:06.720
with no Tref but an ID of show log in form

143
00:14:10.490 --> 00:14:22.330
and the text can be logged in get then we can have a bit of Jey query

144
00:14:25.950 --> 00:14:26.720
at the bottom

145
00:14:30.930 --> 00:14:38.900
and we want this to be called when the log in button is clicked.

146
00:14:39.680 --> 00:14:42.090
So it will get it by its ID.

147
00:14:46.830 --> 00:14:49.830
That is Shirey log in form.

148
00:14:50.300 --> 00:14:54.590
So when it's clicked we want a function to run

149
00:14:57.930 --> 00:15:01.590
and I'd like to do a test

150
00:15:04.470 --> 00:15:08.990
to make sure that my Jey queries are connected up right before I try and do anything complicated.

151
00:15:09.010 --> 00:15:17.580
Exham so they can get.

152
00:15:17.640 --> 00:15:23.130
So what I want to do here is I want to toggle each of the forms

153
00:15:26.890 --> 00:15:35.760
so I want to talk to both log in form and sign up form.

154
00:15:35.950 --> 00:15:38.380
So let's Toko sign up form first

155
00:15:41.680 --> 00:15:43.140
so that will make it disappear.

156
00:15:46.620 --> 00:15:48.780
And then do the same thing

157
00:15:53.340 --> 00:15:54.380
for log in form

158
00:15:58.090 --> 00:16:02.240
OK so that should switch from a sign up form to the looking for

159
00:16:06.010 --> 00:16:06.610
pretty simple.

160
00:16:06.610 --> 00:16:17.660
Now let's add a link to switch from the logon form back to the sign up form and you may have noticed

161
00:16:17.840 --> 00:16:21.180
that actually the code to do that is exactly the same.

162
00:16:21.200 --> 00:16:25.240
We want to toggle both of those forms.

163
00:16:25.280 --> 00:16:29.360
So actually we can make this a bit simpler instead of having this function twice.

164
00:16:30.600 --> 00:16:33.060
We could have a class of

165
00:16:36.940 --> 00:16:37.780
Toko forms

166
00:16:47.210 --> 00:16:51.180
and then we can have another one here as well.

167
00:17:01.400 --> 00:17:02.170
Excellent.

168
00:17:02.240 --> 00:17:07.450
Now we should be able to switch back and forth between the forms.

169
00:17:10.410 --> 00:17:15.750
So we need to do a little bit of fixing with the layout here and I think we could do with a little bit

170
00:17:15.750 --> 00:17:18.630
of explanatory text.

171
00:17:18.630 --> 00:17:19.410
So let's have

172
00:17:23.760 --> 00:17:30.920
a paragraph with some strong text in it saying something like

173
00:17:34.140 --> 00:17:35.390
stole your thoughts

174
00:17:37.890 --> 00:17:41.810
permanently and secure the

175
00:17:50.100 --> 00:17:52.900
do you need to do something without colors but we'll sort that out in a minute.

176
00:17:54.580 --> 00:17:55.180
And then

177
00:17:58.490 --> 00:18:04.040
I want to add a bit of text to each of these.

178
00:18:04.370 --> 00:18:06.050
So to sign a form

179
00:18:09.650 --> 00:18:10.400
I'm going to add.

180
00:18:10.440 --> 00:18:11.600
Interested.

181
00:18:11.630 --> 00:18:12.510
Sign up now.

182
00:18:16.980 --> 00:18:25.210
And then for the logon form will have logged in using your user name.

183
00:18:27.780 --> 00:18:32.030
And password.

184
00:18:32.160 --> 00:18:33.440
And then let's have a look.

185
00:18:35.020 --> 00:18:35.590
Excellent.

186
00:18:35.840 --> 00:18:39.900
So it is there even though it's not very easy to see.

187
00:18:40.070 --> 00:18:40.880
So let's

188
00:18:44.310 --> 00:18:47.270
experiment with some coloring.

189
00:18:47.790 --> 00:18:50.770
So I'm going to start by just making everything white

190
00:18:55.260 --> 00:18:56.170
OK.

191
00:18:56.910 --> 00:18:58.150
That actually looks pretty good.

192
00:18:58.230 --> 00:19:01.050
The only thing I can see very clearly is that loggin

193
00:19:04.060 --> 00:19:04.510
link

194
00:19:07.200 --> 00:19:10.800
say I'm going to try playing with that.

195
00:19:10.800 --> 00:19:16.170
That was a Tuggle forms league.

196
00:19:17.310 --> 00:19:23.280
So let's try first off making it bold because I'd like it to be a bit clearer anyway.

197
00:19:26.490 --> 00:19:29.350
Actually I think that works pretty well.

198
00:19:29.400 --> 00:19:35.580
It's not quite the clearest But it's clear enough let that be a lesson to you that when you're choosing

199
00:19:35.580 --> 00:19:42.930
background images the most important thing is that it doesn't obscure the text or instructions that

200
00:19:42.930 --> 00:19:45.160
you want the user to read.

201
00:19:45.190 --> 00:19:45.510
All right.

202
00:19:45.530 --> 00:19:51.720
But we'll go just as far as that in terms of design so let's sign up yet another account because I can't

203
00:19:51.720 --> 00:19:53.450
remember any of the passwords.

204
00:19:57.910 --> 00:20:01.050
And sign ourselves up.

205
00:20:01.150 --> 00:20:01.640
Great.

206
00:20:01.780 --> 00:20:07.600
So now we're over in logged in page up HP and most of the work for the rest of the Web site is going

207
00:20:07.600 --> 00:20:08.870
to be on this page.

208
00:20:10.590 --> 00:20:14.570
But before we leave our index page hide behind completely.

209
00:20:14.920 --> 00:20:21.250
I am going to do a little bit of work to create some extra files so we don't have to contain all this

210
00:20:21.250 --> 00:20:22.830
code twice.

211
00:20:24.040 --> 00:20:38.530
So first off I'm going to get all of this DML and I'm going to include it in a file called header top

212
00:20:38.630 --> 00:20:46.860
HP save that fan and then that's created here.

213
00:20:48.680 --> 00:20:53.970
So I headed up HP open it up and paste that load in

214
00:20:58.140 --> 00:20:59.930
and then if we just check

215
00:21:04.190 --> 00:21:06.620
logout everything should still work fine.

216
00:21:06.680 --> 00:21:15.140
But now our head of code can be accessed from any other page and we only need to edit it once.

217
00:21:15.140 --> 00:21:18.900
Now this code is unique to index dot ph page so I can leave that there.

218
00:21:19.160 --> 00:21:28.530
But everything from here downwards I can put in a footer file.

219
00:21:29.320 --> 00:21:32.820
So I'm going to call that footer ph.

220
00:21:35.970 --> 00:21:40.690
OK and this create that file.

221
00:21:46.420 --> 00:21:52.270
Notice that this script is only for the home page but it won't cause any problems on any of the other

222
00:21:52.270 --> 00:21:54.000
pages.

223
00:21:54.450 --> 00:21:58.190
It's probably simpler to just leave it there OK.

224
00:21:58.510 --> 00:22:06.360
And the other bit of code that I want to be accessible from anywhere is the connection code because

225
00:22:06.370 --> 00:22:11.430
I don't want to have the password for my database repeated throughout my website.

226
00:22:11.950 --> 00:22:21.080
So I'm going to get rid of that and include that as a file called connection.

227
00:22:23.650 --> 00:22:25.010
So to create that

228
00:22:29.740 --> 00:22:35.370
I open it up and because this one has page peacoat I need to put the picture picaxe back in

229
00:22:42.030 --> 00:22:51.870
and then I can say that as it is and just to check that everything still works as it did before.

230
00:22:56.720 --> 00:22:57.410
And there we go.

231
00:22:57.500 --> 00:23:00.090
Everything is still working great great.

232
00:23:00.110 --> 00:23:05.480
So now it's just a matter of making a log in page and that should be pretty straightforward.

233
00:23:05.480 --> 00:23:12.660
Now that we can use the included files that we've just created.

234
00:23:13.460 --> 00:23:22.060
So let's start working with logged in page and we're going to keep this set up here.

235
00:23:24.660 --> 00:23:26.810
But now we're going to include

236
00:23:29.600 --> 00:23:40.270
headed up HP and footed up HP and that should give us a nice looking page.

237
00:23:42.730 --> 00:23:45.290
Without doing anything to earn it.

238
00:23:45.430 --> 00:23:46.500
Wonderful.

239
00:23:46.800 --> 00:23:50.110
So our secret diary is going to be pretty simple.

240
00:23:52.800 --> 00:23:55.870
We're just going to have a container div

241
00:24:05.580 --> 00:24:08.640
and type to get to close HP

242
00:24:16.070 --> 00:24:28.800
and then within that we can have a text area with an ID of diary.

243
00:24:28.820 --> 00:24:29.700
All right.

244
00:24:29.720 --> 00:24:31.780
There it is pretty simple at the moment.

245
00:24:32.610 --> 00:24:42.750
But let's first give it a class of form control circuits all the nice bootstrap stylings that we get

246
00:24:44.720 --> 00:24:47.760
and then we want to make this pretty big.

247
00:24:49.480 --> 00:24:52.390
So let's go over to headed up here HP

248
00:24:55.690 --> 00:24:57.380
and give it some styles.

249
00:24:59.770 --> 00:25:13.550
So this is the diary ID and I'm going to start with a width of 100 percent and a height of 100 percent.

250
00:25:15.490 --> 00:25:17.010
So let's see how that looks.

251
00:25:17.410 --> 00:25:20.370
OK not bad but we got a few problems then.

252
00:25:20.410 --> 00:25:29.140
First off I've realized that our container here has a margin top of 150 pixels which we don't want on

253
00:25:29.140 --> 00:25:33.460
our container.

254
00:25:33.460 --> 00:25:36.460
In our second page.

255
00:25:37.390 --> 00:25:37.930
So let's

256
00:25:40.800 --> 00:25:54.120
have a new ID of home page container which is going to have a margin top of 150 and that should

257
00:25:57.070 --> 00:26:01.350
then not apply to our new container.

258
00:26:01.900 --> 00:26:06.870
Of course that means you'll need to add it indexed that page again.

259
00:26:08.330 --> 00:26:22.810
So now let's give the container div here in the index page file an ID of a home page container and then

260
00:26:22.870 --> 00:26:29.480
we should have the margin at the top of that one but not at the top of this wall.

261
00:26:31.750 --> 00:26:34.470
So let's jump back over and take a look.

262
00:26:38.590 --> 00:26:40.230
So happy with that.

263
00:26:40.420 --> 00:26:44.470
Height wise with wise however it looks like it's.

264
00:26:44.470 --> 00:26:45.630
Why does the container.

265
00:26:45.640 --> 00:26:47.740
But that's not very wide.

266
00:26:47.740 --> 00:26:55.600
There is an easy fix though if you remember there's a related class a container called container of

267
00:26:55.610 --> 00:27:03.360
fluid which stretches out to the very edge of the screen and that's what we want here.

268
00:27:03.370 --> 00:27:09.420
We just want a nice big text area for people to keep their thoughts in

269
00:27:12.480 --> 00:27:14.190
that kind of thing.

270
00:27:14.760 --> 00:27:23.740
OK so now we just need to update the diary field in the database with the contents of the text area

271
00:27:24.000 --> 00:27:26.070
when it's updated.

272
00:27:26.070 --> 00:27:26.970
Easy right.

273
00:27:27.210 --> 00:27:33.540
Well we've already done something fairly similar in our code play up.

274
00:27:33.860 --> 00:27:45.230
So let's find the code or something similar that we use them something like a text change in text area

275
00:27:46.250 --> 00:27:50.310
content I should do it for us.

276
00:27:50.310 --> 00:27:50.820
Here we go.

277
00:27:50.820 --> 00:27:54.840
How do I bind to the change event of a textarea NJ query.

278
00:27:57.470 --> 00:27:58.450
Perfect.

279
00:27:58.460 --> 00:28:00.350
Pretty sure that's the one we used before.

280
00:28:04.050 --> 00:28:07.230
So we're going to put this in the footer

281
00:28:11.500 --> 00:28:14.700
that's where we'll now Jake where he goes.

282
00:28:15.970 --> 00:28:17.320
And we won't see

283
00:28:22.790 --> 00:28:30.310
do this with the diary ID and we don't need to do any of that stuff.

284
00:28:32.840 --> 00:28:37.540
Siphon out as usual we'll just let

285
00:28:40.050 --> 00:28:40.530
changed

286
00:28:43.420 --> 00:28:52.710
see if everything is working.

287
00:28:53.210 --> 00:28:54.650
It is indeed.

288
00:28:54.640 --> 00:28:58.250
So how are we going to update the database when this changes.

289
00:28:58.640 --> 00:29:01.200
Well we can only update the database with a script.

290
00:29:01.340 --> 00:29:05.360
So we're going to need to call a peace script when this changes.

291
00:29:05.600 --> 00:29:08.990
And the only way we can do that is using AJAX

292
00:29:12.480 --> 00:29:15.270
say let's remind ourselves how Ajax works.

293
00:29:15.270 --> 00:29:16.010
It's been a while

294
00:29:23.130 --> 00:29:26.270
as usual go down to the first example.

295
00:29:26.740 --> 00:29:28.900
OK this is pretty simple.

296
00:29:31.680 --> 00:29:36.510
So it looks like that's going to be too careful about what happens if they don't have an internet connection

297
00:29:36.510 --> 00:29:37.630
et cetera.

298
00:29:38.070 --> 00:29:49.340
We saw how to work with errors in Ajax last time.

299
00:29:49.480 --> 00:29:55.060
So I went into that in too much detail this time but we are going to need

300
00:30:00.950 --> 00:30:09.920
a script to do this and we're going to need to pass the contents of our diary textarea to that script

301
00:30:10.160 --> 00:30:12.980
so we could either do that with a get or post.

302
00:30:13.280 --> 00:30:14.990
I think a post is a little bit more exciting.

303
00:30:14.990 --> 00:30:16.580
We haven't done one before.

304
00:30:18.780 --> 00:30:22.100
So let's see if we can find a good example.

305
00:30:24.560 --> 00:30:25.640
Here we go.

306
00:30:25.700 --> 00:30:26.760
This looks perfect.

307
00:30:29.590 --> 00:30:31.000
Actually let's use that one

308
00:30:39.310 --> 00:30:41.530
so we're doing a post to

309
00:30:44.270 --> 00:30:47.430
update database stop here.

310
00:30:47.450 --> 00:30:56.640
Pete and we only need one variable here and that's of click content and that's going to be the contents

311
00:30:56.760 --> 00:31:03.390
of the diary text textarea and we can get that

312
00:31:06.450 --> 00:31:08.740
and we can get that using the diary.

313
00:31:08.800 --> 00:31:15.990
And then VAP So that's how Ajax.

314
00:31:16.030 --> 00:31:21.820
Now we need to just write update database Doppie HP.

315
00:31:21.920 --> 00:31:31.700
So let's say that back over to fire of again create another file update database stop DHP

316
00:31:35.250 --> 00:31:39.180
and first of all just returned some text

317
00:31:43.430 --> 00:31:53.300
and because the sample code that we've got alerts data saved and then message that should alert data

318
00:31:53.300 --> 00:32:00.960
saved and then hi there because it should get back what the script returns.

319
00:32:04.720 --> 00:32:09.730
So fingers crossed wonderful data saved.

320
00:32:09.730 --> 00:32:10.650
Hi there.

321
00:32:10.660 --> 00:32:14.300
And it's doing that with AJAX.

322
00:32:14.450 --> 00:32:15.430
Brilliant.

323
00:32:16.090 --> 00:32:21.040
So now we can work on our update database ph page script

324
00:32:24.590 --> 00:32:29.170
and the main thing that we need to do is get the post variable

325
00:32:33.430 --> 00:32:35.560
so let's check that it's been passed first

326
00:32:39.120 --> 00:32:48.350
Reiki exists and we called it content and it should be in the post right.

327
00:32:53.220 --> 00:32:55.600
Let's put the parentheses in the right place.

328
00:32:57.080 --> 00:32:58.880
And so if it does.

329
00:32:58.880 --> 00:33:00.810
For now let's just echo it.

330
00:33:08.130 --> 00:33:08.830
All right.

331
00:33:10.300 --> 00:33:11.270
There we go.

332
00:33:11.640 --> 00:33:19.050
I was getting the content of what we're writing wonderful.

333
00:33:19.240 --> 00:33:21.550
So all we need to do is say that the database

334
00:33:24.860 --> 00:33:29.960
so I will need to connect to the database which we can now do really easily using our connection to

335
00:33:29.960 --> 00:33:31.780
our page piece script.

336
00:33:32.300 --> 00:33:33.920
And then we just need our queries

337
00:33:40.470 --> 00:33:44.400
so we want to update the user's table

338
00:33:47.350 --> 00:33:53.330
and we want to set just check what the variables were diary

339
00:34:01.060 --> 00:34:02.950
and we want to set that equal to a

340
00:34:07.460 --> 00:34:13.010
mask you apply real escape string

341
00:34:15.750 --> 00:34:16.230
heist

342
00:34:19.090 --> 00:34:19.600
content

343
00:34:22.950 --> 00:34:24.660
and we want to do that where

344
00:34:27.550 --> 00:34:30.170
the ID is equal to.

345
00:34:30.410 --> 00:34:32.190
And where are we going to get this idea from.

346
00:34:32.450 --> 00:34:35.070
Well it's stored as a session variable.

347
00:34:35.150 --> 00:34:36.920
So if we start the session

348
00:34:39.520 --> 00:34:45.200
here we should be able to access it.

349
00:34:45.240 --> 00:34:54.660
So let's use my askew well-I real escape string just in case even though that's pretty much zero chance

350
00:34:55.740 --> 00:34:58.150
of this variable being anything other than a number.

351
00:35:02.780 --> 00:35:14.510
And as usual I'll pop a limit one on the end there just in case and then we'll do a check say

352
00:35:17.800 --> 00:35:23.410
that's been processed correctly by link and queery

353
00:35:27.840 --> 00:35:32.580
and if it has for now we'll just carry success.

354
00:35:36.400 --> 00:35:36.990
Als

355
00:35:40.250 --> 00:35:41.570
OK failed

356
00:35:45.240 --> 00:35:45.950
OK.

357
00:35:46.110 --> 00:35:47.760
And let's have a look.

358
00:35:48.450 --> 00:35:51.490
OK we've got some warnings and a failure there.

359
00:35:52.230 --> 00:35:53.320
It's my classic era

360
00:35:56.250 --> 00:36:02.250
don't forget the link in my ask you apply real escape string

361
00:36:06.580 --> 00:36:13.060
success her and let's convince ourselves that's true.

362
00:36:13.060 --> 00:36:14.870
I've probably been logged out of users now.

363
00:36:14.920 --> 00:36:16.850
So let's look back in.

364
00:36:17.750 --> 00:36:20.340
Oh get the password from connection to HP

365
00:36:25.640 --> 00:36:33.120
we are.

366
00:36:33.400 --> 00:36:34.230
And there we go.

367
00:36:34.330 --> 00:36:39.520
You can see it right there in the database quite so we're pretty close to being done now.

368
00:36:40.540 --> 00:36:51.630
Let's just get rid of the code here because we're not going to return anything to the scripts.

369
00:36:51.750 --> 00:37:00.350
We'll just leave that blank and then we'll get back to you footed up HP and remove the alert

370
00:37:03.020 --> 00:37:06.520
so we can get rid of the don't function completely.

371
00:37:06.890 --> 00:37:09.100
So let's take a look.

372
00:37:13.010 --> 00:37:17.240
So nothing's popping up but is it updating in the database.

373
00:37:17.240 --> 00:37:18.160
Fingers crossed.

374
00:37:18.200 --> 00:37:21.800
Yes it is wonderful.

375
00:37:21.800 --> 00:37:23.960
So couple more slight tweaks.

376
00:37:23.960 --> 00:37:31.850
One issue that we have is when we load the logs in paid initially the directory doesn't display and

377
00:37:31.850 --> 00:37:34.430
that's of course no good to us.

378
00:37:34.430 --> 00:37:41.500
So let's load the diary carried at the top here.

379
00:37:42.310 --> 00:37:48.870
So when we know that we logged in will include connection to HP.

380
00:37:49.960 --> 00:37:54.190
And then we run a query which will be select

381
00:37:56.920 --> 00:37:58.720
diary from

382
00:38:01.560 --> 00:38:05.100
users where ID equals

383
00:38:07.770 --> 00:38:14.040
and them will have my q out my real escape

384
00:38:16.540 --> 00:38:21.050
string and we're using session

385
00:38:24.540 --> 00:38:25.130
id

386
00:38:27.900 --> 00:38:30.370
and will have a limit on that.

387
00:38:31.350 --> 00:38:33.980
And then we want to do the query.

388
00:38:34.810 --> 00:38:39.000
So that's my skew as I query

389
00:38:41.850 --> 00:38:45.490
query and we want to get the results of that straight away.

390
00:38:45.750 --> 00:38:52.590
So we can actually do that all on one line so we can have my ask your ally fetch

391
00:38:55.310 --> 00:39:07.100
array and then use the query directly and we could set row equal to that and then let's have a variable

392
00:39:07.170 --> 00:39:11.510
Tiree content which is going to be equal to Roe.

393
00:39:11.660 --> 00:39:17.450
And then diary and then we'll just echo

394
00:39:23.960 --> 00:39:28.750
diary content in the middle of the text area.

395
00:39:29.020 --> 00:39:36.050
And just before we run that let's pop the link in them and we should also have an empty

396
00:39:38.980 --> 00:39:45.980
diary content string just in case there isn't any.

397
00:39:46.050 --> 00:39:48.980
So we don't get any Ph.D. errors down here.

398
00:39:49.990 --> 00:39:57.050
But just before we run that let's just add it now links.

399
00:39:57.280 --> 00:40:03.020
Now we should find that the saved diary content appears there.

400
00:40:07.880 --> 00:40:09.010
So that is really cool.

401
00:40:09.020 --> 00:40:12.570
If I refresh it's all saved.

402
00:40:12.920 --> 00:40:13.770
Fabulous.

403
00:40:13.790 --> 00:40:15.500
So we're really close to being done.

404
00:40:15.530 --> 00:40:19.550
All that remains is this header here which doesn't look right.

405
00:40:19.550 --> 00:40:21.710
So let's go back over to bootstrap

406
00:40:25.820 --> 00:40:28.670
and get a nice nap.

407
00:40:31.080 --> 00:40:34.070
At the top there so that everything looks good.

408
00:40:36.440 --> 00:40:38.450
So if it's a documentation

409
00:40:41.310 --> 00:40:42.330
components

410
00:40:44.770 --> 00:40:45.860
and Bob

411
00:40:51.260 --> 00:40:52.710
and then we'll just take

412
00:40:57.890 --> 00:41:00.410
none of that and put its

413
00:41:05.740 --> 00:41:08.250
above our container Florida.

414
00:41:08.810 --> 00:41:13.330
Dave before we added it let's just check that it looks OK.

415
00:41:14.010 --> 00:41:17.940
OK that's it's a start but we've got a couple of things to fix them.

416
00:41:18.640 --> 00:41:26.050
So first off we no longer need our logged in log out code at the top here.

417
00:41:26.610 --> 00:41:32.120
But I will be keeping that link so I'll just for that for the moment.

418
00:41:34.780 --> 00:41:42.260
We'll change the nav bar brand to secret diary.

419
00:41:42.790 --> 00:41:54.180
We'll get rid of all of those links and we'll also change the nav bar class to nav bar vext top.

420
00:41:54.390 --> 00:41:57.050
So it's all stretched out and fixed at the top.

421
00:41:58.900 --> 00:42:04.610
We do want to pull right here but it's not going to be a form.

422
00:42:04.840 --> 00:42:08.820
So let's change that to a div.

423
00:42:09.250 --> 00:42:14.800
Get rid of the inputs and I want to make the button I link

424
00:42:18.020 --> 00:42:22.020
with the ref being what I just copied sorry to the logout page

425
00:42:26.580 --> 00:42:32.350
and then we want to change search to logout.

426
00:42:32.370 --> 00:42:34.160
All right let's take a look.

427
00:42:34.980 --> 00:42:35.810
OK.

428
00:42:36.090 --> 00:42:43.470
That's pretty good but our textarea is of course hidden behind our nav bar there.

429
00:42:43.890 --> 00:42:47.920
So we should be able to fix that quite easily with a quick Margene

430
00:42:52.530 --> 00:42:58.970
in our head but we will need to give it an ID first of all contain a fluid.

431
00:42:59.070 --> 00:42:59.790
So this is

432
00:43:03.110 --> 00:43:05.920
contain a logged in page

433
00:43:08.580 --> 00:43:09.620
copy that.

434
00:43:09.660 --> 00:43:14.040
And then I open the header and in the styles

435
00:43:16.600 --> 00:43:18.850
we want to contain a locked in page

436
00:43:24.960 --> 00:43:30.620
and let's give That's a margin top

437
00:43:33.400 --> 00:43:38.010
of let's try 70 pixels that's a little bit too much.

438
00:43:38.010 --> 00:43:43.200
I think I'm going to carry four 60 instead

439
00:43:49.580 --> 00:43:50.510
perfect.

440
00:43:51.110 --> 00:43:57.640
And then of course when the user logs out the back to the home page.

441
00:43:58.370 --> 00:44:04.610
So just one small thing left to fix and that is how error messages.

442
00:44:04.660 --> 00:44:10.880
So if I don't put a password in right now of course I get an error message but it's not particularly

443
00:44:10.880 --> 00:44:12.490
nicely displayed.

444
00:44:12.500 --> 00:44:19.950
And of course I want to use bootstrap alerts to make those look a lot nicer.

445
00:44:25.030 --> 00:44:28.030
So let's copy the carried over from there.

446
00:44:28.950 --> 00:44:30.390
And all of these are going to be

447
00:44:34.980 --> 00:44:37.380
in our index top P

448
00:44:43.680 --> 00:44:54.470
and say well add this here so I will check to see if error is not an empty string.

449
00:45:01.050 --> 00:45:02.190
Then we'll carry

450
00:45:10.340 --> 00:45:12.030
all of this but it's

451
00:45:15.410 --> 00:45:16.440
will point to put

452
00:45:19.690 --> 00:45:22.670
the string itself in the middle of it

453
00:45:26.410 --> 00:45:26.900
OK.

454
00:45:26.910 --> 00:45:28.840
Let's have a look.

455
00:45:29.930 --> 00:45:34.090
So now we should have much prettier error messages.

456
00:45:34.200 --> 00:45:35.490
Wonderful.

457
00:45:35.490 --> 00:45:39.300
Similarly if I try and log in with something that doesn't work

458
00:45:43.990 --> 00:45:46.540
we get a nice error message there as well.

459
00:45:46.720 --> 00:45:47.580
Wonderful.

460
00:45:47.590 --> 00:45:50.490
So that is as far as we're going to go on this project.

461
00:45:50.500 --> 00:45:54.250
There's a fair bit more that you could do with it if you wanted one.

462
00:45:54.310 --> 00:46:00.390
Quite fun extra would be to validate the user's email address and that's not too tricky to do.

463
00:46:00.610 --> 00:46:07.510
You just send them an e-mail as we know how to do with a random code which you then put into a field

464
00:46:07.510 --> 00:46:12.460
in the database and then they click on a link which has that code embedded in it.

465
00:46:12.460 --> 00:46:15.400
And then it checks the code against the database.

466
00:46:15.550 --> 00:46:21.120
And if it's correct then consider the e-mail address validated.

467
00:46:21.190 --> 00:46:27.970
You could also offer different diary pages for different dates and you could set up a password reset

468
00:46:27.970 --> 00:46:31.430
system which e-mails they use if they can't remember their password.

469
00:46:31.510 --> 00:46:39.850
And again sets up a special link via an item in the database and then when the user clicks back on that

470
00:46:39.850 --> 00:46:45.280
link from their e-mail address they're given the opportunity to reset their password.

471
00:46:45.310 --> 00:46:46.760
But this is as far as we're going to go.

472
00:46:46.780 --> 00:46:52.400
And congratulations once again on making it to the end of the my Eskew L section of the course.

473
00:46:52.480 --> 00:46:56.600
You've done some really advanced stuff in this section so pat yourself on the back.

474
00:46:56.720 --> 00:47:05.110
Go have a break and recharge before we unleash the power of Google Maps Facebook Twitter and an unlimited

475
00:47:05.350 --> 00:47:08.520
number of other web services using API is.
