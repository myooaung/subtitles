WEBVTT
1

00:00:00.780 --> 00:00:04.230

All right welcome back my student on The Last Lecture.



2

00:00:04.470 --> 00:00:08.060

We kind of completed their use user function.



3

00:00:08.070 --> 00:00:14.490

It's not 100 percent completed unless until we tested in the life server own tool we test some of these



4

00:00:14.490 --> 00:00:15.600

functionality.



5

00:00:15.600 --> 00:00:21.590

So we're going to be testing to see what kind of values we're going to get from here research.



6

00:00:21.750 --> 00:00:22.290

We're going to get.



7

00:00:22.290 --> 00:00:25.290

And then after that we'll test it with a live server.



8

00:00:25.290 --> 00:00:31.890

But for now I'm going to grab this code right here and I copy it and I take it to my



9

00:00:35.530 --> 00:00:39.240

tets editor that I got right here and then paste that in there.



10

00:00:39.260 --> 00:00:39.910

Right.



11

00:00:40.150 --> 00:00:44.350

What I want to do is I want to go to the beach be my admin.



12

00:00:44.980 --> 00:00:49.190

I want to find how why use are we have there.



13

00:00:49.200 --> 00:00:50.410

All right.



14

00:00:50.410 --> 00:00:53.200

So go to your Ph.D. My Aardman



15

00:00:57.030 --> 00:01:00.350

go to your users table.



16

00:01:00.630 --> 00:01:01.890

We've got some users here.



17

00:01:01.890 --> 00:01:06.950

I got some users with somebody in cold and they're not active yet.



18

00:01:06.960 --> 00:01:08.330

All right.



19

00:01:08.910 --> 00:01:12.650

But so I'm just going to use this email right here.



20

00:01:12.730 --> 00:01:20.010

One when I use one and we're going to send the validation code you are able just to make sure that we



21

00:01:20.010 --> 00:01:21.790

are actually receiving that.



22

00:01:21.810 --> 00:01:29.280

So I'm going to use that e-mail to writing here and I'm going to use this validation called right here



23

00:01:31.840 --> 00:01:37.660

right right here.



24

00:01:37.660 --> 00:01:44.430

And then we're going to see well what can we get into your elbow before we do that we need to create



25

00:01:45.120 --> 00:01:49.420

to have this link right here I want you to have as well because we're going to use it in a minute but



26

00:01:50.170 --> 00:01:58.110

what I want to do is create this active user function right after this one.



27

00:01:58.120 --> 00:01:58.940

All right.



28

00:01:59.220 --> 00:02:05.450

So I want to make a comment here because this is getting long.



29

00:02:08.350 --> 00:02:14.120

I love coming here and this one maybe will be re-used or user.



30

00:02:16.080 --> 00:02:16.900

All right.



31

00:02:16.930 --> 00:02:19.950

And this would be activate



32

00:02:22.960 --> 00:02:25.000

user functions.



33

00:02:25.030 --> 00:02:25.590

All right.



34

00:02:25.710 --> 00:02:30.450

So we're going to come here and when I create is active a user function



35

00:02:34.940 --> 00:02:42.220

perfect we are going to check our server variables.



36

00:02:43.170 --> 00:02:45.830

And for requests method



37

00:02:48.710 --> 00:02:57.630

if he's able to get requests all right and his requests we're going to be pulling out all



38

00:03:01.520 --> 00:03:02.780

the e-mail.



39

00:03:03.470 --> 00:03:08.220

So if he said get email



40

00:03:11.990 --> 00:03:16.240

my days no going to be pulling it out.



41

00:03:17.350 --> 00:03:18.280

All right.



42

00:03:22.080 --> 00:03:25.810

Here and we can clean that up a little bit.



43

00:03:30.060 --> 00:03:35.060

Apply a variable to assign a variable.



44

00:03:35.060 --> 00:03:39.020

So there we go.



45

00:03:39.840 --> 00:03:41.390

All right cool.



46

00:03:44.470 --> 00:03:48.540

We can also grab the validation code so



47

00:03:51.690 --> 00:04:01.630

that will come in a kids request access code and we can name a validation code.



48

00:04:01.630 --> 00:04:02.700

All right.



49

00:04:03.270 --> 00:04:07.700

And we're going to do is I'm going to equil them out just to make sure that we're getting them.



50

00:04:07.780 --> 00:04:13.990

I'm going to grab the active a user function and then I go to activate that BHP code right here.



51

00:04:15.140 --> 00:04:15.950

All right.



52

00:04:16.290 --> 00:04:24.870

And I'm going to paste it over my BHB tax M-Pesa right here.



53

00:04:24.870 --> 00:04:25.680

Save it.



54

00:04:25.980 --> 00:04:27.550

So we should see that there.



55

00:04:27.840 --> 00:04:39.330

So let's go to our activity that BHP actively BHP and of course is going to tell me I have a narrow



56

00:04:39.330 --> 00:04:41.460

here on functions of BHP.



57

00:04:41.820 --> 00:04:42.960

Let's go there next.



58

00:04:42.960 --> 00:04:52.840

Checking out well I wasn't 3:57 I believe 3:34 in saying that I have some statement that I'm not supposed



59

00:04:52.840 --> 00:04:54.850

to be there.



60

00:04:54.940 --> 00:04:57.410

So let's check it out real quick.



61

00:05:00.830 --> 00:05:05.630

All right I think I know what the problem is we're missing one of these guys here.



62

00:05:06.460 --> 00:05:07.210

Curly bracket



63

00:05:24.020 --> 00:05:26.080

and missing a curly bracket.



64

00:05:29.120 --> 00:05:31.080

This is really you sir.



65

00:05:31.100 --> 00:05:33.980

Oh why did I do.



66

00:05:33.980 --> 00:05:36.190

What was that about.



67

00:05:36.260 --> 00:05:38.120

Put that in the wrong place.



68

00:05:41.040 --> 00:05:42.660

What was I doing on The Last Lecture.



69

00:05:42.660 --> 00:05:46.860

Guys I'm sorry LCF.



70

00:05:47.030 --> 00:05:47.680

Alice



71

00:05:55.730 --> 00:05:57.350

we need to return the fours there.



72

00:05:57.350 --> 00:05:59.300

Guys I'm sorry about that.



73

00:05:59.300 --> 00:05:59.630

All right.



74

00:05:59.630 --> 00:06:06.140

Anyway let's go back here and we're not doing anything right but if we pass a parameter we'll pass a



75

00:06:06.140 --> 00:06:07.710

e-mail address.



76

00:06:08.270 --> 00:06:18.240

Let's actually go ahead and get the link that I that we have on that text editor right here and a space



77

00:06:18.250 --> 00:06:20.120

to right here enter.



78

00:06:20.480 --> 00:06:26.390

And you can see that we're pulling in this values we're pulling in the validation code and we're pulling



79

00:06:26.460 --> 00:06:29.140

and e-mail address.



80

00:06:29.150 --> 00:06:30.250

All right.



81

00:06:30.440 --> 00:06:34.290

So I don't even know why I had that in the last lecture.



82

00:06:34.310 --> 00:06:38.940

I don't know where I was getting the else return false.



83

00:06:39.050 --> 00:06:42.110

Maybe I was confusing it with this one here.



84

00:06:42.230 --> 00:06:47.780

If they used to use it that's what I was doing I was doing it in my head right here.



85

00:06:48.890 --> 00:06:54.220

And then we can set something here that we say.



86

00:06:54.860 --> 00:06:56.320

And that's what I'm going to do right here.



87

00:06:56.330 --> 00:07:04.410

If register user if we are able to get used to the user we said this message if we're not we can't register



88

00:07:04.410 --> 00:07:04.740

them.



89

00:07:04.760 --> 00:07:09.290

We just put another message here and say sorry



90

00:07:13.210 --> 00:07:25.460

sorry we could not register the user.



91

00:07:25.690 --> 00:07:27.130

I don't even know why I had that.



92

00:07:27.130 --> 00:07:28.290

Sorry about that guys.



93

00:07:28.450 --> 00:07:28.990

All right.



94

00:07:29.110 --> 00:07:31.820

So another way that we know that we're getting some values here.



95

00:07:32.050 --> 00:07:33.110

Let's go



96

00:07:36.750 --> 00:07:40.260

and then work on this now.



97

00:07:40.260 --> 00:07:40.920

All right.



98

00:07:41.280 --> 00:07:50.720

So once we got the validation in the e-mail all we got to do is do our ask you statement right.



99

00:07:51.690 --> 00:07:57.550

So let's check to see if we have a role in the database.



100

00:07:57.570 --> 00:08:02.580

And if we do then we are going to be activating that user right.



101

00:08:02.910 --> 00:08:16.050

So let's say we select ID from users where what what condition can we use here.



102

00:08:16.430 --> 00:08:23.110

Where e-mail equals what e-mail right.



103

00:08:23.120 --> 00:08:26.260

So let's actually concatenate here.



104

00:08:26.390 --> 00:08:27.970

Let's keep it first.



105

00:08:28.160 --> 00:08:30.310

So we going to concatenate this function.



106

00:08:30.680 --> 00:08:36.520

And we are going to be saying concatenating this guy right here cleaning it up scaping it.



107

00:08:36.590 --> 00:08:37.170

All right.



108

00:08:37.220 --> 00:08:43.850

So we're email equals email and we can also do another statement here and another condition and we can



109

00:08:43.850 --> 00:08:56.240

say we're validation code equals what can you guess what and actually we need a single quote here where



110

00:08:56.270 --> 00:08:57.740

validation call equals



111

00:09:01.220 --> 00:09:05.260

validation code variable.



112

00:09:05.660 --> 00:09:06.930

We'll get it here like this.



113

00:09:06.930 --> 00:09:07.800

Good.



114

00:09:08.360 --> 00:09:16.100

And as I actually copy this so that we make no mistakes there we go.



115

00:09:16.560 --> 00:09:17.140

All right.



116

00:09:17.360 --> 00:09:20.890

And semi-colon there make sure that you have your single codes around the right nice.



117

00:09:20.900 --> 00:09:26.070

Not going to work then the next thing to do here would be to send a query right.



118

00:09:26.420 --> 00:09:33.630

So we can send the query assign it to a variable here so we can use it a little bit more.



119

00:09:34.820 --> 00:09:43.050

And this well will confirm it.



120

00:09:44.450 --> 00:09:45.060

Right.



121

00:09:45.260 --> 00:09:50.190

And then we can display some type of message.



122

00:09:50.200 --> 00:09:51.630

All right.



123

00:09:52.460 --> 00:09:53.800

And we could way I go.



124

00:09:53.840 --> 00:09:59.140

We went out and this one we can because we don't need to take the user anywhere else right.



125

00:09:59.480 --> 00:10:08.970

So we can do some type of message here and I think we have a function with this place on validation.



126

00:10:09.050 --> 00:10:12.350

Let me see this function display validation errors.



127

00:10:14.020 --> 00:10:20.960

Asked for errors only this is an access message we can make the function a little better in the future



128

00:10:21.230 --> 00:10:27.620

more generic but let's just display a success message.



129

00:10:27.620 --> 00:10:30.590

Class B G.



130

00:10:30.710 --> 00:10:33.710

Set says.



131

00:10:34.370 --> 00:10:35.100

All right.



132

00:10:35.330 --> 00:10:45.790

And we can say your account has been activated.



133

00:10:45.890 --> 00:10:48.730

Please logon.



134

00:10:50.750 --> 00:10:52.400

That's cool right.



135

00:10:58.970 --> 00:11:08.950

Els But before we do that we're making the Querrey here but we don't know if this went through or not.



136

00:11:09.020 --> 00:11:14.630

Well we actually do because we have this confirm here we know the Querrey is good but we don't know



137

00:11:14.720 --> 00:11:16.930

if the user was found.



138

00:11:17.450 --> 00:11:18.000

All right.



139

00:11:18.110 --> 00:11:26.960

So what we can do here is we can say if row count their function and we count how many rolls we have



140

00:11:27.020 --> 00:11:33.800

and if our rows count function is equal to 1 We know that it worked.



141

00:11:33.800 --> 00:11:34.340

So now what.



142

00:11:34.370 --> 00:11:37.660

That way we can just go up some type of message.



143

00:11:37.660 --> 00:11:38.280

All right.



144

00:11:38.360 --> 00:11:44.270

So in order for this to work we need to go to the you are well a make sure the email is the right email



145

00:11:44.330 --> 00:11:52.270

inside the user's table and the validation is a validation in the validation cause the same as well



146

00:11:52.280 --> 00:11:57.620

so two parameters have to be the same if they use the same for this to work.



147

00:11:57.620 --> 00:11:58.130

Right.



148

00:11:58.280 --> 00:12:03.230

But now again I want you to keep this in mind if this works.



149

00:12:03.440 --> 00:12:05.280

We are actually echoing out.



150

00:12:05.330 --> 00:12:05.900

OK.



151

00:12:05.930 --> 00:12:07.490

You are Callan's being activated.



152

00:12:07.730 --> 00:12:09.840

But we're really not doing anything here.



153

00:12:10.760 --> 00:12:11.650

Right.



154

00:12:12.010 --> 00:12:14.130

We need to do some type of update.



155

00:12:14.140 --> 00:12:17.370

We need to update the users table.



156

00:12:17.570 --> 00:12:21.800

The role for that specific user and say active to 1.



157

00:12:21.970 --> 00:12:24.530

Because right now active is set to zero.



158

00:12:24.940 --> 00:12:30.790

And remember that we are using active just to verify that the user is active is we already register



159

00:12:30.790 --> 00:12:31.900

or not.



160

00:12:31.900 --> 00:12:35.360

So in the next election we're going to write equerry for the update.



161

00:12:35.890 --> 00:12:42.190

And we might put this in a session or something because we want to redirect the user to log in right



162

00:12:42.190 --> 00:12:46.190

away and maybe we'll redirect them to the logging that BHP page.



163

00:12:46.210 --> 00:12:51.430

So we need to set up a session there so that where we can show that message somewhere else and we don't



164

00:12:51.430 --> 00:12:53.500

lose that with this call when we redirect.



165

00:12:53.500 --> 00:12:54.060

Right.



166

00:12:54.280 --> 00:12:57.630

So anyway thank you so much for watching and I'll see you in the next lecture.



