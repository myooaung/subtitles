WEBVTT
1
00:00:01.340 --> 00:00:05.050
[Autogenerated] what happened is the VPC Remember that the

2
00:00:05.050 --> 00:00:07.740
function was allowed to read the systems manager,

3
00:00:07.740 --> 00:00:15.160
But now the function is tied to the VPC and the VPC isn't allowed to

4
00:00:15.160 --> 00:00:18.430
read from the systems manager because once again,

5
00:00:18.430 --> 00:00:20.540
everything's secure by default.

6
00:00:20.540 --> 00:00:22.750
So there's no user idea password,

7
00:00:22.750 --> 00:00:25.930
and the application is getting stuck in the startup code where

8
00:00:25.930 --> 00:00:27.920
it's expecting to have those parameters.

9
00:00:27.920 --> 00:00:30.410
There is a really easy way toe.

10
00:00:30.410 --> 00:00:34.100
Let the connected VPC access the systems manager,

11
00:00:34.100 --> 00:00:38.110
and we get to work with another piece of AWS that we haven't seen yet.

12
00:00:38.110 --> 00:00:42.950
What Will Dio is create an end point on the VPC that's

13
00:00:42.950 --> 00:00:45.740
allowed to connect to the systems manager.

14
00:00:45.740 --> 00:00:51.300
And what's more interesting is that an endpoint lives within the AWS Cloud.

15
00:00:51.300 --> 00:00:54.680
If we were setting up the sub nets and security groups that actually

16
00:00:54.680 --> 00:00:58.100
goes out to the Internet and then back in again,

17
00:00:58.100 --> 00:01:00.310
so on endpoint is a more direct path.

18
00:01:00.310 --> 00:01:01.440
In this case,

19
00:01:01.440 --> 00:01:05.950
there is a very important point to make about the end point I'm going to use.

20
00:01:05.950 --> 00:01:07.740
It's not free.

21
00:01:07.740 --> 00:01:12.230
The VPC endpoint to systems manager will cost about eight U.

22
00:01:12.230 --> 00:01:12.420
S.

23
00:01:12.420 --> 00:01:13.800
Dollars a month.

24
00:01:13.800 --> 00:01:16.310
They're not covered in the free tier of this point.

25
00:01:16.310 --> 00:01:20.230
But endpoints are still the nicest solution to this problem.

26
00:01:20.230 --> 00:01:22.710
So I wanna be sure you're aware of this.

27
00:01:22.710 --> 00:01:27.040
And if you do implement a new endpoint while following along with the demos,

28
00:01:27.040 --> 00:01:31.040
I would highly recommend deleting it shortly after.

29
00:01:31.040 --> 00:01:34.040
Okay, so let's go create that endpoint.

30
00:01:34.040 --> 00:01:39.040
But you can't do this in the toolkit, so we'll go back to the console,

31
00:01:39.040 --> 00:01:40.510
open the service for V.

32
00:01:40.510 --> 00:01:40.690
P.

33
00:01:40.690 --> 00:01:41.000
C.

34
00:01:41.000 --> 00:01:44.730
S and from the menu on the left scroll down to the end points

35
00:01:44.730 --> 00:01:48.140
option I happened to already have two and points.

36
00:01:48.140 --> 00:01:52.770
So I'm an old pro this already click create endpoint.

37
00:01:52.770 --> 00:01:56.080
And since we're creating an end point to the systems manager,

38
00:01:56.080 --> 00:02:01.040
the AWS services option that's pre selected is what we want.

39
00:02:01.040 --> 00:02:04.460
The service name for systems Manager is named like that

40
00:02:04.460 --> 00:02:06.640
policy we saw a little while ago.

41
00:02:06.640 --> 00:02:12.190
It still has S m from the original name Simple Systems Manager.

42
00:02:12.190 --> 00:02:14.920
So in the filter type sm,

43
00:02:14.920 --> 00:02:20.270
which filters is down on Lee to services and the first one com

44
00:02:20.270 --> 00:02:26.340
Amazon A W s U S East to S S m is the one we want,

45
00:02:26.340 --> 00:02:30.380
not S s m message so select that,

46
00:02:30.380 --> 00:02:36.240
then scroll down so we can tell it which vpc to create this endpoint on.

47
00:02:36.240 --> 00:02:40.440
So we choose the VPC from the drop down list and choose plural site RTs,

48
00:02:40.440 --> 00:02:44.420
which automatically also chooses the sub nets from that

49
00:02:44.420 --> 00:02:47.110
VPC and the Default Security group.

50
00:02:47.110 --> 00:02:49.720
So there's no need to change anything else here,

51
00:02:49.720 --> 00:02:53.740
just scroll down to the bottom and click the create and point button.

52
00:02:53.740 --> 00:02:57.540
It responds immediately by telling us that the endpoint was created.

53
00:02:57.540 --> 00:03:00.000
But if you go back to the end point list,

54
00:03:00.000 --> 00:03:03.160
refresh the list and then select the new endpoint,

55
00:03:03.160 --> 00:03:06.010
you'll see that the status is still pending,

56
00:03:06.010 --> 00:03:07.330
so it's created.

57
00:03:07.330 --> 00:03:11.450
But AWS is doing more work on it, and that will take a few minutes.

58
00:03:11.450 --> 00:03:17.040
But I promise this is the absolutely last thing we need to dio.

59
00:03:17.040 --> 00:03:21.150
So I won't make you wait the two minutes and just fast forward here.

60
00:03:21.150 --> 00:03:24.520
And when it's finished, I could go refresh the authors.

61
00:03:24.520 --> 00:03:27.740
You are all in the browser, and finally,

62
00:03:27.740 --> 00:03:33.540
there are the authors and books coming out of my RTs database

63
00:03:33.540 --> 00:03:37.520
through a Lamda function that's connecting to my authors

64
00:03:37.520 --> 00:03:48.000
controller in my asp dot net core application. And just to be sure, let's check the weather forecast and it's working again to

