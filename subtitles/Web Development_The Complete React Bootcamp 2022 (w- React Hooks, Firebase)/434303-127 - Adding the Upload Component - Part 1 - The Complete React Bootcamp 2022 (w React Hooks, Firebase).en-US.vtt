WEBVTT
X-TIMESTAMP-MAP=LOCAL:00:00:00.000,MPEGTS:0

00:00:00.000 --> 00:00:01.310
hallow.

00:00:01.310 --> 00:00:02.040
In this video,

00:00:02.040 --> 00:00:05.420
we will start at in functionality for file upload.

00:00:05.420 --> 00:00:06.220
Let's go,

00:00:06.220 --> 00:00:11.000
Let's navigate to Bottom folder and let's open index togs.

00:00:11.000 --> 00:00:13.300
Here we will add a new icon,

00:00:13.300 --> 00:00:15.400
bottom to our import.

00:00:15.400 --> 00:00:16.550
Here on the left,

00:00:16.550 --> 00:00:20.150
it will open model Window and from there we will upload our files.

00:00:20.150 --> 00:00:23.420
So let's create new file inside.

00:00:23.420 --> 00:00:28.810
This folder will name it Attachment BT and Moto Gs.

00:00:28.810 --> 00:00:35.310
Let's poor hello inside and let's use it here inside index togs right before the input

00:00:35.310 --> 00:00:38.650
elements were going to display Attachment Bt and Moto.

00:00:38.650 --> 00:00:39.220
Okay,

00:00:39.220 --> 00:00:40.900
now let's define our market.

00:00:40.900 --> 00:00:47.690
So here we need to pour in poor group Dar bottom because when we use import group inside,

00:00:47.690 --> 00:00:52.330
we need to pour in port group button in order to work and look good.

00:00:52.330 --> 00:00:54.210
So for this important group button,

00:00:54.210 --> 00:00:55.980
we're going to specify Aiken,

00:00:55.980 --> 00:01:02.000
which is going to be attachment now we need to you handle moral state.

00:01:02.000 --> 00:01:09.840
So let's use use Moto State hook and let's grow up his open close and open.

00:01:09.840 --> 00:01:11.700
So when we click on this bottom,

00:01:11.700 --> 00:01:14.530
we're gonna open our motile window.

00:01:14.530 --> 00:01:14.760
Okay,

00:01:14.760 --> 00:01:15.430
perfect.

00:01:15.430 --> 00:01:16.400
Next to this button,

00:01:16.400 --> 00:01:18.620
let's define the actual mortal window.

00:01:18.620 --> 00:01:20.160
So let's import model.

00:01:20.160 --> 00:01:21.210
And inside Moto,

00:01:21.210 --> 00:01:23.730
we're gonna specify Mortal Heather,

00:01:23.730 --> 00:01:24.900
body and footer.

00:01:24.900 --> 00:01:25.440
Okay,

00:01:25.440 --> 00:01:26.910
good for this model.

00:01:26.910 --> 00:01:28.990
We're gonna specify show property,

00:01:28.990 --> 00:01:32.350
which is open and also on height,

00:01:32.350 --> 00:01:35.220
is going to be close for Heather.

00:01:35.220 --> 00:01:36.210
Element inside,

00:01:36.210 --> 00:01:41.650
we will pour Moto title inside Mortal title we're gonna display are floored files.

00:01:41.650 --> 00:01:45.150
And let's remove this buck from here for a model footer.

00:01:45.150 --> 00:01:48.970
We're gonna pacify a bottom to applaud our files.

00:01:48.970 --> 00:01:55.100
So let's pour new button element and inside we're gonna pour a Plourde.

00:01:55.100 --> 00:01:55.780
Or maybe,

00:01:55.780 --> 00:01:56.290
let's say,

00:01:56.290 --> 00:01:57.600
sent to chat.

00:01:57.600 --> 00:01:59.290
So for now,

00:01:59.290 --> 00:02:01.490
it will only have one click property.

00:02:01.490 --> 00:02:03.010
And next to this bottom,

00:02:03.010 --> 00:02:10.350
we're gonna display small element and inside it will say Onley files less than five

00:02:10.350 --> 00:02:11.940
megabytes are allowed.

00:02:11.940 --> 00:02:17.400
And let's align this small element by the right site.

00:02:17.400 --> 00:02:18.060
And also,

00:02:18.060 --> 00:02:20.140
let's give it a little bit off margin top.

00:02:20.140 --> 00:02:20.490
Okay,

00:02:20.490 --> 00:02:21.190
let's save it.

00:02:21.190 --> 00:02:22.230
And for body,

00:02:22.230 --> 00:02:23.820
let's specify hello for now.

00:02:23.820 --> 00:02:25.850
And let's take a local one to be half.

00:02:25.850 --> 00:02:30.460
So now we can see we have this strange market because of this def.

00:02:30.460 --> 00:02:31.220
We don't need it.

00:02:31.220 --> 00:02:31.920
We need to react.

00:02:31.920 --> 00:02:32.450
Fragment.

00:02:32.450 --> 00:02:32.660
Okay,

00:02:32.660 --> 00:02:33.500
one more time.

00:02:33.500 --> 00:02:35.540
Now we have bottom When we click on it,

00:02:35.540 --> 00:02:41.090
we have this kind of moto send to Chad and where only files less than five megabytes are

00:02:41.090 --> 00:02:41.520
allowed.

00:02:41.520 --> 00:02:44.320
Our applaud element are uploaded.

00:02:44.320 --> 00:02:46.610
Component is going to be from reactive.

00:02:46.610 --> 00:02:52.500
So let's look for a plodder and let's go down to to manually.

00:02:52.500 --> 00:02:56.610
So this is type of the component that we will take from our suit.

00:02:56.610 --> 00:02:58.550
If we open code snippet,

00:02:58.550 --> 00:03:01.890
let's call P all of that and let's use it inside.

00:03:01.890 --> 00:03:02.090
Ah,

00:03:02.090 --> 00:03:03.650
wear body instead of hello.

00:03:03.650 --> 00:03:06.230
Let's import a porter.

00:03:06.230 --> 00:03:09.150
And here we're gonna pour out of floor equals two.

00:03:09.150 --> 00:03:15.610
False than action is going to be just an empty string because we're going to handle it

00:03:15.610 --> 00:03:17.940
manually for unchanged event.

00:03:17.940 --> 00:03:19.600
We're going to specify on change,

00:03:19.600 --> 00:03:20.070
Heller,

00:03:20.070 --> 00:03:21.040
that will create.

00:03:21.040 --> 00:03:25.330
We will not use any reference because we will handle everything to manually.

00:03:25.330 --> 00:03:29.810
Then we will be able to upload multiple files and also least type.

00:03:29.810 --> 00:03:32.230
We're gonna specify picture text.

00:03:32.230 --> 00:03:32.830
Okay,

00:03:32.830 --> 00:03:37.750
now we need to actually treat our state for uploaded files.

00:03:37.750 --> 00:03:40.880
So let's create a new state over here that we will name,

00:03:40.880 --> 00:03:41.440
file,

00:03:41.440 --> 00:03:45.040
list and set file list by default.

00:03:45.040 --> 00:03:48.700
It is going to be an empty rate and this file list.

00:03:48.700 --> 00:03:51.690
We need to pass it to this applaud er component.

00:03:51.690 --> 00:03:56.520
So let's pass file list as file list state.

00:03:56.520 --> 00:03:59.160
Now we need to define this on change,

00:03:59.160 --> 00:03:59.770
handler.

00:03:59.770 --> 00:04:06.640
So let's create that function over here and this one change event if we have gives us fire

00:04:06.640 --> 00:04:07.040
list,

00:04:07.040 --> 00:04:08.260
which is filed type.

00:04:08.260 --> 00:04:13.400
So we basically have array off files that we have to applaud.

00:04:13.400 --> 00:04:15.180
But from this ray,

00:04:15.180 --> 00:04:17.190
we need to a filter a few things.

00:04:17.190 --> 00:04:18.300
So first of all,

00:04:18.300 --> 00:04:23.590
we need to allow Onley files that are less than five megabytes of data.

00:04:23.590 --> 00:04:28.040
And also we want to restrict the maximum number off uploaded files.

00:04:28.040 --> 00:04:33.720
Let's say 25 So first we need to define our size in bytes to restrict it.

00:04:33.720 --> 00:04:38.250
So we need to get five megabytes in bites to do that.

00:04:38.250 --> 00:04:39.540
So here at the top,

00:04:39.540 --> 00:04:42.330
let's create Max file size valuable,

00:04:42.330 --> 00:04:48.240
and here we're gonna put So first we will grab 1000 which represents one bite.

00:04:48.240 --> 00:04:56.450
Then we're gonna multiplied by 1024 to get one megabyte in bites and then multiplied by

00:04:56.450 --> 00:04:59.550
five to get five megabytes in bites.

00:04:59.550 --> 00:05:00.170
All right,

00:05:00.170 --> 00:05:04.470
so inside this unchanged handler lets poor filter it,

00:05:04.470 --> 00:05:06.820
Let's say value or valuable.

00:05:06.820 --> 00:05:12.650
Then we're gonna call file array dot filter Here we will receive element.

00:05:12.650 --> 00:05:13.910
And for this element,

00:05:13.910 --> 00:05:21.690
we're gonna ask if this element blob file dot size it will give us the size off current

00:05:21.690 --> 00:05:26.750
file less than or equal to max file size Onley.

00:05:26.750 --> 00:05:30.540
Then it will be added to our filtered A rape.

00:05:30.540 --> 00:05:31.020
Also,

00:05:31.020 --> 00:05:32.290
from this filtered array,

00:05:32.290 --> 00:05:34.680
we want Onley to grab five elements.

00:05:34.680 --> 00:05:41.420
So let's put slice and from the slice we're gonna specify Onley 1st 5 elements like that.

00:05:41.420 --> 00:05:42.460
So right after that,

00:05:42.460 --> 00:05:47.190
we're gonna call set fire list and we will pour filtered insight like that.

00:05:47.190 --> 00:05:47.480
Okay,

00:05:47.480 --> 00:05:48.640
if we say we're now,

00:05:48.640 --> 00:05:51.250
we have this equal sign at the bottom.

00:05:51.250 --> 00:05:52.790
Let's save everything.

00:05:52.790 --> 00:05:58.260
Let's navigate back to the APP Let's click on this button and we can see that it is not

00:05:58.260 --> 00:05:59.000
full with.

00:05:59.000 --> 00:06:02.370
So let's fix this quickly for applauded her.

00:06:02.370 --> 00:06:05.740
We're going to specify class name off with 100.

00:06:05.740 --> 00:06:06.780
Now what saver?

00:06:06.780 --> 00:06:08.550
And let's take a look one more time.

00:06:08.550 --> 00:06:10.080
So when I click on this button,

00:06:10.080 --> 00:06:11.470
I go to upload,

00:06:11.470 --> 00:06:15.730
I can see that it is full with I can select multiple files.

00:06:15.730 --> 00:06:18.290
Let's say I'm going to select all of them.

00:06:18.290 --> 00:06:21.740
But only 1st 5 files will be selected.

00:06:21.740 --> 00:06:25.000
12345 I can see that it actually works.

00:06:25.000 --> 00:06:30.410
Now I need to add functionality to send to chat button in order to upload all of them.

00:06:30.410 --> 00:06:32.550
I can also manage them from here.

00:06:32.550 --> 00:06:32.940
Okay,

00:06:32.940 --> 00:06:33.280
cool.

00:06:33.280 --> 00:06:35.690
So let's create And you,

00:06:35.690 --> 00:06:36.290
handler,

00:06:36.290 --> 00:06:41.670
which is going to be our handler for this on click sent to chat button.

00:06:41.670 --> 00:06:42.940
So let's create,

00:06:42.940 --> 00:06:43.840
let's say,

00:06:43.840 --> 00:06:47.330
on a Plourde it is going to be in a sink,

00:06:47.330 --> 00:06:49.200
function and insight.

00:06:49.200 --> 00:06:49.740
First,

00:06:49.740 --> 00:06:50.910
we will define,

00:06:50.910 --> 00:06:51.700
let's say,

00:06:51.700 --> 00:06:52.760
the loading state.

00:06:52.760 --> 00:06:53.300
Okay,

00:06:53.300 --> 00:06:58.700
so let's create is loading and set is loading by default.

00:06:58.700 --> 00:07:00.490
It will be false.

00:07:00.490 --> 00:07:01.950
And this is loading.

00:07:01.950 --> 00:07:04.660
We gonna pour for this bottom.

00:07:04.660 --> 00:07:08.910
So for disabled we're gonna put is loading for on click.

00:07:08.910 --> 00:07:11.550
We're gonna specify on a Plourde.

00:07:11.550 --> 00:07:15.830
And also let's make our applauded or disabled.

00:07:15.830 --> 00:07:16.910
If we can do that,

00:07:16.910 --> 00:07:17.910
they disabled.

00:07:17.910 --> 00:07:18.930
When is loading?

00:07:18.930 --> 00:07:19.220
Okay,

00:07:19.220 --> 00:07:19.780
Perfect.

00:07:19.780 --> 00:07:20.870
So for a Plourde,

00:07:20.870 --> 00:07:22.260
we will do the next thing.

00:07:22.260 --> 00:07:23.320
Let's pull,

00:07:23.320 --> 00:07:25.770
try catch block in the first place.

00:07:25.770 --> 00:07:30.820
So we know that we have file list as an array off file types.

00:07:30.820 --> 00:07:34.020
It means that we will applaud multiple files to our database.

00:07:34.020 --> 00:07:36.500
So in order to handle multiple promises,

00:07:36.500 --> 00:07:39.100
we will use promise dot All But first,

00:07:39.100 --> 00:07:41.620
we need to get an array of promises for that.

00:07:41.620 --> 00:07:48.910
Let's create any valuable applaud promises and we're gonna map our file list array to

00:07:48.910 --> 00:07:51.640
promise in order to receive array of promises.

00:07:51.640 --> 00:07:55.020
So file list dot map is going to be filed.

00:07:55.020 --> 00:07:57.840
Then we need to access our storage.

00:07:57.840 --> 00:07:59.670
So let's put a storage.

00:07:59.670 --> 00:08:04.110
Then we're gonna use storage object from MISC firebase.

00:08:04.110 --> 00:08:05.820
Then we're gonna pull reference,

00:08:05.820 --> 00:08:06.990
and we're gonna put it.

00:08:06.990 --> 00:08:07.660
Teoh,

00:08:07.660 --> 00:08:10.590
Let's hr slash chat.

00:08:10.590 --> 00:08:11.050
I d.

00:08:11.050 --> 00:08:12.450
Okay,

00:08:12.450 --> 00:08:13.020
like this.

00:08:13.020 --> 00:08:14.960
Now we need to grab chart I D.

00:08:14.960 --> 00:08:16.370
But it is very simple.

00:08:16.370 --> 00:08:18.210
We can get it using cues,

00:08:18.210 --> 00:08:20.080
Paramus Hook use programs.

00:08:20.080 --> 00:08:24.150
From here we will get chart I d React router.

00:08:24.150 --> 00:08:25.660
Let's move it to the top.

00:08:25.660 --> 00:08:28.120
And for this storage reference,

00:08:28.120 --> 00:08:30.850
then we will specify lets a child.

00:08:30.850 --> 00:08:36.180
Then we're gonna pour a file name and in order to come up with the random name we can put

00:08:36.180 --> 00:08:38.550
simply date now and then,

00:08:38.550 --> 00:08:43.410
let's say plaice file dark name to make it more or less randomized.

00:08:43.410 --> 00:08:43.940
Okay,

00:08:43.940 --> 00:08:45.050
then that your Plourde,

00:08:45.050 --> 00:08:50.770
we're gonna pour port and we can actually use this block file that we have from file

00:08:50.770 --> 00:08:51.330
objects.

00:08:51.330 --> 00:08:51.980
It will work.

00:08:51.980 --> 00:08:52.280
OK,

00:08:52.280 --> 00:08:53.640
so this is almost it.

00:08:53.640 --> 00:08:54.940
But for this file,

00:08:54.940 --> 00:08:57.270
I want to specify cash control.

00:08:57.270 --> 00:08:57.630
Heather,

00:08:57.630 --> 00:09:01.300
in order to cash it inside our browser for port,

00:09:01.300 --> 00:09:03.530
we're gonna specify second perimeter.

00:09:03.530 --> 00:09:05.140
It is going to be object off,

00:09:05.140 --> 00:09:05.810
made a data.

00:09:05.810 --> 00:09:11.370
So here we will specify cash control and we're gonna do the next So it is going to be

00:09:11.370 --> 00:09:13.350
public and then marks age.

00:09:13.350 --> 00:09:15.300
We need to specify here,

00:09:15.300 --> 00:09:15.750
Max,

00:09:15.750 --> 00:09:17.440
age in seconds.

00:09:17.440 --> 00:09:20.450
So let's specify three days in seconds.

00:09:20.450 --> 00:09:22.920
So let's put it to strengthen trip elation.

00:09:22.920 --> 00:09:24.240
And now let's do our logic.

00:09:24.240 --> 00:09:24.950
So first,

00:09:24.950 --> 00:09:27.500
we're going to get one hour in seconds,

00:09:27.500 --> 00:09:29.640
which is 3600.

00:09:29.640 --> 00:09:35.880
Then we're gonna multiplied by 24 to get one day in seconds and then multiplied by three to

00:09:35.880 --> 00:09:37.410
get three days in seconds.

00:09:37.410 --> 00:09:37.700
Ok,

00:09:37.700 --> 00:09:38.070
good.

00:09:38.070 --> 00:09:39.080
Right after that.

00:09:39.080 --> 00:09:39.650
Actually,

00:09:39.650 --> 00:09:43.200
don't forget to return from these callback function.

00:09:43.200 --> 00:09:45.860
Then we will get the next thing.

00:09:45.860 --> 00:09:49.220
Then we're gonna put a const a Plourde snapshots,

00:09:49.220 --> 00:09:56.480
a Plourde snapshots we're gonna call await promise dot All applaud promises.

00:09:56.480 --> 00:09:58.630
So one hour files are uploaded.

00:09:58.630 --> 00:10:01.700
We will receive an array off applaud snapshots.

00:10:01.700 --> 00:10:02.410
Then,

00:10:02.410 --> 00:10:07.790
as you remember to get your l four uploaded file to get public available,

00:10:07.790 --> 00:10:08.270
you know,

00:10:08.270 --> 00:10:11.880
it is also a promise we need to call Gedo and lower the aura.

00:10:11.880 --> 00:10:13.080
So it is a promise.

00:10:13.080 --> 00:10:16.650
So again we will end up with another area of promises.

00:10:16.650 --> 00:10:18.040
That's why again,

00:10:18.040 --> 00:10:20.890
we need to map a new array of promises.

00:10:20.890 --> 00:10:25.190
That's why Let's say it is going to be shape promises.

00:10:25.190 --> 00:10:32.050
And here we're gonna call applaud snapshots dot map And from here we're gonna receive

00:10:32.050 --> 00:10:33.560
pacing snap shirt,

00:10:33.560 --> 00:10:36.800
and this snap shirt will give us the next.

00:10:36.800 --> 00:10:43.590
So we're going to return an object which is going to be content type snap shore metadata

00:10:43.590 --> 00:10:45.250
content type.

00:10:45.250 --> 00:10:47.100
Then we will have name,

00:10:47.100 --> 00:10:48.560
which is going to be snapped.

00:10:48.560 --> 00:10:50.730
Shore meta data dot name.

00:10:50.730 --> 00:10:52.790
It is going to be file name uploaded,

00:10:52.790 --> 00:10:53.480
file name,

00:10:53.480 --> 00:11:00.100
and then your own is going to be a weight we can grab snap short dot reference door get

00:11:00.100 --> 00:11:01.990
Don't load Europe like this.

00:11:01.990 --> 00:11:08.600
So this is going to be our data that we will store inside database now to this street

00:11:08.600 --> 00:11:10.590
promises we're going to create new valuable,

00:11:10.590 --> 00:11:12.210
which we will name files.

00:11:12.210 --> 00:11:17.320
Then we're going to call a weight promise daughter all shaped promises,

00:11:17.320 --> 00:11:21.730
and I would have our files that we need to said to our database.

00:11:21.730 --> 00:11:24.800
So for that inside index surgery,

00:11:24.800 --> 00:11:25.330
yes,

00:11:25.330 --> 00:11:29.440
we're going to create a new function that we will manage in the next video for out.

00:11:29.440 --> 00:11:31.380
Let's just call it in advance.

00:11:31.380 --> 00:11:32.850
So from props here,

00:11:32.850 --> 00:11:35.750
we're gonna receive a function after a Plourde,

00:11:35.750 --> 00:11:41.810
and this after upload will manage uploaded files and said them to the database.

00:11:41.810 --> 00:11:42.980
So we're gonna call,

00:11:42.980 --> 00:11:46.540
await after a Plourde and for dysfunction,

00:11:46.540 --> 00:11:50.140
we will pass our files off this structure.

00:11:50.140 --> 00:11:51.500
Then after that call back,

00:11:51.500 --> 00:11:54.890
we're gonna set is loading to false.

00:11:54.890 --> 00:11:58.540
And also we're gonna close our motile window like that.

00:11:58.540 --> 00:12:03.040
And in case if we have any error we're gonna call said is loading.

00:12:03.040 --> 00:12:07.500
And then we're gonna alert door better with error dot message.

00:12:07.500 --> 00:12:08.250
All right,

00:12:08.250 --> 00:12:11.090
So this is it for this video.

00:12:11.090 --> 00:12:12.010
Unfortunately,

00:12:12.010 --> 00:12:13.920
we cannot test it yet.

00:12:13.920 --> 00:12:14.950
We can,

00:12:14.950 --> 00:12:17.600
but it will just upload files to this storage.

00:12:17.600 --> 00:12:19.140
So in the next video,

00:12:19.140 --> 00:12:21.140
we're going to continue to work in that.

00:12:21.140 --> 00:12:23.360
And we're gonna create this after upload function.

00:12:23.360 --> 00:12:24.250
But as for now,

00:12:24.250 --> 00:12:27.210
let's commit our changes and finish the video.

00:12:27.210 --> 00:12:30.010
So get at everything and then get commit.

00:12:30.010 --> 00:12:32.670
Created attachment,

00:12:32.670 --> 00:12:37.150
bottom with a floater component.

00:12:37.150 --> 00:12:38.530
All right,

00:12:38.530 --> 00:12:39.840
see you in the next one.

