WEBVTT
X-TIMESTAMP-MAP=LOCAL:00:00:00.000,MPEGTS:0

00:00:00.000 --> 00:00:01.210
hello.

00:00:01.210 --> 00:00:01.920
In this video,

00:00:01.920 --> 00:00:03.700
we will create a new model window.

00:00:03.700 --> 00:00:08.080
Ever will ask users whether they want to receive notifications or not.

00:00:08.080 --> 00:00:09.070
Let's go.

00:00:09.070 --> 00:00:14.230
Let's navigate back to the code and under Chat Window Top folder.

00:00:14.230 --> 00:00:15.780
Let's create new file.

00:00:15.780 --> 00:00:18.160
Ask FC M Bt and model.

00:00:18.160 --> 00:00:20.590
Let's go full this component.

00:00:20.590 --> 00:00:23.090
It will be covered with the act Frackman.

00:00:23.090 --> 00:00:24.290
And as a trigger,

00:00:24.290 --> 00:00:27.560
we're gonna pour Aiken button for Aiken.

00:00:27.560 --> 00:00:32.580
We're gonna specify I can component and for I can component will quote.

00:00:32.580 --> 00:00:34.950
I can name off podcast.

00:00:34.950 --> 00:00:42.000
This I can Button also will have blue collar size is going to be small and also it is going

00:00:42.000 --> 00:00:43.070
to be a circle.

00:00:43.070 --> 00:00:44.070
Let's save it.

00:00:44.070 --> 00:00:46.820
Let's navigate to Index Duchy Yes,

00:00:46.820 --> 00:00:53.460
inside top folder And let's use this component inside this button toolbar right before a

00:00:53.460 --> 00:00:54.810
Detroit beach and Robert.

00:00:54.810 --> 00:00:57.600
Let's poor ask FC M Beach in Moto.

00:00:57.600 --> 00:00:59.960
Let's say wait and let's take a look Now,

00:00:59.960 --> 00:01:00.840
As you can see,

00:01:00.840 --> 00:01:03.330
I have this broken mark up at the top,

00:01:03.330 --> 00:01:10.240
and this is because if we open edit room Beach intro Burr were upward in dif element.

00:01:10.240 --> 00:01:13.150
Let's remove it and let's keep react fragment.

00:01:13.150 --> 00:01:14.740
Now if we take a look.

00:01:14.740 --> 00:01:16.820
Everything is aligned nicely.

00:01:16.820 --> 00:01:17.630
Perfect.

00:01:17.630 --> 00:01:20.850
Now let's continue building our ask FC and beaten and Moto.

00:01:20.850 --> 00:01:23.500
So let's define a motel window over here.

00:01:23.500 --> 00:01:24.220
Inside,

00:01:24.220 --> 00:01:27.840
we will have mortal header than body and footer.

00:01:27.840 --> 00:01:30.560
Let me specify all of them.

00:01:30.560 --> 00:01:32.410
So inside Heather,

00:01:32.410 --> 00:01:38.440
we will have mortal dot title and people say not tea vacations.

00:01:38.440 --> 00:01:39.290
Permission.

00:01:39.290 --> 00:01:39.770
Okay,

00:01:39.770 --> 00:01:40.220
good.

00:01:40.220 --> 00:01:40.710
Now,

00:01:40.710 --> 00:01:43.750
in order to display something inside body,

00:01:43.750 --> 00:01:50.010
we need to know whether our current user is already receiving FC M messages.

00:01:50.010 --> 00:01:50.690
For that,

00:01:50.690 --> 00:01:55.060
we need to pour some other value inside our context.

00:01:55.060 --> 00:01:57.950
Let's navigate to Chad togs.

00:01:57.950 --> 00:02:03.790
So this is Page where we passed some context data about our current room.

00:02:03.790 --> 00:02:07.050
Here we can get our FC M users,

00:02:07.050 --> 00:02:10.330
So let's poor FC M users valuable.

00:02:10.330 --> 00:02:16.240
Then we will call transform to array than current room FC M users.

00:02:16.240 --> 00:02:19.580
Now we need to get our Bullen.

00:02:19.580 --> 00:02:29.100
So we will create is receiving FC M and we will ask if FC abusers array includes US current

00:02:29.100 --> 00:02:29.510
user.

00:02:29.510 --> 00:02:31.320
Your I d damnable past.

00:02:31.320 --> 00:02:35.850
This is receiving FC and Bullen to our current from context.

00:02:35.850 --> 00:02:40.280
Now let's save it and inside ask FC M Between Moto,

00:02:40.280 --> 00:02:46.180
we will get is receiving FC M from use current room hook.

00:02:46.180 --> 00:02:46.510
Okay,

00:02:46.510 --> 00:02:47.180
perfect.

00:02:47.180 --> 00:02:48.500
But for selector,

00:02:48.500 --> 00:02:52.950
let's specify value is receiving FC M Good.

00:02:52.950 --> 00:02:53.980
Now for model,

00:02:53.980 --> 00:02:55.840
we need use mortal state.

00:02:55.840 --> 00:03:00.200
So let's use this model state hook and you will get,

00:03:00.200 --> 00:03:00.990
as always,

00:03:00.990 --> 00:03:02.070
is open,

00:03:02.070 --> 00:03:04.160
close and open.

00:03:04.160 --> 00:03:05.920
So for mortal window,

00:03:05.920 --> 00:03:10.820
we're gonna specify show property which is going to be is open on hide.

00:03:10.820 --> 00:03:12.750
You're going to be close.

00:03:12.750 --> 00:03:18.190
And also we will specify another props that we haven't used before such as size.

00:03:18.190 --> 00:03:22.980
Let's specify extra small and also backdrop is going to be static.

00:03:22.980 --> 00:03:23.610
All right,

00:03:23.610 --> 00:03:30.870
now let's actually pour our conditional rendering inside by But before let me quickly fix

00:03:30.870 --> 00:03:35.750
this matter and here as well and we don't need that one.

00:03:35.750 --> 00:03:41.550
So inside footer to avoid this red line for a delicious put button with text high and

00:03:41.550 --> 00:03:43.880
inside body will put conditional rendering.

00:03:43.880 --> 00:03:46.950
So we're gonna ask if is receiving FC M.

00:03:46.950 --> 00:03:51.640
Then we're gonna put a diff element with class name off text center.

00:03:51.640 --> 00:03:53.000
And inside this Dave,

00:03:53.000 --> 00:04:00.930
we will put I come with class name off text green and margin bottom three,

00:04:00.930 --> 00:04:09.550
so I can name is going to be check circle and size is going to be five times large.

00:04:09.550 --> 00:04:10.780
And next to this,

00:04:10.780 --> 00:04:15.230
I can We will supply H six title with text.

00:04:15.230 --> 00:04:24.630
You are subscribed to broadcast messages sent by ad Mons off this room.

00:04:24.630 --> 00:04:25.480
All right,

00:04:25.480 --> 00:04:25.920
Good.

00:04:25.920 --> 00:04:26.210
Now,

00:04:26.210 --> 00:04:28.480
if we're not subscribe to messages,

00:04:28.480 --> 00:04:34.370
then we're gonna display another live again with class name off text center this time will

00:04:34.370 --> 00:04:37.300
display another icon with class.

00:04:37.300 --> 00:04:42.190
Name off text Blue and margin bottom three as well.

00:04:42.190 --> 00:04:44.890
So I can name is going to be questioned.

00:04:44.890 --> 00:04:48.800
Circle and size again five times large.

00:04:48.800 --> 00:04:50.770
Now next to this Aiken again,

00:04:50.770 --> 00:04:52.050
h six title.

00:04:52.050 --> 00:05:01.150
And do you want to subscribe to my messages sent by ad mons off this room?

00:05:01.150 --> 00:05:01.670
Okay,

00:05:01.670 --> 00:05:02.100
good.

00:05:02.100 --> 00:05:04.070
Next to this conditional rendering,

00:05:04.070 --> 00:05:06.340
we're gonna pour another text.

00:05:06.340 --> 00:05:09.210
So let's put p tag and class.

00:05:09.210 --> 00:05:12.830
Name is going to be margin top two,

00:05:12.830 --> 00:05:17.850
and we will say to receive notifications,

00:05:17.850 --> 00:05:25.020
make sure you allow not vacations in your browser.

00:05:25.020 --> 00:05:25.860
All right,

00:05:25.860 --> 00:05:26.220
Good.

00:05:26.220 --> 00:05:28.750
Let's savor and let's take a look.

00:05:28.750 --> 00:05:30.330
So before we can do that,

00:05:30.330 --> 00:05:33.610
let's pour on click handler for Aiken button.

00:05:33.610 --> 00:05:36.930
Let's put open and let's take a look.

00:05:36.930 --> 00:05:37.400
Okay,

00:05:37.400 --> 00:05:41.170
so if I click on this button now I have notifications.

00:05:41.170 --> 00:05:41.910
Permission?

00:05:41.910 --> 00:05:44.450
You are subscribed to receive notifications.

00:05:44.450 --> 00:05:47.280
Make sure you allow notifications in your browser.

00:05:47.280 --> 00:05:47.660
Also,

00:05:47.660 --> 00:05:53.080
it would be nice if we had some sort of a value that indicates whether we have the

00:05:53.080 --> 00:05:54.350
permission or not.

00:05:54.350 --> 00:05:58.000
Because if we open this side information here,

00:05:58.000 --> 00:06:00.120
we confined different permissions,

00:06:00.120 --> 00:06:01.550
such as for location,

00:06:01.550 --> 00:06:03.480
microphone and notifications.

00:06:03.480 --> 00:06:05.650
So if this is set to block,

00:06:05.650 --> 00:06:08.010
we will not be able to receive anything.

00:06:08.010 --> 00:06:10.070
That's why it is good to display here.

00:06:10.070 --> 00:06:13.170
But that the permission is granted were not for that.

00:06:13.170 --> 00:06:17.880
Let's put it next to this P tag permission indicator.

00:06:17.880 --> 00:06:20.000
So we will say permission.

00:06:20.000 --> 00:06:23.310
Then let's board colon and then put conditional rendering.

00:06:23.310 --> 00:06:30.230
So we gonna put notification and notification is the global object inside window inside

00:06:30.230 --> 00:06:30.750
browser.

00:06:30.750 --> 00:06:31.090
If I,

00:06:31.090 --> 00:06:31.510
however,

00:06:31.510 --> 00:06:38.680
you can see that this is notifications ap I So if notification dot permission equals two

00:06:38.680 --> 00:06:39.390
grunted,

00:06:39.390 --> 00:06:46.170
then I'm gonna display a spun element that will say grunting and let's put a class name off

00:06:46.170 --> 00:06:47.460
Text green.

00:06:47.460 --> 00:06:48.640
Otherwise,

00:06:48.640 --> 00:06:50.900
if we don't have the permission,

00:06:50.900 --> 00:06:57.540
we're gonna display span with text de night and class name is going to be text read.

00:06:57.540 --> 00:06:58.310
Perfect.

00:06:58.310 --> 00:07:03.070
But now I can save it because it seems like I have better somewhere.

00:07:03.070 --> 00:07:03.540
All right,

00:07:03.540 --> 00:07:07.650
Let's could this Pitak to the end like this.

00:07:07.650 --> 00:07:08.470
Okay,

00:07:08.470 --> 00:07:09.350
looks good.

00:07:09.350 --> 00:07:10.410
Now let's take a look.

00:07:10.410 --> 00:07:12.230
If I opened this window now,

00:07:12.230 --> 00:07:13.490
I have permission front.

00:07:13.490 --> 00:07:17.350
It looks going now we need to define our functionality.

00:07:17.350 --> 00:07:18.810
So insides footer.

00:07:18.810 --> 00:07:21.130
Let's first put a close button.

00:07:21.130 --> 00:07:26.730
So let me make a recapitalized and on click is going to be close.

00:07:26.730 --> 00:07:28.640
And right before this button,

00:07:28.640 --> 00:07:31.300
we will put our main buttons for functionality.

00:07:31.300 --> 00:07:34.900
So we're gonna ask if our user is receiving FC M.

00:07:34.900 --> 00:07:37.460
Then we're gonna put button with text.

00:07:37.460 --> 00:07:40.670
I changed my mind because as you remember,

00:07:40.670 --> 00:07:41.810
we have this question.

00:07:41.810 --> 00:07:45.410
Do you want to subscribe to messages for color?

00:07:45.410 --> 00:07:53.160
We will specify green and for unclipped we will create on cancel function just in a moment

00:07:53.160 --> 00:07:53.160
.

00:07:53.160 --> 00:07:53.870
Otherwise,

00:07:53.870 --> 00:07:57.040
if we are not receiving any notifications,

00:07:57.040 --> 00:07:58.800
we will quote another button.

00:07:58.800 --> 00:08:00.080
But text Yes,

00:08:00.080 --> 00:08:02.040
I do want to subscribe.

00:08:02.040 --> 00:08:02.750
All right.

00:08:02.750 --> 00:08:07.400
For unclip we will pour on except and for a color.

00:08:07.400 --> 00:08:09.640
We will work green as well.

00:08:09.640 --> 00:08:10.140
All right,

00:08:10.140 --> 00:08:10.850
let's save it.

00:08:10.850 --> 00:08:13.550
And now let's define our functions first.

00:08:13.550 --> 00:08:14.590
Let's poured on.

00:08:14.590 --> 00:08:16.190
Cancel on.

00:08:16.190 --> 00:08:19.700
Cancel and here we're gonna reference our database.

00:08:19.700 --> 00:08:24.930
So let's put database that we import from firebase file than reference.

00:08:24.930 --> 00:08:26.930
And people specify rooms,

00:08:26.930 --> 00:08:32.260
slash room I D or chat I D that we get from use Paramus Hook.

00:08:32.260 --> 00:08:33.700
So chat i d.

00:08:33.700 --> 00:08:36.210
He's received from use perms.

00:08:36.210 --> 00:08:43.710
Let's move this import to the top than we are going to reference FC M users and for child,

00:08:43.710 --> 00:08:46.310
which is off current user.

00:08:46.310 --> 00:08:50.790
Let's important off current user you I d Don't remove.

00:08:50.790 --> 00:08:54.040
We will simply remove this object from our database.

00:08:54.040 --> 00:08:54.480
Good.

00:08:54.480 --> 00:08:56.710
Now let's define second function,

00:08:56.710 --> 00:09:02.330
which is on except and different nationality is going to be pretty similar licious.

00:09:02.330 --> 00:09:03.200
Copy this,

00:09:03.200 --> 00:09:03.770
Nipper.

00:09:03.770 --> 00:09:06.200
And instead of removing this child,

00:09:06.200 --> 00:09:08.120
we're gonna set it to truth.

00:09:08.120 --> 00:09:08.970
All right?

00:09:08.970 --> 00:09:09.520
Perfect.

00:09:09.520 --> 00:09:11.590
Now let's actually tested.

00:09:11.590 --> 00:09:17.470
So let's open our motile And here we're gonna click on I changed my mind and now you can

00:09:17.470 --> 00:09:19.740
see that conditionality entering works.

00:09:19.740 --> 00:09:21.490
And if we look inside database,

00:09:21.490 --> 00:09:24.770
go to rooms Now we don't have any FC M users.

00:09:24.770 --> 00:09:26.140
If I click on yes,

00:09:26.140 --> 00:09:26.940
I do.

00:09:26.940 --> 00:09:31.280
Now we have FC M users with my user i d insight,

00:09:31.280 --> 00:09:35.300
But to make it a little bit more user friendly.

00:09:35.300 --> 00:09:41.050
Let's actually define another color for our Aiken button.

00:09:41.050 --> 00:09:43.810
So we will say appearance.

00:09:43.810 --> 00:09:46.970
If our user is receiving FC M,

00:09:46.970 --> 00:09:49.310
then we will pour default appearance.

00:09:49.310 --> 00:09:53.650
Otherwise we will put ghost and let's take a look what is going to happen.

00:09:53.650 --> 00:09:59.640
So if I say what now I have this color blue over here with the normal appearance.

00:09:59.640 --> 00:10:00.110
All right,

00:10:00.110 --> 00:10:06.890
so if I changed my mind now I have this ghost appearance without the color inside the

00:10:06.890 --> 00:10:07.340
bottom.

00:10:07.340 --> 00:10:07.760
Okay,

00:10:07.760 --> 00:10:08.180
good.

00:10:08.180 --> 00:10:09.900
So this is it.

00:10:09.900 --> 00:10:13.290
This is how we're able to manage our users,

00:10:13.290 --> 00:10:15.070
but they want to subscribe or not.

00:10:15.070 --> 00:10:16.820
So if they're not subscribe,

00:10:16.820 --> 00:10:23.650
it means that they will not receive any notification that are sent by this moral form.

00:10:23.650 --> 00:10:24.510
All right,

00:10:24.510 --> 00:10:27.170
so I guess that's it for this video.

00:10:27.170 --> 00:10:30.550
And this is the time for us to commit our changes.

00:10:30.550 --> 00:10:35.960
Let's open our terminal and then let's go get at Dar and then get commit.

00:10:35.960 --> 00:10:45.930
Let's a man age FC M users with the ask FC M vtm Moto perfect to finish off this journey.

00:10:45.930 --> 00:10:48.760
Let's Bush everything online to get up with.

00:10:48.760 --> 00:10:51.680
Get Bush origin muster after it's finished.

00:10:51.680 --> 00:10:52.230
Let's run,

00:10:52.230 --> 00:10:56.290
firebase deploy and enjoy our chat application online.

00:10:56.290 --> 00:11:00.250
I'm glad to say that we're completely finished with this project.

00:11:00.250 --> 00:11:02.470
We've implemented everything we wanted.

00:11:02.470 --> 00:11:04.530
The real time notifications,

00:11:04.530 --> 00:11:05.530
admin roles,

00:11:05.530 --> 00:11:06.660
user presence.

00:11:06.660 --> 00:11:08.510
We have everything in place.

00:11:08.510 --> 00:11:14.170
There will be a few more videos about react concept that we haven't covered your in thes

00:11:14.170 --> 00:11:15.310
three projects.

00:11:15.310 --> 00:11:16.470
But nevertheless,

00:11:16.470 --> 00:11:20.280
I hope it was a valuable experience for both of us.

00:11:20.280 --> 00:11:23.620
And I hope this course give you what you came for.

00:11:23.620 --> 00:11:24.510
Thank you for it.

00:11:24.510 --> 00:11:25.790
Time and patience.

00:11:25.790 --> 00:11:27.000
See you next time.

