WEBVTT
X-TIMESTAMP-MAP=LOCAL:00:00:00.000,MPEGTS:0

00:00:00.000 --> 00:00:03.490
Now that we have this deal will factory class,

00:00:03.490 --> 00:00:06.550
which has the static function called Get Customer Dio,

00:00:06.550 --> 00:00:08.940
which returns a customer deal.

00:00:08.940 --> 00:00:09.850
For instance,

00:00:09.850 --> 00:00:11.090
Let us know,

00:00:11.090 --> 00:00:12.520
write a program toe,

00:00:12.520 --> 00:00:15.850
test the functionality off this customer deal interface.

00:00:15.850 --> 00:00:16.790
Now remember,

00:00:16.790 --> 00:00:21.240
the object of customer deal is provided by my bet.

00:00:21.240 --> 00:00:23.010
Is here to begin with?

00:00:23.010 --> 00:00:26.250
Let's just the Eid customer function.

00:00:26.250 --> 00:00:29.450
So that's I click on any package over here,

00:00:29.450 --> 00:00:31.850
and then it's a new class.

00:00:31.850 --> 00:00:34.110
But since these are programs,

00:00:34.110 --> 00:00:38.040
I'm gonna change the package name from deal toe programs.

00:00:38.040 --> 00:00:44.810
Let's call it us our new customer well into the public static wide main as well and click,

00:00:44.810 --> 00:00:46.110
finish and delete.

00:00:46.110 --> 00:00:53.470
The art was invited to do so we can say here customer deal deal equals two.

00:00:53.470 --> 00:00:58.090
Deal factory dot Get customer view.

00:00:58.090 --> 00:01:00.720
Let's import customer deal as well.

00:01:00.720 --> 00:01:05.930
The checked exception that is being thrown letters threw it away from the main function and

00:01:05.930 --> 00:01:07.070
using the deal,

00:01:07.070 --> 00:01:07.780
for instance,

00:01:07.780 --> 00:01:12.210
we can now call all the functions and the one that we want to call it our customer.

00:01:12.210 --> 00:01:18.130
Onda our customer or add new customer takes a perimeter of customer type.

00:01:18.130 --> 00:01:21.490
Let's create a new variable off type customer.

00:01:21.490 --> 00:01:29.950
C one equals two new customer and then say C one dot said name that's pass secure as the

00:01:29.950 --> 00:01:32.740
name C one dot said City.

00:01:32.740 --> 00:01:33.300
Let's say,

00:01:33.300 --> 00:01:33.980
for example,

00:01:33.980 --> 00:01:36.940
I want to type it us a different city than bangle,

00:01:36.940 --> 00:01:45.720
C one dot said email said the art example dot com and then C one dot said phone.

00:01:45.720 --> 00:01:48.450
We will supply some dummy number,

00:01:48.450 --> 00:01:53.500
and now we want to add this customer to the date of a stable.

00:01:53.500 --> 00:01:54.740
To do that,

00:01:54.740 --> 00:02:00.950
I think you have to say dear would not add customer and then they see one as the perimeter

00:02:00.950 --> 00:02:00.950
.

00:02:00.950 --> 00:02:03.390
If this is successfully executed,

00:02:03.390 --> 00:02:07.000
then a new record is added in the database.

00:02:07.000 --> 00:02:12.750
In the database table that are four reports the fifth record would be the satirist record.

00:02:12.750 --> 00:02:18.560
The primary key that is generated in the back in because of the auto underscore increment

00:02:18.560 --> 00:02:22.140
will now be automatically said toe the I D offs even.

00:02:22.140 --> 00:02:25.290
And that's primarily because in the customer deal,

00:02:25.290 --> 00:02:27.570
we have added an options here,

00:02:27.570 --> 00:02:31.350
saying the generative kids must be used on DA.

00:02:31.350 --> 00:02:36.050
The key property in the object is I lied so that the reason why it happens,

00:02:36.050 --> 00:02:39.770
let's give it a try by printing the C one.

00:02:39.770 --> 00:02:41.840
So we have a two string and see one,

00:02:41.840 --> 00:02:45.050
so I'm gonna type your sis out and then type C one.

00:02:45.050 --> 00:02:47.530
Let's save this Andi,

00:02:47.530 --> 00:02:52.010
run the program and you can see that it is customer.

00:02:52.010 --> 00:02:53.220
Islay is five.

00:02:53.220 --> 00:02:54.500
Name is Satire City.

00:02:54.500 --> 00:02:58.330
She McGeough email and phone number as given over here.

00:02:58.330 --> 00:02:59.070
However,

00:02:59.070 --> 00:03:01.990
if I go back to the back end on,

00:03:01.990 --> 00:03:03.200
then sell it,

00:03:03.200 --> 00:03:05.820
start from custom modify executed again,

00:03:05.820 --> 00:03:10.020
you'll see that it is not adding that the card.

00:03:10.020 --> 00:03:12.830
In case if I go back over here on duh,

00:03:12.830 --> 00:03:14.810
let's try to run this again.

00:03:14.810 --> 00:03:17.960
You will see that it is successfully executed.

00:03:17.960 --> 00:03:18.790
However,

00:03:18.790 --> 00:03:20.830
this shouldn't have been executed.

00:03:20.830 --> 00:03:21.300
Also,

00:03:21.300 --> 00:03:24.650
because email and phone number are duplicate values.

00:03:24.650 --> 00:03:28.680
But notice that the idea is getting incrementally each time I run this.

00:03:28.680 --> 00:03:32.540
Now this is primarily because every time you execute this program,

00:03:32.540 --> 00:03:38.540
it opens a new connection on drew the connection it trays toe execute that command.

00:03:38.540 --> 00:03:39.550
At this time,

00:03:39.550 --> 00:03:41.310
there is no record for satire,

00:03:41.310 --> 00:03:43.310
so there is no Ararat inserts.

00:03:43.310 --> 00:03:45.930
But that happens only the user session,

00:03:45.930 --> 00:03:47.950
and as soon as the program is exit,

00:03:47.950 --> 00:03:52.870
the user physician gets closed without actually rating the date outs from the EU's decision

00:03:52.870 --> 00:03:54.380
to the underlying table.

00:03:54.380 --> 00:03:55.920
So if our on this again,

00:03:55.920 --> 00:03:58.500
you will see that it still does the same thing.

00:03:58.500 --> 00:04:04.280
But this is because we begin a transaction over here when we started executing their

00:04:04.280 --> 00:04:04.930
commands.

00:04:04.930 --> 00:04:08.050
But we never actually terminated the transaction.

00:04:08.050 --> 00:04:10.950
So the termination of the transaction can be done in two ways.

00:04:10.950 --> 00:04:13.000
Either you commit the transaction,

00:04:13.000 --> 00:04:15.720
are you roll back the transaction survive the fall.

00:04:15.720 --> 00:04:18.650
It's rolling back are not committing the transaction.

00:04:18.650 --> 00:04:19.440
Onda.

00:04:19.440 --> 00:04:21.650
This can be handled in various ways.

00:04:21.650 --> 00:04:25.370
One of the simplest way that you can do is to say that Hey,

00:04:25.370 --> 00:04:27.370
every insert of big deal it I do.

00:04:27.370 --> 00:04:28.860
It's a separate transaction.

00:04:28.860 --> 00:04:30.920
As soon as they execute that command,

00:04:30.920 --> 00:04:31.910
do a commit.

00:04:31.910 --> 00:04:34.200
The other option is to say that Hey,

00:04:34.200 --> 00:04:36.350
I don't want to manage my transactions.

00:04:36.350 --> 00:04:38.700
I want to do our update,

00:04:38.700 --> 00:04:40.510
deal it in various locations.

00:04:40.510 --> 00:04:43.190
But I want to define a transaction boundary.

00:04:43.190 --> 00:04:44.920
I want to begin a transaction,

00:04:44.920 --> 00:04:48.960
execute all my crowd operations and then do a commit are rolled back Now.

00:04:48.960 --> 00:04:53.820
This may have to be done by an external transaction manager on This is what we do generally

00:04:53.820 --> 00:04:58.450
when we're using spring my but it has a support for spring as well.

00:04:58.450 --> 00:04:59.650
However,

00:04:59.650 --> 00:05:01.950
if you want toe handle those transactions,

00:05:01.950 --> 00:05:06.140
what you can do is you can go to the D A will factory way.

00:05:06.140 --> 00:05:11.030
We have created an instance off session or EST realization.

00:05:11.030 --> 00:05:13.870
And when we use this factory that open session,

00:05:13.870 --> 00:05:19.640
we can supply a perimeter here indicating whether the transaction have to be automatically

00:05:19.640 --> 00:05:20.750
committed or not.

00:05:20.750 --> 00:05:26.500
So I can simply type here true to indicate that it has toe automatically comic the

00:05:26.500 --> 00:05:27.060
transaction.

00:05:27.060 --> 00:05:31.300
So I'd say this now if I run this program again,

00:05:31.300 --> 00:05:38.470
notice behind the scene the back and has maintained a seed that has already been age.

00:05:38.470 --> 00:05:40.370
So now if I run this program,

00:05:40.370 --> 00:05:45.520
it is going toe increment that Steve becomes nine and nine becomes the new primary key.

00:05:45.520 --> 00:05:49.010
So I run this and now you can see that it says nine.

00:05:49.010 --> 00:05:51.790
We have been seeing such a present or here.

00:05:51.790 --> 00:05:52.360
However,

00:05:52.360 --> 00:05:54.890
if I go back to the back and destroy Minden select,

00:05:54.890 --> 00:05:56.130
start from customers,

00:05:56.130 --> 00:06:02.070
you'll see that nine set Yoshinaga and the email and phone number are here now.

00:06:02.070 --> 00:06:05.850
If I go back to the eclipse and then rely on this.

00:06:05.850 --> 00:06:10.460
You'll see that it's going to give an editor not because of the Ivy,

00:06:10.460 --> 00:06:11.020
because I d.

00:06:11.020 --> 00:06:12.240
Then you are pretended it.

00:06:12.240 --> 00:06:14.930
But it's probably because of the email,

00:06:14.930 --> 00:06:16.160
our phone number.

00:06:16.160 --> 00:06:17.520
So let's have a look at this.

00:06:17.520 --> 00:06:19.380
It says Unique Index,

00:06:19.380 --> 00:06:25.330
our primary care violation constraint underscored Index underscored six on email.

00:06:25.330 --> 00:06:27.680
So that is the reason why it's giving an error.

00:06:27.680 --> 00:06:30.270
If I change the email and then run it,

00:06:30.270 --> 00:06:32.650
then it will give another for four number.

00:06:32.650 --> 00:06:33.050
And,

00:06:33.050 --> 00:06:33.340
of course,

00:06:33.340 --> 00:06:35.810
if I change both email and phone number,

00:06:35.810 --> 00:06:37.850
then there is no problem.

00:06:37.850 --> 00:06:38.930
So let's give it a try,

00:06:38.930 --> 00:06:42.180
so I'm gonna go toe the program again.

00:06:42.180 --> 00:06:50.200
Let's change the email from Satya at example that come toe that satya 123 at example dot

00:06:50.200 --> 00:06:50.510
com.

00:06:50.510 --> 00:06:51.450
I save it.

00:06:51.450 --> 00:06:52.430
Run this.

00:06:52.430 --> 00:06:55.300
This is going to be another because phone number is to pick it now.

00:06:55.300 --> 00:06:57.170
Similar elegant.

00:06:57.170 --> 00:07:01.420
See that it is Customer index 62 on customers.

00:07:01.420 --> 00:07:03.200
Phone is the era.

00:07:03.200 --> 00:07:03.950
Of course,

00:07:03.950 --> 00:07:06.200
if I change this to something else,

00:07:06.200 --> 00:07:08.440
let's change this toe 99.

00:07:08.440 --> 00:07:11.080
Stave it on the run the same.

00:07:11.080 --> 00:07:15.050
You should now see that the record is successfully inserted as 12.

00:07:15.050 --> 00:07:17.820
So if you go back to the back end run,

00:07:17.820 --> 00:07:19.150
they still come in here.

00:07:19.150 --> 00:07:21.140
You can see that it is 12 30.

00:07:21.140 --> 00:07:21.210
A.

00:07:21.210 --> 00:07:22.650
Has been at it successfully.

00:07:22.650 --> 00:07:24.290
That's all for this lecture.

00:07:24.290 --> 00:07:25.570
In the next lecture,

00:07:25.570 --> 00:07:29.850
let's read to a record from this particular table.

