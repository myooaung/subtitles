WEBVTT
1
00:00:00.180 --> 00:00:06.120
However, in the system we are referring to a class of application and system that they can withstand

2
00:00:06.120 --> 00:00:13.710
a measure of determination while remaining available, which means they are at the very minimum of down

3
00:00:13.710 --> 00:00:21.750
time and they don't need a regular human intervention and their ability to self-heal or to recover from

4
00:00:21.750 --> 00:00:28.780
failure or even to roll over to another secondary source in an acceptable amount of form.

5
00:00:28.830 --> 00:00:36.240
Now those percentage of uptime and percentage of downtime, we use them to basically classify a service,

6
00:00:36.240 --> 00:00:42.950
whether the service is five nines available or two nines available or one nine available.

7
00:00:42.970 --> 00:00:50.070
For example, if we describe a system to be for nine US available, this means it can be accepted to

8
00:00:50.070 --> 00:00:59.760
be down for the maximum of 52 minutes and 6 seconds, which is equivalent to or equal to 8.6 seconds

9
00:00:59.760 --> 00:01:00.180
in.

10
00:01:00.390 --> 00:01:07.290
One thing can be we could use elastic load balancing that distributes incoming application traffic across

11
00:01:07.290 --> 00:01:14.310
multiple easy to instances and containers, IP addresses and the function to keep this in your mind.

12
00:01:14.340 --> 00:01:21.060
Even if you have a containerised application still you can use elastic load balancing those elastic

13
00:01:21.060 --> 00:01:21.700
load balance.

14
00:01:21.870 --> 00:01:28.560
They can be extended operating at the public subnet and they can be internal operating as a private

15
00:01:28.560 --> 00:01:35.280
subnet, which means the user or you and do they want be able to access them from the public end of

16
00:01:35.280 --> 00:01:44.200
each load balancer receive a unique domain name system and it can be recognized response to any to in

17
00:01:44.220 --> 00:01:49.260
it because load bands are ones up to the target group of the load balancer.

18
00:01:49.380 --> 00:01:57.330
It can tag each instance which not responding to the has to be healthy or an unhealthy instance of the

19
00:01:57.330 --> 00:01:58.110
load balancing.

20
00:01:58.140 --> 00:02:04.680
As you know from Lab six in the cloud practitioner, it's going to be replaced by any new instances

21
00:02:04.680 --> 00:02:08.420
with the open a of or to scalar in the earth.

22
00:02:08.430 --> 00:02:10.920
There is a three times of load balancing.

23
00:02:10.920 --> 00:02:16.500
There is the application load balancer which operate with Citibank, Mississippi as the protocol.

24
00:02:16.500 --> 00:02:21.060
It's very flexible for application management and it can use an advanced load.

25
00:02:21.060 --> 00:02:29.220
Balancing that traffic via has to be an eclipse and it's normally operate at the request level or layer

26
00:02:29.220 --> 00:02:32.410
seven, which is the application layer in the old.

27
00:02:32.490 --> 00:02:37.420
As you work with network load balancer, we are looking now to an extreme performance.

28
00:02:37.420 --> 00:02:40.830
And remember network balancer only operates at layer four.

29
00:02:40.830 --> 00:02:48.390
So you need to operate network balancer with that DCP Traffic three oh is not going to operate as application

30
00:02:48.390 --> 00:02:48.720
layer.

31
00:02:48.720 --> 00:02:55.380
It is a very ultra high performance and with support of a static IP addresses of your application,

32
00:02:55.380 --> 00:03:04.230
it can load balancer, TCP, UDP or even TLC traffic and operate the connection level off layer.

33
00:03:04.650 --> 00:03:11.310
If you have an old application or an old infrastructure which needed a load balancing of both application

34
00:03:11.310 --> 00:03:19.740
layer of protocol and layer four protocol, then you need to look at that classic load because the classic

35
00:03:19.740 --> 00:03:27.960
load balancer will operate at 60 degrees and it's also support ECP and secure socket layer interface

36
00:03:27.990 --> 00:03:35.460
as it can load balance across multiple 82 instances and it operate at both the requisite level and the

37
00:03:35.460 --> 00:03:35.870
connect.

38
00:03:35.880 --> 00:03:42.060
You can implement a highly available system when you have the ability to start with.

39
00:03:42.060 --> 00:03:47.580
At least two available is on is the first resources in the first zone goes down.

40
00:03:47.580 --> 00:03:53.850
Then with the aid of load balancer, you can read that your traffic to the resources that you have in

41
00:03:53.970 --> 00:03:59.370
this second availability zone and this is a good example of a highly available architecture.

42
00:03:59.370 --> 00:04:05.250
As you can see, we have an interactive traffic coming to the intermediate wave which will be redirected

43
00:04:05.250 --> 00:04:07.230
to the elastic load balancer.

44
00:04:07.230 --> 00:04:12.660
The elastic load balancer will distribute the traffic between those easy to in essence in the multi

45
00:04:12.660 --> 00:04:17.710
easy depending on how busy and how capacity each one of them is getting.

46
00:04:17.850 --> 00:04:21.060
So it's most likely is going to fit the traffic between.

47
00:04:21.120 --> 00:04:27.330
Then you can have an internal load balancing which carries out the traffic from your repair to your

48
00:04:27.330 --> 00:04:32.670
application in the same way it will distribute the traffic in an even way.

49
00:04:32.700 --> 00:04:40.200
This is an example of a highly available architecture where you can use the elastic load balancing for

50
00:04:40.200 --> 00:04:41.510
your own benefit.

51
00:04:41.680 --> 00:04:44.740
Now let us look to Amazon Rule 53.

52
00:04:44.770 --> 00:04:49.350
Another 63 is a highly available and scalable cloud DNS.

53
00:04:49.770 --> 00:04:56.400
It can be used to terminate a domain name, for example, like in the US to come into an IP address,

54
00:04:56.400 --> 00:04:59.510
which is the main public IP of the.

55
00:05:00.180 --> 00:05:05.610
It can connect to your user request to your infrastructure and can be configured to load the traffic

56
00:05:05.610 --> 00:05:13.470
to the endpoints or even to make sure that your infrastructure are running in a healthy state across

57
00:05:13.470 --> 00:05:14.550
multiple regions.

58
00:05:14.580 --> 00:05:20.790
It can also help you to register and buy your domain and it has multiple routing options that you need

59
00:05:20.790 --> 00:05:24.030
to understand for you to.

60
00:05:24.030 --> 00:05:30.270
Three Support multiple routing policy that we will describe now in Route 53.

61
00:05:30.300 --> 00:05:37.020
There is multiple supported routing, and we are going to explain each one of those in detail because

62
00:05:37.290 --> 00:05:40.440
they are very important for passing the exam.

63
00:05:40.500 --> 00:05:44.550
Both exam the solution architect and the cloud practitioner.

64
00:05:44.640 --> 00:05:51.270
So the first thing we want to do is to see how we can create a domain name in Route 53.

65
00:05:51.280 --> 00:05:57.090
So let us now go and create a domain name and that will show you how you can create a domain name for

66
00:05:57.090 --> 00:06:02.580
your business and for your organization if you need to have a domain name.

67
00:06:02.700 --> 00:06:08.090
As you can see now I am in the management console and I want to go to Route 53.

68
00:06:08.100 --> 00:06:15.930
Once I go to Route 53, now Route 53, if you go to the dashboard of Route 53 and you click on Get Started,

69
00:06:16.140 --> 00:06:22.350
it will give you all the starting points that you can use to create and to work with the Route 53.

70
00:06:22.380 --> 00:06:29.430
Now, let's say I have an organization, I want to call it a WAC training and I want to register a domain

71
00:06:29.430 --> 00:06:31.260
name for that organization.

72
00:06:31.260 --> 00:06:36.240
So I'm going to select Registrar Domain and then we will click on Get Started.

73
00:06:36.270 --> 00:06:39.260
Now you give me a list of all the available domain.

74
00:06:39.270 --> 00:06:45.330
You can choose the prices per year depending on your need and depending on your extension.

75
00:06:45.330 --> 00:06:51.300
Let's say I'm going to call this academy, so I'm going to call this areas training and this will be

76
00:06:51.300 --> 00:06:53.400
a domain name, dot academy.

77
00:06:53.440 --> 00:06:57.150
Okay, now I need to check that this domain name is available.

78
00:06:57.160 --> 00:07:02.360
If it's not available, it's going to propose different domain names that I could use.

79
00:07:02.370 --> 00:07:07.050
It seems to be available as training dot info, but maybe it is a bit expensive.

80
00:07:07.050 --> 00:07:09.780
So I'm going to change this to something else.

81
00:07:09.790 --> 00:07:12.450
Let's call this a free a WAC train.

82
00:07:12.480 --> 00:07:18.390
So this is going to be I'm free ABC training you could call it based on your business that you want

83
00:07:18.390 --> 00:07:21.780
to create a domain name for it and you can see free training dot net.

84
00:07:21.870 --> 00:07:28.290
It will cost me $11 per year so I could add this to my account and then I click on Continue and then

85
00:07:28.290 --> 00:07:36.210
you specify the details of your payment information to whom this business and domain will be registered.

86
00:07:36.240 --> 00:07:40.860
So normally you need to provide, you have addresses and you click on Continue and you check.

87
00:07:41.100 --> 00:07:45.830
Now the next thing I want to show you is basically how we can create a health check.

88
00:07:45.840 --> 00:07:49.620
So before we do that, let us have a demo application.

89
00:07:49.620 --> 00:07:56.370
And in this demo application, I'm going to use a simple format for my application.

90
00:07:56.370 --> 00:08:00.240
It will be an easy to understand stunning assembled web server.

91
00:08:00.690 --> 00:08:06.120
So let us go now to Easy two and I have it here running on a different system.

92
00:08:06.120 --> 00:08:13.200
You just go now to the AC two and if you go to my easy to, you will find that I have a demo application

93
00:08:13.200 --> 00:08:19.420
running, which is the same cafe application that we use than we use in all of my labs and all of that.

94
00:08:19.530 --> 00:08:20.550
The Academy.

95
00:08:20.850 --> 00:08:23.760
Now this instance is running on this public IP.

96
00:08:23.760 --> 00:08:27.960
So if you open this in a new tab, it will give you a hello from a server.

97
00:08:28.230 --> 00:08:35.670
And if you basically pop this extension, which is a mom and pop cafe, you will find the same interface

98
00:08:35.670 --> 00:08:36.570
that we used then.

99
00:08:36.600 --> 00:08:43.650
And as you can see here, the IP address of my easy to and it is available in us is one eight.

100
00:08:43.680 --> 00:08:50.820
Now what I want to do is to create I have check from Route 53 because I'm not sure that this instance

101
00:08:50.820 --> 00:08:51.780
is healthy.

102
00:08:51.780 --> 00:08:59.100
And once it's not healthy, I might just get an alert to my email and that alert will be sent so I can

103
00:08:59.610 --> 00:09:07.320
basically have a secondary hosting zone for my application in a three as a static website, for example.

104
00:09:07.410 --> 00:09:12.900
So let's go now to Amazon, Route 53 from Newtown, because I want to keep the easy to understand,

105
00:09:12.900 --> 00:09:15.030
to show you later on what I'm going to do with that.

106
00:09:15.030 --> 00:09:19.800
Now, there is in this particular environment, I have a domain name, but it just I'm going to use

107
00:09:19.800 --> 00:09:26.430
this for this thing and to demonstrate the different routing that we have in Route 53, it has to go

108
00:09:26.430 --> 00:09:29.040
to health check and we create a health check.

109
00:09:29.040 --> 00:09:33.900
I'm going to call this primary and this primary is going to check an endpoint.

110
00:09:33.900 --> 00:09:36.750
And that is the end point that I'm going to check here.

111
00:09:36.810 --> 00:09:43.380
So I'm going to go back to in point, it's an IP address and the IP address of my easy to instance,

112
00:09:43.380 --> 00:09:45.210
I just need to copy it from here.

113
00:09:45.330 --> 00:09:52.830
Now this is going to be my instance, IP address and the slash path is going to be because I always

114
00:09:52.830 --> 00:09:55.290
reach my website using this is slash path.

115
00:09:55.380 --> 00:09:58.950
So I'm going to basically put the same here on the path.

116
00:09:59.100 --> 00:09:59.850
So I'm going to.

117
00:09:59.900 --> 00:10:02.900
To go back and base now in the advanced configuration.

118
00:10:02.990 --> 00:10:06.830
I want this to be fast because I want to show you this as soon as possible.

119
00:10:07.010 --> 00:10:14.960
And the failure threshold, which means Route 53, will declare this endpoint unhealthy after two Failure

120
00:10:14.960 --> 00:10:15.950
of Health Check.

121
00:10:16.190 --> 00:10:23.930
You could also include latency graph and you could basically have a customized matching for your string

122
00:10:23.930 --> 00:10:25.290
if you are using an API.

123
00:10:25.310 --> 00:10:28.080
We will see this later on with the API Gateway.

124
00:10:28.100 --> 00:10:33.770
Click next and we want to create an alarm and we want to send this alarm to our email address.

125
00:10:33.830 --> 00:10:39.210
This is going to be the channel email address that we use for most administration.

126
00:10:39.230 --> 00:10:42.800
So let us go back now to our immune system.

127
00:10:42.800 --> 00:10:49.700
And we basically have an existing since we are going to create a new one and we will call it primary

128
00:10:49.700 --> 00:10:56.810
AC two down just to let me know that this is not healthy and I wanted to send it to this email and create

129
00:10:56.810 --> 00:10:57.420
a health check.

130
00:10:57.440 --> 00:11:04.580
Now, after a few minutes, you should be able to receive an education to your email address saying

131
00:11:04.580 --> 00:11:07.680
that you have to subscribe to this topic.

132
00:11:07.700 --> 00:11:14.510
Wait for a few minutes until this can give us a value or to show that there is unhealthy instances.

133
00:11:14.550 --> 00:11:15.860
So let us wait a few minutes.

134
00:11:16.010 --> 00:11:19.640
We will receive an email to our email address.

135
00:11:19.880 --> 00:11:28.150
So I have received the email that I have to subscribe to this topic in a WAC notification SMS service.

136
00:11:28.160 --> 00:11:32.180
I will confirm this is all you need to do just to click on compat.

137
00:11:32.180 --> 00:11:35.210
Now let us test that this thing is working.

138
00:11:35.210 --> 00:11:42.140
We will go to the instant state and we will stop the this maybe accidental deletion of the AC to maybe

139
00:11:42.140 --> 00:11:46.230
an accidental stopping of the AC two or a crash of the web server.

140
00:11:46.250 --> 00:11:52.280
I want to make sure that I will receive an email that telling me my EC2 is not available.

141
00:11:52.280 --> 00:11:58.850
America Summer cannot see now the website could see now this is going to give me five or five very soon,

142
00:11:58.850 --> 00:11:59.810
so let us wait.

143
00:11:59.820 --> 00:12:03.290
And once I receive the email I will share it with you.

144
00:12:03.380 --> 00:12:09.680
As you can see now, the AC two instance is giving me five cannot be reached and I will wait now for

145
00:12:09.680 --> 00:12:12.470
this notification to arrive to my email.

146
00:12:12.560 --> 00:12:16.310
Now how we can prevent that in Amazon, Route 53.

147
00:12:16.340 --> 00:12:19.160
This is what we are going to discuss in the next topic.

148
00:12:19.160 --> 00:12:26.240
We have to create what we call Route 53 routing policy and the routing policy, prevent an accident

149
00:12:26.240 --> 00:12:28.670
like this to happen in our infrastructure.

150
00:12:28.670 --> 00:12:35.030
And as you can see now, I receive an email saying that your primary easy two instance is down, which

151
00:12:35.030 --> 00:12:40.730
means I have to go back and I will make sure to start and to reboot the instance.

152
00:12:40.760 --> 00:12:42.890
Now let me just the first page.

153
00:12:43.070 --> 00:12:46.220
Now I have another instance here that we are going to use it in the demo.

154
00:12:46.220 --> 00:12:49.700
We will see that this machine is fully restored.

155
00:12:49.880 --> 00:12:56.510
So as I say, to prevent such scenario we have in Amazon, Route 53, multiple routing policy, they

156
00:12:56.510 --> 00:12:58.910
are supported in old 53.

157
00:12:58.910 --> 00:13:03.740
And we will discuss each one of them and I will show you how you configure each one of those in the

158
00:13:03.740 --> 00:13:04.760
management console.

159
00:13:04.790 --> 00:13:06.850
We have the first one which is similar routing.

160
00:13:06.860 --> 00:13:09.920
It has a single server environment with single domain.

161
00:13:09.920 --> 00:13:17.420
And you want to basically tell route 53 that my domain name WW bastard i.e. a training that IEEE or

162
00:13:17.420 --> 00:13:21.530
dot com is pointing to this IP as simple as that.

163
00:13:21.680 --> 00:13:24.660
So let me show you how we can create symbol routing.

164
00:13:24.680 --> 00:13:27.830
So with symbol routing, we have a single server environment.

165
00:13:27.830 --> 00:13:33.680
We have our primary, which is an Amazon EC2 instance here and we are just pointing the record which

166
00:13:33.680 --> 00:13:38.310
is the W w w record to a type A record to this IP address.

167
00:13:38.330 --> 00:13:39.990
This is what we mean by symbol.

168
00:13:40.190 --> 00:13:42.010
So let me show you how you can do that.

169
00:13:42.020 --> 00:13:45.170
I will keep this health check there because we will need it later on.

170
00:13:45.200 --> 00:13:52.050
You go to the hostage zone and you will find that this record created once we register with Route 53,

171
00:13:52.050 --> 00:13:55.280
our to me so that I want to select it and we will create that.

172
00:13:55.640 --> 00:13:57.950
It will be in the routing click next.

173
00:13:57.950 --> 00:14:04.430
Now I want to define as routing if it will be WW for this domain name here, which is the domain name

174
00:14:04.430 --> 00:14:10.340
I register, it will be a record type A and now the end point is going to be an IP address.

175
00:14:10.340 --> 00:14:12.080
And what is my IPA?

176
00:14:12.260 --> 00:14:19.280
I want it to be this easy to instance here, the first in this go back, paste it and define SMB routing

177
00:14:19.280 --> 00:14:21.470
and create a simple as that.

178
00:14:21.500 --> 00:14:28.130
Now once you put and you copy this domain name, instead of accessing your website by accessing the

179
00:14:28.130 --> 00:14:35.030
IP address, I want to be able to access it via the domain name, which is what Route 53?

180
00:14:35.060 --> 00:14:41.510
Give me any specific I want to be able to access this Caffey website with all the information.

181
00:14:41.510 --> 00:14:48.860
As you can see here within the routing, this website now is said from the AC two instance in US East

182
00:14:48.860 --> 00:14:52.610
one, and this is the IP of the AC two instance.

183
00:14:52.670 --> 00:14:59.840
Now the second type, what we call we did the round robin being equated the roping routing I have.

184
00:14:59.870 --> 00:15:02.870
A primary AC two instance in the first season.

185
00:15:03.140 --> 00:15:07.300
And they have a secondary easy to innocence in the second debate.

186
00:15:07.970 --> 00:15:12.080
Now, normally with Route 53, we do this across multiple regions.

187
00:15:12.110 --> 00:15:12.560
Why?

188
00:15:12.590 --> 00:15:16.140
To guarantee that we have a decent disaster recovery.

189
00:15:16.160 --> 00:15:19.220
And the point here with wasted round robin is very simple.

190
00:15:19.310 --> 00:15:21.860
We want to split the traffic based on the way.

191
00:15:22.010 --> 00:15:30.740
So 75% of the traffic I want you to come to the fair is you do in the first zone and the 25% of the

192
00:15:30.740 --> 00:15:31.150
traffic.

193
00:15:31.160 --> 00:15:36.960
I want it to go to the second easy to in the second zone with me show you how you can do that.

194
00:15:37.000 --> 00:15:44.180
This means this and make sure when you create a domain name in route 53 don't ever delete and as and

195
00:15:44.390 --> 00:15:50.840
so a record this is the domain name system that you will use with your domain when you register.

196
00:15:50.840 --> 00:15:55.370
And this is the authoritative record of your domain name system.

197
00:15:55.370 --> 00:15:55.860
Both.

198
00:15:55.880 --> 00:15:57.770
Don't ever delete those.

199
00:15:57.770 --> 00:16:02.750
Now create the weighted in the way that it's going to be the same the record name is going to be.

200
00:16:02.750 --> 00:16:07.220
WW And the record time is an A, which means it's an IP address.

201
00:16:07.240 --> 00:16:11.240
Could also specify a DNS other DNS information.

202
00:16:11.240 --> 00:16:17.030
You could also specify elastic IP, elastic beanstalk or elastic load balancer DNS name.

203
00:16:17.300 --> 00:16:22.670
You also specify S3 bucket if you have your website in a static website, also domestic.

204
00:16:22.850 --> 00:16:24.900
Now we want to define the way you did that.

205
00:16:25.400 --> 00:16:33.860
So the first definition I want the first IP address, which is, as you see here in this diagram, 54.2

206
00:16:33.860 --> 00:16:36.380
25.17.0.

207
00:16:36.410 --> 00:16:39.770
I wanted to take three out of four traffic.

208
00:16:39.770 --> 00:16:44.090
I want it to come to this easy two and one fourth of the traffic.

209
00:16:44.090 --> 00:16:45.820
I want it to go to this easy.

210
00:16:45.980 --> 00:16:51.590
So I will go back, copy the IP address of my easy to instance one and paste it here.

211
00:16:51.620 --> 00:16:57.080
The way is going to be three and this is will accept a value between 02255.

212
00:16:57.290 --> 00:17:02.960
I have a health check which is the primary which can basically help a lot when we define this.

213
00:17:02.960 --> 00:17:06.060
Now we need to specify a recorded bus.

214
00:17:06.170 --> 00:17:11.930
Let me call this and this is going to be w one and lets me define another one.

215
00:17:11.930 --> 00:17:18.290
It will be an endpoint, but this time I want that endpoint to take the traffic to my second easy two

216
00:17:18.360 --> 00:17:21.530
instance, this IP and the waste of the traffic.

217
00:17:21.530 --> 00:17:23.630
I want it 1 to 4.

218
00:17:23.900 --> 00:17:29.350
The health check is not going to be any health check because we don't have health check associated with

219
00:17:29.360 --> 00:17:30.590
a secondary instance.

220
00:17:30.590 --> 00:17:38.000
So we're going to call this again bars dash w-2 and define and then you will click on it.

221
00:17:38.420 --> 00:17:40.330
And this is really create a health check for you.

222
00:17:40.340 --> 00:17:48.580
Now this means if you go to your website, most of the traffic will be sad from the first ability zone.

223
00:17:48.620 --> 00:17:55.790
Unless there is a very busy traffic going to the abilities on a then you will be routed to the second

224
00:17:55.790 --> 00:17:56.010
of it.

225
00:17:56.210 --> 00:18:01.370
So this is very handy when you have, for example, a pilots like disaster recovery.

226
00:18:01.370 --> 00:18:07.910
You have a tiny, easy two instances to support your system and you have your main infrastructure on

227
00:18:07.910 --> 00:18:13.970
a premise data center, and you want to make sure if there is any issue with your primary to route everything

228
00:18:13.970 --> 00:18:15.740
back to that second.

229
00:18:16.040 --> 00:18:19.070
Now, let me go back and show you the next one.

230
00:18:19.070 --> 00:18:20.900
But first, let us delete those.

231
00:18:20.900 --> 00:18:21.980
You have to delete them.

232
00:18:21.980 --> 00:18:27.470
And this time I'm going to show you the latency about with latency routing.

233
00:18:27.470 --> 00:18:34.370
Now, Route 53 will decide how to send your traffic based on the latency value we are getting.

234
00:18:34.370 --> 00:18:41.750
So if we have, for example, a latency of 125 milliseconds going to the primary, easy to then Route

235
00:18:41.750 --> 00:18:51.640
53 will use this link because the secondary is giving us 225 millisecond how we can define this in old

236
00:18:51.650 --> 00:18:58.580
53 based on the latency that is, some go back to record choose latency routing click next.

237
00:18:58.580 --> 00:19:02.630
It is again w w I have an e record time.

238
00:19:02.630 --> 00:19:11.240
You could also put the 15 to 15 seconds instead of 300 seconds in order to fast test this configuration,

239
00:19:11.270 --> 00:19:15.770
define it will be an IP address and the same thing we will do.

240
00:19:15.770 --> 00:19:21.440
We have an IP address, the primary IP address go back based here in which reason?

241
00:19:21.440 --> 00:19:24.710
Because the latency record need to test based on the region.

242
00:19:24.740 --> 00:19:30.890
Now if you notice, here I am in North Virginia, so I go back and choose North 50.

243
00:19:30.980 --> 00:19:39.050
I think you should put us first if I have a primary health check because this is from where Route 53,

244
00:19:39.050 --> 00:19:40.760
we get the latency value.

245
00:19:40.760 --> 00:19:46.910
If we get it from the health check that we do this, we call this bus dash and dash one.

246
00:19:46.910 --> 00:19:49.220
Then I will add a new latency record.

247
00:19:49.310 --> 00:19:52.010
The same thing is going to be for the same region.

248
00:19:52.010 --> 00:19:59.140
Now normally, as I say, again, normally we will have two different regions to deal with Route 53.

249
00:19:59.420 --> 00:20:05.870
I'm going just to copy the same IP address that I have in my second ability zone, and I did no control

250
00:20:05.870 --> 00:20:06.470
over this.

251
00:20:06.470 --> 00:20:12.530
Guys, if I have that omission, I will create two easy to in two different region to demonstrate this

252
00:20:13.040 --> 00:20:15.080
and there is no logic associated.

253
00:20:15.350 --> 00:20:22.280
Again, this will be bars dash and latency dash tool which is required and then you click on it create.

254
00:20:22.730 --> 00:20:26.020
Sometimes this record will do location routing.

255
00:20:26.030 --> 00:20:28.100
I want a very simple configuration.

256
00:20:28.100 --> 00:20:34.100
I want based on my customer base, I want to route them to my primary or secondary infrastructure.

257
00:20:34.100 --> 00:20:39.900
So in this case here, I want the Indian users, my users in India, I want them to come to the first

258
00:20:40.170 --> 00:20:45.320
primary zone, the primary host, the first AC two, and the Irish customers.

259
00:20:45.320 --> 00:20:47.060
I want them to come to that second.

260
00:20:47.060 --> 00:20:52.520
Easy to understand that it is not in the same way you do this, you go, you create a record and you

261
00:20:52.520 --> 00:21:00.380
choose geo location, you put w, w and now the record is a again and you defined your location.

262
00:21:00.380 --> 00:21:07.430
You choose the end point as I see the first AC two instance, one I want for my customers in India.

263
00:21:07.430 --> 00:21:10.730
And you could choose a continent, you could use a specific country.

264
00:21:10.910 --> 00:21:16.310
I'm going to choose a specific country just to show you guys how this is going to work with the primary

265
00:21:16.430 --> 00:21:23.240
and this is going to be bars geo 1 to 1 to hopefully nobody is using the same idea.

266
00:21:23.360 --> 00:21:27.020
And then I want to define the one for my Irish customers.

267
00:21:27.080 --> 00:21:30.650
This is going to be the second AC two instance IP address.

268
00:21:30.650 --> 00:21:37.550
I come back here based and this will be Ireland and no health check and this is going to be bars to

269
00:21:37.550 --> 00:21:44.410
you demo 33434 symbol undefined and this is a created successfully.

270
00:21:44.510 --> 00:21:51.470
Now let me show you so I see my Irish customer on my IP now in Ireland, so I should be reaching to

271
00:21:51.470 --> 00:21:56.290
this easy to instance for four, which is in my second advertisement.

272
00:21:56.380 --> 00:22:01.430
So if I refresh this page, I'm not using the records guys, and that's why I'm not getting the value.

273
00:22:01.440 --> 00:22:07.280
You need to go to this link here, slash, and you can see I'm getting the response from one B this

274
00:22:07.280 --> 00:22:07.760
may show you.

275
00:22:07.760 --> 00:22:10.580
Now let me connect to a VPN to India.

276
00:22:10.640 --> 00:22:13.010
Now this is a VPN just to test.

277
00:22:13.010 --> 00:22:14.750
It's a free VPN, guys.

278
00:22:14.750 --> 00:22:16.070
You can use it just to test.

279
00:22:16.070 --> 00:22:18.410
Okay, so my VPN connection is active.

280
00:22:18.410 --> 00:22:19.550
Now let us test.

281
00:22:19.670 --> 00:22:27.350
As I said again, my Indian customers needs to come to 50 for the two, two, two, five, five as well.

282
00:22:27.380 --> 00:22:34.460
So if you refresh the page now, you will be asked to go to us is one eight again guys normally we do

283
00:22:34.460 --> 00:22:40.970
this from multiple region so that was you and I'm going to demonstrate is pain over and feel over is

284
00:22:40.970 --> 00:22:47.870
very simple concept with Phil over routing I want to make sure if my primary easy to in a sense is down

285
00:22:47.870 --> 00:22:52.850
for any reason I want to fail over to my EC2 in the second the way it is now.

286
00:22:52.850 --> 00:22:59.540
Normally if you can't afford depending on your disaster recovery plan, what you could do is to create

287
00:22:59.540 --> 00:23:06.020
an S3 bucket and it will be your secondary posting of your website just to display a nice message to

288
00:23:06.020 --> 00:23:06.800
your user.

289
00:23:06.890 --> 00:23:09.620
So let me show you how you can do fail over.

290
00:23:09.770 --> 00:23:14.780
Remember, you have to have a health check for fail over to work in a proper way.

291
00:23:14.780 --> 00:23:22.850
Go to the create record and with fail over click next and this will be WW again with me for this 15

292
00:23:22.850 --> 00:23:28.430
seconds because I want to show you this in action and let us define if it over first is going to be

293
00:23:28.430 --> 00:23:36.860
my primary record type and the primary IP I have is this IP here and the health check is a primary.

294
00:23:36.860 --> 00:23:39.330
And again, let me do that.

295
00:23:39.560 --> 00:23:47.210
I fail over and this may give a value now the second fail or what is going to happen in the secondary

296
00:23:47.210 --> 00:23:48.410
and in the secondary?

297
00:23:48.410 --> 00:23:49.880
I don't have a health check.

298
00:23:49.880 --> 00:23:50.450
Okay.

299
00:23:50.480 --> 00:23:52.040
So there is no health check here.

300
00:23:52.040 --> 00:23:56.440
And this is going to be based dash, dash seven, seven, eight.

301
00:23:56.600 --> 00:24:02.810
And if I forget to face the IP address, so let us go copy the IP and we paste it here.

302
00:24:02.930 --> 00:24:08.060
I'm sorry that this video is might be very long for you guys to see, but I will leave the timestamp

303
00:24:08.070 --> 00:24:13.120
so you can basically go to that section that you are interested in, the mouse, click on it, create

304
00:24:13.130 --> 00:24:15.770
record and now my record is there.

305
00:24:15.800 --> 00:24:17.480
Let me show you this in action.

306
00:24:17.480 --> 00:24:23.900
But before I do anything, I want to go back to my health check and open it in a new tab.

307
00:24:23.900 --> 00:24:30.200
It was 31 minutes ago when I basically turned off that easy to innocence and then it came back down.

308
00:24:30.200 --> 00:24:32.870
Now then the status is okay.

309
00:24:32.900 --> 00:24:34.550
You could also see the latency.

310
00:24:34.550 --> 00:24:42.200
The latency was about 100 milliseconds for TCP connection and this is basically will work and it will

311
00:24:42.200 --> 00:24:49.070
be actively promoting the traffic between your multi hosting and multi region based on the results,

312
00:24:49.070 --> 00:24:55.220
go and test the latency when you go to that fast, easy to instance and we will stop you will get an

313
00:24:55.220 --> 00:24:59.140
email similar to this one and immediately you will see two in this.

314
00:24:59.390 --> 00:25:03.410
Will be voted the secondary record to your second easy to an.

315
00:25:03.920 --> 00:25:11.450
So now this is for me is stop with me check is still with me and go to my left side now and the difference

316
00:25:11.660 --> 00:25:18.030
I am in one way notice that and now it should be changing me failing over automatically to the second

317
00:25:18.030 --> 00:25:24.240
the easy to in the second region or in the second reason for our demo.

318
00:25:24.290 --> 00:25:27.920
But in general, you should do this infrastructure to differently.

319
00:25:27.950 --> 00:25:35.260
Now, remember, I put in the health check, I put 15/2 and also in the configuration in my records.

320
00:25:35.360 --> 00:25:38.330
I also put the fail over with 15 seconds.

321
00:25:38.360 --> 00:25:43.220
Just to keep this in mind, the TTL is basically time to live.

322
00:25:43.220 --> 00:25:46.430
How much the your content will be cast in?

323
00:25:46.430 --> 00:25:47.480
There was 53.

324
00:25:47.730 --> 00:25:53.150
So if you want the faster response, you want to have a smaller value if you are just this thing.

325
00:25:53.150 --> 00:25:57.530
But for production you normally put a higher value like 300 seconds.

326
00:25:57.590 --> 00:25:59.780
We go back now it is not available.

327
00:25:59.810 --> 00:26:05.480
It was declaring the first primary posting of my infrastructure is down.

328
00:26:05.570 --> 00:26:12.590
Send me an email and automatically 50 it failed over to the second available is all of my infrastructure.

329
00:26:12.740 --> 00:26:18.530
The last thing I want to show you is multi value and hopefully this will not let me down and it will

330
00:26:18.530 --> 00:26:27.230
work because with multi value I want to configure a method in Route 53 to give a different DNS answer

331
00:26:27.260 --> 00:26:31.490
for every single request, and this is to avoid a single point of failure.

332
00:26:31.910 --> 00:26:38.540
Any hacker who trying to reach and to find out the final IP address of my influence.

333
00:26:38.840 --> 00:26:41.000
So let me show you how you do that.

334
00:26:41.060 --> 00:26:48.350
If we believe those first and now go back and create a record and it will be a multi value click on

335
00:26:48.350 --> 00:26:53.690
next the same configuration wwa3 hundred and defined multi value.

336
00:26:53.930 --> 00:27:00.200
So it will be an IP address and the IP that I have let me turn on this machine first.

337
00:27:00.320 --> 00:27:10.580
I have this IP for my region and I want to get the IP of this easy to an instance in two separate lines

338
00:27:10.580 --> 00:27:11.660
will be possible.

339
00:27:11.690 --> 00:27:18.200
I could assign a primary check and with health check in place in multi value it will use the fast record.

340
00:27:18.440 --> 00:27:20.720
So it will be good idea.

341
00:27:20.720 --> 00:27:28.070
Now if I keep my primary AC two IP address in the top, show me this in multi value.

342
00:27:28.160 --> 00:27:32.240
So I'm going to choose a record and define and create.

343
00:27:32.510 --> 00:27:37.640
Let me add this and define the second one or my second A-Z.

344
00:27:37.640 --> 00:27:46.250
And this is not the primary you or it is mine if like and it works magically, I'm delighted.

345
00:27:46.250 --> 00:27:48.740
So look back now to my website.

346
00:27:48.770 --> 00:27:56.060
You need to refresh this many times to see an effect and now the multi value answer will start to be

347
00:27:56.060 --> 00:28:03.080
in place with Route 5353 start to give you different responses based on different answers.

348
00:28:03.080 --> 00:28:07.100
So let me, for example, open this in a private session.

349
00:28:07.340 --> 00:28:14.210
I think my VPN is still in place and in the cache my VPN is connected and that's why I'm getting this

350
00:28:14.720 --> 00:28:15.530
multi value.

351
00:28:15.910 --> 00:28:23.180
Now I should be routed back again to us East one because my VPN enforces and the cache of Route 53.

352
00:28:23.180 --> 00:28:25.010
Keep telling Route 53.

353
00:28:25.010 --> 00:28:27.060
Give him the first of these.

354
00:28:27.060 --> 00:28:34.160
Don't give him the first reason he is requesting the websites from India because geolocation route with

355
00:28:34.160 --> 00:28:34.970
rules 53.

356
00:28:34.970 --> 00:28:40.550
You need to work very slowly and you need to allocate enough time to test and to do the experiment.

357
00:28:40.550 --> 00:28:46.550
But just to keep this video very short, I'm trying to do my best to wrap it up in this shot so you

358
00:28:46.550 --> 00:28:53.150
can see now using another browser, I'm getting answer from you as East one B and this is without VPN

359
00:28:53.150 --> 00:28:57.140
guys from this browser I'm getting answer from you as is when.

360
00:28:57.470 --> 00:28:59.500
So this is the point of multi value.

361
00:28:59.960 --> 00:29:07.820
So this is pretty much what kind of limitation of Amazon three is to basically use it as a cross region

362
00:29:07.820 --> 00:29:08.410
of 11.

363
00:29:08.540 --> 00:29:15.230
So it will make sure that your infrastructure that is deployed, for example, in Region eight and Region

364
00:29:15.230 --> 00:29:16.760
B are highly available.

365
00:29:16.760 --> 00:29:24.710
As you know, Amazon Rule 53, using a fail over logic to keep sending a health check to your infrastructure

366
00:29:24.710 --> 00:29:29.360
in the region and a region within a specific timeframe.

367
00:29:29.360 --> 00:29:36.990
If they didn't back no response, they would read that the traffic of all users to from region to region

368
00:29:37.040 --> 00:29:41.170
B so they are start to not use region eight to accept any.

369
00:29:41.180 --> 00:29:47.360
It's offering now little slope to the first job which is creating a highly available environment for

370
00:29:47.480 --> 00:29:48.350
the cafe.

371
00:29:48.350 --> 00:29:54.320
In this particular lab, you want to go and inspect a VPC, create an application load balancer, create

372
00:29:54.320 --> 00:29:57.960
an order scaling your group and test application for pie.

373
00:29:58.120 --> 00:29:58.610
I really.
