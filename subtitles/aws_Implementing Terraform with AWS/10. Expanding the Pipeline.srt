1
00:00:01,040 --> 00:00:04,230
[Autogenerated] Now that we have successfully used code

2
00:00:04,230 --> 00:00:07,120
commit code building code pipeline to get our development

3
00:00:07,120 --> 00:00:11,930
environment deployed automatically, we want to expand it a little bit.

4
00:00:11,930 --> 00:00:13,490
Let's see how we're going to do that.

5
00:00:13,490 --> 00:00:16,290
So we still have our source control and that's using

6
00:00:16,290 --> 00:00:18,150
CodeBuild to deploy our resources.

7
00:00:18,150 --> 00:00:19,550
We have our pipeline,

8
00:00:19,550 --> 00:00:22,070
and we have our environment variables that are being pushed

9
00:00:22,070 --> 00:00:26,040
into CodeBuild as part of each build process.

10
00:00:26,040 --> 00:00:27,540
In that pipeline,

11
00:00:27,540 --> 00:00:30,780
we first had our development environment and we successfully were

12
00:00:30,780 --> 00:00:33,500
able to build out our development environment.

13
00:00:33,500 --> 00:00:34,820
That stage is working great.

14
00:00:34,820 --> 00:00:37,940
Now we're gonna add to more stages to the process.

15
00:00:37,940 --> 00:00:39,190
We're going to add a u A.

16
00:00:39,190 --> 00:00:39,470
T.

17
00:00:39,470 --> 00:00:44,040
Stage where we'll build out a you 80 workspace and environment,

18
00:00:44,040 --> 00:00:46,750
and then we're going to build out a production stage,

19
00:00:46,750 --> 00:00:50,020
and within that production stage, we're going to do something interesting.

20
00:00:50,020 --> 00:00:53,040
We're gonna have it run through the plan process,

21
00:00:53,040 --> 00:00:56,220
but we're gonna put a manual approval stage in there that prevents

22
00:00:56,220 --> 00:01:00,040
production from being applied until we give it the thumbs up.

23
00:01:00,040 --> 00:01:02,810
So we're gonna go back to the S code and uncommon TsUM

24
00:01:02,810 --> 00:01:05,880
code in our code pipeline configuration.

25
00:01:05,880 --> 00:01:07,470
To add these components.

26
00:01:07,470 --> 00:01:10,520
Add these additional stages and then we'll kick off

27
00:01:10,520 --> 00:01:13,070
another release for the code pipeline.

28
00:01:13,070 --> 00:01:16,040
So let's go back to visual studio code and take care of that.

29
00:01:16,040 --> 00:01:18,150
All right, we're back in visual studio code,

30
00:01:18,150 --> 00:01:21,760
and we need to update our code pipeline.

31
00:01:21,760 --> 00:01:24,240
So we're gonna open up main TF.

32
00:01:24,240 --> 00:01:27,610
All right, here's our configuration in maine dot t f.

33
00:01:27,610 --> 00:01:30,260
And we're looking at the code pipeline resource.

34
00:01:30,260 --> 00:01:34,860
If we scroll down a bit here, here's our first stage where we set up source.

35
00:01:34,860 --> 00:01:36,120
We scroll down a little bit more.

36
00:01:36,120 --> 00:01:40,040
Here's our second stage, where we set up development with the two actions.

37
00:01:40,040 --> 00:01:41,920
And then if we scroll down a little bit more,

38
00:01:41,920 --> 00:01:46,820
you'll note that I have commented out any additional stages in this pipeline.

39
00:01:46,820 --> 00:01:48,710
We have to more stages were adding.

40
00:01:48,710 --> 00:01:50,600
One is UI tea and the other one is production,

41
00:01:50,600 --> 00:01:53,070
and they are remarkably similar to the information

42
00:01:53,070 --> 00:01:55,310
That's in the e development stage.

43
00:01:55,310 --> 00:01:59,540
So I'm simply going to delete these characters here too uncommon

44
00:01:59,540 --> 00:02:05,170
this you 80 stage as well as the production stage and if we

45
00:02:05,170 --> 00:02:07,940
scroll all the way down to the bottom,

46
00:02:07,940 --> 00:02:11,640
we're gonna have to delete the other side of that comment block.

47
00:02:11,640 --> 00:02:13,630
So now this whole thing is uncommon.

48
00:02:13,630 --> 00:02:17,640
Tid We'll go ahead and save it and we'll pop open the terminal.

49
00:02:17,640 --> 00:02:20,370
Let's go back into the proper directory.

50
00:02:20,370 --> 00:02:21,010
So go up.

51
00:02:21,010 --> 00:02:27,470
One will go into implementing Terra Form A W s and into this directory and

52
00:02:27,470 --> 00:02:34,560
now we can runtime reform plan out code dot t f plan.

53
00:02:34,560 --> 00:02:38,770
So we'll plan out our update that will add those two

54
00:02:38,770 --> 00:02:43,440
additional stages to our code pipeline.

55
00:02:43,440 --> 00:02:43,890
There we go.

56
00:02:43,890 --> 00:02:46,470
So you can see is planning to change one resource by

57
00:02:46,470 --> 00:02:48,540
adding those additional stages.

58
00:02:48,540 --> 00:02:49,560
Sounds good to me.

59
00:02:49,560 --> 00:02:54,440
Will simply run terra form Apply code TF plan.

60
00:02:54,440 --> 00:03:04,000
And since we're just modifying an existing resource that runs pretty darn fast, let's go back to the AWS console and see the update in code pipeline.

