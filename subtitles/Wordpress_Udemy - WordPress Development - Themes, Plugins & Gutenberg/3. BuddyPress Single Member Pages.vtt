WEBVTT
1
00:00:07.420 --> 00:00:11.940
In the previous lecture we learned how to make a template for the single member page.

2
00:00:11.980 --> 00:00:15.100
It's incomplete but we'll get it fixed in this lecture.

3
00:00:15.100 --> 00:00:16.680
Here comes the real challenge.

4
00:00:16.750 --> 00:00:20.820
We will have to read the code to figure out where to apply these changes.

5
00:00:20.860 --> 00:00:24.750
Let me show you what I mean in the resource section of this lecture.

6
00:00:24.790 --> 00:00:28.300
I provide a link to the theme compatibility and template files.

7
00:00:28.300 --> 00:00:33.730
Page This page pretty much goes over what we learned in the last section so we'll skip over some of

8
00:00:33.730 --> 00:00:34.680
it.

9
00:00:34.720 --> 00:00:40.600
What I want you to focus on is this section called overloading template compatibility theme files.

10
00:00:40.600 --> 00:00:46.090
If you take a look buddy press documents that there are files that load template parts in this directory

11
00:00:46.120 --> 00:00:51.370
BP dash templates slash BP dash legacy slash buddy press.

12
00:00:51.640 --> 00:00:54.180
However we won't be using this template.

13
00:00:54.190 --> 00:00:56.530
The reason being is that it's an old template.

14
00:00:56.530 --> 00:01:02.430
Let me show you what I mean inside the plugins folder open the buddy press plug in and navigate to the

15
00:01:02.440 --> 00:01:04.060
BP templates directory

16
00:01:06.590 --> 00:01:08.290
upon coming to this directory.

17
00:01:08.300 --> 00:01:15.170
You'll find two folders called BP legacy and BP nouveau the BP new vote template is what Buddy press

18
00:01:15.170 --> 00:01:16.640
will use by default.

19
00:01:16.670 --> 00:01:22.970
It's a template that comes with the latest standards of HCM email and CSX the BP legacy template is

20
00:01:22.970 --> 00:01:27.920
for sites that are still using the old template but would like to use the latest features of Buddy press

21
00:01:28.310 --> 00:01:32.960
the h t email and CSX is not up to par with today's standards.

22
00:01:32.960 --> 00:01:37.370
Unfortunately the new template is not very well documented on the site.

23
00:01:37.370 --> 00:01:40.400
A lot of the code still refers to the old template.

24
00:01:40.400 --> 00:01:45.170
This means that you'll have to study the code yourself to figure out things yourself.

25
00:01:45.170 --> 00:01:50.870
I'll try my best to guide you in this course for this course we'll be using new VO since it contains

26
00:01:50.870 --> 00:01:53.100
code for the latest standards.

27
00:01:53.210 --> 00:01:58.610
This directory is where Buddy press stores its own template and HMO files for loading certain sections

28
00:01:58.610 --> 00:01:59.790
of Buddy press.

29
00:01:59.900 --> 00:02:01.700
So what do I mean by that.

30
00:02:01.700 --> 00:02:08.390
Well let's explore how buddy press loads a page again when a user visits a page generated by Buddy press.

31
00:02:08.390 --> 00:02:13.070
The first thing buddy press will do is search for that page specific template file.

32
00:02:13.070 --> 00:02:15.570
Let's say the page was this member page.

33
00:02:15.650 --> 00:02:19.640
It will then use the template hierarchy system to search for that template.

34
00:02:19.790 --> 00:02:26.510
If it doesn't exist it'll just use the base template which would be the buddy press stop BHP file after

35
00:02:26.510 --> 00:02:27.960
it finds the main template.

36
00:02:27.960 --> 00:02:32.930
Buddy press will then proceed to load the various sections and pieces that make up that page.

37
00:02:33.050 --> 00:02:38.780
If we take a look at the single member page all this content is just various files loaded on to one

38
00:02:38.780 --> 00:02:39.690
page.

39
00:02:39.770 --> 00:02:42.170
This cover image is its own template.

40
00:02:42.230 --> 00:02:46.310
The menu is its own template and then this form is also its own template.

41
00:02:46.340 --> 00:02:52.610
It's not all stuffed into one file buddy press will first search in the currents activated theme for

42
00:02:52.610 --> 00:02:54.210
these files and parts.

43
00:02:54.260 --> 00:03:00.020
For example if it wanted to load the cover image it'll search the theme folder for that part.

44
00:03:00.110 --> 00:03:05.340
Currently the only template we have is the index template for the single member page.

45
00:03:05.420 --> 00:03:11.540
Therefore buddy press will not find that template part in our theme next buddy press will search for

46
00:03:11.540 --> 00:03:14.120
the template inside its own folder.

47
00:03:14.120 --> 00:03:20.720
As you can already guess buddy press will search for those files inside the BP templates slash BP nouveau

48
00:03:20.750 --> 00:03:24.740
slash buddy press directory to make things simpler and faster.

49
00:03:24.740 --> 00:03:29.540
We could copy the buddy press directory into the themes root directory like so

50
00:03:34.050 --> 00:03:36.140
however you don't want to do this.

51
00:03:36.270 --> 00:03:41.660
A lot of developers fall into this trap of just grabbing each template and putting it inside their theme.

52
00:03:41.820 --> 00:03:45.990
But that comes with the price of being too difficult to debug and handle.

53
00:03:45.990 --> 00:03:50.330
My suggestion is to only include the files you plan on overwriting.

54
00:03:50.430 --> 00:03:56.100
Otherwise you're just overdoing it and making it harder on yourself to have to manage so many templates.

55
00:03:56.100 --> 00:03:58.360
So I'm going to undo this action.

56
00:03:58.440 --> 00:04:03.660
We should be left with the original templates we have which is just the index template.

57
00:04:03.660 --> 00:04:07.590
Now that you know how buddy press loads its template we can begin customizing it.

58
00:04:07.950 --> 00:04:10.000
Here's where the problem arises.

59
00:04:10.080 --> 00:04:15.600
How do we know which file is loaded for which page buddy press doesn't give you much information on

60
00:04:15.600 --> 00:04:17.680
that inside their documentation.

61
00:04:17.700 --> 00:04:21.770
They only tell you the bare minimum and then leave the rest to you to figure out.

62
00:04:21.900 --> 00:04:24.480
This is a criticism I have of Buddy press.

63
00:04:24.480 --> 00:04:27.450
Wordpress is greatly documented and well-written.

64
00:04:27.510 --> 00:04:30.220
It even goes over some complex topics.

65
00:04:30.360 --> 00:04:33.940
However the buddy press plugin only covers the basics.

66
00:04:33.960 --> 00:04:37.290
There aren't a lot of examples of usages that you can use.

67
00:04:37.380 --> 00:04:40.100
So you're left to figure it out on your own.

68
00:04:40.110 --> 00:04:44.920
You have to open up the files and read the code to figure out what goes where.

69
00:04:44.940 --> 00:04:48.050
Luckily not everything is as hard as it seems.

70
00:04:48.090 --> 00:04:52.620
If you take a look you'll notice that Buddy press organizes everything pretty well.

71
00:04:52.620 --> 00:04:58.200
For example all files in the activity folder relates to the activity page.

72
00:04:58.200 --> 00:05:04.020
With that logic in mind we can assume that the template parts related to the single member page is located

73
00:05:04.050 --> 00:05:06.950
inside the member's slash single directory.

74
00:05:07.020 --> 00:05:09.380
That narrows it down quite a bit.

75
00:05:09.420 --> 00:05:12.790
Let's study the h t email generated by WordPress.

76
00:05:12.870 --> 00:05:18.210
I want you to inspect the element and try to find the div tag with the I.D. buddy press

77
00:05:20.830 --> 00:05:23.980
every single buddy press page will generate this tag.

78
00:05:23.980 --> 00:05:28.540
You can always expect buddy press to insert its content in between these tags.

79
00:05:28.540 --> 00:05:33.850
It's also a great way to apply CSF stylings to Buddy press content only.

80
00:05:33.850 --> 00:05:35.970
All right let's take a deeper look.

81
00:05:35.980 --> 00:05:43.240
This page is made up of two main tags which are the item header and BP wrap elements inside the item

82
00:05:43.240 --> 00:05:44.100
header element.

83
00:05:44.110 --> 00:05:48.430
You'll find a div tag with the idea of cover image container.

84
00:05:48.430 --> 00:05:53.050
What I'm doing right now is studying the h t email so that I can have a better idea of what to look

85
00:05:53.050 --> 00:05:55.480
for when I'm searching through the templates.

86
00:05:55.540 --> 00:06:00.280
The BP rap element contains the rest of the content which we want censored.

87
00:06:00.280 --> 00:06:05.840
Therefore it would make sense to apply our classes that can censor content to this tag.

88
00:06:05.890 --> 00:06:10.830
I've already studied a lot of the state's GMO so I have a good idea of what to look for.

89
00:06:10.840 --> 00:06:15.040
Feel free to pause the video and study the HCM some more.

90
00:06:15.040 --> 00:06:20.500
After studying the h t AML I will then look through the template files until I find something that matches

91
00:06:20.500 --> 00:06:23.320
the H to email output ID by Buddy press.

92
00:06:23.320 --> 00:06:29.840
I've already looked through these files I was able to find that the home dot P HP file inside the members

93
00:06:29.860 --> 00:06:32.800
slash single directory encompasses all this content.

94
00:06:33.370 --> 00:06:42.730
Open this file now as you can see this is the file we're looking for it has the div tags with the classes

95
00:06:42.820 --> 00:06:44.980
item header and BP wrap.

96
00:06:45.100 --> 00:06:49.180
The next step is to copy this file into their respective directory in our theme

97
00:06:57.100 --> 00:06:58.860
inside our copy of the file.

98
00:06:58.870 --> 00:07:04.990
I'm going to apply the class container to the div tag with the class of BP wrap.

99
00:07:05.050 --> 00:07:09.800
This is a bootstrap class that was part of my template already before I started this theme.

100
00:07:09.820 --> 00:07:11.670
It'll take care of centering the content

101
00:07:14.580 --> 00:07:19.200
let's refresh the page and you should now see the navigation and body being centered.

102
00:07:19.230 --> 00:07:23.310
The only thing we need to center is the avatar and the header information.

103
00:07:23.310 --> 00:07:24.560
Here's the problem though.

104
00:07:24.750 --> 00:07:30.790
If you take a look at the item header tag you'll find that this tag also has the cover image inside.

105
00:07:30.870 --> 00:07:36.690
If we were to center this tag we'll also be centering the cover image which isn't what we want.

106
00:07:36.690 --> 00:07:42.360
So the next thing to do is to look for the template that contains all this H2 UML and center what we

107
00:07:42.360 --> 00:07:43.730
want to center.

108
00:07:43.730 --> 00:07:49.080
Unlike last time we don't have to study the H to come out and look through files to find the file that

109
00:07:49.080 --> 00:07:56.010
contains the HDMI out for this going back to the buddy press home file we copied over inside the div

110
00:07:56.010 --> 00:07:58.640
tag with the class of item header.

111
00:07:58.680 --> 00:08:05.330
There's this function being called it's called BP nouveau member header template part.

112
00:08:05.520 --> 00:08:10.860
I'm going to copy this function and then switch over to the search feature of Visual Studio code.

113
00:08:10.860 --> 00:08:16.260
I'm going to paste in the function along with the function keyword before it I'll leave the rest of

114
00:08:16.260 --> 00:08:17.440
the fields empty.

115
00:08:17.550 --> 00:08:23.160
What we're going to do is search for where this function was defined in order for us to understand what

116
00:08:23.160 --> 00:08:24.030
a function does.

117
00:08:24.030 --> 00:08:26.330
We'll have to examine the code itself.

118
00:08:26.370 --> 00:08:28.020
This may take a while for some of you.

119
00:08:28.020 --> 00:08:29.660
So just be patient.

120
00:08:29.790 --> 00:08:31.800
We should receive one result.

121
00:08:31.800 --> 00:08:34.690
Here we have the function being defined by Buddy press.

122
00:08:34.770 --> 00:08:38.440
Right above it is a comment telling us what this function does.

123
00:08:38.520 --> 00:08:40.200
It says the following.

124
00:08:40.260 --> 00:08:46.260
Use the appropriate member header and enjoy it simple hierarchy that doesn't tell us a whole lot.

125
00:08:46.290 --> 00:08:51.960
Basically what it does is choose an appropriate header template and Buddy press you have the option

126
00:08:51.960 --> 00:08:53.880
of disabling cover images.

127
00:08:53.940 --> 00:08:56.660
You can find that option on the settings page.

128
00:08:56.670 --> 00:09:03.210
This function will check if that option is enabled or disabled by default the template variable will

129
00:09:03.210 --> 00:09:05.070
be set to member a header.

130
00:09:05.070 --> 00:09:11.340
The value member header refers to the cover image feature being disabled right after this is a conditional

131
00:09:11.340 --> 00:09:12.120
statement.

132
00:09:12.210 --> 00:09:17.490
The function BP displayed user use cover image header is being called.

133
00:09:17.580 --> 00:09:22.500
This function will take care of querying the database to check for the cover image setting.

134
00:09:22.500 --> 00:09:29.310
If this returns true then the cover image feature is enabled as a result the template variable will

135
00:09:29.310 --> 00:09:31.760
be changed to cover image header.

136
00:09:31.890 --> 00:09:37.410
Once the variable is set buddy press will begin loading the template after the conditional statement

137
00:09:37.450 --> 00:09:40.560
for things are happening to do action.

138
00:09:40.560 --> 00:09:42.140
Functions are being called.

139
00:09:42.270 --> 00:09:46.690
This is for other developers to add in content before or after the header.

140
00:09:46.710 --> 00:09:48.720
We won't be using either of these.

141
00:09:48.720 --> 00:09:55.110
We can safely ignore them in between these two functions is the function BP nouveau member get template

142
00:09:55.110 --> 00:09:56.220
part.

143
00:09:56.250 --> 00:10:00.060
This function will grab a template part based on the value passed in.

144
00:10:00.150 --> 00:10:05.040
You may be thinking doesn't WordPress already have a get template part function.

145
00:10:05.040 --> 00:10:06.780
Yes it does.

146
00:10:06.780 --> 00:10:12.000
This function is a buddy press function that wraps the WordPress function get template part.

147
00:10:12.090 --> 00:10:16.830
The difference between these two functions is that the buddy press function will only look for the template

148
00:10:16.890 --> 00:10:20.520
inside the buddy press plugin folder by looking at this code.

149
00:10:20.520 --> 00:10:25.080
We can determine that the files containing the header code can be found in two files.

150
00:10:25.140 --> 00:10:29.390
Those are the cover image header and member header files.

151
00:10:29.490 --> 00:10:34.920
If we were to look inside the BP nouveau template you'll eventually come across the two files that could

152
00:10:34.920 --> 00:10:37.260
be loaded which match the variable values

153
00:10:39.970 --> 00:10:41.320
now that we know the files.

154
00:10:41.320 --> 00:10:45.720
Let's just copy and paste them into their respective directories from the plug into our theme.

155
00:10:48.220 --> 00:10:50.020
So why two files.

156
00:10:50.020 --> 00:10:56.250
Well buddy press allows the admin to enable and disable the cover image feature as a result.

157
00:10:56.320 --> 00:10:58.810
There are two templates for both scenarios.

158
00:10:58.810 --> 00:11:00.740
We will account for both.

159
00:11:00.790 --> 00:11:03.530
Let's start with the cover image header file.

160
00:11:03.550 --> 00:11:07.510
This is the template that's used when the cover image feature is enabled.

161
00:11:07.510 --> 00:11:12.520
When I was studying this file I was looking for the tag that contains the image itself.

162
00:11:12.550 --> 00:11:19.860
I was able to find that this div tag with the I.D. of header cover image contains the cover image itself.

163
00:11:19.990 --> 00:11:26.230
I want to apply centering to all the content except for this tag the tag that contains the avatar and

164
00:11:26.230 --> 00:11:30.940
information is this div tag with the I.D. item header cover image.

165
00:11:31.060 --> 00:11:35.020
I was able to come to this conclusion by studying the HDMI out.

166
00:11:35.020 --> 00:11:38.230
I'm going to apply the container class to this tag

167
00:11:41.040 --> 00:11:41.820
that should do it.

168
00:11:42.000 --> 00:11:43.560
Let's refresh the page.

169
00:11:43.560 --> 00:11:48.170
You should now see the avatar being centered while the cover image is still stretched.

170
00:11:48.180 --> 00:11:50.490
This is exactly what we wanted.

171
00:11:50.490 --> 00:11:55.650
Of course not everyone who installs our theme and Buddy press will want this cover image feature.

172
00:11:55.650 --> 00:12:01.950
So we'll have to account for that to go to the admin dashboard and navigate to settings buddy press

173
00:12:02.100 --> 00:12:02.760
options

174
00:12:05.540 --> 00:12:14.050
I want you to uncheck the cover image uploads feature and save the changes let's refresh the page once

175
00:12:14.050 --> 00:12:14.710
more.

176
00:12:14.710 --> 00:12:18.590
You should see the content uncensored along with no cover image.

177
00:12:18.610 --> 00:12:21.990
Let's fix this inside the member header template.

178
00:12:22.000 --> 00:12:25.330
I'm going to create a div tag with the class Container

179
00:12:31.530 --> 00:12:37.860
then I'm going to move the two tags with the I.D. item header Avatar and item header content inside

180
00:12:37.860 --> 00:12:39.090
of this container tag.

181
00:12:45.460 --> 00:12:53.620
That should center our avatar and the content refresh the page and you should now see it centered.

182
00:12:53.730 --> 00:12:57.750
I'm going to rename all the cover image feature because I like how it looks.

183
00:12:57.780 --> 00:12:59.630
That wraps it up for this lecture.

184
00:12:59.670 --> 00:13:04.520
All we did was study the CML and find the appropriate templates for each section.

185
00:13:04.530 --> 00:13:09.980
It's kind of a pain but it's the only way to go about Buddy price theme development in the next lecture.

186
00:13:09.990 --> 00:13:13.560
We're going to continue working on this page and optimize it a little.
