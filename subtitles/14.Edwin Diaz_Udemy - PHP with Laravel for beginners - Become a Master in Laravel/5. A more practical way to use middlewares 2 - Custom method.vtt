WEBVTT
1

00:00:00.150  -->  00:00:05.670
All right welcome back my students so it's staff for us to start using our made aware all right to start

2

00:00:05.670  -->  00:00:06.870
finishing it up.

3

00:00:06.870  -->  00:00:15.600
Right now we have the we created the roles table we have insert a user ID here to relay that table the

4

00:00:15.600  -->  00:00:20.450
rules table with the users we have build the relationship.

5

00:00:20.450  -->  00:00:20.780
All right.

6

00:00:20.790  -->  00:00:23.610
So we have that right here.

7

00:00:24.030  -->  00:00:24.450
All right.

8

00:00:24.450  -->  00:00:30.390
We also have the middle where we have a registering current without ph B as well.

9

00:00:30.390  -->  00:00:34.450
So we can use a by its ID or a key right.

10

00:00:34.470  -->  00:00:35.490
Really cool.

11

00:00:35.490  -->  00:00:35.810
All right.

12

00:00:35.820  -->  00:00:36.990
So what's the next step.

13

00:00:36.990  -->  00:00:43.020
Well the next step is to apply are made aware to actually write our conditions right here our code.

14

00:00:43.260  -->  00:00:44.130
All right.

15

00:00:44.130  -->  00:00:50.230
So this is before the requests and this happens after the requests.

16

00:00:50.460  -->  00:00:57.900
So if you put something here below and you got a call this response though but that's consider after

17

00:00:57.900  -->  00:00:58.080
.

18

00:00:58.080  -->  00:00:58.540
OK.

19

00:00:58.560  -->  00:01:04.460
But anyway more more about that in maybe a little later lecture.

20

00:01:04.470  -->  00:01:10.200
Right now we're not going to dig too deep into this you can see about this in the documentation.

21

00:01:10.200  -->  00:01:12.590
But anyway let me show you how to use middleware.

22

00:01:12.600  -->  00:01:17.270
This is my job right here with this section how to how to use them properly.

23

00:01:17.280  -->  00:01:19.820
If you want to dig deeper you need to take.

24

00:01:19.830  -->  00:01:24.510
You need to go to the documentation and really read read and read and practice.

25

00:01:24.510  -->  00:01:24.990
OK.

26

00:01:25.020  -->  00:01:26.640
But anyway let's get to it.

27

00:01:26.640  -->  00:01:34.170
So what I want to do is I want to give a user I want to give one of these users won't we.

28

00:01:34.320  -->  00:01:35.040
We don't have a user.

29

00:01:35.040  -->  00:01:42.120
We have to create one a rule and the role is going to be either an administrator or Jack or a subscriber

30

00:01:42.120  -->  00:01:42.300
.

31

00:01:42.300  -->  00:01:42.940
Right.

32

00:01:43.200  -->  00:01:49.230
So I want to actually give them access to one part of our application depending on the you and the user

33

00:01:49.230  -->  00:01:50.000
role.

34

00:01:50.010  -->  00:02:02.460
So let's actually instead of roll your kernel Let's call this is actually you know let's create another

35

00:02:02.460  -->  00:02:03.690
middleware.

36

00:02:03.780  -->  00:02:04.180
All right.

37

00:02:04.180  -->  00:02:06.840
Because something that makes a little bit more sense.

38

00:02:06.870  -->  00:02:21.330
So let's go say BHB already and make made aware and I call this is Admin like this Antar II let's use

39

00:02:22.640  -->  00:02:23.580
synchronize.

40

00:02:23.800  -->  00:02:26.080
All right is admen OK.

41

00:02:26.310  -->  00:02:27.990
And now let's register it.

42

00:02:28.680  -->  00:02:36.810
So I want to refer to it like this as a matter of fact let's refer to it by.

43

00:02:37.140  -->  00:02:46.230
Is is at it like this.

44

00:02:46.230  -->  00:02:47.290
All right.

45

00:02:47.750  -->  00:02:48.710
Cool.

46

00:02:49.230  -->  00:02:54.060
And it's going to be in the same place and you're going to copy this guy right here.

47

00:02:55.140  -->  00:02:59.610
And the name is different.

48

00:03:01.680  -->  00:03:07.860
As a matter of fact we actually created the rule let's delete real quick because it needs to be uppercase

49

00:03:07.890  -->  00:03:08.420
.

50

00:03:08.580  -->  00:03:14.080
So is Admin like this is it.

51

00:03:14.220  -->  00:03:19.730
All right cool answer.

52

00:03:19.780  -->  00:03:20.870
There we go.

53

00:03:21.360  -->  00:03:24.060
So now here we need to spell it correctly.

54

00:03:24.060  -->  00:03:25.100
Is the man.

55

00:03:25.110  -->  00:03:26.040
There we go.

56

00:03:26.490  -->  00:03:27.640
And that should be good.

57

00:03:27.990  -->  00:03:29.110
All right.

58

00:03:29.910  -->  00:03:32.850
And here I refer to with this more.

59

00:03:32.880  -->  00:03:35.070
Actually let's talk capital.

60

00:03:35.070  -->  00:03:35.600
All right.

61

00:03:35.690  -->  00:03:39.820
Like this doesn't matter.

62

00:03:39.840  -->  00:03:40.990
All right cool.

63

00:03:41.010  -->  00:03:49.560
So now that we have that let's go to that specific made aware and let's start writing our functionality

64

00:03:51.180  -->  00:03:51.930
before we do that.

65

00:03:51.930  -->  00:03:56.340
Let's go ahead and create a roll.

66

00:03:56.340  -->  00:04:01.060
All right let's go to our application real quick and our application is Logan.

67

00:04:01.560  -->  00:04:05.090
Let's actually raised or use of before we give it a roll right.

68

00:04:05.850  -->  00:04:09.070
And let's just see.

69

00:04:09.540  -->  00:04:10.040
All right.

70

00:04:10.110  -->  00:04:13.160
Oops we already have one there.

71

00:04:13.170  -->  00:04:15.830
So we need to do refresh.

72

00:04:15.930  -->  00:04:16.440
Actually

73

00:04:21.630  -->  00:04:23.100
that's a different application right.

74

00:04:23.100  -->  00:04:24.900
Sorry about that.

75

00:04:25.170  -->  00:04:27.110
I got so many applications open.

76

00:04:27.140  -->  00:04:28.660
That is a different one.

77

00:04:29.140  -->  00:04:30.800
That is cold.

78

00:04:30.810  -->  00:04:31.770
My bad.

79

00:04:31.780  -->  00:04:35.400
Let's register right here a are-I

80

00:04:40.570  -->  00:04:41.940
cool.

81

00:04:42.040  -->  00:04:43.380
All right.

82

00:04:44.350  -->  00:04:50.880
And now let's go to our BHB admen just to find out just clear this up a little bit just to find out

83

00:04:52.030  -->  00:04:54.240
and maybe answer a roar.

84

00:04:54.730  -->  00:04:58.400
Bitchery my admen cool.

85

00:04:58.990  -->  00:05:00.340
Let's go to Claribel

86

00:05:03.670  -->  00:05:04.940
and middleware.

87

00:05:04.970  -->  00:05:09.470
Last word is we either use or that's OK.

88

00:05:09.590  -->  00:05:11.740
Now let's answer a role.

89

00:05:11.970  -->  00:05:21.300
And role is going to be an instructor or administrator and this is going to be subscriber.

90

00:05:22.150  -->  00:05:24.150
OK.

91

00:05:24.580  -->  00:05:30.370
All right cool.

92

00:05:30.370  -->  00:05:31.100
All right.

93

00:05:31.360  -->  00:05:34.070
So we got that part done.

94

00:05:34.090  -->  00:05:35.660
Now let's try our condition here.

95

00:05:35.660  -->  00:05:37.010
So what do we want to do.

96

00:05:37.030  -->  00:05:40.070
Well we have a relationship in user.

97

00:05:40.120  -->  00:05:41.590
We have a role.

98

00:05:42.160  -->  00:05:43.690
OK let me show you how this is done.

99

00:05:43.690  -->  00:05:53.950
So here if you want to check something out like that what we can do is we could create a function let's

100

00:05:53.950  -->  00:05:56.790
create a function then use a model where Let's do it like this.

101

00:05:56.800  -->  00:05:58.770
No different functionality here.

102

00:05:58.840  -->  00:06:09.160
So I'm going to say public function is admin OK and I'm going to say if

103

00:06:14.380  -->  00:06:33.060
this role and name equals and Ministre or all right then returned true.

104

00:06:35.020  -->  00:06:36.440
All right.

105

00:06:37.690  -->  00:06:39.660
If not just return false.

106

00:06:39.880  -->  00:06:40.690
That's all.

107

00:06:40.690  -->  00:06:46.570
So now we have this functionality here that we can call anytime we won this method from our user model

108

00:06:46.900  -->  00:06:50.920
and we can ask it if the user is admin.

109

00:06:51.400  -->  00:06:53.000
All right.

110

00:06:53.830  -->  00:06:59.910
If it's admin if their if they're role from the user is equal to Administrator returned true.

111

00:07:00.130  -->  00:07:03.340
So he's got to let us know if he's an I'm not an administrator.

112

00:07:03.340  -->  00:07:04.130
All right cool.

113

00:07:04.240  -->  00:07:08.600
Let's check it out real quick routes.

114

00:07:09.520  -->  00:07:10.060
Let's

115

00:07:13.630  -->  00:07:14.530
do that.

116

00:07:14.530  -->  00:07:24.250
All right then before we do this let's go and go to our users and say they're all here.

117

00:07:24.250  -->  00:07:27.830
We're going to insert hoops.

118

00:07:27.880  -->  00:07:36.490
Let's do it on these user let's insert the rule that we want and the role what we won is one.

119

00:07:36.680  -->  00:07:37.960
If you see the role here.

120

00:07:37.960  -->  00:07:39.690
Number one is administrator.

121

00:07:39.700  -->  00:07:43.040
That's what we're going to give user number one we don't have any other users.

122

00:07:43.060  -->  00:07:44.620
But for now.

123

00:07:44.620  -->  00:07:45.110
All right.

124

00:07:45.340  -->  00:07:53.300
So here we could do what we could do is we could say we could get the user out.

125

00:07:54.160  -->  00:07:59.650
I remember how we get the user out like this one out then to get a user.

126

00:07:59.980  -->  00:08:05.760
And now we can say Let me see.

127

00:08:05.830  -->  00:08:07.050
All right.

128

00:08:08.080  -->  00:08:25.860
If user is admin OK with King X or something this user is a good administrator.

129

00:08:25.940  -->  00:08:27.590
All right cool.

130

00:08:27.730  -->  00:08:28.630
Let's see if it works.

131

00:08:28.630  -->  00:08:30.190
OK.

132

00:08:30.250  -->  00:08:31.530
All right.

133

00:08:32.380  -->  00:08:41.380
So right now if we were made aware that there we go this user is an administrator.

134

00:08:41.560  -->  00:08:45.040
Now let's actually check this to see if it works correctly.

135

00:08:45.250  -->  00:08:51.970
Let's go to a BHB admin and let's change let's go the users edit let's edit that and change the rule

136

00:08:51.970  -->  00:08:53.310
to two.

137

00:08:54.160  -->  00:08:57.280
Let's go back here and refresh.

138

00:08:57.320  -->  00:09:02.400
As you can see we don't see anything here because our function is returning false.

139

00:09:02.410  -->  00:09:04.110
So let's recap a little bit on what we did.

140

00:09:04.110  -->  00:09:05.130
All right.

141

00:09:05.140  -->  00:09:12.350
Real quick we register a new roll a new made aware.

142

00:09:12.490  -->  00:09:13.430
All right.

143

00:09:13.660  -->  00:09:15.400
Called is adamant.

144

00:09:16.000  -->  00:09:17.170
That's what we register.

145

00:09:17.170  -->  00:09:25.330
This is the new that new made aware Whoops.

146

00:09:25.330  -->  00:09:27.160
All right.

147

00:09:27.160  -->  00:09:28.420
We're not using it yet.

148

00:09:28.420  -->  00:09:29.050
All right.

149

00:09:29.320  -->  00:09:29.740
But we are.

150

00:09:29.750  -->  00:09:31.910
We register this guy right here.

151

00:09:32.080  -->  00:09:34.020
OK.

152

00:09:34.030  -->  00:09:38.680
Now after that we created a function.

153

00:09:39.580  -->  00:09:40.330
All right.

154

00:09:40.330  -->  00:09:44.710
A med call is admen because we're going to use that later on.

155

00:09:44.710  -->  00:09:50.500
But I want to create this tool that way you can see all right how he's done.

156

00:09:50.590  -->  00:09:57.000
So we created this and then we are using it utilizing it right here on routes.

157

00:09:57.010  -->  00:09:57.450
All right.

158

00:09:57.450  -->  00:09:59.730
To test things out.

159

00:09:59.730  -->  00:10:00.500
All right.

160

00:10:00.520  -->  00:10:06.190
In a letter to taller you actually and that's why I'm going to show you how to use this with a middleware

161

00:10:06.190  -->  00:10:06.670
.

162

00:10:06.670  -->  00:10:06.970
All right.

163

00:10:07.000  -->  00:10:07.630
Cool.

164

00:10:07.630  -->  00:10:08.650
See you in the next lecture
