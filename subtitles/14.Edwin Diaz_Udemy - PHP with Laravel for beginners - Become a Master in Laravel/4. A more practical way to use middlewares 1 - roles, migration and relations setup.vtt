WEBVTT
1

00:00:00.240  -->  00:00:05.280
Or writes on the last lecture I give you some examples on how to use middleware right.

2

00:00:05.280  -->  00:00:09.510
Well in this lecture right here we're going to actually build something that makes a little bit more

3

00:00:09.510  -->  00:00:11.730
sense and that way you can see the use of it.

4

00:00:11.730  -->  00:00:12.220
Right.

5

00:00:12.390  -->  00:00:19.740
First of all let's just come in this hour real quick here we can have two returns because only one return

6

00:00:20.030  -->  00:00:20.460
to Q.

7

00:00:20.460  -->  00:00:25.620
But anyway let's go we have a rule made away here.

8

00:00:25.620  -->  00:00:28.820
So actually let's make use of that.

9

00:00:28.860  -->  00:00:31.630
All right.

10

00:00:33.120  -->  00:00:35.000
Let's clean this up a little bit.

11

00:00:35.750  -->  00:00:36.550
OK.

12

00:00:37.050  -->  00:00:39.020
So this is what we're going to do.

13

00:00:39.030  -->  00:00:43.980
We're going to create a Rolls table and we're going to keep a role for the user there.

14

00:00:44.130  -->  00:00:49.650
And we're going to create a model where there's going to the detect if the user is a has a role of the

15

00:00:49.650  -->  00:00:50.470
admin.

16

00:00:50.470  -->  00:00:53.550
All right so let's first create a migration for that.

17

00:00:53.550  -->  00:00:58.790
That's the first thing that we've got to do is just make sure that our migrations set up so BHP OROSZ

18

00:00:58.920  -->  00:01:04.600
and make migration.

19

00:01:04.980  -->  00:01:21.440
And then we say actually will create a model call roll that we go is good enough and less than me using

20

00:01:21.510  -->  00:01:26.650
this shoos me.

21

00:01:26.660  -->  00:01:28.930
All right we have the roll right here.

22

00:01:29.200  -->  00:01:29.710
Okay.

23

00:01:29.880  -->  00:01:32.790
The next step is we need to create a relationship.

24

00:01:32.790  -->  00:01:33.440
All right.

25

00:01:33.510  -->  00:01:43.140
Now one thing that I wanted to do is I want to go to the the user's migration and insert user ID.

26

00:01:43.290  -->  00:01:43.960
OK.

27

00:01:44.280  -->  00:01:51.510
So let's say this go here to the users and just because we don't have that much information let's just

28

00:01:51.870  -->  00:01:56.630
it's not a user id I'm sorry a role Id just because we don't we don't have that much information that

29

00:01:56.670  -->  00:01:57.980
going to create a table.

30

00:01:58.240  -->  00:02:02.720
Next your column with the migration but I'm just going to refresh it.

31

00:02:02.730  -->  00:02:03.310
All right.

32

00:02:03.540  -->  00:02:11.490
So let's just do this integer and we're going to say we're already here.

33

00:02:12.270  -->  00:02:13.410
OK.

34

00:02:14.250  -->  00:02:22.170
And we've seen a refresh or migrations and here rolls and let's create a rule name.

35

00:02:22.200  -->  00:02:27.100
Real quick.

36

00:02:27.100  -->  00:02:28.150
All right.

37

00:02:28.680  -->  00:02:30.980
So that's the first thing we've got to do.

38

00:02:32.070  -->  00:02:40.010
And this to PH BE is my great refresh.

39

00:02:40.170  -->  00:02:42.060
All right cool.

40

00:02:42.060  -->  00:02:44.400
Now let's set up our relationship real quick.

41

00:02:44.400  -->  00:02:53.470
Let's go to the user and actually the to the to the rule.

42

00:02:53.580  -->  00:03:00.500
And here we are going to do the protected and choose me.

43

00:03:00.650  -->  00:03:04.620
I want to make sure that the name is available for us to use.

44

00:03:04.620  -->  00:03:05.340
All right.

45

00:03:05.610  -->  00:03:16.940
And let's go back to the user and let's create this relationship here and we're going to say roll we

46

00:03:16.970  -->  00:03:31.860
go and we're going to return this belongs to Kerry and we go whoops.

47

00:03:31.960  -->  00:03:32.460
All right.

48

00:03:32.460  -->  00:03:35.880
So I think we're done during this first part we have the migration.

49

00:03:36.060  -->  00:03:38.490
We created a new

50

00:03:41.250  -->  00:03:44.950
column here user ID on the roll ID.

51

00:03:45.240  -->  00:03:46.000
OK.

52

00:03:46.020  -->  00:03:54.270
And the next thing for us to do is you know create the middleware and then just create a couple of more

53

00:03:54.270  -->  00:04:00.250
functionalities there so that where you can see how we can use the middle Where's when detecting when

54

00:04:00.270  -->  00:04:03.840
filtering HGT be requesting or application is going to be pretty cool.

55

00:04:03.840  -->  00:04:08.640
So I want you to pay very close attention and don't skip these lectures are super important for your

56

00:04:08.640  -->  00:04:09.480
development.

57

00:04:09.540  -->  00:04:10.830
Anyway thank you so much for watching.

58

00:04:10.830  -->  00:04:12.070
I'll see you in the next lectures
