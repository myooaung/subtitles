WEBVTT
1

00:00:00.120  -->  00:00:00.620
All right.

2

00:00:00.620  -->  00:00:02.090
Welcome back.

3

00:00:02.090  -->  00:00:06.850
The students time for us to start writing our relationship in the model right.

4

00:00:07.020  -->  00:00:10.430
Let's call them real quick and let's see how he's done.

5

00:00:10.650  -->  00:00:12.980
So let's go to the model country.

6

00:00:13.020  -->  00:00:13.510
All right.

7

00:00:13.530  -->  00:00:16.110
That's where we're going to be refining this.

8

00:00:16.110  -->  00:00:20.080
And let's go and.

9

00:00:20.120  -->  00:00:20.570
Right.

10

00:00:20.670  -->  00:00:27.440
Public Function let's call it pose.

11

00:00:28.560  -->  00:00:29.390
OK.

12

00:00:29.640  -->  00:00:36.210
Because we're going to be pulling out the polls for a specific country right for a specific user through

13

00:00:36.660  -->  00:00:38.310
the country model right.

14

00:00:38.640  -->  00:00:40.980
So I hope you understand what we're doing.

15

00:00:41.030  -->  00:00:42.260
Nah don't worry about it.

16

00:00:42.260  -->  00:00:43.640
You got to understand it.

17

00:00:44.070  -->  00:00:52.580
Once we do it but let's just say return this and has many true.

18

00:00:52.830  -->  00:00:56.970
All right so there's a couple of things you've got to understand here and when we are defining this

19

00:00:56.970  -->  00:01:04.440
relationship right now OK remember that we can choose to customize the columns write the column names

20

00:01:04.740  -->  00:01:11.390
by default is going to pool some He's going to use some ideas are going to show you in a minute what

21

00:01:11.390  -->  00:01:11.740
ids.

22

00:01:11.760  -->  00:01:13.530
But there's method here.

23

00:01:13.530  -->  00:01:20.430
Before I tell you that this method uses to model two tables right.

24

00:01:20.730  -->  00:01:26.170
The first table that he's going to use is the pause table in this case.

25

00:01:26.210  -->  00:01:27.390
All right.

26

00:01:27.960  -->  00:01:35.520
And then is going to use the intermediate table where he gets the country ID from right here the user

27

00:01:35.520  -->  00:01:37.520
in this case.

28

00:01:37.620  -->  00:01:38.670
All right.

29

00:01:39.300  -->  00:01:44.470
So remember we have the country Id here and that's where he gets the country ID.

30

00:01:44.490  -->  00:01:45.550
All right.

31

00:01:46.190  -->  00:01:55.830
And now that third parameter we can define customize we can get the country ID from here.

32

00:01:56.450  -->  00:01:57.090
All right.

33

00:01:57.090  -->  00:02:00.110
If you have a different name you would find it right here.

34

00:02:00.390  -->  00:02:01.460
OK.

35

00:02:02.230  -->  00:02:06.150
So this I.D. refers to this guy right here.

36

00:02:06.150  -->  00:02:14.010
So if for some reason you had a different column name you would find it right here says we already have

37

00:02:14.010  -->  00:02:17.720
this country I.D. This is where Larabee is looking for we don't have to write it down.

38

00:02:17.820  -->  00:02:30.690
Now in order for us to to get the user id Let's go and show you right here in polls where he's going

39

00:02:30.690  -->  00:02:36.990
now with pomes migration where his folks right here.

40

00:02:37.260  -->  00:02:42.450
In order for us to get his User ID to customize it just in case this was different like the user ID

41

00:02:43.050  -->  00:02:44.530
that would be the fourth column.

42

00:02:44.530  -->  00:02:45.840
All right.

43

00:02:46.560  -->  00:02:48.240
In the country Plass right here.

44

00:02:48.240  -->  00:02:50.140
That would be this column right here.

45

00:02:50.250  -->  00:02:51.960
User ID.

46

00:02:53.000  -->  00:02:53.400
OK.

47

00:02:53.400  -->  00:02:58.170
Just in case there were different it would be like this very similar to what we have before in other

48

00:02:58.170  -->  00:02:59.490
relationships.

49

00:02:59.490  -->  00:03:03.330
The only difference here is that we're using the two tables in the beginning.

50

00:03:03.890  -->  00:03:05.710
OK.

51

00:03:07.590  -->  00:03:12.260
First parameter the post table and the second parameter is the user table which is the intermediate

52

00:03:12.260  -->  00:03:14.350
table which gives the country ID.

53

00:03:14.370  -->  00:03:19.620
That's the difference here with regarding this method.

54

00:03:19.650  -->  00:03:20.240
OK.

55

00:03:20.340  -->  00:03:27.660
So once we get this then we can go ahead two routes and start pulling out some information.

56

00:03:27.660  -->  00:03:36.580
So let's say for example I want to pulao the poles for the con the user that belongs to the country

57

00:03:36.580  -->  00:03:39.730
of Dominican Republic in this case the are right.

58

00:03:39.930  -->  00:03:41.270
And that would be me.

59

00:03:41.640  -->  00:03:45.670
So let's find that country first.

60

00:03:46.470  -->  00:03:48.040
OK.

61

00:03:49.080  -->  00:03:53.440
Well first find the country OK.

62

00:03:54.150  -->  00:03:59.830
And we're going to be using the user stable to find that country.

63

00:03:59.850  -->  00:04:03.130
So watch this.

64

00:04:03.180  -->  00:04:17.240
So for each this country polls see that and remember where we put that right where we created this pose

65

00:04:17.240  -->  00:04:17.760
.

66

00:04:17.890  -->  00:04:23.260
We go to a country that's where we have pools because we're using the intermediate table here.

67

00:04:23.430  -->  00:04:23.920
Right.

68

00:04:24.100  -->  00:04:30.400
We're using the pool stage was the table where we get the user ID right.

69

00:04:31.050  -->  00:04:35.140
And then we're getting this we get in the country ID from user.

70

00:04:35.190  -->  00:04:40.090
So this is where we are kind of relating those two tables together to pull out information.

71

00:04:40.110  -->  00:04:41.070
All right.

72

00:04:41.400  -->  00:04:57.600
So once we have this we can come here and return the post-Idol of specific posts right where the user

73

00:04:57.590  -->  00:04:58.810
is from the art.

74

00:04:59.250  -->  00:05:03.630
Let's actually include that class on top are going to be imported.

75

00:05:03.960  -->  00:05:06.610
Remember that we have to do this on top.

76

00:05:06.760  -->  00:05:12.240
BHB store has a little light board that we click it and then it gives option to importer or Martigny

77

00:05:12.240  -->  00:05:13.110
on top.

78

00:05:13.190  -->  00:05:15.190
So we're going to be importing our country.

79

00:05:15.320  -->  00:05:16.470
All right.

80

00:05:17.040  -->  00:05:24.180
So now when we get to when we go to use our country is going to do that for us.

81

00:05:24.260  -->  00:05:33.700
Watch Antar and in France the post related to the user from the art which is me.

82

00:05:34.310  -->  00:05:35.770
OK.

83

00:05:36.480  -->  00:05:44.010
Now if we try to find the country Number four is going to find somebody else.

84

00:05:44.000  -->  00:05:50.460
Actually I don't think we have the user related to that.

85

00:05:50.460  -->  00:05:51.990
We have to relay the user to that.

86

00:05:51.990  -->  00:05:53.760
So let's let's do that.

87

00:05:53.910  -->  00:05:58.040
Don't I'm not going to leave you wondering why the network.

88

00:05:58.230  -->  00:06:05.320
OK so let's go to our Lara Bell CMS user.

89

00:06:05.550  -->  00:06:10.410
Pete is from country 4.

90

00:06:11.630  -->  00:06:18.270
And if we go to a country there is USA right here and

91

00:06:21.710  -->  00:06:25.290
all right.

92

00:06:27.030  -->  00:06:31.560
So we would find the country number is for really

93

00:06:35.940  -->  00:06:42.840
country with the number four and user has a country with the number four is supposed to get the title

94

00:06:42.840  -->  00:06:45.600
of that country.

95

00:06:45.600  -->  00:06:48.210
Let's see if we have another polls.

96

00:06:48.240  -->  00:06:53.230
We don't have the polls so let's create one right here.

97

00:06:54.300  -->  00:06:58.410
Pete's post just lay this

98

00:07:01.390  -->  00:07:04.590
content.

99

00:07:04.640  -->  00:07:04.980
Right.

100

00:07:04.990  -->  00:07:06.360
And user ID is too.

101

00:07:06.380  -->  00:07:07.930
So make sure you do that.

102

00:07:07.960  -->  00:07:12.480
That's the only way you're going to get some information out of that answer.

103

00:07:12.480  -->  00:07:13.920
There we go.

104

00:07:13.920  -->  00:07:14.670
All right.

105

00:07:15.260  -->  00:07:20.040
So we pull the polls from the user that belongs to the US.

106

00:07:20.110  -->  00:07:21.750
Beautiful.

107

00:07:21.750  -->  00:07:22.650
All right.

108

00:07:23.460  -->  00:07:25.480
So anyway I hope you understand how this works.

109

00:07:25.470  -->  00:07:32.050
If not just repeat the lecture again then you know try to do it yourself.

110

00:07:32.130  -->  00:07:37.660
I'm going to actually repeat repeat it a little bit so that way for those of you that don't understand

111

00:07:37.650  -->  00:07:40.230
they fully understand the jump to the next lecture OK.

112

00:07:40.400  -->  00:07:45.760
So let's go back real quick and see what we did for those of you that don't understand it.

113

00:07:45.960  -->  00:07:47.060
All right.

114

00:07:47.070  -->  00:07:51.000
We as a country I.D. to use this we're clear on that right.

115

00:07:51.890  -->  00:07:58.130
And we as a country is stable and we put it we put some information there in the country say we're pull

116

00:07:58.120  -->  00:08:07.320
all the countries that this table has no foreign keys at all no other user or key user IDs country ID

117

00:08:07.330  -->  00:08:07.950
has nothing.

118

00:08:07.950  -->  00:08:08.660
OK.

119

00:08:08.940  -->  00:08:12.370
Right here just the name.

120

00:08:13.040  -->  00:08:16.770
And of course then the regular created out of data that that's it.

121

00:08:16.760  -->  00:08:17.520
Right.

122

00:08:17.970  -->  00:08:27.360
So now where the magic happens is in the model country because this is where we relay posts.

123

00:08:27.540  -->  00:08:28.190
Right.

124

00:08:28.400  -->  00:08:36.210
That's where we have the user id and on the app user we have the country ID and we are finding those

125

00:08:36.210  -->  00:08:43.280
two there would will processing those two and attaching it to this post method.

126

00:08:43.270  -->  00:08:50.030
All right so now Clarabelle is going to be automatically looking for the country ID.

127

00:08:50.770  -->  00:08:51.290
All right.

128

00:08:51.360  -->  00:08:54.210
Imagine that this is invest in this invisible.

129

00:08:54.480  -->  00:08:56.080
You can't see a but he's there.

130

00:08:56.220  -->  00:09:02.940
He's got to look for this country I.D. automatically in users in the Users table which is this model

131

00:09:02.930  -->  00:09:05.100
right here is the names pay for it.

132

00:09:05.130  -->  00:09:05.640
All right.

133

00:09:05.790  -->  00:09:14.490
And of course all right we're going to be looking for these user id in here.

134

00:09:14.500  -->  00:09:15.140
All right.

135

00:09:15.140  -->  00:09:17.480
So those two are there with as you just invisible.

136

00:09:17.530  -->  00:09:18.110
Right there.

137

00:09:18.240  -->  00:09:20.400
They're in default mode.

138

00:09:20.630  -->  00:09:21.840
We can define different ones.

139

00:09:21.840  -->  00:09:23.840
Like I said before but that's how it is.

140

00:09:23.850  -->  00:09:25.410
So this is where the magic happens.

141

00:09:25.400  -->  00:09:26.470
All right guys.

142

00:09:26.510  -->  00:09:31.970
Anyway thank you so much for watching this lecture and I hope you are having a lot of fun with me in

143

00:09:31.980  -->  00:09:32.710
this course.

144

00:09:32.790  -->  00:09:35.120
And we're going to have a lot more fun when we build applications.

145

00:09:35.120  -->  00:09:36.060
I guarantee you that.

146

00:09:36.060  -->  00:09:38.820
So stay tune keep motivated you're doing really good.

147

00:09:38.880  -->  00:09:40.640
If you have any questions I'm here for you.

148

00:09:40.670  -->  00:09:41.490
OK.

149

00:09:41.510  -->  00:09:44.820
Thank you so much and I'll see you in the next lecture.
