1
00:00:00,600 --> 00:00:00,970
All right.

2
00:00:00,970 --> 00:00:05,790
So we're going to use the animation skills you've just learned and a lot of the other skills you learned

3
00:00:05,820 --> 00:00:10,830
in the previous section to make a game that I call connect 3.

4
00:00:10,880 --> 00:00:13,290
It has a lot to do with the game called tic tac toe.

5
00:00:13,500 --> 00:00:16,010
But it's kind of mixed with Connect 4.

6
00:00:16,230 --> 00:00:24,110
Let's see how it works when you tap on one of the blank areas in this grid.

7
00:00:24,480 --> 00:00:31,710
A counter falls down from the top and it alternates between red and yellow.

8
00:00:32,100 --> 00:00:35,420
And the aim of the game is to get three in a way.

9
00:00:35,630 --> 00:00:37,690
So basically the same as tic tac toe.

10
00:00:37,860 --> 00:00:41,600
But you have these counters that drop in from above.

11
00:00:41,630 --> 00:00:43,970
Now the game is yellow versus red.

12
00:00:44,880 --> 00:00:47,250
So hopefully you get the idea.

13
00:00:47,760 --> 00:00:51,000
We can play as many times as we like.

14
00:00:51,750 --> 00:00:57,430
And then when we've got three in a row that is either vertically horizontally or diagonally.

15
00:00:57,510 --> 00:01:01,780
The phone will tell us who has one and give us the option to play again.

16
00:01:03,050 --> 00:01:08,720
So there's not much that you haven't done before but it's the complexity of it and putting it all together

17
00:01:08,720 --> 00:01:09,680
that will be the challenge.

18
00:01:09,680 --> 00:01:15,650
There's a link to download the image resources for the background grid and the counters in the next

19
00:01:15,650 --> 00:01:16,190
lecture.

20
00:01:16,340 --> 00:01:19,850
So go and grab those or you can of course make or download your own if you prefer.

21
00:01:20,000 --> 00:01:27,800
I'm going to give you a little hint to use the grid layout to lay out your counters and you might want

22
00:01:27,800 --> 00:01:33,950
to investigate something called tags to keep track of which slots have been filled and whether they've

23
00:01:33,950 --> 00:01:37,860
been filled with a yellow or red counter.

24
00:01:37,970 --> 00:01:42,260
That's all I'm going to say for now of course if you have any problems just watch me in this video but

25
00:01:42,290 --> 00:01:45,950
otherwise pause and give it a shot.

26
00:01:45,950 --> 00:01:46,740
Best of luck.

27
00:01:52,820 --> 00:01:53,260
All right.

28
00:01:53,270 --> 00:01:57,500
Well I heard that when wealthy as I said that was a big boom to make single handedly say if you did

29
00:01:57,500 --> 00:01:58,760
manage it congratulations.

30
00:01:58,760 --> 00:01:59,180
If not.

31
00:01:59,180 --> 00:01:59,950
Not to worry.

32
00:02:00,110 --> 00:02:00,770
Let's see.

33
00:02:00,800 --> 00:02:02,880
Could have done it.

34
00:02:02,960 --> 00:02:10,770
So as usual we'll start with a new project I'll call it connect three.

35
00:02:10,770 --> 00:02:11,160
Game

36
00:02:15,150 --> 00:02:18,840
usual options.

37
00:02:18,980 --> 00:02:25,520
We just need the one empty activity and then we'll start by bringing in our images.

38
00:02:27,580 --> 00:02:33,240
So here we've got Guillot red and bored so I'm going to copy them.

39
00:02:33,250 --> 00:02:40,270
You can just direct them in a few days and then we'll put them in the folder.

40
00:02:40,510 --> 00:02:41,830
Little bit of patience is required.

41
00:02:41,830 --> 00:02:43,240
Let's try that again.

42
00:02:43,240 --> 00:02:43,960
There you go.

43
00:02:49,490 --> 00:02:49,910
Great.

44
00:02:49,970 --> 00:02:51,030
Now.

45
00:02:51,770 --> 00:02:54,790
OK so let's start with our lay out

46
00:02:59,060 --> 00:03:07,730
our board image that I'm using is a square and it's divided into nine sections three by three.

47
00:03:08,070 --> 00:03:12,630
So we can use a grid to lay out

48
00:03:16,190 --> 00:03:17,580
to do this for us.

49
00:03:17,660 --> 00:03:19,040
I'll just bring it in.

50
00:03:19,040 --> 00:03:20,050
There we go.

51
00:03:20,500 --> 00:03:26,160
So now we've got great layout but I'll just add constraints for

52
00:03:30,000 --> 00:03:32,410
and an ID.

53
00:03:32,650 --> 00:03:36,200
Am I going to need to set the number of rows and columns.

54
00:03:38,690 --> 00:03:43,640
So we want both of those to be three two or three ways.

55
00:03:46,020 --> 00:03:47,760
And three columns

56
00:03:51,620 --> 00:03:52,550
excellent.

57
00:03:52,710 --> 00:03:55,320
Couple of other settings we can change while we're here.

58
00:03:55,350 --> 00:03:56,980
We wanted to be a square.

59
00:03:57,210 --> 00:03:59,980
So we've got the width as 3 6 8.

60
00:04:00,030 --> 00:04:08,250
I'm going to set the height to be 3 6 8 as well and just make sure that's deep.

61
00:04:09,780 --> 00:04:19,870
And I'm going to set the background image to be how bored.

62
00:04:19,900 --> 00:04:20,820
There we go.

63
00:04:20,830 --> 00:04:26,620
So we've now got a grid layout without Nice borders the background so we can start putting our counters

64
00:04:27,310 --> 00:04:28,640
in place.

65
00:04:28,640 --> 00:04:31,750
So let's add an image.

66
00:04:32,910 --> 00:04:35,910
And you can see how great layout appears here.

67
00:04:36,130 --> 00:04:43,710
I want this one to be top left so I'll just put it up there and we'll make them all right for the moment.

68
00:04:44,270 --> 00:04:47,030
We'll have to change them programmatically anyway.

69
00:04:48,230 --> 00:04:49,210
Excellent.

70
00:04:49,220 --> 00:04:50,390
So those are top left.

71
00:04:50,390 --> 00:04:51,560
Add another one.

72
00:04:53,940 --> 00:04:57,490
I'm just going to copy and paste.

73
00:04:58,100 --> 00:04:59,040
So I put that in there.

74
00:04:59,030 --> 00:05:00,810
You can see it appears next to it.

75
00:05:00,990 --> 00:05:04,270
And we're starting to see the great format now appearing.

76
00:05:04,610 --> 00:05:07,940
Add a third and we get three in a row.

77
00:05:07,950 --> 00:05:12,350
The fourth appears on the next try and then five

78
00:05:17,350 --> 00:05:21,000
six seven eight nine.

79
00:05:21,010 --> 00:05:22,300
Now we do have a few problems there.

80
00:05:22,360 --> 00:05:23,530
As you can see.

81
00:05:23,530 --> 00:05:25,510
So let's fix those.

82
00:05:25,510 --> 00:05:28,750
Firstly I'm going to set the width and height

83
00:05:33,260 --> 00:05:35,480
so that it fits nicely in the box.

84
00:05:35,600 --> 00:05:37,660
So rather than wrapping content.

85
00:05:37,700 --> 00:05:42,850
Let's try something like 100 deep.

86
00:05:42,980 --> 00:05:46,530
That's not too bad actually I think with the right margins.

87
00:05:46,700 --> 00:05:55,850
Well speaking of which let's set those although I'll just set the height to match as well.

88
00:05:55,890 --> 00:05:58,340
So now we've got a width and height of hundred rupees.

89
00:05:58,650 --> 00:06:08,120
And then the margin will probably have to set specific margins for each one but let's get this one position

90
00:06:08,120 --> 00:06:08,900
nicely first.

91
00:06:08,900 --> 00:06:11,530
We'll start off with 10.

92
00:06:11,710 --> 00:06:13,370
And that looks pretty good to me.

93
00:06:14,340 --> 00:06:20,150
And if you wanted to be super accurate you could do maybe a little bit better than that but that's centered

94
00:06:20,150 --> 00:06:22,170
as we need to be filled out.

95
00:06:23,180 --> 00:06:30,990
So let's redo our copy and pasting so that we get

96
00:06:33,940 --> 00:06:40,880
cancers that appear in the right place OK say vertically That one looks good but I think we need to

97
00:06:40,880 --> 00:06:43,710
see change the left margin

98
00:06:48,370 --> 00:06:51,120
to maybe 15 teepees.

99
00:06:51,320 --> 00:06:54,730
Let's have a look a touch more I think

100
00:06:59,930 --> 00:07:03,530
is nice to get things as centered as possible.

101
00:07:03,530 --> 00:07:04,740
Great.

102
00:07:05,120 --> 00:07:06,720
So that one's looking good.

103
00:07:07,190 --> 00:07:09,750
Let's update the IDs as we go.

104
00:07:11,790 --> 00:07:15,330
So we'll start off with you one and then two three etc..

105
00:07:20,800 --> 00:07:22,600
Paste in another one.

106
00:07:22,960 --> 00:07:28,000
I think that's good although it looks a little bit off to the right to me.

107
00:07:28,000 --> 00:07:29,510
Let's experiment a little bit

108
00:07:32,470 --> 00:07:33,090
that all day

109
00:07:36,840 --> 00:07:45,870
and now I'm going to be bold and copy all three of these in one go because I'm reasonably confident

110
00:07:45,870 --> 00:07:47,730
that they will display nicely.

111
00:07:47,790 --> 00:07:50,260
I think they definitely get horizontally vertically.

112
00:07:50,260 --> 00:07:53,450
I could do with bringing them down a little bit.

113
00:07:55,510 --> 00:08:01,740
So let's at starting with this one android

114
00:08:05,260 --> 00:08:08,140
lay out in top

115
00:08:11,870 --> 00:08:24,380
and let's try that on I think that looks good can see the advantage of doing it using Exham out here.

116
00:08:24,390 --> 00:08:30,770
It's a lot quicker than it would be selecting them all and manually changing everything on the design

117
00:08:30,770 --> 00:08:31,890
view.

118
00:08:34,590 --> 00:08:35,010
OK.

119
00:08:35,080 --> 00:08:47,270
All my staff copy those three and the last three again need to be moved down a little let's try 16

120
00:08:50,430 --> 00:08:52,070
16 16.

121
00:08:52,350 --> 00:08:52,830
Great.

122
00:08:55,230 --> 00:08:59,040
And then seven eighths

123
00:09:01,720 --> 00:09:04,880
and nine.

124
00:09:05,340 --> 00:09:10,120
OK it looks good in the preview here but I think it's now time to

125
00:09:12,790 --> 00:09:13,380
run out.

126
00:09:13,450 --> 00:09:19,120
And just make sure that everything is displayed on the device itself or at least in the emulator as

127
00:09:19,120 --> 00:09:20,630
we want it to be.

128
00:09:21,460 --> 00:09:22,850
All right so we're looking good.

129
00:09:22,990 --> 00:09:27,730
But of course we don't actually want the board to look like this initially wanted to be empty and we

130
00:09:27,730 --> 00:09:33,110
want to drop the counter then when the use taps on one of these spaces.

131
00:09:33,700 --> 00:09:42,070
So let's work with this particular counter and we'll start by just getting rid of the source completely

132
00:09:42,140 --> 00:09:47,020
so the image view is still there but it doesn't have an image displayed on it.

133
00:09:47,020 --> 00:09:54,150
What we want is when the user taps on this image for a counter to drop in from the top and a pair or

134
00:09:54,200 --> 00:09:56,620
settle there at the bottom.

135
00:09:57,190 --> 00:09:57,510
OK.

136
00:09:57,520 --> 00:10:02,820
So to do that we're going to need to add an on click method for this image V.

137
00:10:06,920 --> 00:10:08,220
Done that before.

138
00:10:08,750 --> 00:10:11,540
So I'll call this drop in.

139
00:10:12,380 --> 00:10:17,020
And then let's go and write the code for our method.

140
00:10:17,450 --> 00:10:26,370
So we're used to this public void doesn't return anything coolit droppin and it's going to be called

141
00:10:26,370 --> 00:10:35,010
by a few which will be the image view that was tapped on now for the first time we do actually want

142
00:10:35,010 --> 00:10:42,510
to access this variable this time because we need to know which one was tapped or as we're going to

143
00:10:42,510 --> 00:10:47,230
be calling the drop in method from all of these.

144
00:10:47,370 --> 00:10:52,880
So what will they do is create a variable of type image V with a name counter.

145
00:10:53,850 --> 00:11:02,200
And this is going to be equal to the image view that was tapped on the View but view is a view of course.

146
00:11:02,220 --> 00:11:11,340
So we need to cast that to an image view just as we do with fine view by id and then we want to drop

147
00:11:11,340 --> 00:11:15,690
the county in which is going to involve a few different steps.

148
00:11:15,690 --> 00:11:21,720
So first of all I want to translate it outside of the screen or above the top of the screen so that

149
00:11:21,720 --> 00:11:31,560
it can drop in say let's take a counter and we could animate this but as we did in the previous video

150
00:11:31,560 --> 00:11:44,100
with set X I'm going to set translation X to minus 1000 should take it off the top of the screen maybe

151
00:11:44,100 --> 00:11:46,610
we'll make that fifteen hundred just to be sure.

152
00:11:47,180 --> 00:11:50,730
And then I'm going to set the image for it.

153
00:11:50,740 --> 00:11:53,590
Now we did this way back in Section 1.

154
00:11:54,140 --> 00:12:04,840
You may remember we take our imagery and we set the image resorts.

155
00:12:05,100 --> 00:12:08,480
And in this case I'll use yellow just to make it look a bit different.

156
00:12:08,880 --> 00:12:14,610
So resources Daut drawable and yellow.

157
00:12:15,330 --> 00:12:16,950
So we've moved it off the screen.

158
00:12:17,330 --> 00:12:23,520
We've set the image view image to the yellow counter image and now we're going to drop it back down

159
00:12:23,520 --> 00:12:24,170
again.

160
00:12:26,680 --> 00:12:36,160
So it will use counter to animate and we want to translate y by a thousand or fifteen hundred sorry

161
00:12:36,160 --> 00:12:40,400
to bring it back down and we'll do this pretty quickly.

162
00:12:40,450 --> 00:12:41,230
We'll see how it looks.

163
00:12:41,230 --> 00:12:45,960
We might need to adjust it but I'll go for a third of a second.

164
00:12:46,120 --> 00:12:47,170
See how that works.

165
00:12:48,590 --> 00:12:56,540
All right so now when we run the app we should have a blank space bottom middle and when that blank

166
00:12:56,540 --> 00:13:03,980
space is tapped on the yellow counter should appear from above and just before I run that you may have

167
00:13:03,980 --> 00:13:07,420
noticed a small mistake there.

168
00:13:07,520 --> 00:13:08,750
I want to set the translation.

169
00:13:08,750 --> 00:13:09,350
Why.

170
00:13:09,350 --> 00:13:13,780
Because I want it to appear above the screen not to the left of the screen.

171
00:13:15,860 --> 00:13:16,730
All right.

172
00:13:17,000 --> 00:13:19,020
Let's give that a gay.

173
00:13:20,060 --> 00:13:23,420
So now I tap on the invisible counter and there it is.

174
00:13:23,420 --> 00:13:25,240
That looks great.

175
00:13:25,370 --> 00:13:26,560
Just a quick thought.

176
00:13:26,570 --> 00:13:32,280
We could even do a bit of a rotation so it spins as it comes in.

177
00:13:32,360 --> 00:13:33,530
That might be quite nice.

178
00:13:36,950 --> 00:13:38,890
Let's have a quick look.

179
00:13:39,020 --> 00:13:46,290
Just had a little bit of flab barely noticeable but I think I'll keep that in.

180
00:13:46,290 --> 00:13:46,820
All right.

181
00:13:46,830 --> 00:13:51,550
So let's now add that to the rest of our counters.

182
00:13:54,690 --> 00:14:00,200
So first off we want to get rid of all the drawable reds.

183
00:14:00,450 --> 00:14:07,590
What we can do then is use find to replace to do that all in one go.

184
00:14:10,530 --> 00:14:21,610
So I want to replace what I've selected there and I'll replace it with the setting the own click method

185
00:14:21,610 --> 00:14:23,620
to drop in because that's another change I want to make.

186
00:14:23,620 --> 00:14:29,420
So I'm not holding them both in one step.

187
00:14:29,420 --> 00:14:29,960
There we go.

188
00:14:30,020 --> 00:14:36,370
So they've all got the on click method applied and they've all had their images removed.

189
00:14:37,790 --> 00:14:38,930
So let's have a quick look.

190
00:14:39,200 --> 00:14:45,200
We should not find that we can tap on all of those images and they will drop in from above.

191
00:14:45,200 --> 00:14:46,980
Here we go.

192
00:14:47,960 --> 00:14:53,220
William that is looking great.

193
00:14:53,590 --> 00:14:54,160
OK.

194
00:14:54,280 --> 00:14:56,650
A reasonable amount more to do next of course.

195
00:14:56,650 --> 00:15:01,510
We don't want them to be yellow every time we want them to alternate in color so that the players can

196
00:15:01,510 --> 00:15:03,210
take turns.

197
00:15:03,250 --> 00:15:07,280
So let's make that happen.

198
00:15:07,330 --> 00:15:19,260
I'm going to create a simple integer called active player which is going to be 0 for yellow and 1 for

199
00:15:19,320 --> 00:15:20,400
red.

200
00:15:20,400 --> 00:15:22,110
Now you could use a boolean here.

201
00:15:22,110 --> 00:15:23,080
True or false.

202
00:15:23,280 --> 00:15:27,600
And that would work fine but the integer has the advantage that if you want to extend the game at some

203
00:15:27,600 --> 00:15:31,590
point to more than two players then that's relatively easy to do.

204
00:15:31,860 --> 00:15:40,000
So I'm going to enable that extensibility by using integers but I'm just going to put a quick note here.

205
00:15:43,060 --> 00:15:48,670
To make clear that 0 is yellow and one is red because there's no way that someone reading my code would

206
00:15:48,670 --> 00:15:50,750
know that without trying it out.

207
00:15:51,340 --> 00:15:52,530
All right.

208
00:15:52,540 --> 00:15:59,540
And then when we drop the counter in we just need to check to see what the active player is.

209
00:16:00,190 --> 00:16:09,130
So if the active player is 0 then we want to bring in a yellow counter.

210
00:16:09,690 --> 00:16:14,780
And also we want to set the active player to 1.

211
00:16:15,170 --> 00:16:16,500
So the red will go next

212
00:16:19,600 --> 00:16:21,920
Otherwise the opposite is true.

213
00:16:24,130 --> 00:16:33,010
And we want to set the county image to read and set the active player back to zero.

214
00:16:33,750 --> 00:16:35,140
All right let's have a look.

215
00:16:35,160 --> 00:16:36,120
We should now get

216
00:16:39,190 --> 00:16:46,900
yellow and red counters alternating yellow or red yellow red yellow red.

217
00:16:46,900 --> 00:16:48,840
Excellent.

218
00:16:48,850 --> 00:16:49,460
OK.

219
00:16:49,660 --> 00:16:55,360
So actually the game is now playable as it is but it's not very satisfying when you get three in a row

220
00:16:55,990 --> 00:16:58,880
for the game not to point out that you've won.

221
00:16:59,140 --> 00:17:00,120
So this is the tricky bit.

222
00:17:00,130 --> 00:17:08,140
Really we need a way of keeping track of which color each image slot is and detect whether someone has

223
00:17:08,140 --> 00:17:10,780
got three in a row or not.

224
00:17:10,780 --> 00:17:16,930
So first of them we need a way of keeping track of what color each count is.

225
00:17:17,560 --> 00:17:22,930
And to do that we'll need to have a way of referring to each of these ISIS.

226
00:17:24,220 --> 00:17:28,370
And as always there are several ways to do that but one I'd like to introduce you to.

227
00:17:28,720 --> 00:17:29,920
And I think it's a good solution.

228
00:17:29,930 --> 00:17:37,020
Here is the tag we can add a tag to any view.

229
00:17:37,140 --> 00:17:43,200
It's in the attributes and it can be anything you like.

230
00:17:43,450 --> 00:17:50,790
But in this case we're just going to have a simple numbering system so it will start at zero.

231
00:17:50,830 --> 00:17:57,850
And then one two three four five six seven eight you could start a 1 but I think I prefer starting at

232
00:17:57,850 --> 00:17:58,400
zero.

233
00:18:00,440 --> 00:18:01,510
In this case.

234
00:18:01,910 --> 00:18:04,710
So you can see here we've just got the tag set.

235
00:18:04,710 --> 00:18:05,140
Then

236
00:18:08,130 --> 00:18:09,820
so it's a little bit laborious.

237
00:18:09,820 --> 00:18:12,780
Let's just go through and set the tag for each one.

238
00:18:19,360 --> 00:18:26,980
As I say there are other ways of establishing which image has been tapped but the tag is very flexible

239
00:18:27,580 --> 00:18:28,590
and useful.

240
00:18:28,590 --> 00:18:30,080
So with seeing how it works

241
00:18:35,690 --> 00:18:36,580
you need that.

242
00:18:36,660 --> 00:18:43,290
And number seven last of all right.

243
00:18:43,510 --> 00:18:44,750
Excellent.

244
00:18:45,150 --> 00:18:55,730
So how do we get the tag then we can do it simply by looking at counter and then get tagged simple.

245
00:18:56,030 --> 00:18:57,530
So just to make sure that's working.

246
00:18:57,680 --> 00:19:00,140
Let's do a quick log.

247
00:19:07,070 --> 00:19:10,630
We grab the tag and then we'll just convert it to a string

248
00:19:13,660 --> 00:19:14,700
so that we can log it.

249
00:19:19,270 --> 00:19:22,510
So now we should see the tag in the logs

250
00:19:25,480 --> 00:19:30,630
and there it is that 0 8 7 et cetera.

251
00:19:32,390 --> 00:19:33,090
Excellent.

252
00:19:33,130 --> 00:19:38,860
So now we've got the tags we need a way of keeping track of what you might call the game state that

253
00:19:38,860 --> 00:19:41,050
is which of these are empty.

254
00:19:41,080 --> 00:19:44,780
Which of them are yellow and which are red.

255
00:19:44,870 --> 00:19:51,670
So I'm going to use an array for this and it's going to be an array of integers.

256
00:19:53,930 --> 00:19:55,680
I'm going to call it game state.

257
00:19:56,420 --> 00:20:00,520
And initially all of the spaces are of course empty.

258
00:20:01,070 --> 00:20:08,540
So if 0 represents yellow and 1 represents red Let's use a two to represent empty.

259
00:20:08,540 --> 00:20:21,490
So initially our game state is just going to be nine twos that's 2 3 4 5 6 7 8 9.

260
00:20:21,490 --> 00:20:21,860
There we go.

261
00:20:21,860 --> 00:20:31,410
So let's have that to how Codex.

262
00:20:31,630 --> 00:20:38,500
And then when the play drops in a new counter we just need to update the game state appropriately that

263
00:20:38,500 --> 00:20:44,850
we can keep track of each spects.

264
00:20:44,890 --> 00:20:55,880
So let's first create an integer value for our tapped counter we're going to get this from the tag.

265
00:20:56,770 --> 00:21:01,180
So I again will use counter to get tag dot to string.

266
00:21:01,570 --> 00:21:03,970
But this time we need it to be an integer.

267
00:21:04,840 --> 00:21:10,930
So we'll use integer to pass it that we go.

268
00:21:11,020 --> 00:21:14,630
And then we just update that with the value of active player.

269
00:21:14,950 --> 00:21:16,870
If it's 0 it'll become zero.

270
00:21:16,960 --> 00:21:23,280
That is yellow and one it will become one that is red.

271
00:21:23,390 --> 00:21:29,770
So we'll set game state tapped counter to be equal to

272
00:21:33,130 --> 00:21:34,790
active player.

273
00:21:34,790 --> 00:21:35,270
Brilliant.

274
00:21:35,410 --> 00:21:42,550
So now we've got an array to track our game state really our final significant step is to establish

275
00:21:42,610 --> 00:21:50,530
whether a player has three in a way say along the top down the side and there aren't too many possibilities.

276
00:21:50,980 --> 00:21:58,740
It's only the top or middle or bottom right or left column middle column right column or the two diagonals.

277
00:21:58,780 --> 00:22:02,960
Those are the only ways that you can win by getting three of those.

278
00:22:02,970 --> 00:22:10,710
So the way I'm going to encode this is to create an array of winning positions.

279
00:22:11,410 --> 00:22:15,240
So this is going to be an array of arrays.

280
00:22:16,300 --> 00:22:18,550
I'll call it winning positions.

281
00:22:19,980 --> 00:22:23,620
Hopefully you'll see how it works fairly quickly.

282
00:22:25,430 --> 00:22:29,760
So the top winning position is 0 1 and 2.

283
00:22:29,840 --> 00:22:34,160
Those were the numbers or the tags that we gave to those positions.

284
00:22:34,190 --> 00:22:44,750
So the first winning position is going to be 0 1 and 2.

285
00:22:44,880 --> 00:22:51,210
The second position is going to be the middle way.

286
00:22:51,230 --> 00:22:58,400
So is that 0 1 2 3 4 5 3 4 and 5

287
00:23:01,830 --> 00:23:02,750
is our next winning position.

288
00:23:02,760 --> 00:23:05,310
And then the bottom right is going to be 6 7 and 8

289
00:23:09,680 --> 00:23:14,300
if you are following along you might want to pause the video and see if you can work out what the rest

290
00:23:14,300 --> 00:23:15,880
of the winning positions are.

291
00:23:17,200 --> 00:23:18,350
But I'll just carry on.

292
00:23:18,400 --> 00:23:20,420
So we'll do the vertical ones now.

293
00:23:20,560 --> 00:23:31,470
So this is 0 1 2 3 4 5 6 6 0 3 6 is a winning position.

294
00:23:33,650 --> 00:23:46,110
As is 0 1 2 3 4 5 6 7 1 4 7 fact you might notice that that's the same as the previous one we just added

295
00:23:46,110 --> 00:23:48,400
1 to each of them to move them to the right.

296
00:23:48,510 --> 00:23:53,880
So we know the last one must be the 5 and 8.

297
00:23:54,090 --> 00:23:59,480
So those are the vertical winning positions of the last two are just the diagonals.

298
00:23:59,730 --> 00:24:04,470
So that 0 1 2 3 4 5 6 7 8

299
00:24:07,360 --> 00:24:24,760
0 4 and 8 and finally this diagonal is 0 1 2 3 4 5 6 6 2 4 6.

300
00:24:24,770 --> 00:24:25,930
All right.

301
00:24:26,150 --> 00:24:31,670
And then when we brought in the counter we now want to check against winning positions.

302
00:24:33,720 --> 00:24:35,270
So its going to be really really complicated.

303
00:24:35,280 --> 00:24:36,460
But stay with me.

304
00:24:36,590 --> 00:24:42,210
We are going to need to loop through all of the winning positions and check to see if they've all got

305
00:24:42,210 --> 00:24:43,730
the same value.

306
00:24:44,070 --> 00:24:50,910
And in the game state that is and that they're not equal to 2 because if they're all empty that doesn't

307
00:24:50,910 --> 00:24:51,950
mean that anyone's won.

308
00:24:52,140 --> 00:24:58,470
So we're looking for where each of the winning positions is either a 1 or 0 3 and that they're all the

309
00:24:58,470 --> 00:24:59,750
same.

310
00:24:59,890 --> 00:25:06,270
You might want to take a moment to convince yourself of that when you have carry them.

311
00:25:06,510 --> 00:25:08,300
So we'll do a loop.

312
00:25:08,490 --> 00:25:20,290
So we're looping three winning positions and each of the values of winning position is an array of integers

313
00:25:22,690 --> 00:25:27,410
which I'll call winning position.

314
00:25:27,790 --> 00:25:32,640
And the thing we want to leap three is winning positions.

315
00:25:32,760 --> 00:25:41,900
If you remember that from Section 3 and then for each winning position we want to check to see if game

316
00:25:41,910 --> 00:25:43,980
States.

317
00:25:44,090 --> 00:25:47,400
And then we want a winning position.

318
00:25:50,770 --> 00:25:51,890
Zero there.

319
00:25:52,280 --> 00:25:58,910
So that's the first value in winning position and we want to see if the value of that of the game state

320
00:25:58,970 --> 00:26:09,390
of that position is equal to the value of the next part of the winning position say we want to see if

321
00:26:09,390 --> 00:26:11,470
that's equal to the game state.

322
00:26:12,800 --> 00:26:26,630
Of winning position one and we want game States winning position one

323
00:26:30,410 --> 00:26:39,190
to be equal to a game States winning position to.

324
00:26:39,680 --> 00:26:44,750
So if the first one is equal to the second one and the second one is equal to the third one then the

325
00:26:44,750 --> 00:26:46,790
first one must be equal to the third one.

326
00:26:46,880 --> 00:26:51,590
So we don't need to check that separately but we do need to make sure that none of them are equal to

327
00:26:51,590 --> 00:26:58,630
2 because we want all of them to be either zeros or ones I either yellows or rates.

328
00:26:58,730 --> 00:27:00,650
So let's just check.

329
00:27:00,650 --> 00:27:03,730
Could be any one of them that's for a winning position.

330
00:27:05,580 --> 00:27:06,740
Zero.

331
00:27:07,730 --> 00:27:10,020
And make sure is not two.

332
00:27:10,060 --> 00:27:14,200
We don't need to check the other ones because we know that if these two conditions are true than that

333
00:27:14,200 --> 00:27:14,980
all the same.

334
00:27:14,980 --> 00:27:21,000
So if one of them is not to and the other ones won't be to either.

335
00:27:21,010 --> 00:27:22,740
So if these conditions are all met

336
00:27:25,760 --> 00:27:28,150
then the main thing is someone has won.

337
00:27:31,890 --> 00:27:35,670
So let's do a quick test.

338
00:27:36,690 --> 00:27:38,520
For now we'll literally just say

339
00:27:41,790 --> 00:27:49,950
someone has won because I've written quite a lot of them before we correct this to make it a useful

340
00:27:49,950 --> 00:27:50,660
message.

341
00:27:50,700 --> 00:27:54,300
Just make sure that it is working at all.

342
00:27:54,330 --> 00:27:57,230
I haven't made a mistake somewhere in that.

343
00:27:57,310 --> 00:28:00,640
So let's let yellow's win down the side.

344
00:28:00,640 --> 00:28:02,030
Someone has won.

345
00:28:02,050 --> 00:28:03,780
Fantastic.

346
00:28:03,790 --> 00:28:04,200
Great.

347
00:28:04,240 --> 00:28:06,590
So it seems to be detecting that nicely.

348
00:28:10,750 --> 00:28:21,190
So let's do a quick check to work out who it is that's one so we can get that from the active player.

349
00:28:23,460 --> 00:28:28,440
Although we do have to be quite careful here because notice we've already changed the active player

350
00:28:28,740 --> 00:28:31,130
ready for the next guy.

351
00:28:31,350 --> 00:28:35,290
So it's actually the opposite way round than how you'd expect.

352
00:28:35,300 --> 00:28:42,910
So the active player is one then the winner is yellow.

353
00:28:42,990 --> 00:28:50,180
So let's create a string called Winner a which is initially empty.

354
00:28:52,620 --> 00:28:58,800
And here will set when it equals yellow.

355
00:28:59,210 --> 00:29:02,870
Otherwise when it is red

356
00:29:05,880 --> 00:29:07,560
have them we can just update this

357
00:29:11,030 --> 00:29:12,720
to say when.

358
00:29:13,940 --> 00:29:18,050
And then they've won.

359
00:29:18,080 --> 00:29:21,690
All right let's just check that.

360
00:29:22,010 --> 00:29:27,120
Make sure that is detecting the when it correctly and we'll do it a new one this time as well.

361
00:29:27,130 --> 00:29:28,110
Agnelli excellent.

362
00:29:28,130 --> 00:29:33,850
So yellow has one fantastic So we've created quite a complex set up there.

363
00:29:34,070 --> 00:29:39,090
But it's a neat way of detecting the game state and working out who has one.

364
00:29:39,620 --> 00:29:43,340
Now really could stop there but it's a little inelegant.

365
00:29:43,340 --> 00:29:46,670
There are a few issues going on here and I'll show you a couple of them.

366
00:29:46,670 --> 00:29:57,150
One is if we tap on space that already has a counter in it will be replaced by another counter which

367
00:29:57,150 --> 00:29:59,730
is not in the rules you're not allowed to do that.

368
00:29:59,850 --> 00:30:05,640
And another is we really shouldn't be allowed to continue to play after somebody has won the game.

369
00:30:08,640 --> 00:30:11,350
So let's stop both of those things from happening.

370
00:30:13,350 --> 00:30:14,260
We'll do them in order.

371
00:30:14,260 --> 00:30:22,090
So first off before we do any of this we need to check to make sure that the counter this pin tapped

372
00:30:22,090 --> 00:30:25,700
on doesn't already have a counter in it.

373
00:30:26,680 --> 00:30:28,340
So let's get rid of that lock first of all

374
00:30:33,770 --> 00:30:49,090
and let's add a check to see if game state of the tapped counter or space is equal to two.

375
00:30:49,230 --> 00:30:53,210
And if that's the case then the space is empty.

376
00:30:53,310 --> 00:31:02,200
So we can do all of this but if not then we essentially want to make that counter inactive.

377
00:31:02,270 --> 00:31:06,220
We don't want it to do anything.

378
00:31:06,320 --> 00:31:14,180
So we should now be able to play the game as usual but if we tap on a counter that is already that nothing

379
00:31:14,180 --> 00:31:15,060
will happen.

380
00:31:15,440 --> 00:31:16,910
So let's have a look.

381
00:31:16,910 --> 00:31:21,620
If I tap on your light every time nothing new happens but I can still had

382
00:31:24,790 --> 00:31:25,580
new counters.

383
00:31:25,610 --> 00:31:29,950
No just check yep we can correctly detect a Radwin as well.

384
00:31:29,950 --> 00:31:30,500
Great.

385
00:31:30,580 --> 00:31:32,320
Now to Stop It.

386
00:31:32,320 --> 00:31:37,600
Once somebody has one so we'll have

387
00:31:40,370 --> 00:31:41,080
a boolean

388
00:31:44,400 --> 00:31:47,820
I'll call it game active which is initially true

389
00:31:50,950 --> 00:31:56,320
and when someone has one will say game active

390
00:31:59,180 --> 00:32:03,000
to be false and will add a check up here.

391
00:32:05,110 --> 00:32:12,320
Not only does the game state for the top count I have to be two but the game has to be active as well.

392
00:32:17,260 --> 00:32:19,230
All right let's have a look.

393
00:32:19,240 --> 00:32:23,130
The game should now finish and ceased to be interactive.

394
00:32:23,330 --> 00:32:23,710
When

395
00:32:26,450 --> 00:32:27,140
somebody wins

396
00:32:30,880 --> 00:32:35,760
Hargeisa a yellow has won and you say I can't interact with it at all.

397
00:32:37,390 --> 00:32:38,170
Fantastic.

398
00:32:38,350 --> 00:32:39,550
So we're nearly there.

399
00:32:39,550 --> 00:32:43,870
Just one more thing with the quality of this game people are going to want to play it again and again.

400
00:32:43,930 --> 00:32:48,510
So they don't want to have to close the app down and open it again to start a new game.

401
00:32:48,550 --> 00:32:53,160
So let's add the feature to give people the option.

402
00:32:55,360 --> 00:32:57,550
To start a new game.

403
00:32:57,550 --> 00:33:00,340
And I'm just going to put the option at the top here.

404
00:33:01,480 --> 00:33:06,060
So well have just a small text.

405
00:33:06,200 --> 00:33:06,650
The

406
00:33:13,560 --> 00:33:14,100
which

407
00:33:19,520 --> 00:33:28,440
will align to the top of the app and to and actually I think this is where oh give the winner rather

408
00:33:28,440 --> 00:33:30,690
than a toast so that they can see it

409
00:33:34,760 --> 00:33:35,770
permanently.

410
00:33:36,230 --> 00:33:41,120
So we call it when a text fee and I actually mean it's

411
00:33:43,800 --> 00:33:49,560
right up to the top that making it a little bit bigger say 20.

412
00:33:50,020 --> 00:33:55,440
And then bring in about 20.

413
00:33:55,520 --> 00:34:03,190
Not a lot of very but should just about be able to squeeze them in.

414
00:34:03,270 --> 00:34:04,780
There we go.

415
00:34:05,770 --> 00:34:06,630
And the button

416
00:34:10,210 --> 00:34:14,770
will be sent to and aligned to the text view.

417
00:34:15,120 --> 00:34:19,750
Here we go and I'll call this play again button

418
00:34:25,280 --> 00:34:26,560
OK.

419
00:34:27,180 --> 00:34:31,330
Say just while that's running and we can check that it all looks OK.

420
00:34:32,840 --> 00:34:39,620
I'll add an on click method to the button which will be play again.

421
00:34:39,640 --> 00:34:41,290
That's how I look.

422
00:34:41,690 --> 00:34:43,570
Yep that looks good.

423
00:34:43,630 --> 00:34:47,410
Of course we don't want it to display initially.

424
00:34:47,470 --> 00:34:49,770
So let's set the visibility

425
00:34:55,660 --> 00:34:57,400
of each of those two

426
00:35:00,910 --> 00:35:01,420
invisible

427
00:35:04,530 --> 00:35:10,040
Exham and then we want to bring them in when the winner is detected.

428
00:35:15,640 --> 00:35:22,280
So let's find them using their IDs so we've first hour play again button

429
00:35:29,100 --> 00:35:35,420
we find VBI I.D. I.D. don't play again button.

430
00:35:36,290 --> 00:35:40,210
And similarly the next few

431
00:35:43,280 --> 00:35:45,210
is when I text you.

432
00:35:45,950 --> 00:35:48,070
This is going to be a text for you.

433
00:35:49,850 --> 00:35:59,970
Find if you buy ID card or ID dot when a text fee.

434
00:36:00,040 --> 00:36:09,710
First off we want to set the text of your text so we'll take the winner takes view and set the text

435
00:36:10,300 --> 00:36:20,180
and we want to set it to the text that we put in the text before let's get rid of our taste.

436
00:36:20,180 --> 00:36:21,640
We don't need any more.

437
00:36:22,410 --> 00:36:26,370
And then we want to set the visibility of both to visible.

438
00:36:26,810 --> 00:36:34,820
So play again button and we haven't done this before but you might be able to guess set visibility

439
00:36:38,770 --> 00:36:43,770
to visible and it gives you the view class which is necessary for that.

440
00:36:44,230 --> 00:36:47,390
In the predictor.

441
00:36:47,940 --> 00:36:51,530
And similarly for when a text view

442
00:36:59,910 --> 00:37:03,380
view dot visible.

443
00:37:03,430 --> 00:37:04,270
All right.

444
00:37:04,480 --> 00:37:05,560
So let's give that a try.

445
00:37:05,560 --> 00:37:11,600
We should now find that when we win instead of the toast we'll see this play again button and the when

446
00:37:11,600 --> 00:37:13,770
a text view will tell us who has won.

447
00:37:17,200 --> 00:37:22,100
OK it's OK for Tiger to win.

448
00:37:22,100 --> 00:37:22,580
Excellent.

449
00:37:22,580 --> 00:37:23,060
There we go.

450
00:37:23,090 --> 00:37:29,910
So yellow has one and then button the button really should say play a game

451
00:37:35,940 --> 00:37:36,650
great.

452
00:37:36,960 --> 00:37:38,610
So all that's left is to

453
00:37:41,520 --> 00:37:50,730
write our play again method to set everything up so that the game can be played over and over again.

454
00:37:51,030 --> 00:37:55,980
So as usual public void won't return anything.

455
00:37:55,980 --> 00:38:01,070
Play a game called by a view which will be the button.

456
00:38:02,250 --> 00:38:04,430
So let's think what things do we need to do.

457
00:38:04,770 --> 00:38:07,450
First of all we need to make these invisible again

458
00:38:10,470 --> 00:38:16,200
so all do a little bit of copying and pasting that just to save you watching me typing all that again.

459
00:38:16,200 --> 00:38:21,260
So we find them by their IDs at this time.

460
00:38:21,380 --> 00:38:28,640
We're going to set the visibility to invisible so that will make the messages message and the button

461
00:38:28,640 --> 00:38:29,370
does appear.

462
00:38:29,660 --> 00:38:37,220
We also want to set all of these image views back to empty again.

463
00:38:37,220 --> 00:38:39,000
Now that's something we haven't done before.

464
00:38:39,230 --> 00:38:41,990
So let's see if we can find a solution on Google.

465
00:38:41,990 --> 00:38:48,920
We essentially want to loop through all of the image views which are all the items inside the grid view

466
00:38:49,380 --> 00:38:53,450
and remove the image source.

467
00:38:53,540 --> 00:39:00,250
So let's see if we can find something that I would search for something like Android loop.

468
00:39:00,400 --> 00:39:01,240
There we go.

469
00:39:01,340 --> 00:39:04,300
Think about Android loop through all objects in.

470
00:39:04,300 --> 00:39:14,420
Lay out something like that hope that first one that even includes the great option for us.

471
00:39:14,430 --> 00:39:15,390
Sounds very promising.

472
00:39:15,390 --> 00:39:16,770
Let's have a look.

473
00:39:18,090 --> 00:39:25,860
So it's a leap through the children essentially in the great Wii yet.

474
00:39:25,960 --> 00:39:27,580
It's perfect for what we want.

475
00:39:32,610 --> 00:39:33,720
Copy that over.

476
00:39:33,750 --> 00:39:39,890
We will of course need to get a variable to link to the great layout.

477
00:39:39,990 --> 00:39:45,910
We've already given it an idea of great lay out so we can use find view by ID

478
00:39:59,470 --> 00:40:15,860
in the usual way resources said Id talk create layout then we can just replace it with grid layout and

479
00:40:15,860 --> 00:40:17,270
similarly that

480
00:40:23,990 --> 00:40:25,220
fantastic.

481
00:40:25,330 --> 00:40:30,080
Just say that in this code they're referring to text views.

482
00:40:30,080 --> 00:40:32,450
We want to work with Image views.

483
00:40:34,900 --> 00:40:37,540
And just said that we're reasonably clear on what they are.

484
00:40:37,600 --> 00:40:38,520
I'll call them Countess

485
00:40:43,980 --> 00:40:48,300
and we want to cast that as an image.

486
00:40:48,600 --> 00:40:55,740
It is this is a different method to the one up here so I can use the variable counter again and it won't

487
00:40:55,740 --> 00:41:02,540
conflict because the scope of the variable is just inside the method it doesn't exist outside that method.

488
00:41:05,850 --> 00:41:10,050
Right now we need to take our image view and remove the source from it which is another thing we haven't

489
00:41:10,050 --> 00:41:11,120
done.

490
00:41:11,250 --> 00:41:12,860
So let's take a look.

491
00:41:12,930 --> 00:41:27,820
Android job that remove image view source remove the image from an image that looks pretty perfect.

492
00:41:28,800 --> 00:41:34,340
Look at MTV and then set image drawable to null makes a lot of sense.

493
00:41:34,340 --> 00:41:35,520
Let's give it a go.

494
00:41:35,960 --> 00:41:49,230
So counter set image drawable to know great is that everything you buy should look good.

495
00:41:49,230 --> 00:41:57,850
Now because we've reset all of these and we've removed that part our game state variables won't be correct.

496
00:41:59,410 --> 00:42:05,830
So we'll just need to change most of these back to their defaults.

497
00:42:09,550 --> 00:42:13,350
Dairymen we won't need to change his winning positions because that's fixed.

498
00:42:13,530 --> 00:42:19,020
That doesn't change anyway so we want to change the game state back to a bunch of twos an empty board.

499
00:42:19,020 --> 00:42:23,530
The active player is yellow again and game active is once again true.

500
00:42:25,520 --> 00:42:26,180
All right.

501
00:42:26,180 --> 00:42:32,190
Fingers crossed we did change a lot of things that had quite a lot of code so it could be a mistake.

502
00:42:32,810 --> 00:42:36,900
But let's give it a shot and hope that everything works as desired.

503
00:42:39,520 --> 00:42:39,870
OK.

504
00:42:39,890 --> 00:42:42,870
So first of all let's get a read.

505
00:42:42,890 --> 00:42:50,480
When Try out this diagonal excellence I read one play again which looks pretty promising

506
00:42:53,600 --> 00:42:55,870
but nothing happens.

507
00:42:55,880 --> 00:43:03,590
That's because see what I've done here I've actually created these variables once again inside the method.

508
00:43:03,590 --> 00:43:05,130
I don't want to create them.

509
00:43:05,270 --> 00:43:09,400
I want to update them.

510
00:43:09,600 --> 00:43:15,510
I thought that was worth leaving in that particular area because it's an easy one to make.

511
00:43:15,720 --> 00:43:22,680
And it brings to light another issue that we can't simply update all of the values of an array in this

512
00:43:22,680 --> 00:43:23,400
way.

513
00:43:23,790 --> 00:43:27,910
We'll have to do that using a loop.

514
00:43:28,090 --> 00:43:29,680
You see we've got an error here.

515
00:43:29,730 --> 00:43:33,370
We're not allowed to update an array in the same way that we define it.

516
00:43:36,590 --> 00:43:38,030
Say that's just leap 3

517
00:43:42,370 --> 00:43:44,750
all of the items in game state.

518
00:43:48,460 --> 00:43:51,540
So we going to get up to game state

519
00:43:54,120 --> 00:43:54,600
length

520
00:43:58,850 --> 00:44:03,370
incrementing each time and we just want to set game state

521
00:44:07,370 --> 00:44:12,530
to 2.

522
00:44:12,530 --> 00:44:13,030
All right.

523
00:44:19,370 --> 00:44:20,500
So let's try again.

524
00:44:20,600 --> 00:44:23,750
With any luck that will now work as we need it to.

525
00:44:24,300 --> 00:44:27,620
Hey guys so again Mulder Radwin

526
00:44:30,630 --> 00:44:35,160
Oh God help it your life has won doesn't matter.

527
00:44:35,160 --> 00:44:37,530
Let's play again.

528
00:44:37,740 --> 00:44:39,310
And now it's looking good.

529
00:44:40,670 --> 00:44:41,360
That's good.

530
00:44:41,350 --> 00:44:44,820
Read when they should have had before.

531
00:44:44,850 --> 00:44:46,340
Red has one.

532
00:44:46,740 --> 00:44:48,320
Wonderful.

533
00:44:48,480 --> 00:44:48,990
Great stuff.

534
00:44:48,990 --> 00:44:55,320
So that was quite a complex game but hopefully you managed to figure most of that out yourself and at

535
00:44:55,320 --> 00:44:59,970
least managed to follow along and see what we did particularly with the winning positions to work out

536
00:44:59,970 --> 00:45:02,960
the game state and whether anyone has won.

537
00:45:03,480 --> 00:45:04,100
Wonderful.

538
00:45:04,320 --> 00:45:05,550
So I hope you enjoy that.

539
00:45:05,550 --> 00:45:09,300
Now let's move on to the other two main topics of this section.

540
00:45:09,510 --> 00:45:11,250
Audio and video.
